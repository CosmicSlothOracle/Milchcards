{"ast":null,"code":"import _objectSpread from\"C:/Users/skank/Videos/Cards/Milchcards/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useCallback}from'react';import{createDefaultEffectFlags}from'../types/game';import{Pols,Specials,PRESET_DECKS}from'../data/gameData';import{sumRow,shuffle,makePolInstance,makeSpecInstance,buildDeckFromEntries,drawCards,drawCardsAtRoundEnd,tryApplyNegativeEffect,adjustInfluence,findCardLocation,sumGovernmentInfluenceWithAuras,EffectQueueManager,ActiveAbilitiesManager}from'../utils/gameUtils';import{getCardDetails}from'../data/cardDetails';import{useGameActions}from'./useGameActions';import{useGameAI}from'./useGameAI';import{useGameEffects}from'./useGameEffects';import{applyStartOfTurnHooks}from'../utils/startOfTurnHooks';import{emptyBoard}from'../state/board';const initialGameState={round:1,current:1,passed:{1:false,2:false},actionPoints:{1:2,2:2},actionsUsed:{1:0,2:0},decks:{1:[],2:[]},hands:{1:[],2:[]},traps:{1:[],2:[]},board:emptyBoard(),permanentSlots:{1:{government:null,public:null},2:{government:null,public:null}},discard:[],log:[],activeRefresh:{1:0,2:0},roundsWon:{1:0,2:0},gameWinner:null,effectFlags:{1:createDefaultEffectFlags(),2:createDefaultEffectFlags()},effectQueue:EffectQueueManager.initializeQueue(),activeAbilities:{1:[],2:[]},pendingAbilitySelect:undefined,aiEnabled:{1:false,2:false}};export function useGameState(){const[gameState,setGameState]=useState(initialGameState);const[selectedHandIndex,setSelectedHandIndex]=useState(null);const log=useCallback(msg=>{const timestamp=new Date().toLocaleTimeString('de-DE',{hour:'2-digit',minute:'2-digit',second:'2-digit'});const logEntry=\"[\".concat(timestamp,\"] \").concat(msg);console.log(logEntry);// Also log to console for debugging\nsetGameState(prev=>_objectSpread(_objectSpread({},prev),{},{log:[...prev.log,logEntry]}));},[]);// Enhanced logging functions for different types of events\nconst logUIInteraction=useCallback((action,details)=>{log(\"\\uD83C\\uDFAF UI: \".concat(action,\" - \").concat(details));},[log]);const logGameStateChange=useCallback((change,details)=>{log(\"\\uD83D\\uDD04 STATE: \".concat(change,\" - \").concat(details));},[log]);const logAIAction=useCallback((action,details)=>{log(\"\\uD83E\\uDD16 KI: \".concat(action,\" - \").concat(details));},[log]);const logCardEffect=useCallback((cardName,effect)=>{log(\"\\u2728 EFFEKT: \".concat(cardName,\" - \").concat(effect));},[log]);const logIntervention=useCallback((interventionName,trigger)=>{log(\"\\uD83D\\uDCA5 INTERVENTION: \".concat(interventionName,\" ausgel\\xF6st durch \").concat(trigger));},[log]);// New detailed logging functions for debugging\nconst logFunctionCall=useCallback((functionName,params,context)=>{const paramStr=typeof params==='object'?JSON.stringify(params,null,2):String(params);log(\"\\uD83D\\uDD27 CALL: \".concat(functionName,\"(\").concat(paramStr,\") - \").concat(context));},[log]);const logDataFlow=useCallback((from,to,data,action)=>{const dataStr=typeof data==='object'?JSON.stringify(data,null,2):String(data);log(\"\\uD83D\\uDCCA FLOW: \".concat(from,\" \\u2192 \").concat(to,\" | \").concat(action,\" | Data: \").concat(dataStr));},[log]);const logConditionCheck=useCallback((condition,result,context)=>{log(\"\\uD83D\\uDD0D CHECK: \".concat(condition,\" = \").concat(result,\" - \").concat(context));},[log]);const logError=useCallback((error,context)=>{log(\"\\u274C ERROR: \".concat(error,\" - \").concat(context));},[log]);const logWarning=useCallback((warning,context)=>{log(\"\\u26A0\\uFE0F WARN: \".concat(warning,\" - \").concat(context));},[log]);// Import functionality from separated hooks\nconst gameActions=useGameActions(gameState,setGameState,log);const gameAI=useGameAI(gameState,setGameState,log);const gameEffects=useGameEffects(gameState,setGameState,log);const dealStartingHands=useCallback(()=>{console.log('[DIAG] dealStartingHands called');function buildDeck(){const polPool=[...Pols];const specPool=[...Specials];shuffle(polPool);shuffle(specPool);const deck=[];polPool.slice(0,14).forEach(p=>deck.push(makePolInstance(p)));// prefer more useful/implemented specials\nconst implFirst=['media','pledge','pledge2','sanctions','dnc1','dnc2','dnc3','reshuffle','mission','trap_fakenews','trap_protest','trap_scandal'];const srt=specPool.slice().sort((a,b)=>implFirst.indexOf(a.impl)-implFirst.indexOf(b.impl));srt.slice(0,11).forEach(s=>deck.push(makeSpecInstance(s)));return shuffle(deck).slice(0,25);}const deck1=buildDeck();const deck2=buildDeck();console.log('[DIAG] built decks lengths',deck1.length,deck2.length);setGameState(prev=>_objectSpread(_objectSpread({},prev),{},{decks:{1:deck1,2:deck2},hands:{1:deck1.splice(0,5),2:deck2.splice(0,5)}}));console.log('[DIAG] setGameState after deal: hands[1].length',deck1.length>=5?5:deck1.length);},[]);const startNewGame=useCallback(()=>{setGameState(_objectSpread(_objectSpread({},initialGameState),{},{round:1,current:1,passed:{1:false,2:false},actionPoints:{1:2,2:2},actionsUsed:{1:0,2:0},board:emptyBoard(),traps:{1:[],2:[]},permanentSlots:{1:{government:null,public:null},2:{government:null,public:null}},// instantSlot wird nicht mehr verwendet - Sofort-Initiativen gehen in board[player].sofort\ndiscard:[],log:[],activeRefresh:{1:0,2:0}}));dealStartingHands();},[dealStartingHands]);const startMatchWithDecks=useCallback((p1DeckEntries,p2DeckEntries)=>{console.log('ðŸ”§ DEBUG: startMatchWithDecks called - activating AI for player 2');// Automatically enable AI for player 2 when starting with decks\nconsole.log('ðŸ”§ DEBUG: About to call gameAI.setAiEnabled(true)');gameAI.setAiEnabled(true);console.log('ðŸ”§ DEBUG: About to call gameAI.setAiPreset(AUTORITAERER_REALIST)');gameAI.setAiPreset('AUTORITAERER_REALIST');console.log('ðŸ”§ DEBUG: AI setup completed');console.log('[DIAG] startMatchWithDecks - p1DeckEntries',p1DeckEntries.length,'p2DeckEntries',p2DeckEntries.length);console.log('[DIAG] startMatchWithDecks - sample entries:',p1DeckEntries.slice(0,2),p2DeckEntries.slice(0,2));const p1Cards=buildDeckFromEntries(p1DeckEntries);const p2Cards=buildDeckFromEntries(p2DeckEntries);const d1=[...p1Cards];const d2=[...p2Cards];const h1=d1.splice(0,Math.min(5,d1.length));const h2=d2.splice(0,Math.min(5,d2.length));console.log('[DIAG] startMatchWithDecks - p1Cards',p1Cards.length,'p2Cards',p2Cards.length);console.log('[DIAG] startMatchWithDecks - h1',h1.length,'h2',h2.length);console.log('[DIAG] startMatchWithDecks - sample cards:',p1Cards.slice(0,2),p2Cards.slice(0,2));setGameState(_objectSpread(_objectSpread({},initialGameState),{},{round:1,current:1,passed:{1:false,2:false},decks:{1:d1,2:d2},hands:{1:h1,2:h2},board:emptyBoard(),traps:{1:[],2:[]},permanentSlots:{1:{government:null,public:null},2:{government:null,public:null}},// instantSlot wird nicht mehr verwendet - Sofort-Initiativen gehen in board[player].sofort\ndiscard:[],log:[\"Match gestartet. P1 und P2 erhalten je \".concat(h1.length,\"/\").concat(h2.length,\" Startkarten.\")],activeRefresh:{1:0,2:0}}));console.log('[DIAG] setGameState called in startMatchWithDecks');},[gameAI]);const startMatchVsAI=useCallback(function(p1DeckEntries){let presetKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'AUTORITAERER_REALIST';const p2DeckEntries=PRESET_DECKS[presetKey];gameAI.setAiEnabled(true);gameAI.setAiPreset(presetKey);gameActions.startMatchWithDecks(p1DeckEntries,p2DeckEntries);},[gameAI,gameActions]);// PrÃ¼fe ob der Zug automatisch gewechselt werden soll\nconst shouldAdvanceTurn=useCallback((gameState,player)=>{// Wenn Spieler gepasst hat\nif(gameState.passed[player])return true;// Wenn keine AP mehr verfÃ¼gbar sind\nif(gameState.actionPoints[player]<=0)return true;// Wenn 2 Aktionen verwendet wurden\n// if (gameState.actionsUsed[player] >= 2) return true;\nreturn false;},[]);// Karten-Effekte implementieren\nconst executeCardEffect=useCallback((card,player,state,logFunc)=>{let newState=_objectSpread({},state);logFunctionCall('executeCardEffect',{card:card.name,player,type:card.kind},'Starting card effect execution');if(card.kind==='spec'){const specCard=card;// === SOFORT-INITIATIVEN ===\nif(specCard.name==='Shadow Lobbying'){var _newState$effectFlags;logCardEffect(specCard.name,'Ã–ffentlichkeits-Effekte zÃ¤hlen doppelt diese Runde');const flags=_objectSpread(_objectSpread({},(_newState$effectFlags=newState.effectFlags)===null||_newState$effectFlags===void 0?void 0:_newState$effectFlags[player]),{},{publicEffectDoubled:true});newState.effectFlags=_objectSpread(_objectSpread({},newState.effectFlags),{},{[player]:flags});logDataFlow('effectFlags','newState',{player,publicEffectDoubled:true},'Shadow Lobbying flag set');}else if(specCard.name==='Spin Doctor'){const govCards=newState.board[player].aussen.filter(c=>c.kind==='pol');logDataFlow('board analysis','govCards',{count:govCards.length,cards:govCards.map(c=>c.name)},'Finding government cards');if(govCards.length>0){const targetCard=govCards[0];const oldInfluence=targetCard.influence;adjustInfluence(targetCard,2,'Spin Doctor');const newInfluence=targetCard.influence;logCardEffect(specCard.name,\"\".concat(targetCard.name,\" erh\\xE4lt +2 Einfluss (\").concat(oldInfluence,\" \\u2192 \").concat(newInfluence,\")\"));logDataFlow('influence adjustment','targetCard',{card:targetCard.name,old:oldInfluence,new:newInfluence,change:2},'Spin Doctor effect applied');}else{logWarning('No government cards found','Spin Doctor effect has no target');}}else if(specCard.name==='Digitaler Wahlkampf'){var _newState$effectFlags2;logCardEffect(specCard.name,'Ziehe 2 Karten, nÃ¤chste Initiative -1 AP');const{newHands,newDecks}=drawCards(player,2,newState,logFunc);newState=_objectSpread(_objectSpread({},newState),{},{hands:newHands,decks:newDecks});const flags=_objectSpread(_objectSpread({},(_newState$effectFlags2=newState.effectFlags)===null||_newState$effectFlags2===void 0?void 0:_newState$effectFlags2[player]),{},{platformInitiativeDiscount:1});newState.effectFlags=_objectSpread(_objectSpread({},newState.effectFlags),{},{[player]:flags});logDataFlow('effectFlags','newState',{player,platformInitiativeDiscount:1},'Platform discount flag set');}else if(specCard.name==='Partei-Offensive'){const opponent=player===1?2:1;const oppGovCards=newState.board[opponent].aussen.filter(c=>c.kind==='pol'&&!c.deactivated);logDataFlow('opponent analysis','oppGovCards',{opponent,count:oppGovCards.length,cards:oppGovCards.map(c=>c.name)},'Finding active opponent government cards');if(oppGovCards.length>0){const targetCard=oppGovCards[0];targetCard.deactivated=true;logCardEffect(specCard.name,\"\".concat(targetCard.name,\" wird deaktiviert (bis Rundenende)\"));logDataFlow('card deactivation','targetCard',{card:targetCard.name,deactivated:true},'Partei-Offensive effect applied');}else{logWarning('No active opponent government cards found','Partei-Offensive effect has no target');}}else if(specCard.name==='Oppositionsblockade'){const opponent=player===1?2:1;const oppHand=newState.hands[opponent];logDataFlow('opponent hand','analysis',{opponent,handSize:oppHand.length,cards:oppHand.map(c=>c.name)},'Analyzing opponent hand');if(oppHand.length>0){const discardedCard=oppHand[Math.floor(Math.random()*oppHand.length)];const newOppHand=oppHand.filter(c=>c!==discardedCard);newState.hands=_objectSpread(_objectSpread({},newState.hands),{},{[opponent]:newOppHand});logCardEffect(specCard.name,\"Gegner verliert \".concat(discardedCard.name,\" aus der Hand\"));logDataFlow('card discard','opponent hand',{card:discardedCard.name,newHandSize:newOppHand.length},'Oppositionsblockade effect applied');}else{logWarning('Opponent hand is empty','Oppositionsblockade effect has no target');}}else if(specCard.name==='Opportunist'){const opponent=player===1?2:1;const oppBoard=newState.board[opponent];const totalOppInfluence=sumRow([...oppBoard.innen,...oppBoard.aussen]);logDataFlow('opponent board analysis','influence calculation',{opponent,innen:oppBoard.innen.map(c=>({name:c.name,influence:c.kind==='pol'?c.influence:0})),aussen:oppBoard.aussen.map(c=>({name:c.name,influence:c.kind==='pol'?c.influence:0})),totalInfluence:totalOppInfluence},'Calculating opponent total influence');if(totalOppInfluence>10){const{newHands,newDecks}=drawCards(player,1,newState,logFunc);newState=_objectSpread(_objectSpread({},newState),{},{hands:newHands,decks:newDecks});logCardEffect(specCard.name,\"Gegner hat \".concat(totalOppInfluence,\" Einfluss (>10) - ziehe 1 Karte\"));}else{logCardEffect(specCard.name,\"Gegner hat \".concat(totalOppInfluence,\" Einfluss (\\u226410) - kein Effekt\"));}}else if(specCard.name==='Think-tank'){const{newHands,newDecks}=drawCards(player,1,newState,logFunc);newState=_objectSpread(_objectSpread({},newState),{},{hands:newHands,decks:newDecks});logCardEffect(specCard.name,'Ziehe 1 Karte');}else if(specCard.name==='Influencer-Kampagne'){const publicCards=newState.board[player].innen.filter(c=>c.kind==='pol');logDataFlow('public cards analysis','influence boost',{count:publicCards.length,cards:publicCards.map(c=>c.name)},'Finding public cards for influence boost');publicCards.forEach(card=>{const oldInfluence=card.influence;adjustInfluence(card,1,'Influencer-Kampagne');const newInfluence=card.influence;logCardEffect(specCard.name,\"\".concat(card.name,\" erh\\xE4lt +1 Einfluss (\").concat(oldInfluence,\" \\u2192 \").concat(newInfluence,\")\"));});if(publicCards.length===0){logWarning('No public cards found','Influencer-Kampagne effect has no targets');}}else if(specCard.name==='Systemrelevant'){const opponent=player===1?2:1;const oppGovCards=newState.board[opponent].aussen.filter(c=>c.kind==='pol');logDataFlow('opponent government analysis','systemrelevant effect',{count:oppGovCards.length,cards:oppGovCards.map(c=>c.name)},'Finding opponent government cards');if(oppGovCards.length>0){const targetCard=oppGovCards[0];const oldInfluence=targetCard.influence;adjustInfluence(targetCard,-2,'Systemrelevant');const newInfluence=targetCard.influence;logCardEffect(specCard.name,\"\".concat(targetCard.name,\" verliert 2 Einfluss (\").concat(oldInfluence,\" \\u2192 \").concat(newInfluence,\")\"));logDataFlow('influence reduction','targetCard',{card:targetCard.name,old:oldInfluence,new:newInfluence,change:-2},'Systemrelevant effect applied');}else{logWarning('No opponent government cards found','Systemrelevant effect has no target');}}else if(specCard.name==='Symbolpolitik'){const{newHands,newDecks}=drawCards(player,1,newState,logFunc);newState=_objectSpread(_objectSpread({},newState),{},{hands:newHands,decks:newDecks});newState.actionPoints=_objectSpread(_objectSpread({},newState.actionPoints),{},{[player]:Math.min(2,newState.actionPoints[player]+1)});const oldAP=state.actionPoints[player];const newAP=newState.actionPoints[player];logCardEffect(specCard.name,\"Ziehe 1 Karte, erhalte +1 AP (\".concat(oldAP,\" \\u2192 \").concat(newAP,\")\"));logDataFlow('AP gain','player',{player,old:oldAP,new:newAP,change:1},'Symbolpolitik effect applied');}else if(specCard.name==='Alexei Navalny'){logCardEffect(specCard.name,'Ziehe 1 Karte');const{newHands,newDecks}=drawCards(player,1,newState,logFunc);newState=_objectSpread(_objectSpread({},newState),{},{hands:newHands,decks:newDecks});}else if(specCard.name==='Mukesh Ambani'){logCardEffect(specCard.name,'Ziehe 1 Karte');const{newHands,newDecks}=drawCards(player,1,newState,logFunc);newState=_objectSpread(_objectSpread({},newState),{},{hands:newHands,decks:newDecks});}// Oligarch-Effekte\nelse if(['Elon Musk','Bill Gates','George Soros','Warren Buffett','Mukesh Ambani','Jeff Bezos','Alisher Usmanov','Gautam Adani','Jack Ma','Zhang Yiming','Roman Abramovich'].includes(specCard.name)){logCardEffect(specCard.name,'Ziehe 1 Karte (Oligarch-Effekt)');const{newHands,newDecks}=drawCards(player,1,newState,logFunc);newState=_objectSpread(_objectSpread({},newState),{},{hands:newHands,decks:newDecks});}}// === DAUERHAFTE INITIATIVEN ===\nif(card.kind==='spec'&&card.type==='Dauerhaft-Initiative'){const specCard=card;if(specCard.name==='Algorithmischer Diskurs'){logCardEffect(specCard.name,'Dauerhafte Initiative: Alle Medien-Karten geben +1 Einfluss');// This effect will be applied in applyStartOfTurnHooks\n}else if(specCard.name==='Alternative Fakten'){logCardEffect(specCard.name,'Dauerhafte Initiative: Alle Oligarchen geben +1 Einfluss');// This effect will be applied in applyStartOfTurnHooks\n}}// === POLITIKER-KARTEN ===\nelse if(card.kind==='pol'){const polCard=card;logCardEffect(polCard.name,\"Politiker platziert - Basis-Einfluss: \".concat(polCard.influence));}logDataFlow('executeCardEffect','newState',{card:card.name,effectsApplied:true},'Card effect execution completed');return newState;},[logFunctionCall,logCardEffect,logDataFlow,logWarning]);const nextTurn=useCallback(()=>{logFunctionCall('nextTurn',{},'Starting turn change');setGameState(prev=>{var _prev$aiEnabled$,_prev$aiEnabled,_prev$aiEnabled$2,_prev$aiEnabled2,_prev$aiEnabled$3,_prev$aiEnabled3;logDataFlow('UI','nextTurn',{current:prev.current,passed:prev.passed},'Turn change request');// if both passed -> resolve round\nlogConditionCheck('both players passed',prev.passed[1]&&prev.passed[2],'Round end check');if(prev.passed[1]&&prev.passed[2]){logFunctionCall('resolveRound',{round:prev.round},'Both players passed - resolving round');return resolveRound(prev);}const newCurrent=prev.current===1?2:1;logDataFlow('turn change','newCurrent',{old:prev.current,new:newCurrent},'Player switch');// Reset AP for the new current player\nconst newActionPoints=_objectSpread({},prev.actionPoints);const newActionsUsed=_objectSpread({},prev.actionsUsed);newActionPoints[newCurrent]=2;newActionsUsed[newCurrent]=0;logDataFlow('AP reset','newCurrent',{player:newCurrent,oldAP:prev.actionPoints[newCurrent],newAP:newActionPoints[newCurrent],oldActions:prev.actionsUsed[newCurrent],newActions:newActionsUsed[newCurrent]},'Resource reset for new player');// Apply start-of-turn hooks for the new current player\nconst newState=_objectSpread(_objectSpread({},prev),{},{current:newCurrent,actionPoints:newActionPoints,actionsUsed:newActionsUsed});// Log turn change\nlog(\"Spieler \".concat(newCurrent,\" ist am Zug (2 AP verf\\xFCgbar)\"));logGameStateChange('turn change',\"Player \".concat(newCurrent,\" turn started\"));logFunctionCall('applyStartOfTurnHooks',{player:newCurrent},'Applying start-of-turn effects');applyStartOfTurnHooks(newState,newCurrent,log);// Check if AI should take turn\nlogConditionCheck('AI turn',newCurrent===2&&((_prev$aiEnabled$=(_prev$aiEnabled=prev.aiEnabled)===null||_prev$aiEnabled===void 0?void 0:_prev$aiEnabled[2])!==null&&_prev$aiEnabled$!==void 0?_prev$aiEnabled$:false),'AI turn check');if(newCurrent===2&&((_prev$aiEnabled$2=(_prev$aiEnabled2=prev.aiEnabled)===null||_prev$aiEnabled2===void 0?void 0:_prev$aiEnabled2[2])!==null&&_prev$aiEnabled$2!==void 0?_prev$aiEnabled$2:false)){logFunctionCall('runAITurn',{player:newCurrent},'Triggering AI turn');// Use setTimeout to avoid state update conflicts\nsetTimeout(()=>{logAIAction('AI turn triggered','Starting AI turn execution');gameAI.runAITurn();},100);}logDataFlow('nextTurn','finalState',{current:newState.current,ap:newState.actionPoints[newCurrent],actions:newState.actionsUsed[newCurrent],aiEnabled:(_prev$aiEnabled$3=(_prev$aiEnabled3=prev.aiEnabled)===null||_prev$aiEnabled3===void 0?void 0:_prev$aiEnabled3[2])!==null&&_prev$aiEnabled$3!==void 0?_prev$aiEnabled$3:false},'Turn change completed');return newState;});},[logFunctionCall,logDataFlow,logConditionCheck,logGameStateChange,gameAI,log,logAIAction]);// Automatischer Zugwechsel basierend auf AP\nconst checkAndAdvanceTurn=useCallback(gameState=>{const currentPlayer=gameState.current;if(shouldAdvanceTurn(gameState,currentPlayer)){// Nur wechseln wenn der andere Spieler nicht auch fertig ist\nconst otherPlayer=currentPlayer===1?2:1;if(!shouldAdvanceTurn(gameState,otherPlayer)||gameState.passed[otherPlayer]){nextTurn();}}},[shouldAdvanceTurn,nextTurn]);const scores=useCallback(state=>{// Einheitliche Berechnung Ã¼ber Utils-Helfer\nconst s1=sumGovernmentInfluenceWithAuras(state,1);const s2=sumGovernmentInfluenceWithAuras(state,2);return[s1,s2];},[]);const resolveRound=useCallback(state=>{const[s1,s2]=scores(state);let winner=1;let note='';if(s1>s2)winner=1;else if(s2>s1)winner=2;else{// Gleichstand -> erster Pass gewinnt\nwinner=state.passed[1]&&!state.passed[2]?1:2;note=' (Gleichstand â€“ frÃ¼herer Pass)';}log(\"Runde \".concat(state.round,\" endet: P1 \").concat(s1,\" : P2 \").concat(s2,\". Gewinner: P\").concat(winner).concat(note,\".\"));// Rundensieg zÃ¤hlen\nconst newRoundsWon=_objectSpread({},state.roundsWon);newRoundsWon[winner]+=1;// PrÃ¼fe Best-of-3 Gewinner\nlet gameWinner=null;if(newRoundsWon[1]>=2){gameWinner=1;log(\"\\uD83C\\uDF89 SPIEL ENDE: Spieler 1 gewinnt das Spiel! (\".concat(newRoundsWon[1],\":\").concat(newRoundsWon[2],\")\"));}else if(newRoundsWon[2]>=2){gameWinner=2;log(\"\\uD83C\\uDF89 SPIEL ENDE: Spieler 2 gewinnt das Spiel! (\".concat(newRoundsWon[2],\":\").concat(newRoundsWon[1],\")\"));}// clear board (no carryover)\nconst newBoard=emptyBoard();const newTraps={1:[],2:[]};// Verbesserte Karten-Nachzieh-Mechanik (ziehe bis Hand voll ist)\nconst{newHands,newDecks}=drawCardsAtRoundEnd(state,log);const newRound=state.round+1;const newPassed={1:false,2:false};// alternate starter each round\nconst newCurrent=newRound%2===1?1:2;// Wenn Spiel zu Ende, stoppe\nif(gameWinner){return _objectSpread(_objectSpread({},state),{},{roundsWon:newRoundsWon,gameWinner});}log(\"Runde \".concat(newRound,\" beginnt. P\").concat(newCurrent,\" startet.\"));// ðŸ”¥ CLUSTER 3: Reset temporÃ¤re Initiative-Boni am Rundenende\nconst newEffectFlags={1:_objectSpread(_objectSpread({},state.effectFlags[1]),{},{// Reset Cluster 3 Flags\nscienceInitiativeBonus:false,militaryInitiativePenalty:false,healthInitiativeBonus:false,cultureInitiativeBonus:false,// Reset andere rundenbasierte Flags\nmarkZuckerbergUsed:false,opportunistActive:false,publicEffectDoubled:false,cannotPlayInitiatives:false,nextCardProtected:false,platformAfterInitiativeBonus:false,interventionEffectReduced:false}),2:_objectSpread(_objectSpread({},state.effectFlags[2]),{},{// Reset Cluster 3 Flags\nscienceInitiativeBonus:false,militaryInitiativePenalty:false,healthInitiativeBonus:false,cultureInitiativeBonus:false,// Reset andere rundenbasierte Flags\nmarkZuckerbergUsed:false,opportunistActive:false,publicEffectDoubled:false,cannotPlayInitiatives:false,nextCardProtected:false,platformAfterInitiativeBonus:false,interventionEffectReduced:false})};return _objectSpread(_objectSpread({},state),{},{round:newRound,current:newCurrent,passed:newPassed,board:newBoard,traps:newTraps,hands:newHands,decks:newDecks,roundsWon:newRoundsWon,effectFlags:newEffectFlags});},[log,scores]);// Einfache Interventionsauswertung fÃ¼r einige hÃ¤ufige Trigger\nconst evaluateInterventions=(prev,actingPlayer,event,tentativeBoard)=>{const opponent=actingPlayer===1?2:1;const oppTraps=[...(prev.traps[opponent]||[])];let board=tentativeBoard;let trapsChanged=false;for(let i=0;i<oppTraps.length;i++){const trap=oppTraps[i];if(trap.kind!=='spec')continue;const spec=trap;const details=getCardDetails(spec.name);const key=spec.key;// Trigger: Karte gespielt\nif(event.type==='card_played'&&event.card){const played=event.card;const isMedia=['Oprah Winfrey'].includes(played.name);const isNGO=['Bill Gates','Jennifer Doudna','Noam Chomsky'].includes(played.name);const isPlatform=['Mark Zuckerberg','Tim Cook','Jack Ma','Zhang Yiming'].includes(played.name);const isDiplomat=['Joschka Fischer','Sergey Lavrov','Ursula von der Leyen','Jens Stoltenberg','Hans Dietrich Genscher','Colin Powell','Condoleezza Rice','Christine Lagarde'].includes(played.name);const isTier2Gov=played.T===2&&event.lane==='aussen';const isTier1Gov=played.T===1&&event.lane==='aussen';const isWeakGov=played.influence<=5&&event.lane==='aussen';const isLowPowerGov=played.influence<=4&&event.lane==='aussen';// Cancel Culture / Fake News-Kampagne\nif(((details===null||details===void 0?void 0:details.name)==='Cancel Culture'||key==='Cancel_Culture')&&event.lane==='innen'){tryApplyNegativeEffect(played,()=>{played.deactivated=true;},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Cancel Culture \\u2192 \".concat(played.name,\" deaktiviert.\"));logIntervention('Cancel Culture',\"Ausgel\\xF6st gegen \".concat(played.name,\" in \\xD6ffentlichkeit\"));continue;}if(((details===null||details===void 0?void 0:details.name)==='Fake News-Kampagne'||key==='Fake_News_Kampagne')&&isMedia){tryApplyNegativeEffect(played,()=>{played.deactivated=true;},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Fake News-Kampagne \\u2192 \".concat(played.name,\" deaktiviert.\"));logIntervention('Fake News-Kampagne',\"Ausgel\\xF6st gegen \".concat(played.name,\" (Medien)\"));continue;}// Whistleblower (Tier 2 Regierung)\nif(((details===null||details===void 0?void 0:details.name)==='Whistleblower'||key==='Whistleblower')&&isTier2Gov){tryApplyNegativeEffect(played,()=>{adjustInfluence(played,-2,'Whistleblower');},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Whistleblower \\u2192 \".concat(played.name,\" -2 Einfluss.\"));continue;}// Berater-AffÃ¤re (Tier 1 Regierung)\nif(((details===null||details===void 0?void 0:details.name)==='Berater-AffÃ¤re'||key==='Berater_Affaere')&&isTier1Gov){tryApplyNegativeEffect(played,()=>{adjustInfluence(played,-2,'Berater-AffÃ¤re');},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Berater-Aff\\xE4re \\u2192 \".concat(played.name,\" -2 Einfluss.\"));continue;}// Soft Power-Kollaps / Deepfake-Skandal (Diplomat)\nif(((details===null||details===void 0?void 0:details.name)==='Soft Power-Kollaps'||key==='Soft_Power_Kollaps')&&isDiplomat){tryApplyNegativeEffect(played,()=>{adjustInfluence(played,-3,'Soft Power-Kollaps');},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Soft Power-Kollaps \\u2192 \".concat(played.name,\" -3 Einfluss.\"));continue;}if(((details===null||details===void 0?void 0:details.name)==='Deepfake-Skandal'||key==='Deepfake_Skandal')&&isDiplomat){var _prev$effectFlags;// Kein Einflusstransfer mÃ¶glich - Flag setzen\nconst newFlags=_objectSpread(_objectSpread({},(_prev$effectFlags=prev.effectFlags)===null||_prev$effectFlags===void 0?void 0:_prev$effectFlags[actingPlayer]),{},{influenceTransferBlocked:true});prev.effectFlags=_objectSpread(_objectSpread({},prev.effectFlags),{},{[actingPlayer]:newFlags});oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Deepfake-Skandal \\u2192 \".concat(played.name,\" kann keinen Einfluss transferieren.\"));continue;}// Lobby Leak / Boykott-Kampagne (NGO/Bewegung)\nif(((details===null||details===void 0?void 0:details.name)==='Lobby Leak'||key==='Lobby_Leak')&&isNGO){const hands=_objectSpread({},prev.hands);if(hands[actingPlayer].length>0){hands[actingPlayer]=hands[actingPlayer].slice(1);prev.hands=hands;}oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Lobby Leak \\u2192 P\".concat(actingPlayer,\" wirft 1 Karte ab.\"));continue;}if(((details===null||details===void 0?void 0:details.name)==='Boykott-Kampagne'||key==='Boykott_Kampagne')&&(isNGO||['Greta Thunberg','Malala Yousafzai','Ai Weiwei','Alexei Navalny'].includes(played.name))){tryApplyNegativeEffect(played,()=>{played.deactivated=true;},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Boykott-Kampagne \\u2192 \".concat(played.name,\" deaktiviert.\"));continue;}// Cyber-Attacke (Plattform)\nif(((details===null||details===void 0?void 0:details.name)==='Cyber-Attacke'||key==='Cyber_Attacke')&&isPlatform){const loc=findCardLocation(played,_objectSpread(_objectSpread({},prev),{},{board}));if(loc){const arr=[...board[loc.player][loc.lane]];const idx=arr.findIndex(c=>c.uid===played.uid);if(idx>=0){arr.splice(idx,1);board=_objectSpread(_objectSpread({},board),{},{[loc.player]:_objectSpread(_objectSpread({},board[loc.player]),{},{[loc.lane]:arr})});}}oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Cyber-Attacke \\u2192 \".concat(played.name,\" zerst\\xF6rt.\"));continue;}// Bestechungsskandal 2.0 (schwache Regierung Mâ‰¤5)\nif(((details===null||details===void 0?void 0:details.name)==='Bestechungsskandal 2.0'||key==='Bestechungsskandal_2_0')&&isWeakGov){// Ãœbernehme Karte bis Rundenende (vereinfacht: temporÃ¤r deaktiviert)\ntryApplyNegativeEffect(played,()=>{played.deactivated=true;},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Bestechungsskandal 2.0 \\u2192 \".concat(played.name,\" \\xFCbernommen.\"));continue;}// Tunnelvision (Mâ‰¤4 Regierung)\nif(((details===null||details===void 0?void 0:details.name)==='Tunnelvision'||key==='Tunnelvision')&&isLowPowerGov){// Karte zÃ¤hlt nicht zur Runde (vereinfacht: -100% Einfluss)\ntryApplyNegativeEffect(played,()=>{played.influence=0;},prev.round);oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Tunnelvision \\u2192 \".concat(played.name,\" z\\xE4hlt nicht zur Runde.\"));continue;}}// Trigger: Board-Zustand\nif(event.type==='board_state_check'){var _event$card,_event$card2;const actingPlayerGovCount=tentativeBoard[actingPlayer].aussen.length;const actingPlayerPubCount=tentativeBoard[actingPlayer].innen.length;// Strategische EnthÃ¼llung (>2 Regierungskarten)\nif(((details===null||details===void 0?void 0:details.name)==='Strategische EnthÃ¼llung'||key==='Strategische_Enthuellung')&&actingPlayerGovCount>2){// Eine Regierungskarte zurÃ¼ck auf Hand (vereinfacht: entferne erste)\nconst govCards=[...tentativeBoard[actingPlayer].aussen];if(govCards.length>0){govCards.pop();// Entferne letzte\nboard=_objectSpread(_objectSpread({},board),{},{[actingPlayer]:_objectSpread(_objectSpread({},board[actingPlayer]),{},{aussen:govCards})});}oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Strategische Enth\\xFCllung \\u2192 Regierungskarte zur\\xFCck.\");continue;}// Grassroots-Widerstand (>2 Ã–ffentlichkeitskarten)\nif(((details===null||details===void 0?void 0:details.name)==='Grassroots-Widerstand'||key==='Grassroots_Widerstand')&&actingPlayerPubCount>2){const pubCards=tentativeBoard[actingPlayer].innen.filter(c=>c.kind==='pol');if(pubCards.length>0){tryApplyNegativeEffect(pubCards[0],()=>{pubCards[0].deactivated=true;},prev.round);}oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Grassroots-Widerstand \\u2192 \\xD6ffentlichkeitskarte deaktiviert.\");continue;}// Parlament geschlossen (â‰¥2 Regierungskarten)\nif(((details===null||details===void 0?void 0:details.name)==='Parlament geschlossen'||key==='Parlament_geschlossen')&&actingPlayerGovCount>=2){var _prev$effectFlags2;// Blockiere weitere Regierungskarten (Flag fÃ¼r diesen Zug)\nconst newFlags=_objectSpread(_objectSpread({},(_prev$effectFlags2=prev.effectFlags)===null||_prev$effectFlags2===void 0?void 0:_prev$effectFlags2[actingPlayer]),{},{cannotPlayMoreGovernment:true});prev.effectFlags=_objectSpread(_objectSpread({},prev.effectFlags),{},{[actingPlayer]:newFlags});oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Parlament geschlossen \\u2192 keine weiteren Regierungskarten.\");continue;}// Interne FraktionskÃ¤mpfe (groÃŸe Initiative 3-4 HP)\nif(((details===null||details===void 0?void 0:details.name)==='Interne FraktionskÃ¤mpfe'||key==='Interne_Fraktionskaempfe')&&event.type==='card_played'&&((_event$card=event.card)===null||_event$card===void 0?void 0:_event$card.kind)==='spec'){const specCard=event.card;const isLargeInitiative=specCard.type==='Sofort-Initiative'&&specCard.bp>=3;if(isLargeInitiative){// Initiative annullieren (vereinfacht: Karte zurÃ¼ck auf Hand)\nconst hands=_objectSpread({},prev.hands);hands[actingPlayer].push(event.card);prev.hands=hands;oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Interne Fraktionsk\\xE4mpfe \\u2192 \".concat(event.card.name,\" wird annulliert.\"));continue;}}// Massenproteste (2 Regierungskarten in der Runde)\nif(((details===null||details===void 0?void 0:details.name)==='Massenproteste'||key==='Massenproteste')&&event.type==='card_played'&&event.lane==='aussen'){// Vereinfacht: Beide Regierungskarten -1 Einfluss\nconst govCards=board[actingPlayer].aussen.filter(c=>c.kind==='pol');if(govCards.length>=2){adjustInfluence(govCards[0],-1,'Massenproteste');adjustInfluence(govCards[1],-1,'Massenproteste');oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Massenproteste \\u2192 \".concat(govCards[0].name,\" und \").concat(govCards[1].name,\" -1 Einfluss.\"));continue;}}// \"UnabhÃ¤ngige\" Untersuchung (gegen Intervention)\nif(((details===null||details===void 0?void 0:details.name)==='\"UnabhÃ¤ngige\" Untersuchung'||key==='Unabhaengige_Untersuchung')&&event.type==='card_played'&&((_event$card2=event.card)===null||_event$card2===void 0?void 0:_event$card2.kind)==='spec'){const specCard=event.card;if(specCard.type==='Intervention'){// Intervention annullieren (vereinfacht: Karte zurÃ¼ck auf Hand)\nconst hands=_objectSpread({},prev.hands);hands[actingPlayer].push(event.card);prev.hands=hands;oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: \\\"Unabh\\xE4ngige\\\" Untersuchung \\u2192 \".concat(event.card.name,\" wird annulliert.\"));continue;}}// Maulwurf (kopiere schwÃ¤chere Regierungskarte des Gegners)\nif(((details===null||details===void 0?void 0:details.name)==='Maulwurf'||key==='Maulwurf')&&event.type==='card_played'&&event.lane==='aussen'){const oppGovCards=board[opponent].aussen.filter(c=>c.kind==='pol');if(oppGovCards.length>0){// Finde schwÃ¤chste Regierungskarte\nconst weakestCard=oppGovCards.reduce((weakest,current)=>current.influence<weakest.influence?current:weakest);// Kopie erstellen (vereinfacht: gleiche Karte auf eigene Hand)\nconst hands=_objectSpread({},prev.hands);const copyCard=_objectSpread(_objectSpread({},weakestCard),{},{uid:Date.now()+Math.random()});hands[opponent].push(copyCard);prev.hands=hands;oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Maulwurf \\u2192 Kopie von \".concat(weakestCard.name,\" auf Hand.\"));continue;}}// Skandalspirale (Initiative + Ã–ffentlichkeitskarte)\nif(((details===null||details===void 0?void 0:details.name)==='Skandalspirale'||key==='Skandalspirale')&&event.type==='card_played'){// Vereinfacht: PrÃ¼fe ob Initiative und Ã–ffentlichkeitskarte in dieser Runde gespielt wurden\nconst recentCards=board[actingPlayer].innen.concat(board[actingPlayer].aussen);const hasInitiative=recentCards.some(c=>c.kind==='spec'&&c.type==='Sofort-Initiative');const hasPublic=recentCards.some(c=>c.kind==='spec'&&c.type==='Ã–ffentlichkeitskarte');if(hasInitiative&&hasPublic){// Eine der beiden Karten annullieren (vereinfacht: letzte Ã–ffentlichkeitskarte)\nconst pubCards=board[actingPlayer].innen.filter(c=>c.kind==='spec'&&c.type==='Ã–ffentlichkeitskarte');if(pubCards.length>0){const lastPubCard=pubCards[pubCards.length-1];const arr=[...board[actingPlayer].innen];const idx=arr.findIndex(c=>c.uid===lastPubCard.uid);if(idx>=0){arr.splice(idx,1);board=_objectSpread(_objectSpread({},board),{},{[actingPlayer]:_objectSpread(_objectSpread({},board[actingPlayer]),{},{innen:arr})});}}oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Skandalspirale \\u2192 \\xD6ffentlichkeitskarte annulliert.\");continue;}}// Satire-Show (bei mehr Einfluss als Gegner)\nif((details===null||details===void 0?void 0:details.name)==='Satire-Show'||key==='Satire_Show'){const playerInfluence=sumRow([...board[opponent].aussen]);const opponentInfluence=sumRow([...board[actingPlayer].aussen]);if(opponentInfluence>playerInfluence){const oppGovCards=board[opponent].aussen.filter(c=>c.kind==='pol');if(oppGovCards.length>0){// Erste Regierungskarte -2 Einfluss\nadjustInfluence(oppGovCards[0],-2,'Satire-Show');oppTraps.splice(i,1);i--;trapsChanged=true;log(\"Intervention ausgel\\xF6st: Satire-Show \\u2192 \".concat(oppGovCards[0].name,\" -2 Einfluss.\"));continue;}}}}}if(trapsChanged){const newTraps=_objectSpread(_objectSpread({},prev.traps),{},{[opponent]:oppTraps});return[board,newTraps];}return[null,null];};// Zentrale Effekt-Queue Verarbeitung\nconst processEffectQueue=useCallback(state=>{if(!state.effectQueue||state.effectQueue.items.length===0){return state;}const[newQueue,newState]=EffectQueueManager.processQueue(state.effectQueue,state,log);return _objectSpread(_objectSpread({},newState),{},{effectQueue:newQueue});},[log]);// Berechne Einfluss mit dauerhaften Auren-Effekten\nconst sumRowWithAuras=(state,player)=>{const govCards=state.board[player].aussen.filter(c=>c.kind==='pol');const opponent=player===1?2:1;let total=0;// ðŸ” DEBUG: Log welche Regierungskarten gefunden wurden\nconsole.log(\"\\uD83D\\uDD0D sumRowWithAuras P\".concat(player,\": Gefunden \").concat(govCards.length,\" Regierungskarten:\"),govCards.map(c=>\"\".concat(c.name,\"[\").concat(c.influence,\"I]\")).join(', '));govCards.forEach(card=>{let influence=card.influence;// Dauerhafte Auren anwenden\nconst govSlot=state.permanentSlots[player].government;const pubSlot=state.permanentSlots[player].public;// Koalitionszwang: Tier 2 Regierungskarten +1 Einfluss\nif((govSlot===null||govSlot===void 0?void 0:govSlot.kind)==='spec'&&govSlot.name==='Koalitionszwang'){if(card.T===2)influence+=1;}// Napoleon Komplex: Tier 1 Regierungskarten +1 Einfluss\nif((govSlot===null||govSlot===void 0?void 0:govSlot.kind)==='spec'&&govSlot.name==='Napoleon Komplex'){if(card.T===1)influence+=1;}// Zivilgesellschaft: Bewegung-Karten +1 Einfluss\nif((pubSlot===null||pubSlot===void 0?void 0:pubSlot.kind)==='spec'&&pubSlot.name==='Zivilgesellschaft'){const bewegungNames=['Greta Thunberg','Malala Yousafzai','Ai Weiwei','Alexei Navalny'];const hasBewegung=state.board[player].innen.some(c=>c.kind==='spec'&&c.type==='Ã–ffentlichkeitskarte'&&bewegungNames.includes(c.name));if(hasBewegung)influence+=1;}// ðŸ”¥ JOSCHKA FISCHER NGO-BOOST: +1 Einfluss wenn NGO auf dem Board liegt\nif(card.name==='Joschka Fischer'&&card.effect==='ngo_boost'){const hasNgoCard=state.board[player].innen.some(c=>c.kind==='spec'&&c.type==='Ã–ffentlichkeitskarte'&&c.tag==='NGO');if(hasNgoCard){influence+=1;// Log nur beim ersten Mal, um Spam zu vermeiden\nif(!card._ngoBoostLogged){console.log(\"\\uD83D\\uDD25 JOSCHKA FISCHER KONTINUIERLICHER NGO-BOOST: +1 Einfluss\");card._ngoBoostLogged=true;}}else{card._ngoBoostLogged=false;}}// Milchglas Transparenz: +1 Einfluss wenn keine NGO/Bewegung liegt\nif((govSlot===null||govSlot===void 0?void 0:govSlot.kind)==='spec'&&govSlot.name==='Milchglas Transparenz'){const ngoMovementNames=['Jennifer Doudna','Noam Chomsky','Bill Gates','Greta Thunberg','Malala Yousafzai','Ai Weiwei','Alexei Navalny'];const hasNgoMovement=state.board[player].innen.some(c=>c.kind==='spec'&&c.type==='Ã–ffentlichkeitskarte'&&ngoMovementNames.includes(c.name));if(!hasNgoMovement)influence+=1;}// Alternative Fakten: Gegner-Interventionen -1 Wirkung\nconst oppPubSlot=state.permanentSlots[opponent].public;if((oppPubSlot===null||oppPubSlot===void 0?void 0:oppPubSlot.kind)==='spec'&&oppPubSlot.name==='Alternative Fakten'){// Reduziere Effekt von Interventionen (vereinfacht: -1 Einfluss weniger)\n// Wird in der Intervention-Auswertung berÃ¼cksichtigt\n}total+=influence;});// ðŸ” DEBUG: Final influence calculation\nconsole.log(\"\\uD83C\\uDFAF sumRowWithAuras P\".concat(player,\": Gesamt-Einfluss = \").concat(total));return total;};// playCard is now handled by useGameActions hook\n// runAITurn is now handled by useGameAI hook - removed duplicate implementation\nconst applyStartOfTurnHooksLegacy=useCallback((player,state)=>{logFunctionCall('applyStartOfTurnHooksLegacy',{player,round:state.round},'Starting legacy turn hooks');const pool=[...state.board[player].innen,...state.board[player].aussen];pool.forEach(c=>{if(c.kind==='pol'){const polCard=c;if(polCard._pledgeDown&&polCard._pledgeDown.round===state.round){const oldInfluence=polCard.influence;adjustInfluence(polCard,polCard._pledgeDown.amount,'Wahlversprechen');const newInfluence=polCard.influence;log(\"Wahlversprechen Abzug auf \".concat(polCard.name,\": \").concat(oldInfluence,\" \\u2192 \").concat(newInfluence));polCard._pledgeDown=null;}// reset once-per-round flags\npolCard._hypedRoundFlag=false;}});// Apply permanent initiative effects\nconst govSlot=state.permanentSlots[player].government;const pubSlot=state.permanentSlots[player].public;if(govSlot&&govSlot.kind==='spec'){const govInitiative=govSlot;logFunctionCall('applyPermanentInitiative',{slot:'government',initiative:govInitiative.name},'Processing government permanent initiative');if(govInitiative.name==='Alternative Fakten'){// Alle Oligarchen geben +1 Einfluss\nconst oligarchCards=pool.filter(c=>c.kind==='pol'&&['Elon Musk','Bill Gates','George Soros','Warren Buffett','Mukesh Ambani','Jeff Bezos','Alisher Usmanov','Gautam Adani','Jack Ma','Zhang Yiming','Roman Abramovich'].includes(c.name));logDataFlow('board analysis','oligarch cards',{count:oligarchCards.length,cards:oligarchCards.map(c=>({name:c.name,influence:c.kind==='pol'?c.influence:0}))},'Finding oligarch cards for Alternative Fakten effect');let totalInfluenceGained=0;oligarchCards.forEach(card=>{const oldInfluence=card.influence;adjustInfluence(card,1,'Alternative Fakten');const newInfluence=card.influence;totalInfluenceGained+=1;logCardEffect('Alternative Fakten',\"\".concat(card.name,\" erh\\xE4lt +1 Einfluss (\").concat(oldInfluence,\" \\u2192 \").concat(newInfluence,\")\"));});if(oligarchCards.length>0){logCardEffect('Alternative Fakten',\"\".concat(oligarchCards.length,\" Oligarchen gefunden - \").concat(totalInfluenceGained,\" Punkte zum Gesamteinfluss hinzugef\\xFCgt\"));}else{logWarning('No oligarch cards found','Alternative Fakten effect has no targets');}}}if(pubSlot&&pubSlot.kind==='spec'){const pubInitiative=pubSlot;logFunctionCall('applyPermanentInitiative',{slot:'public',initiative:pubInitiative.name},'Processing public permanent initiative');if(pubInitiative.name==='Algorithmischer Diskurs'){// Alle Medien-Karten geben +1 Einfluss\nconst mediaCards=pool.filter(c=>c.kind==='pol'&&['Oprah Winfrey','Mark Zuckerberg','Tim Cook','Sam Altman'].includes(c.name));logDataFlow('board analysis','media cards',{count:mediaCards.length,cards:mediaCards.map(c=>({name:c.name,influence:c.kind==='pol'?c.influence:0}))},'Finding media cards for Algorithmischer Diskurs effect');let totalInfluenceGained=0;mediaCards.forEach(card=>{const oldInfluence=card.influence;adjustInfluence(card,1,'Algorithmischer Diskurs');const newInfluence=card.influence;totalInfluenceGained+=1;logCardEffect('Algorithmischer Diskurs',\"\".concat(card.name,\" erh\\xE4lt +1 Einfluss (\").concat(oldInfluence,\" \\u2192 \").concat(newInfluence,\")\"));});if(mediaCards.length>0){logCardEffect('Algorithmischer Diskurs',\"\".concat(mediaCards.length,\" Medien-Karten gefunden - \").concat(totalInfluenceGained,\" Punkte zum Gesamteinfluss hinzugef\\xFCgt\"));}else{logWarning('No media cards found','Algorithmischer Diskurs effect has no targets');}}}// Legacy flags reset is replaced by the new applyStartOfTurnHooks implementation\nlogFunctionCall('applyStartOfTurnHooksLegacy',{player},'Legacy turn hooks completed');},[logFunctionCall,logDataFlow,logCardEffect,logWarning]);// Helper: Leadership vorhanden?\nconst hasLeadershipCard=(player,state)=>{const gov=state.board[player].aussen;const names=['Justin Trudeau'];return gov.some(c=>c.kind==='pol'&&names.includes(c.name)&&!c.deactivated);};// Helper: Bewegung vorhanden? (Ã–ffentlichkeitsreihe)\nconst hasMovementCard=(player,state)=>{const pub=state.board[player].innen;const names=['Greta Thunberg','Malala Yousafzai','Ai Weiwei','Alexei Navalny'];return pub.some(c=>c.kind==='pol'&&names.includes(c.name)&&!c.deactivated);};// Helper: Plattform vorhanden? (Ã–ffentlichkeitsreihe)\nconst hasPlatformCard=(player,state)=>{const pub=state.board[player].innen;const names=['Mark Zuckerberg','Tim Cook','Jack Ma','Zhang Yiming'];return pub.some(c=>c.kind==='pol'&&names.includes(c.name)&&!c.deactivated);};// Helper: Diplomat vorhanden? (Regierungsreihe)\nconst hasDiplomatCard=(player,state)=>{const gov=state.board[player].aussen;const names=['Joschka Fischer','Sergey Lavrov','Ursula von der Leyen','Jens Stoltenberg','Horst KÃ¶hler','Walter Scheel','Hans Dietrich Genscher','Colin Powell','Condoleezza Rice','Christine Lagarde'];return gov.some(c=>c.kind==='pol'&&names.includes(c.name)&&!c.deactivated);};// Helper: Einfluss-Transfer durch Dauerhaft-Initiativen blockiert? (Koalitionszwang, Napoleon Komplex)\nconst hasInfluenceTransferBlock=(player,state)=>{const govSlot=state.permanentSlots[player].government;if(!govSlot||govSlot.kind!=='spec')return false;const spec=govSlot;return['Koalitionszwang','Napoleon Komplex'].includes(spec.name);};// Helper: Kann Spieler mehrere Interventionen spielen? (Putin-FÃ¤higkeit)\nconst canPlayMultipleInterventions=(player,state)=>{const govCards=state.board[player].aussen.filter(c=>c.kind==='pol');return govCards.some(c=>c.name==='Vladimir Putin'&&!c.deactivated);};const selectHandCard=useCallback(index=>{setSelectedHandIndex(index);},[]);const passTurn=useCallback(player=>{setGameState(prev=>{if(prev.current!==player)return prev;const newState=_objectSpread(_objectSpread({},prev),{},{passed:_objectSpread(_objectSpread({},prev.passed),{},{[player]:true})});log(\"Spieler \".concat(player,\" passt.\"));// If both players have passed, resolve the round\nif(newState.passed[1]&&newState.passed[2]){return resolveRound(newState);}return newState;});},[log,resolveRound]);// Diplomat-Einfluss-Transfer Funktion\nconst transferInfluence=useCallback((player,fromCardUid,toCardUid,amount)=>{setGameState(prev=>{var _prev$effectFlags3;if(prev.current!==player)return prev;const flags=(_prev$effectFlags3=prev.effectFlags)===null||_prev$effectFlags3===void 0?void 0:_prev$effectFlags3[player];if(!flags||flags.diplomatInfluenceTransferUsed||flags.influenceTransferBlocked)return prev;if(!hasDiplomatCard(player,prev))return prev;// Finde beide Karten in der Regierungsreihe\nconst govCards=prev.board[player].aussen;const fromCard=govCards.find(c=>c.uid===fromCardUid&&c.kind==='pol');const toCard=govCards.find(c=>c.uid===toCardUid&&c.kind==='pol');if(!fromCard||!toCard||fromCard.influence<amount)return prev;// Transfer durchfÃ¼hren\nadjustInfluence(fromCard,-amount,'Diplomat-Transfer');adjustInfluence(toCard,amount,'Diplomat-Transfer');// Flag setzen\nconst newFlags=_objectSpread(_objectSpread({},flags),{},{diplomatInfluenceTransferUsed:true});const newEffectFlags=_objectSpread(_objectSpread({},prev.effectFlags),{},{[player]:newFlags});log(\"P\".concat(player,\" transferiert \").concat(amount,\" Einfluss von \").concat(fromCard.name,\" zu \").concat(toCard.name,\" (Diplomat).\"));return _objectSpread(_objectSpread({},prev),{},{effectFlags:newEffectFlags});});},[log]);// Active Abilities Management\nconst getActiveAbilities=useCallback(player=>{return ActiveAbilitiesManager.getAvailableAbilities(player,gameState);},[]);const useActiveAbility=useCallback((abilityId,targetCardUid)=>{setGameState(prev=>{const player=prev.current;const abilities=ActiveAbilitiesManager.getAvailableAbilities(player,prev);const ability=abilities.find(a=>a.id===abilityId);if(!ability||!ActiveAbilitiesManager.canUseAbility(ability,player,prev)){return prev;}// Finde Actor Card\nconst allCards=[...prev.board[player].innen,...prev.board[player].aussen].filter(c=>c.kind==='pol');const actorCard=allCards.find(c=>ability.id.includes(c.uid.toString()));if(!actorCard)return prev;// Finde Target Card wenn nÃ¶tig\nlet targetCard;if(targetCardUid){const allTargets=[...prev.board[1].innen,...prev.board[1].aussen,...prev.board[2].innen,...prev.board[2].aussen].filter(c=>c.kind==='pol');targetCard=allTargets.find(c=>c.uid===targetCardUid);}const select={type:ability.type,actorCard,actorPlayer:player,targetCard};const newState=ActiveAbilitiesManager.executeAbility(ability,select,prev);log(\"\".concat(actorCard.name,\" nutzt \").concat(ability.name).concat(targetCard?\" auf \".concat(targetCard.name):'',\".\"));return newState;});},[gameState,log]);// Reset aktive FÃ¤higkeiten zu Rundenbeginn\nconst resetActiveAbilities=useCallback(state=>{const newState=_objectSpread({},state);// Reset _activeUsed fÃ¼r alle Politikerkarten\n[1,2].forEach(player=>{const allCards=[...newState.board[player].innen,...newState.board[player].aussen].filter(c=>c.kind==='pol');allCards.forEach(card=>{card._activeUsed=false;});});return newState;},[]);// Putin Doppelte Interventionen\nconst executePutinDoubleIntervention=useCallback(interventionCardIds=>{setGameState(prev=>{const player=prev.current;const newState=ActiveAbilitiesManager.executePutinDoubleIntervention(prev,player,interventionCardIds,log);return newState;});},[log]);// Check ob Putin Doppel-Intervention verfÃ¼gbar ist\nconst canUsePutinDoubleIntervention=useCallback(player=>{const board=gameState.board[player];const allCards=[...board.innen,...board.aussen].filter(c=>c.kind==='pol');const putin=allCards.find(c=>c.name==='Vladimir Putin');if(!putin||putin.deactivated||putin._activeUsed)return false;const interventions=gameState.hands[player].filter(c=>c.kind==='spec');return interventions.length>=2;},[gameState]);// Manual turn advancement for testing\nconst manualAdvanceTurn=useCallback(()=>{console.log('ðŸ”§ DEBUG: Manual turn advancement triggered');log('ðŸ”§ DEBUG: Manual turn advancement triggered');nextTurn();},[nextTurn,log]);return{gameState,selectedHandIndex,log,startNewGame,selectHandCard:setSelectedHandIndex,scores,manualAdvanceTurn,// Manual turn advancement for testing\n// Core game state functions\ndealStartingHands,resolveRound,nextTurn:gameActions.nextTurn,endTurn:gameActions.endTurn,checkAndAdvanceTurn,shouldAdvanceTurn,// Helper functions kept for compatibility\nhasLeadershipCard,hasMovementCard,hasPlatformCard,hasDiplomatCard,hasInfluenceTransferBlock,canPlayMultipleInterventions,sumRowWithAuras,applyStartOfTurnHooksLegacy,// Functions that were migrated to separate hooks\npassTurn:gameActions.passTurn,transferInfluence,getActiveAbilities,useActiveAbility,resetActiveAbilities,executePutinDoubleIntervention,canUsePutinDoubleIntervention,// Delegate primary functionality to separated hooks\nstartMatchWithDecks:gameActions.startMatchWithDecks,startMatchVsAI:gameActions.startMatchVsAI,playCard:gameActions.playCard,activateInstantInitiative:gameActions.activateInstantInitiative,// AI functionality\nrunAITurn:gameAI.runAITurn,aiEnabled:gameAI.aiEnabled,setAiEnabled:gameAI.setAiEnabled,aiPreset:gameAI.aiPreset,setAiPreset:gameAI.setAiPreset,// Effects functionality\nexecuteCardEffect,processEffectQueue};}","map":{"version":3,"names":["useState","useCallback","createDefaultEffectFlags","Pols","Specials","PRESET_DECKS","sumRow","shuffle","makePolInstance","makeSpecInstance","buildDeckFromEntries","drawCards","drawCardsAtRoundEnd","tryApplyNegativeEffect","adjustInfluence","findCardLocation","sumGovernmentInfluenceWithAuras","EffectQueueManager","ActiveAbilitiesManager","getCardDetails","useGameActions","useGameAI","useGameEffects","applyStartOfTurnHooks","emptyBoard","initialGameState","round","current","passed","actionPoints","actionsUsed","decks","hands","traps","board","permanentSlots","government","public","discard","log","activeRefresh","roundsWon","gameWinner","effectFlags","effectQueue","initializeQueue","activeAbilities","pendingAbilitySelect","undefined","aiEnabled","useGameState","gameState","setGameState","selectedHandIndex","setSelectedHandIndex","msg","timestamp","Date","toLocaleTimeString","hour","minute","second","logEntry","concat","console","prev","_objectSpread","logUIInteraction","action","details","logGameStateChange","change","logAIAction","logCardEffect","cardName","effect","logIntervention","interventionName","trigger","logFunctionCall","functionName","params","context","paramStr","JSON","stringify","String","logDataFlow","from","to","data","dataStr","logConditionCheck","condition","result","logError","error","logWarning","warning","gameActions","gameAI","gameEffects","dealStartingHands","buildDeck","polPool","specPool","deck","slice","forEach","p","push","implFirst","srt","sort","a","b","indexOf","impl","s","deck1","deck2","length","splice","startNewGame","startMatchWithDecks","p1DeckEntries","p2DeckEntries","setAiEnabled","setAiPreset","p1Cards","p2Cards","d1","d2","h1","Math","min","h2","startMatchVsAI","presetKey","arguments","shouldAdvanceTurn","player","executeCardEffect","card","state","logFunc","newState","name","type","kind","specCard","_newState$effectFlags","flags","publicEffectDoubled","govCards","aussen","filter","c","count","cards","map","targetCard","oldInfluence","influence","newInfluence","old","new","_newState$effectFlags2","newHands","newDecks","platformInitiativeDiscount","opponent","oppGovCards","deactivated","oppHand","handSize","discardedCard","floor","random","newOppHand","newHandSize","oppBoard","totalOppInfluence","innen","totalInfluence","publicCards","oldAP","newAP","includes","polCard","effectsApplied","nextTurn","_prev$aiEnabled$","_prev$aiEnabled","_prev$aiEnabled$2","_prev$aiEnabled2","_prev$aiEnabled$3","_prev$aiEnabled3","resolveRound","newCurrent","newActionPoints","newActionsUsed","oldActions","newActions","setTimeout","runAITurn","ap","actions","checkAndAdvanceTurn","currentPlayer","otherPlayer","scores","s1","s2","winner","note","newRoundsWon","newBoard","newTraps","newRound","newPassed","newEffectFlags","scienceInitiativeBonus","militaryInitiativePenalty","healthInitiativeBonus","cultureInitiativeBonus","markZuckerbergUsed","opportunistActive","cannotPlayInitiatives","nextCardProtected","platformAfterInitiativeBonus","interventionEffectReduced","evaluateInterventions","actingPlayer","event","tentativeBoard","oppTraps","trapsChanged","i","trap","spec","key","played","isMedia","isNGO","isPlatform","isDiplomat","isTier2Gov","T","lane","isTier1Gov","isWeakGov","isLowPowerGov","_prev$effectFlags","newFlags","influenceTransferBlocked","loc","arr","idx","findIndex","uid","_event$card","_event$card2","actingPlayerGovCount","actingPlayerPubCount","pop","pubCards","_prev$effectFlags2","cannotPlayMoreGovernment","isLargeInitiative","bp","weakestCard","reduce","weakest","copyCard","now","recentCards","hasInitiative","some","hasPublic","lastPubCard","playerInfluence","opponentInfluence","processEffectQueue","items","newQueue","processQueue","sumRowWithAuras","total","join","govSlot","pubSlot","bewegungNames","hasBewegung","hasNgoCard","tag","_ngoBoostLogged","ngoMovementNames","hasNgoMovement","oppPubSlot","applyStartOfTurnHooksLegacy","pool","_pledgeDown","amount","_hypedRoundFlag","govInitiative","slot","initiative","oligarchCards","totalInfluenceGained","pubInitiative","mediaCards","hasLeadershipCard","gov","names","hasMovementCard","pub","hasPlatformCard","hasDiplomatCard","hasInfluenceTransferBlock","canPlayMultipleInterventions","selectHandCard","index","passTurn","transferInfluence","fromCardUid","toCardUid","_prev$effectFlags3","diplomatInfluenceTransferUsed","fromCard","find","toCard","getActiveAbilities","getAvailableAbilities","useActiveAbility","abilityId","targetCardUid","abilities","ability","id","canUseAbility","allCards","actorCard","toString","allTargets","select","actorPlayer","executeAbility","resetActiveAbilities","_activeUsed","executePutinDoubleIntervention","interventionCardIds","canUsePutinDoubleIntervention","putin","interventions","manualAdvanceTurn","endTurn","playCard","activateInstantInitiative","aiPreset"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/hooks/useGameState.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport { GameState, Card, PoliticianCard, SpecialCard, Player, BuilderEntry, createDefaultEffectFlags } from '../types/game';\r\nimport { Pols, Specials, PRESET_DECKS } from '../data/gameData';\r\nimport {\r\n  sumRow,\r\n  shuffle,\r\n  makePolInstance,\r\n  makeSpecInstance,\r\n  buildDeckFromEntries,\r\n  drawCards,\r\n  drawCardsAtRoundEnd,\r\n  tryApplyNegativeEffect,\r\n  adjustInfluence,\r\n  findCardLocation,\r\n  sumGovernmentInfluenceWithAuras,\r\n  EffectQueueManager,\r\n  ActiveAbilitiesManager\r\n} from '../utils/gameUtils';\r\nimport { getCardDetails } from '../data/cardDetails';\r\nimport { useGameActions } from './useGameActions';\r\nimport { useGameAI } from './useGameAI';\r\nimport { useGameEffects } from './useGameEffects';\r\nimport { applyStartOfTurnHooks } from '../utils/startOfTurnHooks';\r\nimport { emptyBoard, emptyBoardSide, ensureSofortBoard } from '../state/board';\r\n\r\nconst initialGameState: GameState = {\r\n  round: 1,\r\n  current: 1,\r\n  passed: { 1: false, 2: false },\r\n  actionPoints: { 1: 2, 2: 2 },\r\n  actionsUsed: { 1: 0, 2: 0 },\r\n  decks: { 1: [], 2: [] },\r\n  hands: { 1: [], 2: [] },\r\n  traps: { 1: [], 2: [] },\r\n  board: emptyBoard(),\r\n  permanentSlots: {\r\n    1: { government: null, public: null },\r\n    2: { government: null, public: null },\r\n  },\r\n  discard: [],\r\n  log: [],\r\n  activeRefresh: { 1: 0, 2: 0 },\r\n  roundsWon: { 1: 0, 2: 0 },\r\n  gameWinner: null,\r\n  effectFlags: {\r\n    1: createDefaultEffectFlags(),\r\n    2: createDefaultEffectFlags()\r\n  },\r\n  effectQueue: EffectQueueManager.initializeQueue(),\r\n  activeAbilities: {\r\n    1: [],\r\n    2: []\r\n  },\r\n  pendingAbilitySelect: undefined,\r\n  aiEnabled: { 1: false, 2: false },\r\n};\r\n\r\nexport function useGameState() {\r\n  const [gameState, setGameState] = useState<GameState>(initialGameState);\r\n  const [selectedHandIndex, setSelectedHandIndex] = useState<number | null>(null);\r\n\r\n  const log = useCallback((msg: string) => {\r\n    const timestamp = new Date().toLocaleTimeString('de-DE', {\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    });\r\n    const logEntry = `[${timestamp}] ${msg}`;\r\n\r\n    console.log(logEntry); // Also log to console for debugging\r\n\r\n    setGameState(prev => ({\r\n      ...prev,\r\n      log: [...prev.log, logEntry]\r\n    }));\r\n  }, []);\r\n\r\n  // Enhanced logging functions for different types of events\r\n  const logUIInteraction = useCallback((action: string, details: string) => {\r\n    log(`ðŸŽ¯ UI: ${action} - ${details}`);\r\n  }, [log]);\r\n\r\n  const logGameStateChange = useCallback((change: string, details: string) => {\r\n    log(`ðŸ”„ STATE: ${change} - ${details}`);\r\n  }, [log]);\r\n\r\n  const logAIAction = useCallback((action: string, details: string) => {\r\n    log(`ðŸ¤– KI: ${action} - ${details}`);\r\n  }, [log]);\r\n\r\n  const logCardEffect = useCallback((cardName: string, effect: string) => {\r\n    log(`âœ¨ EFFEKT: ${cardName} - ${effect}`);\r\n  }, [log]);\r\n\r\n  const logIntervention = useCallback((interventionName: string, trigger: string) => {\r\n    log(`ðŸ’¥ INTERVENTION: ${interventionName} ausgelÃ¶st durch ${trigger}`);\r\n  }, [log]);\r\n\r\n  // New detailed logging functions for debugging\r\n  const logFunctionCall = useCallback((functionName: string, params: any, context: string) => {\r\n    const paramStr = typeof params === 'object' ? JSON.stringify(params, null, 2) : String(params);\r\n    log(`ðŸ”§ CALL: ${functionName}(${paramStr}) - ${context}`);\r\n  }, [log]);\r\n\r\n  const logDataFlow = useCallback((from: string, to: string, data: any, action: string) => {\r\n    const dataStr = typeof data === 'object' ? JSON.stringify(data, null, 2) : String(data);\r\n    log(`ðŸ“Š FLOW: ${from} â†’ ${to} | ${action} | Data: ${dataStr}`);\r\n  }, [log]);\r\n\r\n  const logConditionCheck = useCallback((condition: string, result: boolean, context: string) => {\r\n    log(`ðŸ” CHECK: ${condition} = ${result} - ${context}`);\r\n  }, [log]);\r\n\r\n  const logError = useCallback((error: string, context: string) => {\r\n    log(`âŒ ERROR: ${error} - ${context}`);\r\n  }, [log]);\r\n\r\n  const logWarning = useCallback((warning: string, context: string) => {\r\n    log(`âš ï¸ WARN: ${warning} - ${context}`);\r\n  }, [log]);\r\n\r\n  // Import functionality from separated hooks\r\n  const gameActions = useGameActions(gameState, setGameState, log);\r\n  const gameAI = useGameAI(gameState, setGameState, log);\r\n  const gameEffects = useGameEffects(gameState, setGameState, log);\r\n\r\n  const dealStartingHands = useCallback(() => {\r\n    console.log('[DIAG] dealStartingHands called');\r\n    function buildDeck(): Card[] {\r\n      const polPool = [...Pols];\r\n      const specPool = [...Specials];\r\n      shuffle(polPool);\r\n      shuffle(specPool);\r\n      const deck: Card[] = [];\r\n      polPool.slice(0, 14).forEach(p => deck.push(makePolInstance(p)));\r\n\r\n      // prefer more useful/implemented specials\r\n      const implFirst = ['media', 'pledge', 'pledge2', 'sanctions', 'dnc1', 'dnc2', 'dnc3', 'reshuffle', 'mission', 'trap_fakenews', 'trap_protest', 'trap_scandal'];\r\n      const srt = specPool.slice().sort((a, b) => implFirst.indexOf(a.impl) - implFirst.indexOf(b.impl));\r\n      srt.slice(0, 11).forEach(s => deck.push(makeSpecInstance(s)));\r\n      return shuffle(deck).slice(0, 25);\r\n    }\r\n\r\n    const deck1 = buildDeck();\r\n    const deck2 = buildDeck();\r\n\r\n    console.log('[DIAG] built decks lengths', deck1.length, deck2.length);\r\n\r\n    setGameState(prev => ({\r\n      ...prev,\r\n      decks: { 1: deck1, 2: deck2 },\r\n      hands: {\r\n        1: deck1.splice(0, 5),\r\n        2: deck2.splice(0, 5)\r\n      }\r\n    }));\r\n    console.log('[DIAG] setGameState after deal: hands[1].length', (deck1.length >= 5 ? 5 : deck1.length));\r\n  }, []);\r\n\r\n  const startNewGame = useCallback(() => {\r\n    setGameState({\r\n      ...initialGameState,\r\n      round: 1,\r\n      current: 1,\r\n      passed: { 1: false, 2: false },\r\n      actionPoints: { 1: 2, 2: 2 },\r\n      actionsUsed: { 1: 0, 2: 0 },\r\n      board: emptyBoard(),\r\n      traps: { 1: [], 2: [] },\r\n      permanentSlots: {\r\n        1: { government: null, public: null },\r\n        2: { government: null, public: null },\r\n      },\r\n      // instantSlot wird nicht mehr verwendet - Sofort-Initiativen gehen in board[player].sofort\r\n      discard: [],\r\n      log: [],\r\n      activeRefresh: { 1: 0, 2: 0 },\r\n    });\r\n    dealStartingHands();\r\n  }, [dealStartingHands]);\r\n\r\n  const startMatchWithDecks = useCallback((p1DeckEntries: BuilderEntry[], p2DeckEntries: BuilderEntry[]) => {\r\n    console.log('ðŸ”§ DEBUG: startMatchWithDecks called - activating AI for player 2');\r\n    // Automatically enable AI for player 2 when starting with decks\r\n    console.log('ðŸ”§ DEBUG: About to call gameAI.setAiEnabled(true)');\r\n    gameAI.setAiEnabled(true);\r\n    console.log('ðŸ”§ DEBUG: About to call gameAI.setAiPreset(AUTORITAERER_REALIST)');\r\n    gameAI.setAiPreset('AUTORITAERER_REALIST');\r\n    console.log('ðŸ”§ DEBUG: AI setup completed');\r\n\r\n    console.log('[DIAG] startMatchWithDecks - p1DeckEntries', p1DeckEntries.length, 'p2DeckEntries', p2DeckEntries.length);\r\n    console.log('[DIAG] startMatchWithDecks - sample entries:', p1DeckEntries.slice(0, 2), p2DeckEntries.slice(0, 2));\r\n\r\n    const p1Cards = buildDeckFromEntries(p1DeckEntries);\r\n    const p2Cards = buildDeckFromEntries(p2DeckEntries);\r\n\r\n    const d1 = [...p1Cards];\r\n    const d2 = [...p2Cards];\r\n    const h1 = d1.splice(0, Math.min(5, d1.length));\r\n    const h2 = d2.splice(0, Math.min(5, d2.length));\r\n\r\n    console.log('[DIAG] startMatchWithDecks - p1Cards', p1Cards.length, 'p2Cards', p2Cards.length);\r\n    console.log('[DIAG] startMatchWithDecks - h1', h1.length, 'h2', h2.length);\r\n    console.log('[DIAG] startMatchWithDecks - sample cards:', p1Cards.slice(0, 2), p2Cards.slice(0, 2));\r\n\r\n    setGameState({\r\n      ...initialGameState,\r\n      round: 1,\r\n      current: 1,\r\n      passed: { 1: false, 2: false },\r\n      decks: { 1: d1, 2: d2 },\r\n      hands: { 1: h1, 2: h2 },\r\n      board: emptyBoard(),\r\n      traps: { 1: [], 2: [] },\r\n      permanentSlots: {\r\n        1: { government: null, public: null },\r\n        2: { government: null, public: null },\r\n      },\r\n      // instantSlot wird nicht mehr verwendet - Sofort-Initiativen gehen in board[player].sofort\r\n      discard: [],\r\n      log: [`Match gestartet. P1 und P2 erhalten je ${h1.length}/${h2.length} Startkarten.`],\r\n      activeRefresh: { 1: 0, 2: 0 },\r\n    });\r\n    console.log('[DIAG] setGameState called in startMatchWithDecks');\r\n  }, [gameAI]);\r\n\r\n  const startMatchVsAI = useCallback((p1DeckEntries: BuilderEntry[], presetKey: keyof typeof PRESET_DECKS = 'AUTORITAERER_REALIST') => {\r\n    const p2DeckEntries = PRESET_DECKS[presetKey] as BuilderEntry[];\r\n    gameAI.setAiEnabled(true);\r\n    gameAI.setAiPreset(presetKey);\r\n    gameActions.startMatchWithDecks(p1DeckEntries, p2DeckEntries);\r\n  }, [gameAI, gameActions]);\r\n\r\n  // PrÃ¼fe ob der Zug automatisch gewechselt werden soll\r\n  const shouldAdvanceTurn = useCallback((gameState: GameState, player: Player): boolean => {\r\n    // Wenn Spieler gepasst hat\r\n    if (gameState.passed[player]) return true;\r\n\r\n    // Wenn keine AP mehr verfÃ¼gbar sind\r\n    if (gameState.actionPoints[player] <= 0) return true;\r\n\r\n    // Wenn 2 Aktionen verwendet wurden\r\n    // if (gameState.actionsUsed[player] >= 2) return true;\r\n\r\n    return false;\r\n  }, []);\r\n\r\n  // Karten-Effekte implementieren\r\n  const executeCardEffect = useCallback((\r\n    card: Card,\r\n    player: Player,\r\n    state: GameState,\r\n    logFunc: (msg: string) => void\r\n  ): GameState => {\r\n    let newState = { ...state };\r\n\r\n    logFunctionCall('executeCardEffect', { card: card.name, player, type: card.kind }, 'Starting card effect execution');\r\n\r\n    if (card.kind === 'spec') {\r\n      const specCard = card as SpecialCard;\r\n\r\n      // === SOFORT-INITIATIVEN ===\r\n      if (specCard.name === 'Shadow Lobbying') {\r\n        logCardEffect(specCard.name, 'Ã–ffentlichkeits-Effekte zÃ¤hlen doppelt diese Runde');\r\n        const flags = { ...newState.effectFlags?.[player], publicEffectDoubled: true };\r\n        newState.effectFlags = { ...newState.effectFlags, [player]: flags } as GameState['effectFlags'];\r\n        logDataFlow('effectFlags', 'newState', { player, publicEffectDoubled: true }, 'Shadow Lobbying flag set');\r\n      }\r\n      else if (specCard.name === 'Spin Doctor') {\r\n        const govCards = newState.board[player].aussen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n        logDataFlow('board analysis', 'govCards', { count: govCards.length, cards: govCards.map(c => c.name) }, 'Finding government cards');\r\n\r\n        if (govCards.length > 0) {\r\n          const targetCard = govCards[0];\r\n          const oldInfluence = targetCard.influence;\r\n          adjustInfluence(targetCard, 2, 'Spin Doctor');\r\n          const newInfluence = targetCard.influence;\r\n\r\n          logCardEffect(specCard.name, `${targetCard.name} erhÃ¤lt +2 Einfluss (${oldInfluence} â†’ ${newInfluence})`);\r\n          logDataFlow('influence adjustment', 'targetCard', { card: targetCard.name, old: oldInfluence, new: newInfluence, change: 2 }, 'Spin Doctor effect applied');\r\n        } else {\r\n          logWarning('No government cards found', 'Spin Doctor effect has no target');\r\n        }\r\n      }\r\n      else if (specCard.name === 'Digitaler Wahlkampf') {\r\n        logCardEffect(specCard.name, 'Ziehe 2 Karten, nÃ¤chste Initiative -1 AP');\r\n        const { newHands, newDecks } = drawCards(player, 2, newState, logFunc);\r\n        newState = { ...newState, hands: newHands, decks: newDecks };\r\n\r\n        const flags = { ...newState.effectFlags?.[player], platformInitiativeDiscount: 1 };\r\n        newState.effectFlags = { ...newState.effectFlags, [player]: flags } as GameState['effectFlags'];\r\n        logDataFlow('effectFlags', 'newState', { player, platformInitiativeDiscount: 1 }, 'Platform discount flag set');\r\n      }\r\n      else if (specCard.name === 'Partei-Offensive') {\r\n        const opponent: Player = player === 1 ? 2 : 1;\r\n        const oppGovCards = newState.board[opponent].aussen.filter(c => c.kind === 'pol' && !(c as PoliticianCard).deactivated) as PoliticianCard[];\r\n        logDataFlow('opponent analysis', 'oppGovCards', { opponent, count: oppGovCards.length, cards: oppGovCards.map(c => c.name) }, 'Finding active opponent government cards');\r\n\r\n        if (oppGovCards.length > 0) {\r\n          const targetCard = oppGovCards[0];\r\n          targetCard.deactivated = true;\r\n          logCardEffect(specCard.name, `${targetCard.name} wird deaktiviert (bis Rundenende)`);\r\n          logDataFlow('card deactivation', 'targetCard', { card: targetCard.name, deactivated: true }, 'Partei-Offensive effect applied');\r\n        } else {\r\n          logWarning('No active opponent government cards found', 'Partei-Offensive effect has no target');\r\n        }\r\n      }\r\n      else if (specCard.name === 'Oppositionsblockade') {\r\n        const opponent: Player = player === 1 ? 2 : 1;\r\n        const oppHand = newState.hands[opponent];\r\n        logDataFlow('opponent hand', 'analysis', { opponent, handSize: oppHand.length, cards: oppHand.map(c => c.name) }, 'Analyzing opponent hand');\r\n\r\n        if (oppHand.length > 0) {\r\n          const discardedCard = oppHand[Math.floor(Math.random() * oppHand.length)];\r\n          const newOppHand = oppHand.filter(c => c !== discardedCard);\r\n          newState.hands = { ...newState.hands, [opponent]: newOppHand };\r\n\r\n          logCardEffect(specCard.name, `Gegner verliert ${discardedCard.name} aus der Hand`);\r\n          logDataFlow('card discard', 'opponent hand', { card: discardedCard.name, newHandSize: newOppHand.length }, 'Oppositionsblockade effect applied');\r\n        } else {\r\n          logWarning('Opponent hand is empty', 'Oppositionsblockade effect has no target');\r\n        }\r\n      }\r\n      else if (specCard.name === 'Opportunist') {\r\n        const opponent: Player = player === 1 ? 2 : 1;\r\n        const oppBoard = newState.board[opponent];\r\n        const totalOppInfluence = sumRow([...oppBoard.innen, ...oppBoard.aussen]);\r\n\r\n        logDataFlow('opponent board analysis', 'influence calculation', {\r\n          opponent,\r\n          innen: oppBoard.innen.map(c => ({ name: c.name, influence: c.kind === 'pol' ? (c as any).influence : 0 })),\r\n          aussen: oppBoard.aussen.map(c => ({ name: c.name, influence: c.kind === 'pol' ? (c as any).influence : 0 })),\r\n          totalInfluence: totalOppInfluence\r\n        }, 'Calculating opponent total influence');\r\n\r\n        if (totalOppInfluence > 10) {\r\n          const { newHands, newDecks } = drawCards(player, 1, newState, logFunc);\r\n          newState = { ...newState, hands: newHands, decks: newDecks };\r\n          logCardEffect(specCard.name, `Gegner hat ${totalOppInfluence} Einfluss (>10) - ziehe 1 Karte`);\r\n        } else {\r\n          logCardEffect(specCard.name, `Gegner hat ${totalOppInfluence} Einfluss (â‰¤10) - kein Effekt`);\r\n        }\r\n      }\r\n      else if (specCard.name === 'Think-tank') {\r\n        const { newHands, newDecks } = drawCards(player, 1, newState, logFunc);\r\n        newState = { ...newState, hands: newHands, decks: newDecks };\r\n        logCardEffect(specCard.name, 'Ziehe 1 Karte');\r\n      }\r\n      else if (specCard.name === 'Influencer-Kampagne') {\r\n        const publicCards = newState.board[player].innen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n        logDataFlow('public cards analysis', 'influence boost', { count: publicCards.length, cards: publicCards.map(c => c.name) }, 'Finding public cards for influence boost');\r\n\r\n        publicCards.forEach(card => {\r\n          const oldInfluence = card.influence;\r\n          adjustInfluence(card, 1, 'Influencer-Kampagne');\r\n          const newInfluence = card.influence;\r\n          logCardEffect(specCard.name, `${card.name} erhÃ¤lt +1 Einfluss (${oldInfluence} â†’ ${newInfluence})`);\r\n        });\r\n\r\n        if (publicCards.length === 0) {\r\n          logWarning('No public cards found', 'Influencer-Kampagne effect has no targets');\r\n        }\r\n      }\r\n      else if (specCard.name === 'Systemrelevant') {\r\n        const opponent: Player = player === 1 ? 2 : 1;\r\n        const oppGovCards = newState.board[opponent].aussen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n        logDataFlow('opponent government analysis', 'systemrelevant effect', { count: oppGovCards.length, cards: oppGovCards.map(c => c.name) }, 'Finding opponent government cards');\r\n\r\n        if (oppGovCards.length > 0) {\r\n          const targetCard = oppGovCards[0];\r\n          const oldInfluence = targetCard.influence;\r\n          adjustInfluence(targetCard, -2, 'Systemrelevant');\r\n          const newInfluence = targetCard.influence;\r\n\r\n          logCardEffect(specCard.name, `${targetCard.name} verliert 2 Einfluss (${oldInfluence} â†’ ${newInfluence})`);\r\n          logDataFlow('influence reduction', 'targetCard', { card: targetCard.name, old: oldInfluence, new: newInfluence, change: -2 }, 'Systemrelevant effect applied');\r\n        } else {\r\n          logWarning('No opponent government cards found', 'Systemrelevant effect has no target');\r\n        }\r\n      }\r\n      else if (specCard.name === 'Symbolpolitik') {\r\n        const { newHands, newDecks } = drawCards(player, 1, newState, logFunc);\r\n        newState = { ...newState, hands: newHands, decks: newDecks };\r\n\r\n        newState.actionPoints = {\r\n          ...newState.actionPoints,\r\n          [player]: Math.min(2, newState.actionPoints[player] + 1)\r\n        };\r\n\r\n        const oldAP = state.actionPoints[player];\r\n        const newAP = newState.actionPoints[player];\r\n        logCardEffect(specCard.name, `Ziehe 1 Karte, erhalte +1 AP (${oldAP} â†’ ${newAP})`);\r\n        logDataFlow('AP gain', 'player', { player, old: oldAP, new: newAP, change: 1 }, 'Symbolpolitik effect applied');\r\n      }\r\n      else if (specCard.name === 'Alexei Navalny') {\r\n        logCardEffect(specCard.name, 'Ziehe 1 Karte');\r\n        const { newHands, newDecks } = drawCards(player, 1, newState, logFunc);\r\n        newState = { ...newState, hands: newHands, decks: newDecks };\r\n      }\r\n      else if (specCard.name === 'Mukesh Ambani') {\r\n        logCardEffect(specCard.name, 'Ziehe 1 Karte');\r\n        const { newHands, newDecks } = drawCards(player, 1, newState, logFunc);\r\n        newState = { ...newState, hands: newHands, decks: newDecks };\r\n      }\r\n\r\n      // Oligarch-Effekte\r\n      else if (['Elon Musk', 'Bill Gates', 'George Soros', 'Warren Buffett', 'Mukesh Ambani', 'Jeff Bezos', 'Alisher Usmanov', 'Gautam Adani', 'Jack Ma', 'Zhang Yiming', 'Roman Abramovich'].includes(specCard.name)) {\r\n        logCardEffect(specCard.name, 'Ziehe 1 Karte (Oligarch-Effekt)');\r\n        const { newHands, newDecks } = drawCards(player, 1, newState, logFunc);\r\n        newState = { ...newState, hands: newHands, decks: newDecks };\r\n      }\r\n    }\r\n\r\n    // === DAUERHAFTE INITIATIVEN ===\r\n    if (card.kind === 'spec' && (card as SpecialCard).type === 'Dauerhaft-Initiative') {\r\n      const specCard = card as SpecialCard;\r\n\r\n      if (specCard.name === 'Algorithmischer Diskurs') {\r\n        logCardEffect(specCard.name, 'Dauerhafte Initiative: Alle Medien-Karten geben +1 Einfluss');\r\n        // This effect will be applied in applyStartOfTurnHooks\r\n      }\r\n      else if (specCard.name === 'Alternative Fakten') {\r\n        logCardEffect(specCard.name, 'Dauerhafte Initiative: Alle Oligarchen geben +1 Einfluss');\r\n        // This effect will be applied in applyStartOfTurnHooks\r\n      }\r\n    }\r\n\r\n    // === POLITIKER-KARTEN ===\r\n    else if (card.kind === 'pol') {\r\n      const polCard = card as PoliticianCard;\r\n      logCardEffect(polCard.name, `Politiker platziert - Basis-Einfluss: ${polCard.influence}`);\r\n    }\r\n\r\n    logDataFlow('executeCardEffect', 'newState', { card: card.name, effectsApplied: true }, 'Card effect execution completed');\r\n    return newState;\r\n  }, [logFunctionCall, logCardEffect, logDataFlow, logWarning]);\r\n\r\n  const nextTurn = useCallback(() => {\r\n    logFunctionCall('nextTurn', {}, 'Starting turn change');\r\n\r\n    setGameState((prev): GameState => {\r\n      logDataFlow('UI', 'nextTurn', { current: prev.current, passed: prev.passed }, 'Turn change request');\r\n\r\n      // if both passed -> resolve round\r\n      logConditionCheck('both players passed', prev.passed[1] && prev.passed[2], 'Round end check');\r\n      if (prev.passed[1] && prev.passed[2]) {\r\n        logFunctionCall('resolveRound', { round: prev.round }, 'Both players passed - resolving round');\r\n        return resolveRound(prev);\r\n      }\r\n\r\n      const newCurrent: Player = prev.current === 1 ? 2 : 1;\r\n      logDataFlow('turn change', 'newCurrent', { old: prev.current, new: newCurrent }, 'Player switch');\r\n\r\n      // Reset AP for the new current player\r\n      const newActionPoints = { ...prev.actionPoints };\r\n      const newActionsUsed = { ...prev.actionsUsed };\r\n      newActionPoints[newCurrent] = 2;\r\n      newActionsUsed[newCurrent] = 0;\r\n\r\n      logDataFlow('AP reset', 'newCurrent', {\r\n        player: newCurrent,\r\n        oldAP: prev.actionPoints[newCurrent],\r\n        newAP: newActionPoints[newCurrent],\r\n        oldActions: prev.actionsUsed[newCurrent],\r\n        newActions: newActionsUsed[newCurrent]\r\n      }, 'Resource reset for new player');\r\n\r\n      // Apply start-of-turn hooks for the new current player\r\n      const newState: GameState = {\r\n        ...prev,\r\n        current: newCurrent,\r\n        actionPoints: newActionPoints,\r\n        actionsUsed: newActionsUsed\r\n      };\r\n\r\n      // Log turn change\r\n      log(`Spieler ${newCurrent} ist am Zug (2 AP verfÃ¼gbar)`);\r\n      logGameStateChange('turn change', `Player ${newCurrent} turn started`);\r\n\r\n      logFunctionCall('applyStartOfTurnHooks', { player: newCurrent }, 'Applying start-of-turn effects');\r\n      applyStartOfTurnHooks(newState, newCurrent, log);\r\n\r\n      // Check if AI should take turn\r\n      logConditionCheck('AI turn', newCurrent === 2 && (prev.aiEnabled?.[2] ?? false), 'AI turn check');\r\n      if (newCurrent === 2 && (prev.aiEnabled?.[2] ?? false)) {\r\n        logFunctionCall('runAITurn', { player: newCurrent }, 'Triggering AI turn');\r\n        // Use setTimeout to avoid state update conflicts\r\n        setTimeout(() => {\r\n          logAIAction('AI turn triggered', 'Starting AI turn execution');\r\n          gameAI.runAITurn();\r\n        }, 100);\r\n      }\r\n\r\n      logDataFlow('nextTurn', 'finalState', {\r\n        current: newState.current,\r\n        ap: newState.actionPoints[newCurrent],\r\n        actions: newState.actionsUsed[newCurrent],\r\n        aiEnabled: prev.aiEnabled?.[2] ?? false\r\n      }, 'Turn change completed');\r\n\r\n      return newState;\r\n    });\r\n  }, [logFunctionCall, logDataFlow, logConditionCheck, logGameStateChange, gameAI, log, logAIAction]);\r\n\r\n  // Automatischer Zugwechsel basierend auf AP\r\n  const checkAndAdvanceTurn = useCallback((gameState: GameState) => {\r\n    const currentPlayer = gameState.current;\r\n    if (shouldAdvanceTurn(gameState, currentPlayer)) {\r\n      // Nur wechseln wenn der andere Spieler nicht auch fertig ist\r\n      const otherPlayer: Player = currentPlayer === 1 ? 2 : 1;\r\n      if (!shouldAdvanceTurn(gameState, otherPlayer) || gameState.passed[otherPlayer]) {\r\n        nextTurn();\r\n      }\r\n    }\r\n  }, [shouldAdvanceTurn, nextTurn]);\r\n\r\n  const scores = useCallback((state: GameState): [number, number] => {\r\n    // Einheitliche Berechnung Ã¼ber Utils-Helfer\r\n    const s1 = sumGovernmentInfluenceWithAuras(state, 1);\r\n    const s2 = sumGovernmentInfluenceWithAuras(state, 2);\r\n    return [s1, s2];\r\n  }, []);\r\n\r\n  const resolveRound = useCallback((state: GameState): GameState => {\r\n    const [s1, s2] = scores(state);\r\n    let winner: 1 | 2 = 1;\r\n    let note = '';\r\n\r\n    if (s1 > s2) winner = 1;\r\n    else if (s2 > s1) winner = 2;\r\n    else {\r\n      // Gleichstand -> erster Pass gewinnt\r\n      winner = state.passed[1] && !state.passed[2] ? 1 : 2;\r\n      note = ' (Gleichstand â€“ frÃ¼herer Pass)';\r\n    }\r\n\r\n    log(`Runde ${state.round} endet: P1 ${s1} : P2 ${s2}. Gewinner: P${winner}${note}.`);\r\n\r\n    // Rundensieg zÃ¤hlen\r\n    const newRoundsWon = { ...state.roundsWon };\r\n    newRoundsWon[winner] += 1;\r\n\r\n    // PrÃ¼fe Best-of-3 Gewinner\r\n    let gameWinner: 1 | 2 | null = null;\r\n    if (newRoundsWon[1] >= 2) {\r\n      gameWinner = 1;\r\n      log(`ðŸŽ‰ SPIEL ENDE: Spieler 1 gewinnt das Spiel! (${newRoundsWon[1]}:${newRoundsWon[2]})`);\r\n    } else if (newRoundsWon[2] >= 2) {\r\n      gameWinner = 2;\r\n      log(`ðŸŽ‰ SPIEL ENDE: Spieler 2 gewinnt das Spiel! (${newRoundsWon[2]}:${newRoundsWon[1]})`);\r\n    }\r\n\r\n    // clear board (no carryover)\r\n    const newBoard = emptyBoard();\r\n    const newTraps = { 1: [], 2: [] };\r\n\r\n    // Verbesserte Karten-Nachzieh-Mechanik (ziehe bis Hand voll ist)\r\n    const { newHands, newDecks } = drawCardsAtRoundEnd(state, log);\r\n\r\n    const newRound = state.round + 1;\r\n    const newPassed = { 1: false, 2: false };\r\n    // alternate starter each round\r\n    const newCurrent = (newRound % 2 === 1) ? 1 : 2;\r\n\r\n    // Wenn Spiel zu Ende, stoppe\r\n    if (gameWinner) {\r\n      return {\r\n        ...state,\r\n        roundsWon: newRoundsWon,\r\n        gameWinner,\r\n      };\r\n    }\r\n\r\n    log(`Runde ${newRound} beginnt. P${newCurrent} startet.`);\r\n\r\n    // ðŸ”¥ CLUSTER 3: Reset temporÃ¤re Initiative-Boni am Rundenende\r\n    const newEffectFlags = {\r\n      1: {\r\n        ...state.effectFlags[1],\r\n        // Reset Cluster 3 Flags\r\n        scienceInitiativeBonus: false,\r\n        militaryInitiativePenalty: false,\r\n        healthInitiativeBonus: false,\r\n        cultureInitiativeBonus: false,\r\n        // Reset andere rundenbasierte Flags\r\n        markZuckerbergUsed: false,\r\n        opportunistActive: false,\r\n        publicEffectDoubled: false,\r\n        cannotPlayInitiatives: false,\r\n        nextCardProtected: false,\r\n        platformAfterInitiativeBonus: false,\r\n        interventionEffectReduced: false,\r\n      },\r\n      2: {\r\n        ...state.effectFlags[2],\r\n        // Reset Cluster 3 Flags\r\n        scienceInitiativeBonus: false,\r\n        militaryInitiativePenalty: false,\r\n        healthInitiativeBonus: false,\r\n        cultureInitiativeBonus: false,\r\n        // Reset andere rundenbasierte Flags\r\n        markZuckerbergUsed: false,\r\n        opportunistActive: false,\r\n        publicEffectDoubled: false,\r\n        cannotPlayInitiatives: false,\r\n        nextCardProtected: false,\r\n        platformAfterInitiativeBonus: false,\r\n        interventionEffectReduced: false,\r\n      }\r\n    };\r\n\r\n    return {\r\n      ...state,\r\n      round: newRound,\r\n      current: newCurrent,\r\n      passed: newPassed,\r\n      board: newBoard,\r\n      traps: newTraps,\r\n      hands: newHands,\r\n      decks: newDecks,\r\n      roundsWon: newRoundsWon,\r\n      effectFlags: newEffectFlags,\r\n    };\r\n  }, [log, scores]);\r\n\r\n  // Einfache Interventionsauswertung fÃ¼r einige hÃ¤ufige Trigger\r\n  const evaluateInterventions = (\r\n    prev: GameState,\r\n    actingPlayer: Player,\r\n    event: any,\r\n    tentativeBoard: GameState['board']\r\n  ): [GameState['board'] | null, GameState['traps'] | null] => {\r\n    const opponent: Player = actingPlayer === 1 ? 2 : 1;\r\n    const oppTraps = [...(prev.traps[opponent] || [])];\r\n    let board = tentativeBoard;\r\n    let trapsChanged = false;\r\n\r\n    for (let i = 0; i < oppTraps.length; i++) {\r\n      const trap = oppTraps[i];\r\n      if (trap.kind !== 'spec') continue;\r\n      const spec = trap as SpecialCard;\r\n      const details = getCardDetails(spec.name);\r\n      const key = spec.key;\r\n\r\n      // Trigger: Karte gespielt\r\n      if (event.type === 'card_played' && (event.card as PoliticianCard)) {\r\n        const played = event.card as PoliticianCard;\r\n        const isMedia = ['Oprah Winfrey'].includes(played.name);\r\n        const isNGO = ['Bill Gates', 'Jennifer Doudna', 'Noam Chomsky'].includes(played.name);\r\n        const isPlatform = ['Mark Zuckerberg', 'Tim Cook', 'Jack Ma', 'Zhang Yiming'].includes(played.name);\r\n        const isDiplomat = ['Joschka Fischer', 'Sergey Lavrov', 'Ursula von der Leyen', 'Jens Stoltenberg', 'Hans Dietrich Genscher', 'Colin Powell', 'Condoleezza Rice', 'Christine Lagarde'].includes(played.name);\r\n        const isTier2Gov = (played.T === 2 && event.lane === 'aussen');\r\n        const isTier1Gov = (played.T === 1 && event.lane === 'aussen');\r\n        const isWeakGov = (played.influence <= 5 && event.lane === 'aussen');\r\n        const isLowPowerGov = (played.influence <= 4 && event.lane === 'aussen');\r\n\r\n        // Cancel Culture / Fake News-Kampagne\r\n        if ((details?.name === 'Cancel Culture' || key === 'Cancel_Culture') && event.lane === 'innen') {\r\n          tryApplyNegativeEffect(played, () => { played.deactivated = true; }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Cancel Culture â†’ ${played.name} deaktiviert.`);\r\n          logIntervention('Cancel Culture', `AusgelÃ¶st gegen ${played.name} in Ã–ffentlichkeit`);\r\n          continue;\r\n        }\r\n        if ((details?.name === 'Fake News-Kampagne' || key === 'Fake_News_Kampagne') && isMedia) {\r\n          tryApplyNegativeEffect(played, () => { played.deactivated = true; }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Fake News-Kampagne â†’ ${played.name} deaktiviert.`);\r\n          logIntervention('Fake News-Kampagne', `AusgelÃ¶st gegen ${played.name} (Medien)`);\r\n          continue;\r\n        }\r\n\r\n        // Whistleblower (Tier 2 Regierung)\r\n        if ((details?.name === 'Whistleblower' || key === 'Whistleblower') && isTier2Gov) {\r\n          tryApplyNegativeEffect(played, () => { adjustInfluence(played, -2, 'Whistleblower'); }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Whistleblower â†’ ${played.name} -2 Einfluss.`);\r\n          continue;\r\n        }\r\n\r\n        // Berater-AffÃ¤re (Tier 1 Regierung)\r\n        if ((details?.name === 'Berater-AffÃ¤re' || key === 'Berater_Affaere') && isTier1Gov) {\r\n          tryApplyNegativeEffect(played, () => { adjustInfluence(played, -2, 'Berater-AffÃ¤re'); }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Berater-AffÃ¤re â†’ ${played.name} -2 Einfluss.`);\r\n          continue;\r\n        }\r\n\r\n        // Soft Power-Kollaps / Deepfake-Skandal (Diplomat)\r\n        if ((details?.name === 'Soft Power-Kollaps' || key === 'Soft_Power_Kollaps') && isDiplomat) {\r\n          tryApplyNegativeEffect(played, () => { adjustInfluence(played, -3, 'Soft Power-Kollaps'); }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Soft Power-Kollaps â†’ ${played.name} -3 Einfluss.`);\r\n          continue;\r\n        }\r\n        if ((details?.name === 'Deepfake-Skandal' || key === 'Deepfake_Skandal') && isDiplomat) {\r\n          // Kein Einflusstransfer mÃ¶glich - Flag setzen\r\n          const newFlags = { ...prev.effectFlags?.[actingPlayer], influenceTransferBlocked: true };\r\n          prev.effectFlags = { ...prev.effectFlags, [actingPlayer]: newFlags } as GameState['effectFlags'];\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Deepfake-Skandal â†’ ${played.name} kann keinen Einfluss transferieren.`);\r\n          continue;\r\n        }\r\n\r\n        // Lobby Leak / Boykott-Kampagne (NGO/Bewegung)\r\n        if ((details?.name === 'Lobby Leak' || key === 'Lobby_Leak') && isNGO) {\r\n          const hands = { ...prev.hands } as GameState['hands'];\r\n          if (hands[actingPlayer].length > 0) {\r\n            hands[actingPlayer] = hands[actingPlayer].slice(1);\r\n            prev.hands = hands;\r\n          }\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Lobby Leak â†’ P${actingPlayer} wirft 1 Karte ab.`);\r\n          continue;\r\n        }\r\n        if ((details?.name === 'Boykott-Kampagne' || key === 'Boykott_Kampagne') && (isNGO || ['Greta Thunberg', 'Malala Yousafzai', 'Ai Weiwei', 'Alexei Navalny'].includes(played.name))) {\r\n          tryApplyNegativeEffect(played, () => { played.deactivated = true; }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Boykott-Kampagne â†’ ${played.name} deaktiviert.`);\r\n          continue;\r\n        }\r\n\r\n        // Cyber-Attacke (Plattform)\r\n        if ((details?.name === 'Cyber-Attacke' || key === 'Cyber_Attacke') && isPlatform) {\r\n          const loc = findCardLocation(played as any, { ...prev, board } as GameState);\r\n          if (loc) {\r\n            const arr = [...board[loc.player][loc.lane]];\r\n            const idx = arr.findIndex(c => c.uid === played.uid);\r\n            if (idx >= 0) {\r\n              arr.splice(idx, 1);\r\n              board = {\r\n                ...board,\r\n                [loc.player]: {\r\n                  ...board[loc.player],\r\n                  [loc.lane]: arr\r\n                }\r\n              } as GameState['board'];\r\n            }\r\n          }\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Cyber-Attacke â†’ ${played.name} zerstÃ¶rt.`);\r\n          continue;\r\n        }\r\n\r\n        // Bestechungsskandal 2.0 (schwache Regierung Mâ‰¤5)\r\n        if ((details?.name === 'Bestechungsskandal 2.0' || key === 'Bestechungsskandal_2_0') && isWeakGov) {\r\n          // Ãœbernehme Karte bis Rundenende (vereinfacht: temporÃ¤r deaktiviert)\r\n          tryApplyNegativeEffect(played, () => { played.deactivated = true; }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Bestechungsskandal 2.0 â†’ ${played.name} Ã¼bernommen.`);\r\n          continue;\r\n        }\r\n\r\n        // Tunnelvision (Mâ‰¤4 Regierung)\r\n        if ((details?.name === 'Tunnelvision' || key === 'Tunnelvision') && isLowPowerGov) {\r\n          // Karte zÃ¤hlt nicht zur Runde (vereinfacht: -100% Einfluss)\r\n          tryApplyNegativeEffect(played, () => { played.influence = 0; }, prev.round);\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Tunnelvision â†’ ${played.name} zÃ¤hlt nicht zur Runde.`);\r\n          continue;\r\n        }\r\n      }\r\n\r\n      // Trigger: Board-Zustand\r\n      if (event.type === 'board_state_check') {\r\n        const actingPlayerGovCount = tentativeBoard[actingPlayer].aussen.length;\r\n        const actingPlayerPubCount = tentativeBoard[actingPlayer].innen.length;\r\n\r\n        // Strategische EnthÃ¼llung (>2 Regierungskarten)\r\n        if ((details?.name === 'Strategische EnthÃ¼llung' || key === 'Strategische_Enthuellung') && actingPlayerGovCount > 2) {\r\n          // Eine Regierungskarte zurÃ¼ck auf Hand (vereinfacht: entferne erste)\r\n          const govCards = [...tentativeBoard[actingPlayer].aussen];\r\n          if (govCards.length > 0) {\r\n            govCards.pop(); // Entferne letzte\r\n            board = { ...board, [actingPlayer]: { ...board[actingPlayer], aussen: govCards } } as GameState['board'];\r\n          }\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Strategische EnthÃ¼llung â†’ Regierungskarte zurÃ¼ck.`);\r\n          continue;\r\n        }\r\n\r\n        // Grassroots-Widerstand (>2 Ã–ffentlichkeitskarten)\r\n        if ((details?.name === 'Grassroots-Widerstand' || key === 'Grassroots_Widerstand') && actingPlayerPubCount > 2) {\r\n          const pubCards = tentativeBoard[actingPlayer].innen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n          if (pubCards.length > 0) {\r\n            tryApplyNegativeEffect(pubCards[0], () => { pubCards[0].deactivated = true; }, prev.round);\r\n          }\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Grassroots-Widerstand â†’ Ã–ffentlichkeitskarte deaktiviert.`);\r\n          continue;\r\n        }\r\n\r\n        // Parlament geschlossen (â‰¥2 Regierungskarten)\r\n        if ((details?.name === 'Parlament geschlossen' || key === 'Parlament_geschlossen') && actingPlayerGovCount >= 2) {\r\n          // Blockiere weitere Regierungskarten (Flag fÃ¼r diesen Zug)\r\n          const newFlags = { ...prev.effectFlags?.[actingPlayer], cannotPlayMoreGovernment: true };\r\n          prev.effectFlags = { ...prev.effectFlags, [actingPlayer]: newFlags } as GameState['effectFlags'];\r\n          oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n          log(`Intervention ausgelÃ¶st: Parlament geschlossen â†’ keine weiteren Regierungskarten.`);\r\n          continue;\r\n        }\r\n\r\n        // Interne FraktionskÃ¤mpfe (groÃŸe Initiative 3-4 HP)\r\n        if ((details?.name === 'Interne FraktionskÃ¤mpfe' || key === 'Interne_Fraktionskaempfe') && event.type === 'card_played' && event.card?.kind === 'spec') {\r\n          const specCard = event.card as SpecialCard;\r\n          const isLargeInitiative = specCard.type === 'Sofort-Initiative' && (specCard.bp >= 3);\r\n          if (isLargeInitiative) {\r\n            // Initiative annullieren (vereinfacht: Karte zurÃ¼ck auf Hand)\r\n            const hands = { ...prev.hands } as GameState['hands'];\r\n            hands[actingPlayer].push(event.card);\r\n            prev.hands = hands;\r\n            oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n            log(`Intervention ausgelÃ¶st: Interne FraktionskÃ¤mpfe â†’ ${event.card.name} wird annulliert.`);\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // Massenproteste (2 Regierungskarten in der Runde)\r\n        if ((details?.name === 'Massenproteste' || key === 'Massenproteste') && event.type === 'card_played' && event.lane === 'aussen') {\r\n          // Vereinfacht: Beide Regierungskarten -1 Einfluss\r\n          const govCards = board[actingPlayer].aussen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n          if (govCards.length >= 2) {\r\n            adjustInfluence(govCards[0], -1, 'Massenproteste');\r\n            adjustInfluence(govCards[1], -1, 'Massenproteste');\r\n            oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n            log(`Intervention ausgelÃ¶st: Massenproteste â†’ ${govCards[0].name} und ${govCards[1].name} -1 Einfluss.`);\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // \"UnabhÃ¤ngige\" Untersuchung (gegen Intervention)\r\n        if ((details?.name === '\"UnabhÃ¤ngige\" Untersuchung' || key === 'Unabhaengige_Untersuchung') && event.type === 'card_played' && event.card?.kind === 'spec') {\r\n          const specCard = event.card as SpecialCard;\r\n          if (specCard.type === 'Intervention') {\r\n            // Intervention annullieren (vereinfacht: Karte zurÃ¼ck auf Hand)\r\n            const hands = { ...prev.hands } as GameState['hands'];\r\n            hands[actingPlayer].push(event.card);\r\n            prev.hands = hands;\r\n            oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n            log(`Intervention ausgelÃ¶st: \"UnabhÃ¤ngige\" Untersuchung â†’ ${event.card.name} wird annulliert.`);\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // Maulwurf (kopiere schwÃ¤chere Regierungskarte des Gegners)\r\n        if ((details?.name === 'Maulwurf' || key === 'Maulwurf') && event.type === 'card_played' && event.lane === 'aussen') {\r\n          const oppGovCards = board[opponent].aussen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n          if (oppGovCards.length > 0) {\r\n            // Finde schwÃ¤chste Regierungskarte\r\n            const weakestCard = oppGovCards.reduce((weakest, current) =>\r\n              (current.influence < weakest.influence) ? current : weakest\r\n            );\r\n            // Kopie erstellen (vereinfacht: gleiche Karte auf eigene Hand)\r\n            const hands = { ...prev.hands } as GameState['hands'];\r\n            const copyCard = { ...weakestCard, uid: Date.now() + Math.random() };\r\n            hands[opponent].push(copyCard);\r\n            prev.hands = hands;\r\n            oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n            log(`Intervention ausgelÃ¶st: Maulwurf â†’ Kopie von ${weakestCard.name} auf Hand.`);\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // Skandalspirale (Initiative + Ã–ffentlichkeitskarte)\r\n        if ((details?.name === 'Skandalspirale' || key === 'Skandalspirale') && event.type === 'card_played') {\r\n          // Vereinfacht: PrÃ¼fe ob Initiative und Ã–ffentlichkeitskarte in dieser Runde gespielt wurden\r\n          const recentCards = board[actingPlayer].innen.concat(board[actingPlayer].aussen);\r\n          const hasInitiative = recentCards.some(c => c.kind === 'spec' && (c as SpecialCard).type === 'Sofort-Initiative');\r\n          const hasPublic = recentCards.some(c => c.kind === 'spec' && (c as SpecialCard).type === 'Ã–ffentlichkeitskarte');\r\n          if (hasInitiative && hasPublic) {\r\n            // Eine der beiden Karten annullieren (vereinfacht: letzte Ã–ffentlichkeitskarte)\r\n            const pubCards = board[actingPlayer].innen.filter(c => c.kind === 'spec' && (c as SpecialCard).type === 'Ã–ffentlichkeitskarte');\r\n            if (pubCards.length > 0) {\r\n              const lastPubCard = pubCards[pubCards.length - 1];\r\n              const arr = [...board[actingPlayer].innen];\r\n              const idx = arr.findIndex(c => c.uid === lastPubCard.uid);\r\n              if (idx >= 0) {\r\n                arr.splice(idx, 1);\r\n                board = {\r\n                  ...board,\r\n                  [actingPlayer]: { ...board[actingPlayer], innen: arr }\r\n                } as GameState['board'];\r\n              }\r\n            }\r\n            oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n            log(`Intervention ausgelÃ¶st: Skandalspirale â†’ Ã–ffentlichkeitskarte annulliert.`);\r\n            continue;\r\n          }\r\n        }\r\n\r\n        // Satire-Show (bei mehr Einfluss als Gegner)\r\n        if ((details?.name === 'Satire-Show' || key === 'Satire_Show')) {\r\n          const playerInfluence = sumRow([...board[opponent].aussen]);\r\n          const opponentInfluence = sumRow([...board[actingPlayer].aussen]);\r\n          if (opponentInfluence > playerInfluence) {\r\n            const oppGovCards = board[opponent].aussen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n            if (oppGovCards.length > 0) {\r\n              // Erste Regierungskarte -2 Einfluss\r\n              adjustInfluence(oppGovCards[0], -2, 'Satire-Show');\r\n              oppTraps.splice(i, 1); i--; trapsChanged = true;\r\n              log(`Intervention ausgelÃ¶st: Satire-Show â†’ ${oppGovCards[0].name} -2 Einfluss.`);\r\n              continue;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (trapsChanged) {\r\n      const newTraps = { ...prev.traps, [opponent]: oppTraps } as GameState['traps'];\r\n      return [board, newTraps];\r\n    }\r\n    return [null, null];\r\n  };\r\n\r\n  // Zentrale Effekt-Queue Verarbeitung\r\n  const processEffectQueue = useCallback((state: GameState): GameState => {\r\n    if (!state.effectQueue || state.effectQueue.items.length === 0) {\r\n      return state;\r\n    }\r\n\r\n    const [newQueue, newState] = EffectQueueManager.processQueue(\r\n      state.effectQueue,\r\n      state,\r\n      log\r\n    );\r\n\r\n    return {\r\n      ...newState,\r\n      effectQueue: newQueue\r\n    };\r\n  }, [log]);\r\n\r\n  // Berechne Einfluss mit dauerhaften Auren-Effekten\r\n  const sumRowWithAuras = (state: GameState, player: Player): number => {\r\n    const govCards = state.board[player].aussen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n    const opponent: Player = player === 1 ? 2 : 1;\r\n    let total = 0;\r\n\r\n    // ðŸ” DEBUG: Log welche Regierungskarten gefunden wurden\r\n    console.log(`ðŸ” sumRowWithAuras P${player}: Gefunden ${govCards.length} Regierungskarten:`,\r\n      govCards.map(c => `${c.name}[${c.influence}I]`).join(', '));\r\n\r\n    govCards.forEach(card => {\r\n      let influence = card.influence;\r\n\r\n      // Dauerhafte Auren anwenden\r\n      const govSlot = state.permanentSlots[player].government;\r\n      const pubSlot = state.permanentSlots[player].public;\r\n\r\n      // Koalitionszwang: Tier 2 Regierungskarten +1 Einfluss\r\n      if (govSlot?.kind === 'spec' && (govSlot as SpecialCard).name === 'Koalitionszwang') {\r\n        if (card.T === 2) influence += 1;\r\n      }\r\n\r\n      // Napoleon Komplex: Tier 1 Regierungskarten +1 Einfluss\r\n      if (govSlot?.kind === 'spec' && (govSlot as SpecialCard).name === 'Napoleon Komplex') {\r\n        if (card.T === 1) influence += 1;\r\n      }\r\n\r\n      // Zivilgesellschaft: Bewegung-Karten +1 Einfluss\r\n      if (pubSlot?.kind === 'spec' && (pubSlot as SpecialCard).name === 'Zivilgesellschaft') {\r\n        const bewegungNames = ['Greta Thunberg', 'Malala Yousafzai', 'Ai Weiwei', 'Alexei Navalny'];\r\n        const hasBewegung = state.board[player].innen.some(c => c.kind === 'spec' && (c as SpecialCard).type === 'Ã–ffentlichkeitskarte' && bewegungNames.includes(c.name));\r\n        if (hasBewegung) influence += 1;\r\n      }\r\n\r\n      // ðŸ”¥ JOSCHKA FISCHER NGO-BOOST: +1 Einfluss wenn NGO auf dem Board liegt\r\n      if (card.name === 'Joschka Fischer' && (card as any).effect === 'ngo_boost') {\r\n        const hasNgoCard = state.board[player].innen.some(c =>\r\n          c.kind === 'spec' &&\r\n          (c as SpecialCard).type === 'Ã–ffentlichkeitskarte' &&\r\n          (c as any).tag === 'NGO'\r\n        );\r\n        if (hasNgoCard) {\r\n          influence += 1;\r\n          // Log nur beim ersten Mal, um Spam zu vermeiden\r\n          if (!(card as any)._ngoBoostLogged) {\r\n            console.log(`ðŸ”¥ JOSCHKA FISCHER KONTINUIERLICHER NGO-BOOST: +1 Einfluss`);\r\n            (card as any)._ngoBoostLogged = true;\r\n          }\r\n        } else {\r\n          (card as any)._ngoBoostLogged = false;\r\n        }\r\n      }\r\n\r\n      // Milchglas Transparenz: +1 Einfluss wenn keine NGO/Bewegung liegt\r\n      if (govSlot?.kind === 'spec' && (govSlot as SpecialCard).name === 'Milchglas Transparenz') {\r\n        const ngoMovementNames = ['Jennifer Doudna', 'Noam Chomsky', 'Bill Gates', 'Greta Thunberg', 'Malala Yousafzai', 'Ai Weiwei', 'Alexei Navalny'];\r\n        const hasNgoMovement = state.board[player].innen.some(c => c.kind === 'spec' && (c as SpecialCard).type === 'Ã–ffentlichkeitskarte' && ngoMovementNames.includes(c.name));\r\n        if (!hasNgoMovement) influence += 1;\r\n      }\r\n\r\n      // Alternative Fakten: Gegner-Interventionen -1 Wirkung\r\n      const oppPubSlot = state.permanentSlots[opponent].public;\r\n      if (oppPubSlot?.kind === 'spec' && (oppPubSlot as SpecialCard).name === 'Alternative Fakten') {\r\n        // Reduziere Effekt von Interventionen (vereinfacht: -1 Einfluss weniger)\r\n        // Wird in der Intervention-Auswertung berÃ¼cksichtigt\r\n      }\r\n\r\n      total += influence;\r\n    });\r\n\r\n    // ðŸ” DEBUG: Final influence calculation\r\n    console.log(`ðŸŽ¯ sumRowWithAuras P${player}: Gesamt-Einfluss = ${total}`);\r\n    return total;\r\n  };\r\n\r\n  // playCard is now handled by useGameActions hook\r\n\r\n  // runAITurn is now handled by useGameAI hook - removed duplicate implementation\r\n\r\n  const applyStartOfTurnHooksLegacy = useCallback((player: Player, state: GameState) => {\r\n    logFunctionCall('applyStartOfTurnHooksLegacy', { player, round: state.round }, 'Starting legacy turn hooks');\r\n\r\n    const pool = [...state.board[player].innen, ...state.board[player].aussen];\r\n    pool.forEach(c => {\r\n        if (c.kind === 'pol') {\r\n        const polCard = c as PoliticianCard;\r\n        if (polCard._pledgeDown && polCard._pledgeDown.round === state.round) {\r\n          const oldInfluence = polCard.influence;\r\n          adjustInfluence(polCard, polCard._pledgeDown.amount, 'Wahlversprechen');\r\n          const newInfluence = polCard.influence;\r\n          log(`Wahlversprechen Abzug auf ${polCard.name}: ${oldInfluence} â†’ ${newInfluence}`);\r\n          polCard._pledgeDown = null;\r\n        }\r\n        // reset once-per-round flags\r\n        polCard._hypedRoundFlag = false;\r\n      }\r\n    });\r\n\r\n    // Apply permanent initiative effects\r\n    const govSlot = state.permanentSlots[player].government;\r\n    const pubSlot = state.permanentSlots[player].public;\r\n\r\n    if (govSlot && govSlot.kind === 'spec') {\r\n      const govInitiative = govSlot as SpecialCard;\r\n      logFunctionCall('applyPermanentInitiative', { slot: 'government', initiative: govInitiative.name }, 'Processing government permanent initiative');\r\n\r\n      if (govInitiative.name === 'Alternative Fakten') {\r\n        // Alle Oligarchen geben +1 Einfluss\r\n        const oligarchCards = pool.filter(c =>\r\n          c.kind === 'pol' &&\r\n          ['Elon Musk', 'Bill Gates', 'George Soros', 'Warren Buffett', 'Mukesh Ambani', 'Jeff Bezos', 'Alisher Usmanov', 'Gautam Adani', 'Jack Ma', 'Zhang Yiming', 'Roman Abramovich'].includes(c.name)\r\n        ) as PoliticianCard[];\r\n\r\n        logDataFlow('board analysis', 'oligarch cards', {\r\n          count: oligarchCards.length,\r\n          cards: oligarchCards.map(c => ({ name: c.name, influence: c.kind === 'pol' ? (c as any).influence : 0 }))\r\n        }, 'Finding oligarch cards for Alternative Fakten effect');\r\n\r\n        let totalInfluenceGained = 0;\r\n        oligarchCards.forEach(card => {\r\n          const oldInfluence = card.influence;\r\n          adjustInfluence(card, 1, 'Alternative Fakten');\r\n          const newInfluence = card.influence;\r\n          totalInfluenceGained += 1;\r\n          logCardEffect('Alternative Fakten', `${card.name} erhÃ¤lt +1 Einfluss (${oldInfluence} â†’ ${newInfluence})`);\r\n        });\r\n\r\n        if (oligarchCards.length > 0) {\r\n          logCardEffect('Alternative Fakten', `${oligarchCards.length} Oligarchen gefunden - ${totalInfluenceGained} Punkte zum Gesamteinfluss hinzugefÃ¼gt`);\r\n        } else {\r\n          logWarning('No oligarch cards found', 'Alternative Fakten effect has no targets');\r\n        }\r\n      }\r\n    }\r\n\r\n    if (pubSlot && pubSlot.kind === 'spec') {\r\n      const pubInitiative = pubSlot as SpecialCard;\r\n      logFunctionCall('applyPermanentInitiative', { slot: 'public', initiative: pubInitiative.name }, 'Processing public permanent initiative');\r\n\r\n      if (pubInitiative.name === 'Algorithmischer Diskurs') {\r\n        // Alle Medien-Karten geben +1 Einfluss\r\n        const mediaCards = pool.filter(c =>\r\n          c.kind === 'pol' &&\r\n          ['Oprah Winfrey', 'Mark Zuckerberg', 'Tim Cook', 'Sam Altman'].includes(c.name)\r\n        ) as PoliticianCard[];\r\n\r\n        logDataFlow('board analysis', 'media cards', {\r\n          count: mediaCards.length,\r\n          cards: mediaCards.map(c => ({ name: c.name, influence: c.kind === 'pol' ? (c as any).influence : 0 }))\r\n        }, 'Finding media cards for Algorithmischer Diskurs effect');\r\n\r\n        let totalInfluenceGained = 0;\r\n        mediaCards.forEach(card => {\r\n          const oldInfluence = card.influence;\r\n          adjustInfluence(card, 1, 'Algorithmischer Diskurs');\r\n          const newInfluence = card.influence;\r\n          totalInfluenceGained += 1;\r\n          logCardEffect('Algorithmischer Diskurs', `${card.name} erhÃ¤lt +1 Einfluss (${oldInfluence} â†’ ${newInfluence})`);\r\n        });\r\n\r\n        if (mediaCards.length > 0) {\r\n          logCardEffect('Algorithmischer Diskurs', `${mediaCards.length} Medien-Karten gefunden - ${totalInfluenceGained} Punkte zum Gesamteinfluss hinzugefÃ¼gt`);\r\n        } else {\r\n          logWarning('No media cards found', 'Algorithmischer Diskurs effect has no targets');\r\n        }\r\n      }\r\n    }\r\n\r\n    // Legacy flags reset is replaced by the new applyStartOfTurnHooks implementation\r\n\r\n    logFunctionCall('applyStartOfTurnHooksLegacy', { player }, 'Legacy turn hooks completed');\r\n  }, [logFunctionCall, logDataFlow, logCardEffect, logWarning]);\r\n\r\n  // Helper: Leadership vorhanden?\r\n  const hasLeadershipCard = (player: Player, state: GameState): boolean => {\r\n    const gov = state.board[player].aussen;\r\n    const names = ['Justin Trudeau'];\r\n    return gov.some(c => c.kind === 'pol' && names.includes(c.name) && !(c as PoliticianCard).deactivated);\r\n  };\r\n\r\n  // Helper: Bewegung vorhanden? (Ã–ffentlichkeitsreihe)\r\n  const hasMovementCard = (player: Player, state: GameState): boolean => {\r\n    const pub = state.board[player].innen;\r\n    const names = ['Greta Thunberg', 'Malala Yousafzai', 'Ai Weiwei', 'Alexei Navalny'];\r\n    return pub.some(c => c.kind === 'pol' && names.includes(c.name) && !(c as PoliticianCard).deactivated);\r\n  };\r\n\r\n  // Helper: Plattform vorhanden? (Ã–ffentlichkeitsreihe)\r\n  const hasPlatformCard = (player: Player, state: GameState): boolean => {\r\n    const pub = state.board[player].innen;\r\n    const names = ['Mark Zuckerberg', 'Tim Cook', 'Jack Ma', 'Zhang Yiming'];\r\n    return pub.some(c => c.kind === 'pol' && names.includes(c.name) && !(c as PoliticianCard).deactivated);\r\n  };\r\n\r\n  // Helper: Diplomat vorhanden? (Regierungsreihe)\r\n  const hasDiplomatCard = (player: Player, state: GameState): boolean => {\r\n    const gov = state.board[player].aussen;\r\n    const names = ['Joschka Fischer', 'Sergey Lavrov', 'Ursula von der Leyen', 'Jens Stoltenberg', 'Horst KÃ¶hler', 'Walter Scheel', 'Hans Dietrich Genscher', 'Colin Powell', 'Condoleezza Rice', 'Christine Lagarde'];\r\n    return gov.some(c => c.kind === 'pol' && names.includes(c.name) && !(c as PoliticianCard).deactivated);\r\n  };\r\n\r\n  // Helper: Einfluss-Transfer durch Dauerhaft-Initiativen blockiert? (Koalitionszwang, Napoleon Komplex)\r\n  const hasInfluenceTransferBlock = (player: Player, state: GameState): boolean => {\r\n    const govSlot = state.permanentSlots[player].government;\r\n    if (!govSlot || govSlot.kind !== 'spec') return false;\r\n    const spec = govSlot as SpecialCard;\r\n    return ['Koalitionszwang', 'Napoleon Komplex'].includes(spec.name);\r\n  };\r\n\r\n  // Helper: Kann Spieler mehrere Interventionen spielen? (Putin-FÃ¤higkeit)\r\n  const canPlayMultipleInterventions = (player: Player, state: GameState): boolean => {\r\n    const govCards = state.board[player].aussen.filter(c => c.kind === 'pol') as PoliticianCard[];\r\n    return govCards.some(c => c.name === 'Vladimir Putin' && !c.deactivated);\r\n  };\r\n\r\n  const selectHandCard = useCallback((index: number | null) => {\r\n    setSelectedHandIndex(index);\r\n  }, []);\r\n\r\n  const passTurn = useCallback((player: Player) => {\r\n    setGameState(prev => {\r\n      if (prev.current !== player) return prev;\r\n\r\n      const newState = { ...prev, passed: { ...prev.passed, [player]: true } };\r\n      log(`Spieler ${player} passt.`);\r\n\r\n      // If both players have passed, resolve the round\r\n      if (newState.passed[1] && newState.passed[2]) {\r\n        return resolveRound(newState);\r\n      }\r\n\r\n      return newState;\r\n    });\r\n  }, [log, resolveRound]);\r\n\r\n  // Diplomat-Einfluss-Transfer Funktion\r\n  const transferInfluence = useCallback((player: Player, fromCardUid: number, toCardUid: number, amount: number) => {\r\n    setGameState(prev => {\r\n      if (prev.current !== player) return prev;\r\n\r\n      const flags = prev.effectFlags?.[player];\r\n      if (!flags || flags.diplomatInfluenceTransferUsed || flags.influenceTransferBlocked) return prev;\r\n      if (!hasDiplomatCard(player, prev)) return prev;\r\n\r\n      // Finde beide Karten in der Regierungsreihe\r\n      const govCards = prev.board[player].aussen;\r\n      const fromCard = govCards.find(c => c.uid === fromCardUid && c.kind === 'pol') as PoliticianCard;\r\n      const toCard = govCards.find(c => c.uid === toCardUid && c.kind === 'pol') as PoliticianCard;\r\n\r\n      if (!fromCard || !toCard || fromCard.influence < amount) return prev;\r\n\r\n      // Transfer durchfÃ¼hren\r\n      adjustInfluence(fromCard, -amount, 'Diplomat-Transfer');\r\n      adjustInfluence(toCard, amount, 'Diplomat-Transfer');\r\n\r\n      // Flag setzen\r\n      const newFlags = { ...flags, diplomatInfluenceTransferUsed: true };\r\n      const newEffectFlags = { ...prev.effectFlags, [player]: newFlags } as GameState['effectFlags'];\r\n\r\n      log(`P${player} transferiert ${amount} Einfluss von ${fromCard.name} zu ${toCard.name} (Diplomat).`);\r\n\r\n      return {\r\n        ...prev,\r\n        effectFlags: newEffectFlags\r\n      };\r\n    });\r\n  }, [log]);\r\n\r\n  // Active Abilities Management\r\n  const getActiveAbilities = useCallback((player: Player) => {\r\n    return ActiveAbilitiesManager.getAvailableAbilities(player, gameState);\r\n  }, []);\r\n\r\n  const useActiveAbility = useCallback((abilityId: string, targetCardUid?: number) => {\r\n    setGameState(prev => {\r\n      const player = prev.current;\r\n      const abilities = ActiveAbilitiesManager.getAvailableAbilities(player, prev);\r\n      const ability = abilities.find(a => a.id === abilityId);\r\n\r\n      if (!ability || !ActiveAbilitiesManager.canUseAbility(ability, player, prev)) {\r\n        return prev;\r\n      }\r\n\r\n      // Finde Actor Card\r\n      const allCards = [...prev.board[player].innen, ...prev.board[player].aussen].filter(c => c.kind === 'pol') as PoliticianCard[];\r\n      const actorCard = allCards.find(c => ability.id.includes(c.uid.toString()));\r\n\r\n      if (!actorCard) return prev;\r\n\r\n      // Finde Target Card wenn nÃ¶tig\r\n      let targetCard: PoliticianCard | undefined;\r\n      if (targetCardUid) {\r\n        const allTargets = [...prev.board[1].innen, ...prev.board[1].aussen, ...prev.board[2].innen, ...prev.board[2].aussen].filter(c => c.kind === 'pol') as PoliticianCard[];\r\n        targetCard = allTargets.find(c => c.uid === targetCardUid);\r\n      }\r\n\r\n      const select = {\r\n        type: ability.type,\r\n        actorCard,\r\n        actorPlayer: player,\r\n        targetCard\r\n      } as any;\r\n\r\n      const newState = ActiveAbilitiesManager.executeAbility(ability, select, prev);\r\n\r\n      log(`${actorCard.name} nutzt ${ability.name}${targetCard ? ` auf ${targetCard.name}` : ''}.`);\r\n\r\n      return newState;\r\n    });\r\n  }, [gameState, log]);\r\n\r\n  // Reset aktive FÃ¤higkeiten zu Rundenbeginn\r\n  const resetActiveAbilities = useCallback((state: GameState): GameState => {\r\n    const newState = { ...state };\r\n\r\n    // Reset _activeUsed fÃ¼r alle Politikerkarten\r\n    [1, 2].forEach(player => {\r\n      const allCards = [...newState.board[player as Player].innen, ...newState.board[player as Player].aussen].filter(c => c.kind === 'pol') as PoliticianCard[];\r\n      allCards.forEach(card => {\r\n        card._activeUsed = false;\r\n      });\r\n    });\r\n\r\n    return newState;\r\n  }, []);\r\n\r\n  // Putin Doppelte Interventionen\r\n  const executePutinDoubleIntervention = useCallback((interventionCardIds: number[]) => {\r\n    setGameState(prev => {\r\n      const player = prev.current;\r\n      const newState = ActiveAbilitiesManager.executePutinDoubleIntervention(prev, player, interventionCardIds, log);\r\n      return newState;\r\n    });\r\n  }, [log]);\r\n\r\n  // Check ob Putin Doppel-Intervention verfÃ¼gbar ist\r\n  const canUsePutinDoubleIntervention = useCallback((player: Player): boolean => {\r\n    const board = gameState.board[player];\r\n    const allCards = [...board.innen, ...board.aussen].filter(c => c.kind === 'pol') as PoliticianCard[];\r\n    const putin = allCards.find(c => c.name === 'Vladimir Putin');\r\n\r\n    if (!putin || putin.deactivated || putin._activeUsed) return false;\r\n\r\n    const interventions = gameState.hands[player].filter(c => c.kind === 'spec');\r\n    return interventions.length >= 2;\r\n  }, [gameState]);\r\n\r\n  // Manual turn advancement for testing\r\n  const manualAdvanceTurn = useCallback(() => {\r\n    console.log('ðŸ”§ DEBUG: Manual turn advancement triggered');\r\n    log('ðŸ”§ DEBUG: Manual turn advancement triggered');\r\n    nextTurn();\r\n  }, [nextTurn, log]);\r\n\r\n  return {\r\n    gameState,\r\n    selectedHandIndex,\r\n    log,\r\n    startNewGame,\r\n    selectHandCard: setSelectedHandIndex,\r\n    scores,\r\n    manualAdvanceTurn, // Manual turn advancement for testing\r\n\r\n    // Core game state functions\r\n    dealStartingHands,\r\n    resolveRound,\r\n    nextTurn: gameActions.nextTurn,\r\n    endTurn: gameActions.endTurn,\r\n    checkAndAdvanceTurn,\r\n    shouldAdvanceTurn,\r\n\r\n    // Helper functions kept for compatibility\r\n    hasLeadershipCard,\r\n    hasMovementCard,\r\n    hasPlatformCard,\r\n    hasDiplomatCard,\r\n    hasInfluenceTransferBlock,\r\n    canPlayMultipleInterventions,\r\n    sumRowWithAuras,\r\n    applyStartOfTurnHooksLegacy,\r\n\r\n    // Functions that were migrated to separate hooks\r\n    passTurn: gameActions.passTurn,\r\n    transferInfluence,\r\n    getActiveAbilities,\r\n    useActiveAbility,\r\n    resetActiveAbilities,\r\n    executePutinDoubleIntervention,\r\n    canUsePutinDoubleIntervention,\r\n\r\n    // Delegate primary functionality to separated hooks\r\n    startMatchWithDecks: gameActions.startMatchWithDecks,\r\n    startMatchVsAI: gameActions.startMatchVsAI,\r\n    playCard: gameActions.playCard,\r\n    activateInstantInitiative: gameActions.activateInstantInitiative,\r\n\r\n    // AI functionality\r\n    runAITurn: gameAI.runAITurn,\r\n    aiEnabled: gameAI.aiEnabled,\r\n    setAiEnabled: gameAI.setAiEnabled,\r\n    aiPreset: gameAI.aiPreset,\r\n    setAiPreset: gameAI.setAiPreset,\r\n\r\n    // Effects functionality\r\n    executeCardEffect,\r\n    processEffectQueue,\r\n  };\r\n}\r\n"],"mappings":"2HAAA,OAASA,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC7C,OAA6EC,wBAAwB,KAAQ,eAAe,CAC5H,OAASC,IAAI,CAAEC,QAAQ,CAAEC,YAAY,KAAQ,kBAAkB,CAC/D,OACEC,MAAM,CACNC,OAAO,CACPC,eAAe,CACfC,gBAAgB,CAChBC,oBAAoB,CACpBC,SAAS,CACTC,mBAAmB,CACnBC,sBAAsB,CACtBC,eAAe,CACfC,gBAAgB,CAChBC,+BAA+B,CAC/BC,kBAAkB,CAClBC,sBAAsB,KACjB,oBAAoB,CAC3B,OAASC,cAAc,KAAQ,qBAAqB,CACpD,OAASC,cAAc,KAAQ,kBAAkB,CACjD,OAASC,SAAS,KAAQ,aAAa,CACvC,OAASC,cAAc,KAAQ,kBAAkB,CACjD,OAASC,qBAAqB,KAAQ,2BAA2B,CACjE,OAASC,UAAU,KAA2C,gBAAgB,CAE9E,KAAM,CAAAC,gBAA2B,CAAG,CAClCC,KAAK,CAAE,CAAC,CACRC,OAAO,CAAE,CAAC,CACVC,MAAM,CAAE,CAAE,CAAC,CAAE,KAAK,CAAE,CAAC,CAAE,KAAM,CAAC,CAC9BC,YAAY,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,CAC5BC,WAAW,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,CAC3BC,KAAK,CAAE,CAAE,CAAC,CAAE,EAAE,CAAE,CAAC,CAAE,EAAG,CAAC,CACvBC,KAAK,CAAE,CAAE,CAAC,CAAE,EAAE,CAAE,CAAC,CAAE,EAAG,CAAC,CACvBC,KAAK,CAAE,CAAE,CAAC,CAAE,EAAE,CAAE,CAAC,CAAE,EAAG,CAAC,CACvBC,KAAK,CAAEV,UAAU,CAAC,CAAC,CACnBW,cAAc,CAAE,CACd,CAAC,CAAE,CAAEC,UAAU,CAAE,IAAI,CAAEC,MAAM,CAAE,IAAK,CAAC,CACrC,CAAC,CAAE,CAAED,UAAU,CAAE,IAAI,CAAEC,MAAM,CAAE,IAAK,CACtC,CAAC,CACDC,OAAO,CAAE,EAAE,CACXC,GAAG,CAAE,EAAE,CACPC,aAAa,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,CAC7BC,SAAS,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,CACzBC,UAAU,CAAE,IAAI,CAChBC,WAAW,CAAE,CACX,CAAC,CAAEzC,wBAAwB,CAAC,CAAC,CAC7B,CAAC,CAAEA,wBAAwB,CAAC,CAC9B,CAAC,CACD0C,WAAW,CAAE3B,kBAAkB,CAAC4B,eAAe,CAAC,CAAC,CACjDC,eAAe,CAAE,CACf,CAAC,CAAE,EAAE,CACL,CAAC,CAAE,EACL,CAAC,CACDC,oBAAoB,CAAEC,SAAS,CAC/BC,SAAS,CAAE,CAAE,CAAC,CAAE,KAAK,CAAE,CAAC,CAAE,KAAM,CAClC,CAAC,CAED,MAAO,SAAS,CAAAC,YAAYA,CAAA,CAAG,CAC7B,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGpD,QAAQ,CAAYyB,gBAAgB,CAAC,CACvE,KAAM,CAAC4B,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGtD,QAAQ,CAAgB,IAAI,CAAC,CAE/E,KAAM,CAAAuC,GAAG,CAAGtC,WAAW,CAAEsD,GAAW,EAAK,CACvC,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,OAAO,CAAE,CACvDC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,SACV,CAAC,CAAC,CACF,KAAM,CAAAC,QAAQ,KAAAC,MAAA,CAAOP,SAAS,OAAAO,MAAA,CAAKR,GAAG,CAAE,CAExCS,OAAO,CAACzB,GAAG,CAACuB,QAAQ,CAAC,CAAE;AAEvBV,YAAY,CAACa,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACZD,IAAI,MACP1B,GAAG,CAAE,CAAC,GAAG0B,IAAI,CAAC1B,GAAG,CAAEuB,QAAQ,CAAC,EAC5B,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAK,gBAAgB,CAAGlE,WAAW,CAAC,CAACmE,MAAc,CAAEC,OAAe,GAAK,CACxE9B,GAAG,qBAAAwB,MAAA,CAAWK,MAAM,QAAAL,MAAA,CAAMM,OAAO,CAAE,CAAC,CACtC,CAAC,CAAE,CAAC9B,GAAG,CAAC,CAAC,CAET,KAAM,CAAA+B,kBAAkB,CAAGrE,WAAW,CAAC,CAACsE,MAAc,CAAEF,OAAe,GAAK,CAC1E9B,GAAG,wBAAAwB,MAAA,CAAcQ,MAAM,QAAAR,MAAA,CAAMM,OAAO,CAAE,CAAC,CACzC,CAAC,CAAE,CAAC9B,GAAG,CAAC,CAAC,CAET,KAAM,CAAAiC,WAAW,CAAGvE,WAAW,CAAC,CAACmE,MAAc,CAAEC,OAAe,GAAK,CACnE9B,GAAG,qBAAAwB,MAAA,CAAWK,MAAM,QAAAL,MAAA,CAAMM,OAAO,CAAE,CAAC,CACtC,CAAC,CAAE,CAAC9B,GAAG,CAAC,CAAC,CAET,KAAM,CAAAkC,aAAa,CAAGxE,WAAW,CAAC,CAACyE,QAAgB,CAAEC,MAAc,GAAK,CACtEpC,GAAG,mBAAAwB,MAAA,CAAcW,QAAQ,QAAAX,MAAA,CAAMY,MAAM,CAAE,CAAC,CAC1C,CAAC,CAAE,CAACpC,GAAG,CAAC,CAAC,CAET,KAAM,CAAAqC,eAAe,CAAG3E,WAAW,CAAC,CAAC4E,gBAAwB,CAAEC,OAAe,GAAK,CACjFvC,GAAG,+BAAAwB,MAAA,CAAqBc,gBAAgB,yBAAAd,MAAA,CAAoBe,OAAO,CAAE,CAAC,CACxE,CAAC,CAAE,CAACvC,GAAG,CAAC,CAAC,CAET;AACA,KAAM,CAAAwC,eAAe,CAAG9E,WAAW,CAAC,CAAC+E,YAAoB,CAAEC,MAAW,CAAEC,OAAe,GAAK,CAC1F,KAAM,CAAAC,QAAQ,CAAG,MAAO,CAAAF,MAAM,GAAK,QAAQ,CAAGG,IAAI,CAACC,SAAS,CAACJ,MAAM,CAAE,IAAI,CAAE,CAAC,CAAC,CAAGK,MAAM,CAACL,MAAM,CAAC,CAC9F1C,GAAG,uBAAAwB,MAAA,CAAaiB,YAAY,MAAAjB,MAAA,CAAIoB,QAAQ,SAAApB,MAAA,CAAOmB,OAAO,CAAE,CAAC,CAC3D,CAAC,CAAE,CAAC3C,GAAG,CAAC,CAAC,CAET,KAAM,CAAAgD,WAAW,CAAGtF,WAAW,CAAC,CAACuF,IAAY,CAAEC,EAAU,CAAEC,IAAS,CAAEtB,MAAc,GAAK,CACvF,KAAM,CAAAuB,OAAO,CAAG,MAAO,CAAAD,IAAI,GAAK,QAAQ,CAAGN,IAAI,CAACC,SAAS,CAACK,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAGJ,MAAM,CAACI,IAAI,CAAC,CACvFnD,GAAG,uBAAAwB,MAAA,CAAayB,IAAI,aAAAzB,MAAA,CAAM0B,EAAE,QAAA1B,MAAA,CAAMK,MAAM,cAAAL,MAAA,CAAY4B,OAAO,CAAE,CAAC,CAChE,CAAC,CAAE,CAACpD,GAAG,CAAC,CAAC,CAET,KAAM,CAAAqD,iBAAiB,CAAG3F,WAAW,CAAC,CAAC4F,SAAiB,CAAEC,MAAe,CAAEZ,OAAe,GAAK,CAC7F3C,GAAG,wBAAAwB,MAAA,CAAc8B,SAAS,QAAA9B,MAAA,CAAM+B,MAAM,QAAA/B,MAAA,CAAMmB,OAAO,CAAE,CAAC,CACxD,CAAC,CAAE,CAAC3C,GAAG,CAAC,CAAC,CAET,KAAM,CAAAwD,QAAQ,CAAG9F,WAAW,CAAC,CAAC+F,KAAa,CAAEd,OAAe,GAAK,CAC/D3C,GAAG,kBAAAwB,MAAA,CAAaiC,KAAK,QAAAjC,MAAA,CAAMmB,OAAO,CAAE,CAAC,CACvC,CAAC,CAAE,CAAC3C,GAAG,CAAC,CAAC,CAET,KAAM,CAAA0D,UAAU,CAAGhG,WAAW,CAAC,CAACiG,OAAe,CAAEhB,OAAe,GAAK,CACnE3C,GAAG,uBAAAwB,MAAA,CAAamC,OAAO,QAAAnC,MAAA,CAAMmB,OAAO,CAAE,CAAC,CACzC,CAAC,CAAE,CAAC3C,GAAG,CAAC,CAAC,CAET;AACA,KAAM,CAAA4D,WAAW,CAAG/E,cAAc,CAAC+B,SAAS,CAAEC,YAAY,CAAEb,GAAG,CAAC,CAChE,KAAM,CAAA6D,MAAM,CAAG/E,SAAS,CAAC8B,SAAS,CAAEC,YAAY,CAAEb,GAAG,CAAC,CACtD,KAAM,CAAA8D,WAAW,CAAG/E,cAAc,CAAC6B,SAAS,CAAEC,YAAY,CAAEb,GAAG,CAAC,CAEhE,KAAM,CAAA+D,iBAAiB,CAAGrG,WAAW,CAAC,IAAM,CAC1C+D,OAAO,CAACzB,GAAG,CAAC,iCAAiC,CAAC,CAC9C,QAAS,CAAAgE,SAASA,CAAA,CAAW,CAC3B,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAGrG,IAAI,CAAC,CACzB,KAAM,CAAAsG,QAAQ,CAAG,CAAC,GAAGrG,QAAQ,CAAC,CAC9BG,OAAO,CAACiG,OAAO,CAAC,CAChBjG,OAAO,CAACkG,QAAQ,CAAC,CACjB,KAAM,CAAAC,IAAY,CAAG,EAAE,CACvBF,OAAO,CAACG,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAACC,OAAO,CAACC,CAAC,EAAIH,IAAI,CAACI,IAAI,CAACtG,eAAe,CAACqG,CAAC,CAAC,CAAC,CAAC,CAEhE;AACA,KAAM,CAAAE,SAAS,CAAG,CAAC,OAAO,CAAE,QAAQ,CAAE,SAAS,CAAE,WAAW,CAAE,MAAM,CAAE,MAAM,CAAE,MAAM,CAAE,WAAW,CAAE,SAAS,CAAE,eAAe,CAAE,cAAc,CAAE,cAAc,CAAC,CAC9J,KAAM,CAAAC,GAAG,CAAGP,QAAQ,CAACE,KAAK,CAAC,CAAC,CAACM,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKJ,SAAS,CAACK,OAAO,CAACF,CAAC,CAACG,IAAI,CAAC,CAAGN,SAAS,CAACK,OAAO,CAACD,CAAC,CAACE,IAAI,CAAC,CAAC,CAClGL,GAAG,CAACL,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAACC,OAAO,CAACU,CAAC,EAAIZ,IAAI,CAACI,IAAI,CAACrG,gBAAgB,CAAC6G,CAAC,CAAC,CAAC,CAAC,CAC7D,MAAO,CAAA/G,OAAO,CAACmG,IAAI,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CACnC,CAEA,KAAM,CAAAY,KAAK,CAAGhB,SAAS,CAAC,CAAC,CACzB,KAAM,CAAAiB,KAAK,CAAGjB,SAAS,CAAC,CAAC,CAEzBvC,OAAO,CAACzB,GAAG,CAAC,4BAA4B,CAAEgF,KAAK,CAACE,MAAM,CAAED,KAAK,CAACC,MAAM,CAAC,CAErErE,YAAY,CAACa,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACZD,IAAI,MACPlC,KAAK,CAAE,CAAE,CAAC,CAAEwF,KAAK,CAAE,CAAC,CAAEC,KAAM,CAAC,CAC7BxF,KAAK,CAAE,CACL,CAAC,CAAEuF,KAAK,CAACG,MAAM,CAAC,CAAC,CAAE,CAAC,CAAC,CACrB,CAAC,CAAEF,KAAK,CAACE,MAAM,CAAC,CAAC,CAAE,CAAC,CACtB,CAAC,EACD,CAAC,CACH1D,OAAO,CAACzB,GAAG,CAAC,iDAAiD,CAAGgF,KAAK,CAACE,MAAM,EAAI,CAAC,CAAG,CAAC,CAAGF,KAAK,CAACE,MAAO,CAAC,CACxG,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,YAAY,CAAG1H,WAAW,CAAC,IAAM,CACrCmD,YAAY,CAAAc,aAAA,CAAAA,aAAA,IACPzC,gBAAgB,MACnBC,KAAK,CAAE,CAAC,CACRC,OAAO,CAAE,CAAC,CACVC,MAAM,CAAE,CAAE,CAAC,CAAE,KAAK,CAAE,CAAC,CAAE,KAAM,CAAC,CAC9BC,YAAY,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,CAC5BC,WAAW,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,CAC3BI,KAAK,CAAEV,UAAU,CAAC,CAAC,CACnBS,KAAK,CAAE,CAAE,CAAC,CAAE,EAAE,CAAE,CAAC,CAAE,EAAG,CAAC,CACvBE,cAAc,CAAE,CACd,CAAC,CAAE,CAAEC,UAAU,CAAE,IAAI,CAAEC,MAAM,CAAE,IAAK,CAAC,CACrC,CAAC,CAAE,CAAED,UAAU,CAAE,IAAI,CAAEC,MAAM,CAAE,IAAK,CACtC,CAAC,CACD;AACAC,OAAO,CAAE,EAAE,CACXC,GAAG,CAAE,EAAE,CACPC,aAAa,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,EAC9B,CAAC,CACF8D,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,CAACA,iBAAiB,CAAC,CAAC,CAEvB,KAAM,CAAAsB,mBAAmB,CAAG3H,WAAW,CAAC,CAAC4H,aAA6B,CAAEC,aAA6B,GAAK,CACxG9D,OAAO,CAACzB,GAAG,CAAC,mEAAmE,CAAC,CAChF;AACAyB,OAAO,CAACzB,GAAG,CAAC,mDAAmD,CAAC,CAChE6D,MAAM,CAAC2B,YAAY,CAAC,IAAI,CAAC,CACzB/D,OAAO,CAACzB,GAAG,CAAC,kEAAkE,CAAC,CAC/E6D,MAAM,CAAC4B,WAAW,CAAC,sBAAsB,CAAC,CAC1ChE,OAAO,CAACzB,GAAG,CAAC,8BAA8B,CAAC,CAE3CyB,OAAO,CAACzB,GAAG,CAAC,4CAA4C,CAAEsF,aAAa,CAACJ,MAAM,CAAE,eAAe,CAAEK,aAAa,CAACL,MAAM,CAAC,CACtHzD,OAAO,CAACzB,GAAG,CAAC,8CAA8C,CAAEsF,aAAa,CAAClB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAEmB,aAAa,CAACnB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAEjH,KAAM,CAAAsB,OAAO,CAAGvH,oBAAoB,CAACmH,aAAa,CAAC,CACnD,KAAM,CAAAK,OAAO,CAAGxH,oBAAoB,CAACoH,aAAa,CAAC,CAEnD,KAAM,CAAAK,EAAE,CAAG,CAAC,GAAGF,OAAO,CAAC,CACvB,KAAM,CAAAG,EAAE,CAAG,CAAC,GAAGF,OAAO,CAAC,CACvB,KAAM,CAAAG,EAAE,CAAGF,EAAE,CAACT,MAAM,CAAC,CAAC,CAAEY,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEJ,EAAE,CAACV,MAAM,CAAC,CAAC,CAC/C,KAAM,CAAAe,EAAE,CAAGJ,EAAE,CAACV,MAAM,CAAC,CAAC,CAAEY,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEH,EAAE,CAACX,MAAM,CAAC,CAAC,CAE/CzD,OAAO,CAACzB,GAAG,CAAC,sCAAsC,CAAE0F,OAAO,CAACR,MAAM,CAAE,SAAS,CAAES,OAAO,CAACT,MAAM,CAAC,CAC9FzD,OAAO,CAACzB,GAAG,CAAC,iCAAiC,CAAE8F,EAAE,CAACZ,MAAM,CAAE,IAAI,CAAEe,EAAE,CAACf,MAAM,CAAC,CAC1EzD,OAAO,CAACzB,GAAG,CAAC,4CAA4C,CAAE0F,OAAO,CAACtB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAEuB,OAAO,CAACvB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAEnGvD,YAAY,CAAAc,aAAA,CAAAA,aAAA,IACPzC,gBAAgB,MACnBC,KAAK,CAAE,CAAC,CACRC,OAAO,CAAE,CAAC,CACVC,MAAM,CAAE,CAAE,CAAC,CAAE,KAAK,CAAE,CAAC,CAAE,KAAM,CAAC,CAC9BG,KAAK,CAAE,CAAE,CAAC,CAAEoG,EAAE,CAAE,CAAC,CAAEC,EAAG,CAAC,CACvBpG,KAAK,CAAE,CAAE,CAAC,CAAEqG,EAAE,CAAE,CAAC,CAAEG,EAAG,CAAC,CACvBtG,KAAK,CAAEV,UAAU,CAAC,CAAC,CACnBS,KAAK,CAAE,CAAE,CAAC,CAAE,EAAE,CAAE,CAAC,CAAE,EAAG,CAAC,CACvBE,cAAc,CAAE,CACd,CAAC,CAAE,CAAEC,UAAU,CAAE,IAAI,CAAEC,MAAM,CAAE,IAAK,CAAC,CACrC,CAAC,CAAE,CAAED,UAAU,CAAE,IAAI,CAAEC,MAAM,CAAE,IAAK,CACtC,CAAC,CACD;AACAC,OAAO,CAAE,EAAE,CACXC,GAAG,CAAE,2CAAAwB,MAAA,CAA2CsE,EAAE,CAACZ,MAAM,MAAA1D,MAAA,CAAIyE,EAAE,CAACf,MAAM,kBAAgB,CACtFjF,aAAa,CAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAE,CAAC,EAC9B,CAAC,CACFwB,OAAO,CAACzB,GAAG,CAAC,mDAAmD,CAAC,CAClE,CAAC,CAAE,CAAC6D,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAqC,cAAc,CAAGxI,WAAW,CAAC,SAAC4H,aAA6B,CAAoE,IAAlE,CAAAa,SAAoC,CAAAC,SAAA,CAAAlB,MAAA,IAAAkB,SAAA,MAAA3F,SAAA,CAAA2F,SAAA,IAAG,sBAAsB,CAC9H,KAAM,CAAAb,aAAa,CAAGzH,YAAY,CAACqI,SAAS,CAAmB,CAC/DtC,MAAM,CAAC2B,YAAY,CAAC,IAAI,CAAC,CACzB3B,MAAM,CAAC4B,WAAW,CAACU,SAAS,CAAC,CAC7BvC,WAAW,CAACyB,mBAAmB,CAACC,aAAa,CAAEC,aAAa,CAAC,CAC/D,CAAC,CAAE,CAAC1B,MAAM,CAAED,WAAW,CAAC,CAAC,CAEzB;AACA,KAAM,CAAAyC,iBAAiB,CAAG3I,WAAW,CAAC,CAACkD,SAAoB,CAAE0F,MAAc,GAAc,CACvF;AACA,GAAI1F,SAAS,CAACvB,MAAM,CAACiH,MAAM,CAAC,CAAE,MAAO,KAAI,CAEzC;AACA,GAAI1F,SAAS,CAACtB,YAAY,CAACgH,MAAM,CAAC,EAAI,CAAC,CAAE,MAAO,KAAI,CAEpD;AACA;AAEA,MAAO,MAAK,CACd,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,iBAAiB,CAAG7I,WAAW,CAAC,CACpC8I,IAAU,CACVF,MAAc,CACdG,KAAgB,CAChBC,OAA8B,GAChB,CACd,GAAI,CAAAC,QAAQ,CAAAhF,aAAA,IAAQ8E,KAAK,CAAE,CAE3BjE,eAAe,CAAC,mBAAmB,CAAE,CAAEgE,IAAI,CAAEA,IAAI,CAACI,IAAI,CAAEN,MAAM,CAAEO,IAAI,CAAEL,IAAI,CAACM,IAAK,CAAC,CAAE,gCAAgC,CAAC,CAEpH,GAAIN,IAAI,CAACM,IAAI,GAAK,MAAM,CAAE,CACxB,KAAM,CAAAC,QAAQ,CAAGP,IAAmB,CAEpC;AACA,GAAIO,QAAQ,CAACH,IAAI,GAAK,iBAAiB,CAAE,KAAAI,qBAAA,CACvC9E,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,oDAAoD,CAAC,CAClF,KAAM,CAAAK,KAAK,CAAAtF,aAAA,CAAAA,aAAA,KAAAqF,qBAAA,CAAQL,QAAQ,CAACvG,WAAW,UAAA4G,qBAAA,iBAApBA,qBAAA,CAAuBV,MAAM,CAAC,MAAEY,mBAAmB,CAAE,IAAI,EAAE,CAC9EP,QAAQ,CAACvG,WAAW,CAAAuB,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,CAACvG,WAAW,MAAE,CAACkG,MAAM,EAAGW,KAAK,EAA8B,CAC/FjE,WAAW,CAAC,aAAa,CAAE,UAAU,CAAE,CAAEsD,MAAM,CAAEY,mBAAmB,CAAE,IAAK,CAAC,CAAE,0BAA0B,CAAC,CAC3G,CAAC,IACI,IAAIH,QAAQ,CAACH,IAAI,GAAK,aAAa,CAAE,CACxC,KAAM,CAAAO,QAAQ,CAAGR,QAAQ,CAAChH,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAChG9D,WAAW,CAAC,gBAAgB,CAAE,UAAU,CAAE,CAAEuE,KAAK,CAAEJ,QAAQ,CAACjC,MAAM,CAAEsC,KAAK,CAAEL,QAAQ,CAACM,GAAG,CAACH,CAAC,EAAIA,CAAC,CAACV,IAAI,CAAE,CAAC,CAAE,0BAA0B,CAAC,CAEnI,GAAIO,QAAQ,CAACjC,MAAM,CAAG,CAAC,CAAE,CACvB,KAAM,CAAAwC,UAAU,CAAGP,QAAQ,CAAC,CAAC,CAAC,CAC9B,KAAM,CAAAQ,YAAY,CAAGD,UAAU,CAACE,SAAS,CACzCrJ,eAAe,CAACmJ,UAAU,CAAE,CAAC,CAAE,aAAa,CAAC,CAC7C,KAAM,CAAAG,YAAY,CAAGH,UAAU,CAACE,SAAS,CAEzC1F,aAAa,CAAC6E,QAAQ,CAACH,IAAI,IAAApF,MAAA,CAAKkG,UAAU,CAACd,IAAI,6BAAApF,MAAA,CAAwBmG,YAAY,aAAAnG,MAAA,CAAMqG,YAAY,KAAG,CAAC,CACzG7E,WAAW,CAAC,sBAAsB,CAAE,YAAY,CAAE,CAAEwD,IAAI,CAAEkB,UAAU,CAACd,IAAI,CAAEkB,GAAG,CAAEH,YAAY,CAAEI,GAAG,CAAEF,YAAY,CAAE7F,MAAM,CAAE,CAAE,CAAC,CAAE,4BAA4B,CAAC,CAC7J,CAAC,IAAM,CACL0B,UAAU,CAAC,2BAA2B,CAAE,kCAAkC,CAAC,CAC7E,CACF,CAAC,IACI,IAAIqD,QAAQ,CAACH,IAAI,GAAK,qBAAqB,CAAE,KAAAoB,sBAAA,CAChD9F,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,0CAA0C,CAAC,CACxE,KAAM,CAAEqB,QAAQ,CAAEC,QAAS,CAAC,CAAG9J,SAAS,CAACkI,MAAM,CAAE,CAAC,CAAEK,QAAQ,CAAED,OAAO,CAAC,CACtEC,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,MAAElH,KAAK,CAAEwI,QAAQ,CAAEzI,KAAK,CAAE0I,QAAQ,EAAE,CAE5D,KAAM,CAAAjB,KAAK,CAAAtF,aAAA,CAAAA,aAAA,KAAAqG,sBAAA,CAAQrB,QAAQ,CAACvG,WAAW,UAAA4H,sBAAA,iBAApBA,sBAAA,CAAuB1B,MAAM,CAAC,MAAE6B,0BAA0B,CAAE,CAAC,EAAE,CAClFxB,QAAQ,CAACvG,WAAW,CAAAuB,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,CAACvG,WAAW,MAAE,CAACkG,MAAM,EAAGW,KAAK,EAA8B,CAC/FjE,WAAW,CAAC,aAAa,CAAE,UAAU,CAAE,CAAEsD,MAAM,CAAE6B,0BAA0B,CAAE,CAAE,CAAC,CAAE,4BAA4B,CAAC,CACjH,CAAC,IACI,IAAIpB,QAAQ,CAACH,IAAI,GAAK,kBAAkB,CAAE,CAC7C,KAAM,CAAAwB,QAAgB,CAAG9B,MAAM,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CAC7C,KAAM,CAAA+B,WAAW,CAAG1B,QAAQ,CAAChH,KAAK,CAACyI,QAAQ,CAAC,CAAChB,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,EAAI,CAAEQ,CAAC,CAAoBgB,WAAW,CAAqB,CAC3ItF,WAAW,CAAC,mBAAmB,CAAE,aAAa,CAAE,CAAEoF,QAAQ,CAAEb,KAAK,CAAEc,WAAW,CAACnD,MAAM,CAAEsC,KAAK,CAAEa,WAAW,CAACZ,GAAG,CAACH,CAAC,EAAIA,CAAC,CAACV,IAAI,CAAE,CAAC,CAAE,0CAA0C,CAAC,CAEzK,GAAIyB,WAAW,CAACnD,MAAM,CAAG,CAAC,CAAE,CAC1B,KAAM,CAAAwC,UAAU,CAAGW,WAAW,CAAC,CAAC,CAAC,CACjCX,UAAU,CAACY,WAAW,CAAG,IAAI,CAC7BpG,aAAa,CAAC6E,QAAQ,CAACH,IAAI,IAAApF,MAAA,CAAKkG,UAAU,CAACd,IAAI,sCAAoC,CAAC,CACpF5D,WAAW,CAAC,mBAAmB,CAAE,YAAY,CAAE,CAAEwD,IAAI,CAAEkB,UAAU,CAACd,IAAI,CAAE0B,WAAW,CAAE,IAAK,CAAC,CAAE,iCAAiC,CAAC,CACjI,CAAC,IAAM,CACL5E,UAAU,CAAC,2CAA2C,CAAE,uCAAuC,CAAC,CAClG,CACF,CAAC,IACI,IAAIqD,QAAQ,CAACH,IAAI,GAAK,qBAAqB,CAAE,CAChD,KAAM,CAAAwB,QAAgB,CAAG9B,MAAM,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CAC7C,KAAM,CAAAiC,OAAO,CAAG5B,QAAQ,CAAClH,KAAK,CAAC2I,QAAQ,CAAC,CACxCpF,WAAW,CAAC,eAAe,CAAE,UAAU,CAAE,CAAEoF,QAAQ,CAAEI,QAAQ,CAAED,OAAO,CAACrD,MAAM,CAAEsC,KAAK,CAAEe,OAAO,CAACd,GAAG,CAACH,CAAC,EAAIA,CAAC,CAACV,IAAI,CAAE,CAAC,CAAE,yBAAyB,CAAC,CAE5I,GAAI2B,OAAO,CAACrD,MAAM,CAAG,CAAC,CAAE,CACtB,KAAM,CAAAuD,aAAa,CAAGF,OAAO,CAACxC,IAAI,CAAC2C,KAAK,CAAC3C,IAAI,CAAC4C,MAAM,CAAC,CAAC,CAAGJ,OAAO,CAACrD,MAAM,CAAC,CAAC,CACzE,KAAM,CAAA0D,UAAU,CAAGL,OAAO,CAAClB,MAAM,CAACC,CAAC,EAAIA,CAAC,GAAKmB,aAAa,CAAC,CAC3D9B,QAAQ,CAAClH,KAAK,CAAAkC,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,CAAClH,KAAK,MAAE,CAAC2I,QAAQ,EAAGQ,UAAU,EAAE,CAE9D1G,aAAa,CAAC6E,QAAQ,CAACH,IAAI,oBAAApF,MAAA,CAAqBiH,aAAa,CAAC7B,IAAI,iBAAe,CAAC,CAClF5D,WAAW,CAAC,cAAc,CAAE,eAAe,CAAE,CAAEwD,IAAI,CAAEiC,aAAa,CAAC7B,IAAI,CAAEiC,WAAW,CAAED,UAAU,CAAC1D,MAAO,CAAC,CAAE,oCAAoC,CAAC,CAClJ,CAAC,IAAM,CACLxB,UAAU,CAAC,wBAAwB,CAAE,0CAA0C,CAAC,CAClF,CACF,CAAC,IACI,IAAIqD,QAAQ,CAACH,IAAI,GAAK,aAAa,CAAE,CACxC,KAAM,CAAAwB,QAAgB,CAAG9B,MAAM,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CAC7C,KAAM,CAAAwC,QAAQ,CAAGnC,QAAQ,CAAChH,KAAK,CAACyI,QAAQ,CAAC,CACzC,KAAM,CAAAW,iBAAiB,CAAGhL,MAAM,CAAC,CAAC,GAAG+K,QAAQ,CAACE,KAAK,CAAE,GAAGF,QAAQ,CAAC1B,MAAM,CAAC,CAAC,CAEzEpE,WAAW,CAAC,yBAAyB,CAAE,uBAAuB,CAAE,CAC9DoF,QAAQ,CACRY,KAAK,CAAEF,QAAQ,CAACE,KAAK,CAACvB,GAAG,CAACH,CAAC,GAAK,CAAEV,IAAI,CAAEU,CAAC,CAACV,IAAI,CAAEgB,SAAS,CAAEN,CAAC,CAACR,IAAI,GAAK,KAAK,CAAIQ,CAAC,CAASM,SAAS,CAAG,CAAE,CAAC,CAAC,CAAC,CAC1GR,MAAM,CAAE0B,QAAQ,CAAC1B,MAAM,CAACK,GAAG,CAACH,CAAC,GAAK,CAAEV,IAAI,CAAEU,CAAC,CAACV,IAAI,CAAEgB,SAAS,CAAEN,CAAC,CAACR,IAAI,GAAK,KAAK,CAAIQ,CAAC,CAASM,SAAS,CAAG,CAAE,CAAC,CAAC,CAAC,CAC5GqB,cAAc,CAAEF,iBAClB,CAAC,CAAE,sCAAsC,CAAC,CAE1C,GAAIA,iBAAiB,CAAG,EAAE,CAAE,CAC1B,KAAM,CAAEd,QAAQ,CAAEC,QAAS,CAAC,CAAG9J,SAAS,CAACkI,MAAM,CAAE,CAAC,CAAEK,QAAQ,CAAED,OAAO,CAAC,CACtEC,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,MAAElH,KAAK,CAAEwI,QAAQ,CAAEzI,KAAK,CAAE0I,QAAQ,EAAE,CAC5DhG,aAAa,CAAC6E,QAAQ,CAACH,IAAI,eAAApF,MAAA,CAAgBuH,iBAAiB,mCAAiC,CAAC,CAChG,CAAC,IAAM,CACL7G,aAAa,CAAC6E,QAAQ,CAACH,IAAI,eAAApF,MAAA,CAAgBuH,iBAAiB,sCAA+B,CAAC,CAC9F,CACF,CAAC,IACI,IAAIhC,QAAQ,CAACH,IAAI,GAAK,YAAY,CAAE,CACvC,KAAM,CAAEqB,QAAQ,CAAEC,QAAS,CAAC,CAAG9J,SAAS,CAACkI,MAAM,CAAE,CAAC,CAAEK,QAAQ,CAAED,OAAO,CAAC,CACtEC,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,MAAElH,KAAK,CAAEwI,QAAQ,CAAEzI,KAAK,CAAE0I,QAAQ,EAAE,CAC5DhG,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,eAAe,CAAC,CAC/C,CAAC,IACI,IAAIG,QAAQ,CAACH,IAAI,GAAK,qBAAqB,CAAE,CAChD,KAAM,CAAAsC,WAAW,CAAGvC,QAAQ,CAAChH,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CAAC3B,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAClG9D,WAAW,CAAC,uBAAuB,CAAE,iBAAiB,CAAE,CAAEuE,KAAK,CAAE2B,WAAW,CAAChE,MAAM,CAAEsC,KAAK,CAAE0B,WAAW,CAACzB,GAAG,CAACH,CAAC,EAAIA,CAAC,CAACV,IAAI,CAAE,CAAC,CAAE,0CAA0C,CAAC,CAEvKsC,WAAW,CAAC7E,OAAO,CAACmC,IAAI,EAAI,CAC1B,KAAM,CAAAmB,YAAY,CAAGnB,IAAI,CAACoB,SAAS,CACnCrJ,eAAe,CAACiI,IAAI,CAAE,CAAC,CAAE,qBAAqB,CAAC,CAC/C,KAAM,CAAAqB,YAAY,CAAGrB,IAAI,CAACoB,SAAS,CACnC1F,aAAa,CAAC6E,QAAQ,CAACH,IAAI,IAAApF,MAAA,CAAKgF,IAAI,CAACI,IAAI,6BAAApF,MAAA,CAAwBmG,YAAY,aAAAnG,MAAA,CAAMqG,YAAY,KAAG,CAAC,CACrG,CAAC,CAAC,CAEF,GAAIqB,WAAW,CAAChE,MAAM,GAAK,CAAC,CAAE,CAC5BxB,UAAU,CAAC,uBAAuB,CAAE,2CAA2C,CAAC,CAClF,CACF,CAAC,IACI,IAAIqD,QAAQ,CAACH,IAAI,GAAK,gBAAgB,CAAE,CAC3C,KAAM,CAAAwB,QAAgB,CAAG9B,MAAM,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CAC7C,KAAM,CAAA+B,WAAW,CAAG1B,QAAQ,CAAChH,KAAK,CAACyI,QAAQ,CAAC,CAAChB,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CACrG9D,WAAW,CAAC,8BAA8B,CAAE,uBAAuB,CAAE,CAAEuE,KAAK,CAAEc,WAAW,CAACnD,MAAM,CAAEsC,KAAK,CAAEa,WAAW,CAACZ,GAAG,CAACH,CAAC,EAAIA,CAAC,CAACV,IAAI,CAAE,CAAC,CAAE,mCAAmC,CAAC,CAE7K,GAAIyB,WAAW,CAACnD,MAAM,CAAG,CAAC,CAAE,CAC1B,KAAM,CAAAwC,UAAU,CAAGW,WAAW,CAAC,CAAC,CAAC,CACjC,KAAM,CAAAV,YAAY,CAAGD,UAAU,CAACE,SAAS,CACzCrJ,eAAe,CAACmJ,UAAU,CAAE,CAAC,CAAC,CAAE,gBAAgB,CAAC,CACjD,KAAM,CAAAG,YAAY,CAAGH,UAAU,CAACE,SAAS,CAEzC1F,aAAa,CAAC6E,QAAQ,CAACH,IAAI,IAAApF,MAAA,CAAKkG,UAAU,CAACd,IAAI,2BAAApF,MAAA,CAAyBmG,YAAY,aAAAnG,MAAA,CAAMqG,YAAY,KAAG,CAAC,CAC1G7E,WAAW,CAAC,qBAAqB,CAAE,YAAY,CAAE,CAAEwD,IAAI,CAAEkB,UAAU,CAACd,IAAI,CAAEkB,GAAG,CAAEH,YAAY,CAAEI,GAAG,CAAEF,YAAY,CAAE7F,MAAM,CAAE,CAAC,CAAE,CAAC,CAAE,+BAA+B,CAAC,CAChK,CAAC,IAAM,CACL0B,UAAU,CAAC,oCAAoC,CAAE,qCAAqC,CAAC,CACzF,CACF,CAAC,IACI,IAAIqD,QAAQ,CAACH,IAAI,GAAK,eAAe,CAAE,CAC1C,KAAM,CAAEqB,QAAQ,CAAEC,QAAS,CAAC,CAAG9J,SAAS,CAACkI,MAAM,CAAE,CAAC,CAAEK,QAAQ,CAAED,OAAO,CAAC,CACtEC,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,MAAElH,KAAK,CAAEwI,QAAQ,CAAEzI,KAAK,CAAE0I,QAAQ,EAAE,CAE5DvB,QAAQ,CAACrH,YAAY,CAAAqC,aAAA,CAAAA,aAAA,IAChBgF,QAAQ,CAACrH,YAAY,MACxB,CAACgH,MAAM,EAAGP,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEW,QAAQ,CAACrH,YAAY,CAACgH,MAAM,CAAC,CAAG,CAAC,CAAC,EACzD,CAED,KAAM,CAAA6C,KAAK,CAAG1C,KAAK,CAACnH,YAAY,CAACgH,MAAM,CAAC,CACxC,KAAM,CAAA8C,KAAK,CAAGzC,QAAQ,CAACrH,YAAY,CAACgH,MAAM,CAAC,CAC3CpE,aAAa,CAAC6E,QAAQ,CAACH,IAAI,kCAAApF,MAAA,CAAmC2H,KAAK,aAAA3H,MAAA,CAAM4H,KAAK,KAAG,CAAC,CAClFpG,WAAW,CAAC,SAAS,CAAE,QAAQ,CAAE,CAAEsD,MAAM,CAAEwB,GAAG,CAAEqB,KAAK,CAAEpB,GAAG,CAAEqB,KAAK,CAAEpH,MAAM,CAAE,CAAE,CAAC,CAAE,8BAA8B,CAAC,CACjH,CAAC,IACI,IAAI+E,QAAQ,CAACH,IAAI,GAAK,gBAAgB,CAAE,CAC3C1E,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,eAAe,CAAC,CAC7C,KAAM,CAAEqB,QAAQ,CAAEC,QAAS,CAAC,CAAG9J,SAAS,CAACkI,MAAM,CAAE,CAAC,CAAEK,QAAQ,CAAED,OAAO,CAAC,CACtEC,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,MAAElH,KAAK,CAAEwI,QAAQ,CAAEzI,KAAK,CAAE0I,QAAQ,EAAE,CAC9D,CAAC,IACI,IAAInB,QAAQ,CAACH,IAAI,GAAK,eAAe,CAAE,CAC1C1E,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,eAAe,CAAC,CAC7C,KAAM,CAAEqB,QAAQ,CAAEC,QAAS,CAAC,CAAG9J,SAAS,CAACkI,MAAM,CAAE,CAAC,CAAEK,QAAQ,CAAED,OAAO,CAAC,CACtEC,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,MAAElH,KAAK,CAAEwI,QAAQ,CAAEzI,KAAK,CAAE0I,QAAQ,EAAE,CAC9D,CAEA;AAAA,IACK,IAAI,CAAC,WAAW,CAAE,YAAY,CAAE,cAAc,CAAE,gBAAgB,CAAE,eAAe,CAAE,YAAY,CAAE,iBAAiB,CAAE,cAAc,CAAE,SAAS,CAAE,cAAc,CAAE,kBAAkB,CAAC,CAACmB,QAAQ,CAACtC,QAAQ,CAACH,IAAI,CAAC,CAAE,CAC/M1E,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,iCAAiC,CAAC,CAC/D,KAAM,CAAEqB,QAAQ,CAAEC,QAAS,CAAC,CAAG9J,SAAS,CAACkI,MAAM,CAAE,CAAC,CAAEK,QAAQ,CAAED,OAAO,CAAC,CACtEC,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQgF,QAAQ,MAAElH,KAAK,CAAEwI,QAAQ,CAAEzI,KAAK,CAAE0I,QAAQ,EAAE,CAC9D,CACF,CAEA;AACA,GAAI1B,IAAI,CAACM,IAAI,GAAK,MAAM,EAAKN,IAAI,CAAiBK,IAAI,GAAK,sBAAsB,CAAE,CACjF,KAAM,CAAAE,QAAQ,CAAGP,IAAmB,CAEpC,GAAIO,QAAQ,CAACH,IAAI,GAAK,yBAAyB,CAAE,CAC/C1E,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,6DAA6D,CAAC,CAC3F;AACF,CAAC,IACI,IAAIG,QAAQ,CAACH,IAAI,GAAK,oBAAoB,CAAE,CAC/C1E,aAAa,CAAC6E,QAAQ,CAACH,IAAI,CAAE,0DAA0D,CAAC,CACxF;AACF,CACF,CAEA;AAAA,IACK,IAAIJ,IAAI,CAACM,IAAI,GAAK,KAAK,CAAE,CAC5B,KAAM,CAAAwC,OAAO,CAAG9C,IAAsB,CACtCtE,aAAa,CAACoH,OAAO,CAAC1C,IAAI,0CAAApF,MAAA,CAA2C8H,OAAO,CAAC1B,SAAS,CAAE,CAAC,CAC3F,CAEA5E,WAAW,CAAC,mBAAmB,CAAE,UAAU,CAAE,CAAEwD,IAAI,CAAEA,IAAI,CAACI,IAAI,CAAE2C,cAAc,CAAE,IAAK,CAAC,CAAE,iCAAiC,CAAC,CAC1H,MAAO,CAAA5C,QAAQ,CACjB,CAAC,CAAE,CAACnE,eAAe,CAAEN,aAAa,CAAEc,WAAW,CAAEU,UAAU,CAAC,CAAC,CAE7D,KAAM,CAAA8F,QAAQ,CAAG9L,WAAW,CAAC,IAAM,CACjC8E,eAAe,CAAC,UAAU,CAAE,CAAC,CAAC,CAAE,sBAAsB,CAAC,CAEvD3B,YAAY,CAAEa,IAAI,EAAgB,KAAA+H,gBAAA,CAAAC,eAAA,CAAAC,iBAAA,CAAAC,gBAAA,CAAAC,iBAAA,CAAAC,gBAAA,CAChC9G,WAAW,CAAC,IAAI,CAAE,UAAU,CAAE,CAAE5D,OAAO,CAAEsC,IAAI,CAACtC,OAAO,CAAEC,MAAM,CAAEqC,IAAI,CAACrC,MAAO,CAAC,CAAE,qBAAqB,CAAC,CAEpG;AACAgE,iBAAiB,CAAC,qBAAqB,CAAE3B,IAAI,CAACrC,MAAM,CAAC,CAAC,CAAC,EAAIqC,IAAI,CAACrC,MAAM,CAAC,CAAC,CAAC,CAAE,iBAAiB,CAAC,CAC7F,GAAIqC,IAAI,CAACrC,MAAM,CAAC,CAAC,CAAC,EAAIqC,IAAI,CAACrC,MAAM,CAAC,CAAC,CAAC,CAAE,CACpCmD,eAAe,CAAC,cAAc,CAAE,CAAErD,KAAK,CAAEuC,IAAI,CAACvC,KAAM,CAAC,CAAE,uCAAuC,CAAC,CAC/F,MAAO,CAAA4K,YAAY,CAACrI,IAAI,CAAC,CAC3B,CAEA,KAAM,CAAAsI,UAAkB,CAAGtI,IAAI,CAACtC,OAAO,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CACrD4D,WAAW,CAAC,aAAa,CAAE,YAAY,CAAE,CAAE8E,GAAG,CAAEpG,IAAI,CAACtC,OAAO,CAAE2I,GAAG,CAAEiC,UAAW,CAAC,CAAE,eAAe,CAAC,CAEjG;AACA,KAAM,CAAAC,eAAe,CAAAtI,aAAA,IAAQD,IAAI,CAACpC,YAAY,CAAE,CAChD,KAAM,CAAA4K,cAAc,CAAAvI,aAAA,IAAQD,IAAI,CAACnC,WAAW,CAAE,CAC9C0K,eAAe,CAACD,UAAU,CAAC,CAAG,CAAC,CAC/BE,cAAc,CAACF,UAAU,CAAC,CAAG,CAAC,CAE9BhH,WAAW,CAAC,UAAU,CAAE,YAAY,CAAE,CACpCsD,MAAM,CAAE0D,UAAU,CAClBb,KAAK,CAAEzH,IAAI,CAACpC,YAAY,CAAC0K,UAAU,CAAC,CACpCZ,KAAK,CAAEa,eAAe,CAACD,UAAU,CAAC,CAClCG,UAAU,CAAEzI,IAAI,CAACnC,WAAW,CAACyK,UAAU,CAAC,CACxCI,UAAU,CAAEF,cAAc,CAACF,UAAU,CACvC,CAAC,CAAE,+BAA+B,CAAC,CAEnC;AACA,KAAM,CAAArD,QAAmB,CAAAhF,aAAA,CAAAA,aAAA,IACpBD,IAAI,MACPtC,OAAO,CAAE4K,UAAU,CACnB1K,YAAY,CAAE2K,eAAe,CAC7B1K,WAAW,CAAE2K,cAAc,EAC5B,CAED;AACAlK,GAAG,YAAAwB,MAAA,CAAYwI,UAAU,mCAA8B,CAAC,CACxDjI,kBAAkB,CAAC,aAAa,WAAAP,MAAA,CAAYwI,UAAU,iBAAe,CAAC,CAEtExH,eAAe,CAAC,uBAAuB,CAAE,CAAE8D,MAAM,CAAE0D,UAAW,CAAC,CAAE,gCAAgC,CAAC,CAClGhL,qBAAqB,CAAC2H,QAAQ,CAAEqD,UAAU,CAAEhK,GAAG,CAAC,CAEhD;AACAqD,iBAAiB,CAAC,SAAS,CAAE2G,UAAU,GAAK,CAAC,IAAAP,gBAAA,EAAAC,eAAA,CAAKhI,IAAI,CAAChB,SAAS,UAAAgJ,eAAA,iBAAdA,eAAA,CAAiB,CAAC,CAAC,UAAAD,gBAAA,UAAAA,gBAAA,CAAI,KAAK,CAAC,CAAE,eAAe,CAAC,CACjG,GAAIO,UAAU,GAAK,CAAC,IAAAL,iBAAA,EAAAC,gBAAA,CAAKlI,IAAI,CAAChB,SAAS,UAAAkJ,gBAAA,iBAAdA,gBAAA,CAAiB,CAAC,CAAC,UAAAD,iBAAA,UAAAA,iBAAA,CAAI,KAAK,CAAC,CAAE,CACtDnH,eAAe,CAAC,WAAW,CAAE,CAAE8D,MAAM,CAAE0D,UAAW,CAAC,CAAE,oBAAoB,CAAC,CAC1E;AACAK,UAAU,CAAC,IAAM,CACfpI,WAAW,CAAC,mBAAmB,CAAE,4BAA4B,CAAC,CAC9D4B,MAAM,CAACyG,SAAS,CAAC,CAAC,CACpB,CAAC,CAAE,GAAG,CAAC,CACT,CAEAtH,WAAW,CAAC,UAAU,CAAE,YAAY,CAAE,CACpC5D,OAAO,CAAEuH,QAAQ,CAACvH,OAAO,CACzBmL,EAAE,CAAE5D,QAAQ,CAACrH,YAAY,CAAC0K,UAAU,CAAC,CACrCQ,OAAO,CAAE7D,QAAQ,CAACpH,WAAW,CAACyK,UAAU,CAAC,CACzCtJ,SAAS,EAAAmJ,iBAAA,EAAAC,gBAAA,CAAEpI,IAAI,CAAChB,SAAS,UAAAoJ,gBAAA,iBAAdA,gBAAA,CAAiB,CAAC,CAAC,UAAAD,iBAAA,UAAAA,iBAAA,CAAI,KACpC,CAAC,CAAE,uBAAuB,CAAC,CAE3B,MAAO,CAAAlD,QAAQ,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,CAACnE,eAAe,CAAEQ,WAAW,CAAEK,iBAAiB,CAAEtB,kBAAkB,CAAE8B,MAAM,CAAE7D,GAAG,CAAEiC,WAAW,CAAC,CAAC,CAEnG;AACA,KAAM,CAAAwI,mBAAmB,CAAG/M,WAAW,CAAEkD,SAAoB,EAAK,CAChE,KAAM,CAAA8J,aAAa,CAAG9J,SAAS,CAACxB,OAAO,CACvC,GAAIiH,iBAAiB,CAACzF,SAAS,CAAE8J,aAAa,CAAC,CAAE,CAC/C;AACA,KAAM,CAAAC,WAAmB,CAAGD,aAAa,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CACvD,GAAI,CAACrE,iBAAiB,CAACzF,SAAS,CAAE+J,WAAW,CAAC,EAAI/J,SAAS,CAACvB,MAAM,CAACsL,WAAW,CAAC,CAAE,CAC/EnB,QAAQ,CAAC,CAAC,CACZ,CACF,CACF,CAAC,CAAE,CAACnD,iBAAiB,CAAEmD,QAAQ,CAAC,CAAC,CAEjC,KAAM,CAAAoB,MAAM,CAAGlN,WAAW,CAAE+I,KAAgB,EAAuB,CACjE;AACA,KAAM,CAAAoE,EAAE,CAAGpM,+BAA+B,CAACgI,KAAK,CAAE,CAAC,CAAC,CACpD,KAAM,CAAAqE,EAAE,CAAGrM,+BAA+B,CAACgI,KAAK,CAAE,CAAC,CAAC,CACpD,MAAO,CAACoE,EAAE,CAAEC,EAAE,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAf,YAAY,CAAGrM,WAAW,CAAE+I,KAAgB,EAAgB,CAChE,KAAM,CAACoE,EAAE,CAAEC,EAAE,CAAC,CAAGF,MAAM,CAACnE,KAAK,CAAC,CAC9B,GAAI,CAAAsE,MAAa,CAAG,CAAC,CACrB,GAAI,CAAAC,IAAI,CAAG,EAAE,CAEb,GAAIH,EAAE,CAAGC,EAAE,CAAEC,MAAM,CAAG,CAAC,CAAC,IACnB,IAAID,EAAE,CAAGD,EAAE,CAAEE,MAAM,CAAG,CAAC,CAAC,IACxB,CACH;AACAA,MAAM,CAAGtE,KAAK,CAACpH,MAAM,CAAC,CAAC,CAAC,EAAI,CAACoH,KAAK,CAACpH,MAAM,CAAC,CAAC,CAAC,CAAG,CAAC,CAAG,CAAC,CACpD2L,IAAI,CAAG,gCAAgC,CACzC,CAEAhL,GAAG,UAAAwB,MAAA,CAAUiF,KAAK,CAACtH,KAAK,gBAAAqC,MAAA,CAAcqJ,EAAE,WAAArJ,MAAA,CAASsJ,EAAE,kBAAAtJ,MAAA,CAAgBuJ,MAAM,EAAAvJ,MAAA,CAAGwJ,IAAI,KAAG,CAAC,CAEpF;AACA,KAAM,CAAAC,YAAY,CAAAtJ,aAAA,IAAQ8E,KAAK,CAACvG,SAAS,CAAE,CAC3C+K,YAAY,CAACF,MAAM,CAAC,EAAI,CAAC,CAEzB;AACA,GAAI,CAAA5K,UAAwB,CAAG,IAAI,CACnC,GAAI8K,YAAY,CAAC,CAAC,CAAC,EAAI,CAAC,CAAE,CACxB9K,UAAU,CAAG,CAAC,CACdH,GAAG,2DAAAwB,MAAA,CAAiDyJ,YAAY,CAAC,CAAC,CAAC,MAAAzJ,MAAA,CAAIyJ,YAAY,CAAC,CAAC,CAAC,KAAG,CAAC,CAC5F,CAAC,IAAM,IAAIA,YAAY,CAAC,CAAC,CAAC,EAAI,CAAC,CAAE,CAC/B9K,UAAU,CAAG,CAAC,CACdH,GAAG,2DAAAwB,MAAA,CAAiDyJ,YAAY,CAAC,CAAC,CAAC,MAAAzJ,MAAA,CAAIyJ,YAAY,CAAC,CAAC,CAAC,KAAG,CAAC,CAC5F,CAEA;AACA,KAAM,CAAAC,QAAQ,CAAGjM,UAAU,CAAC,CAAC,CAC7B,KAAM,CAAAkM,QAAQ,CAAG,CAAE,CAAC,CAAE,EAAE,CAAE,CAAC,CAAE,EAAG,CAAC,CAEjC;AACA,KAAM,CAAElD,QAAQ,CAAEC,QAAS,CAAC,CAAG7J,mBAAmB,CAACoI,KAAK,CAAEzG,GAAG,CAAC,CAE9D,KAAM,CAAAoL,QAAQ,CAAG3E,KAAK,CAACtH,KAAK,CAAG,CAAC,CAChC,KAAM,CAAAkM,SAAS,CAAG,CAAE,CAAC,CAAE,KAAK,CAAE,CAAC,CAAE,KAAM,CAAC,CACxC;AACA,KAAM,CAAArB,UAAU,CAAIoB,QAAQ,CAAG,CAAC,GAAK,CAAC,CAAI,CAAC,CAAG,CAAC,CAE/C;AACA,GAAIjL,UAAU,CAAE,CACd,OAAAwB,aAAA,CAAAA,aAAA,IACK8E,KAAK,MACRvG,SAAS,CAAE+K,YAAY,CACvB9K,UAAU,GAEd,CAEAH,GAAG,UAAAwB,MAAA,CAAU4J,QAAQ,gBAAA5J,MAAA,CAAcwI,UAAU,aAAW,CAAC,CAEzD;AACA,KAAM,CAAAsB,cAAc,CAAG,CACrB,CAAC,CAAA3J,aAAA,CAAAA,aAAA,IACI8E,KAAK,CAACrG,WAAW,CAAC,CAAC,CAAC,MACvB;AACAmL,sBAAsB,CAAE,KAAK,CAC7BC,yBAAyB,CAAE,KAAK,CAChCC,qBAAqB,CAAE,KAAK,CAC5BC,sBAAsB,CAAE,KAAK,CAC7B;AACAC,kBAAkB,CAAE,KAAK,CACzBC,iBAAiB,CAAE,KAAK,CACxB1E,mBAAmB,CAAE,KAAK,CAC1B2E,qBAAqB,CAAE,KAAK,CAC5BC,iBAAiB,CAAE,KAAK,CACxBC,4BAA4B,CAAE,KAAK,CACnCC,yBAAyB,CAAE,KAAK,EACjC,CACD,CAAC,CAAArK,aAAA,CAAAA,aAAA,IACI8E,KAAK,CAACrG,WAAW,CAAC,CAAC,CAAC,MACvB;AACAmL,sBAAsB,CAAE,KAAK,CAC7BC,yBAAyB,CAAE,KAAK,CAChCC,qBAAqB,CAAE,KAAK,CAC5BC,sBAAsB,CAAE,KAAK,CAC7B;AACAC,kBAAkB,CAAE,KAAK,CACzBC,iBAAiB,CAAE,KAAK,CACxB1E,mBAAmB,CAAE,KAAK,CAC1B2E,qBAAqB,CAAE,KAAK,CAC5BC,iBAAiB,CAAE,KAAK,CACxBC,4BAA4B,CAAE,KAAK,CACnCC,yBAAyB,CAAE,KAAK,EAEpC,CAAC,CAED,OAAArK,aAAA,CAAAA,aAAA,IACK8E,KAAK,MACRtH,KAAK,CAAEiM,QAAQ,CACfhM,OAAO,CAAE4K,UAAU,CACnB3K,MAAM,CAAEgM,SAAS,CACjB1L,KAAK,CAAEuL,QAAQ,CACfxL,KAAK,CAAEyL,QAAQ,CACf1L,KAAK,CAAEwI,QAAQ,CACfzI,KAAK,CAAE0I,QAAQ,CACfhI,SAAS,CAAE+K,YAAY,CACvB7K,WAAW,CAAEkL,cAAc,GAE/B,CAAC,CAAE,CAACtL,GAAG,CAAE4K,MAAM,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAqB,qBAAqB,CAAGA,CAC5BvK,IAAe,CACfwK,YAAoB,CACpBC,KAAU,CACVC,cAAkC,GACyB,CAC3D,KAAM,CAAAhE,QAAgB,CAAG8D,YAAY,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CACnD,KAAM,CAAAG,QAAQ,CAAG,CAAC,IAAI3K,IAAI,CAAChC,KAAK,CAAC0I,QAAQ,CAAC,EAAI,EAAE,CAAC,CAAC,CAClD,GAAI,CAAAzI,KAAK,CAAGyM,cAAc,CAC1B,GAAI,CAAAE,YAAY,CAAG,KAAK,CAExB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,QAAQ,CAACnH,MAAM,CAAEqH,CAAC,EAAE,CAAE,CACxC,KAAM,CAAAC,IAAI,CAAGH,QAAQ,CAACE,CAAC,CAAC,CACxB,GAAIC,IAAI,CAAC1F,IAAI,GAAK,MAAM,CAAE,SAC1B,KAAM,CAAA2F,IAAI,CAAGD,IAAmB,CAChC,KAAM,CAAA1K,OAAO,CAAGlD,cAAc,CAAC6N,IAAI,CAAC7F,IAAI,CAAC,CACzC,KAAM,CAAA8F,GAAG,CAAGD,IAAI,CAACC,GAAG,CAEpB;AACA,GAAIP,KAAK,CAACtF,IAAI,GAAK,aAAa,EAAKsF,KAAK,CAAC3F,IAAuB,CAAE,CAClE,KAAM,CAAAmG,MAAM,CAAGR,KAAK,CAAC3F,IAAsB,CAC3C,KAAM,CAAAoG,OAAO,CAAG,CAAC,eAAe,CAAC,CAACvD,QAAQ,CAACsD,MAAM,CAAC/F,IAAI,CAAC,CACvD,KAAM,CAAAiG,KAAK,CAAG,CAAC,YAAY,CAAE,iBAAiB,CAAE,cAAc,CAAC,CAACxD,QAAQ,CAACsD,MAAM,CAAC/F,IAAI,CAAC,CACrF,KAAM,CAAAkG,UAAU,CAAG,CAAC,iBAAiB,CAAE,UAAU,CAAE,SAAS,CAAE,cAAc,CAAC,CAACzD,QAAQ,CAACsD,MAAM,CAAC/F,IAAI,CAAC,CACnG,KAAM,CAAAmG,UAAU,CAAG,CAAC,iBAAiB,CAAE,eAAe,CAAE,sBAAsB,CAAE,kBAAkB,CAAE,wBAAwB,CAAE,cAAc,CAAE,kBAAkB,CAAE,mBAAmB,CAAC,CAAC1D,QAAQ,CAACsD,MAAM,CAAC/F,IAAI,CAAC,CAC5M,KAAM,CAAAoG,UAAU,CAAIL,MAAM,CAACM,CAAC,GAAK,CAAC,EAAId,KAAK,CAACe,IAAI,GAAK,QAAS,CAC9D,KAAM,CAAAC,UAAU,CAAIR,MAAM,CAACM,CAAC,GAAK,CAAC,EAAId,KAAK,CAACe,IAAI,GAAK,QAAS,CAC9D,KAAM,CAAAE,SAAS,CAAIT,MAAM,CAAC/E,SAAS,EAAI,CAAC,EAAIuE,KAAK,CAACe,IAAI,GAAK,QAAS,CACpE,KAAM,CAAAG,aAAa,CAAIV,MAAM,CAAC/E,SAAS,EAAI,CAAC,EAAIuE,KAAK,CAACe,IAAI,GAAK,QAAS,CAExE;AACA,GAAI,CAAC,CAAApL,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,gBAAgB,EAAI8F,GAAG,GAAK,gBAAgB,GAAKP,KAAK,CAACe,IAAI,GAAK,OAAO,CAAE,CAC9F5O,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEA,MAAM,CAACrE,WAAW,CAAG,IAAI,CAAE,CAAC,CAAE5G,IAAI,CAACvC,KAAK,CAAC,CAChFkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,qDAAAwB,MAAA,CAA6CmL,MAAM,CAAC/F,IAAI,iBAAe,CAAC,CAC3EvE,eAAe,CAAC,gBAAgB,uBAAAb,MAAA,CAAqBmL,MAAM,CAAC/F,IAAI,yBAAoB,CAAC,CACrF,SACF,CACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,oBAAoB,EAAI8F,GAAG,GAAK,oBAAoB,GAAKE,OAAO,CAAE,CACvFtO,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEA,MAAM,CAACrE,WAAW,CAAG,IAAI,CAAE,CAAC,CAAE5G,IAAI,CAACvC,KAAK,CAAC,CAChFkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,yDAAAwB,MAAA,CAAiDmL,MAAM,CAAC/F,IAAI,iBAAe,CAAC,CAC/EvE,eAAe,CAAC,oBAAoB,uBAAAb,MAAA,CAAqBmL,MAAM,CAAC/F,IAAI,aAAW,CAAC,CAChF,SACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,eAAe,EAAI8F,GAAG,GAAK,eAAe,GAAKM,UAAU,CAAE,CAChF1O,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEpO,eAAe,CAACoO,MAAM,CAAE,CAAC,CAAC,CAAE,eAAe,CAAC,CAAE,CAAC,CAAEjL,IAAI,CAACvC,KAAK,CAAC,CACnGkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,oDAAAwB,MAAA,CAA4CmL,MAAM,CAAC/F,IAAI,iBAAe,CAAC,CAC1E,SACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,gBAAgB,EAAI8F,GAAG,GAAK,iBAAiB,GAAKS,UAAU,CAAE,CACnF7O,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEpO,eAAe,CAACoO,MAAM,CAAE,CAAC,CAAC,CAAE,gBAAgB,CAAC,CAAE,CAAC,CAAEjL,IAAI,CAACvC,KAAK,CAAC,CACpGkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,wDAAAwB,MAAA,CAA6CmL,MAAM,CAAC/F,IAAI,iBAAe,CAAC,CAC3E,SACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,oBAAoB,EAAI8F,GAAG,GAAK,oBAAoB,GAAKK,UAAU,CAAE,CAC1FzO,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEpO,eAAe,CAACoO,MAAM,CAAE,CAAC,CAAC,CAAE,oBAAoB,CAAC,CAAE,CAAC,CAAEjL,IAAI,CAACvC,KAAK,CAAC,CACxGkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,yDAAAwB,MAAA,CAAiDmL,MAAM,CAAC/F,IAAI,iBAAe,CAAC,CAC/E,SACF,CACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,kBAAkB,EAAI8F,GAAG,GAAK,kBAAkB,GAAKK,UAAU,CAAE,KAAAO,iBAAA,CACtF;AACA,KAAM,CAAAC,QAAQ,CAAA5L,aAAA,CAAAA,aAAA,KAAA2L,iBAAA,CAAQ5L,IAAI,CAACtB,WAAW,UAAAkN,iBAAA,iBAAhBA,iBAAA,CAAmBpB,YAAY,CAAC,MAAEsB,wBAAwB,CAAE,IAAI,EAAE,CACxF9L,IAAI,CAACtB,WAAW,CAAAuB,aAAA,CAAAA,aAAA,IAAQD,IAAI,CAACtB,WAAW,MAAE,CAAC8L,YAAY,EAAGqB,QAAQ,EAA8B,CAChGlB,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,uDAAAwB,MAAA,CAA+CmL,MAAM,CAAC/F,IAAI,wCAAsC,CAAC,CACpG,SACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,YAAY,EAAI8F,GAAG,GAAK,YAAY,GAAKG,KAAK,CAAE,CACrE,KAAM,CAAApN,KAAK,CAAAkC,aAAA,IAAQD,IAAI,CAACjC,KAAK,CAAwB,CACrD,GAAIA,KAAK,CAACyM,YAAY,CAAC,CAAChH,MAAM,CAAG,CAAC,CAAE,CAClCzF,KAAK,CAACyM,YAAY,CAAC,CAAGzM,KAAK,CAACyM,YAAY,CAAC,CAAC9H,KAAK,CAAC,CAAC,CAAC,CAClD1C,IAAI,CAACjC,KAAK,CAAGA,KAAK,CACpB,CACA4M,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,kDAAAwB,MAAA,CAA0C0K,YAAY,sBAAoB,CAAC,CAC9E,SACF,CACA,GAAI,CAAC,CAAApK,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,kBAAkB,EAAI8F,GAAG,GAAK,kBAAkB,IAAMG,KAAK,EAAI,CAAC,gBAAgB,CAAE,kBAAkB,CAAE,WAAW,CAAE,gBAAgB,CAAC,CAACxD,QAAQ,CAACsD,MAAM,CAAC/F,IAAI,CAAC,CAAC,CAAE,CAClLtI,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEA,MAAM,CAACrE,WAAW,CAAG,IAAI,CAAE,CAAC,CAAE5G,IAAI,CAACvC,KAAK,CAAC,CAChFkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,uDAAAwB,MAAA,CAA+CmL,MAAM,CAAC/F,IAAI,iBAAe,CAAC,CAC7E,SACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,eAAe,EAAI8F,GAAG,GAAK,eAAe,GAAKI,UAAU,CAAE,CAChF,KAAM,CAAAW,GAAG,CAAGjP,gBAAgB,CAACmO,MAAM,CAAAhL,aAAA,CAAAA,aAAA,IAAcD,IAAI,MAAE/B,KAAK,EAAe,CAAC,CAC5E,GAAI8N,GAAG,CAAE,CACP,KAAM,CAAAC,GAAG,CAAG,CAAC,GAAG/N,KAAK,CAAC8N,GAAG,CAACnH,MAAM,CAAC,CAACmH,GAAG,CAACP,IAAI,CAAC,CAAC,CAC5C,KAAM,CAAAS,GAAG,CAAGD,GAAG,CAACE,SAAS,CAACtG,CAAC,EAAIA,CAAC,CAACuG,GAAG,GAAKlB,MAAM,CAACkB,GAAG,CAAC,CACpD,GAAIF,GAAG,EAAI,CAAC,CAAE,CACZD,GAAG,CAACvI,MAAM,CAACwI,GAAG,CAAE,CAAC,CAAC,CAClBhO,KAAK,CAAAgC,aAAA,CAAAA,aAAA,IACAhC,KAAK,MACR,CAAC8N,GAAG,CAACnH,MAAM,EAAA3E,aAAA,CAAAA,aAAA,IACNhC,KAAK,CAAC8N,GAAG,CAACnH,MAAM,CAAC,MACpB,CAACmH,GAAG,CAACP,IAAI,EAAGQ,GAAG,EAChB,EACoB,CACzB,CACF,CACArB,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,oDAAAwB,MAAA,CAA4CmL,MAAM,CAAC/F,IAAI,iBAAY,CAAC,CACvE,SACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,wBAAwB,EAAI8F,GAAG,GAAK,wBAAwB,GAAKU,SAAS,CAAE,CACjG;AACA9O,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEA,MAAM,CAACrE,WAAW,CAAG,IAAI,CAAE,CAAC,CAAE5G,IAAI,CAACvC,KAAK,CAAC,CAChFkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,6DAAAwB,MAAA,CAAqDmL,MAAM,CAAC/F,IAAI,mBAAc,CAAC,CAClF,SACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,cAAc,EAAI8F,GAAG,GAAK,cAAc,GAAKW,aAAa,CAAE,CACjF;AACA/O,sBAAsB,CAACqO,MAAM,CAAE,IAAM,CAAEA,MAAM,CAAC/E,SAAS,CAAG,CAAC,CAAE,CAAC,CAAElG,IAAI,CAACvC,KAAK,CAAC,CAC3EkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,mDAAAwB,MAAA,CAA2CmL,MAAM,CAAC/F,IAAI,8BAAyB,CAAC,CACnF,SACF,CACF,CAEA;AACA,GAAIuF,KAAK,CAACtF,IAAI,GAAK,mBAAmB,CAAE,KAAAiH,WAAA,CAAAC,YAAA,CACtC,KAAM,CAAAC,oBAAoB,CAAG5B,cAAc,CAACF,YAAY,CAAC,CAAC9E,MAAM,CAAClC,MAAM,CACvE,KAAM,CAAA+I,oBAAoB,CAAG7B,cAAc,CAACF,YAAY,CAAC,CAAClD,KAAK,CAAC9D,MAAM,CAEtE;AACA,GAAI,CAAC,CAAApD,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,yBAAyB,EAAI8F,GAAG,GAAK,0BAA0B,GAAKsB,oBAAoB,CAAG,CAAC,CAAE,CACnH;AACA,KAAM,CAAA7G,QAAQ,CAAG,CAAC,GAAGiF,cAAc,CAACF,YAAY,CAAC,CAAC9E,MAAM,CAAC,CACzD,GAAID,QAAQ,CAACjC,MAAM,CAAG,CAAC,CAAE,CACvBiC,QAAQ,CAAC+G,GAAG,CAAC,CAAC,CAAE;AAChBvO,KAAK,CAAAgC,aAAA,CAAAA,aAAA,IAAQhC,KAAK,MAAE,CAACuM,YAAY,EAAAvK,aAAA,CAAAA,aAAA,IAAQhC,KAAK,CAACuM,YAAY,CAAC,MAAE9E,MAAM,CAAED,QAAQ,EAAE,EAAwB,CAC1G,CACAkF,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,0FAA4E,CAAC,CAChF,SACF,CAEA;AACA,GAAI,CAAC,CAAA8B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,uBAAuB,EAAI8F,GAAG,GAAK,uBAAuB,GAAKuB,oBAAoB,CAAG,CAAC,CAAE,CAC9G,KAAM,CAAAE,QAAQ,CAAG/B,cAAc,CAACF,YAAY,CAAC,CAAClD,KAAK,CAAC3B,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CACrG,GAAIqH,QAAQ,CAACjJ,MAAM,CAAG,CAAC,CAAE,CACvB5G,sBAAsB,CAAC6P,QAAQ,CAAC,CAAC,CAAC,CAAE,IAAM,CAAEA,QAAQ,CAAC,CAAC,CAAC,CAAC7F,WAAW,CAAG,IAAI,CAAE,CAAC,CAAE5G,IAAI,CAACvC,KAAK,CAAC,CAC5F,CACAkN,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,+FAAoF,CAAC,CACxF,SACF,CAEA;AACA,GAAI,CAAC,CAAA8B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,uBAAuB,EAAI8F,GAAG,GAAK,uBAAuB,GAAKsB,oBAAoB,EAAI,CAAC,CAAE,KAAAI,kBAAA,CAC/G;AACA,KAAM,CAAAb,QAAQ,CAAA5L,aAAA,CAAAA,aAAA,KAAAyM,kBAAA,CAAQ1M,IAAI,CAACtB,WAAW,UAAAgO,kBAAA,iBAAhBA,kBAAA,CAAmBlC,YAAY,CAAC,MAAEmC,wBAAwB,CAAE,IAAI,EAAE,CACxF3M,IAAI,CAACtB,WAAW,CAAAuB,aAAA,CAAAA,aAAA,IAAQD,IAAI,CAACtB,WAAW,MAAE,CAAC8L,YAAY,EAAGqB,QAAQ,EAA8B,CAChGlB,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,2FAAmF,CAAC,CACvF,SACF,CAEA;AACA,GAAI,CAAC,CAAA8B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,yBAAyB,EAAI8F,GAAG,GAAK,0BAA0B,GAAKP,KAAK,CAACtF,IAAI,GAAK,aAAa,EAAI,EAAAiH,WAAA,CAAA3B,KAAK,CAAC3F,IAAI,UAAAsH,WAAA,iBAAVA,WAAA,CAAYhH,IAAI,IAAK,MAAM,CAAE,CACtJ,KAAM,CAAAC,QAAQ,CAAGoF,KAAK,CAAC3F,IAAmB,CAC1C,KAAM,CAAA8H,iBAAiB,CAAGvH,QAAQ,CAACF,IAAI,GAAK,mBAAmB,EAAKE,QAAQ,CAACwH,EAAE,EAAI,CAAE,CACrF,GAAID,iBAAiB,CAAE,CACrB;AACA,KAAM,CAAA7O,KAAK,CAAAkC,aAAA,IAAQD,IAAI,CAACjC,KAAK,CAAwB,CACrDA,KAAK,CAACyM,YAAY,CAAC,CAAC3H,IAAI,CAAC4H,KAAK,CAAC3F,IAAI,CAAC,CACpC9E,IAAI,CAACjC,KAAK,CAAGA,KAAK,CAClB4M,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,iEAAAwB,MAAA,CAAsD2K,KAAK,CAAC3F,IAAI,CAACI,IAAI,qBAAmB,CAAC,CAC5F,SACF,CACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,gBAAgB,EAAI8F,GAAG,GAAK,gBAAgB,GAAKP,KAAK,CAACtF,IAAI,GAAK,aAAa,EAAIsF,KAAK,CAACe,IAAI,GAAK,QAAQ,CAAE,CAC/H;AACA,KAAM,CAAA/F,QAAQ,CAAGxH,KAAK,CAACuM,YAAY,CAAC,CAAC9E,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAC7F,GAAIK,QAAQ,CAACjC,MAAM,EAAI,CAAC,CAAE,CACxB3G,eAAe,CAAC4I,QAAQ,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,gBAAgB,CAAC,CAClD5I,eAAe,CAAC4I,QAAQ,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,gBAAgB,CAAC,CAClDkF,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,qDAAAwB,MAAA,CAA6C2F,QAAQ,CAAC,CAAC,CAAC,CAACP,IAAI,UAAApF,MAAA,CAAQ2F,QAAQ,CAAC,CAAC,CAAC,CAACP,IAAI,iBAAe,CAAC,CACxG,SACF,CACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,4BAA4B,EAAI8F,GAAG,GAAK,2BAA2B,GAAKP,KAAK,CAACtF,IAAI,GAAK,aAAa,EAAI,EAAAkH,YAAA,CAAA5B,KAAK,CAAC3F,IAAI,UAAAuH,YAAA,iBAAVA,YAAA,CAAYjH,IAAI,IAAK,MAAM,CAAE,CAC1J,KAAM,CAAAC,QAAQ,CAAGoF,KAAK,CAAC3F,IAAmB,CAC1C,GAAIO,QAAQ,CAACF,IAAI,GAAK,cAAc,CAAE,CACpC;AACA,KAAM,CAAApH,KAAK,CAAAkC,aAAA,IAAQD,IAAI,CAACjC,KAAK,CAAwB,CACrDA,KAAK,CAACyM,YAAY,CAAC,CAAC3H,IAAI,CAAC4H,KAAK,CAAC3F,IAAI,CAAC,CACpC9E,IAAI,CAACjC,KAAK,CAAGA,KAAK,CAClB4M,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,sEAAAwB,MAAA,CAAyD2K,KAAK,CAAC3F,IAAI,CAACI,IAAI,qBAAmB,CAAC,CAC/F,SACF,CACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,UAAU,EAAI8F,GAAG,GAAK,UAAU,GAAKP,KAAK,CAACtF,IAAI,GAAK,aAAa,EAAIsF,KAAK,CAACe,IAAI,GAAK,QAAQ,CAAE,CACnH,KAAM,CAAA7E,WAAW,CAAG1I,KAAK,CAACyI,QAAQ,CAAC,CAAChB,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAC5F,GAAIuB,WAAW,CAACnD,MAAM,CAAG,CAAC,CAAE,CAC1B;AACA,KAAM,CAAAsJ,WAAW,CAAGnG,WAAW,CAACoG,MAAM,CAAC,CAACC,OAAO,CAAEtP,OAAO,GACrDA,OAAO,CAACwI,SAAS,CAAG8G,OAAO,CAAC9G,SAAS,CAAIxI,OAAO,CAAGsP,OACtD,CAAC,CACD;AACA,KAAM,CAAAjP,KAAK,CAAAkC,aAAA,IAAQD,IAAI,CAACjC,KAAK,CAAwB,CACrD,KAAM,CAAAkP,QAAQ,CAAAhN,aAAA,CAAAA,aAAA,IAAQ6M,WAAW,MAAEX,GAAG,CAAE3M,IAAI,CAAC0N,GAAG,CAAC,CAAC,CAAG7I,IAAI,CAAC4C,MAAM,CAAC,CAAC,EAAE,CACpElJ,KAAK,CAAC2I,QAAQ,CAAC,CAAC7D,IAAI,CAACoK,QAAQ,CAAC,CAC9BjN,IAAI,CAACjC,KAAK,CAAGA,KAAK,CAClB4M,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,yDAAAwB,MAAA,CAAiDgN,WAAW,CAAC5H,IAAI,cAAY,CAAC,CACjF,SACF,CACF,CAEA;AACA,GAAI,CAAC,CAAA9E,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,gBAAgB,EAAI8F,GAAG,GAAK,gBAAgB,GAAKP,KAAK,CAACtF,IAAI,GAAK,aAAa,CAAE,CACpG;AACA,KAAM,CAAAgI,WAAW,CAAGlP,KAAK,CAACuM,YAAY,CAAC,CAAClD,KAAK,CAACxH,MAAM,CAAC7B,KAAK,CAACuM,YAAY,CAAC,CAAC9E,MAAM,CAAC,CAChF,KAAM,CAAA0H,aAAa,CAAGD,WAAW,CAACE,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,MAAM,EAAKQ,CAAC,CAAiBT,IAAI,GAAK,mBAAmB,CAAC,CACjH,KAAM,CAAAmI,SAAS,CAAGH,WAAW,CAACE,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,MAAM,EAAKQ,CAAC,CAAiBT,IAAI,GAAK,sBAAsB,CAAC,CAChH,GAAIiI,aAAa,EAAIE,SAAS,CAAE,CAC9B;AACA,KAAM,CAAAb,QAAQ,CAAGxO,KAAK,CAACuM,YAAY,CAAC,CAAClD,KAAK,CAAC3B,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,MAAM,EAAKQ,CAAC,CAAiBT,IAAI,GAAK,sBAAsB,CAAC,CAC/H,GAAIsH,QAAQ,CAACjJ,MAAM,CAAG,CAAC,CAAE,CACvB,KAAM,CAAA+J,WAAW,CAAGd,QAAQ,CAACA,QAAQ,CAACjJ,MAAM,CAAG,CAAC,CAAC,CACjD,KAAM,CAAAwI,GAAG,CAAG,CAAC,GAAG/N,KAAK,CAACuM,YAAY,CAAC,CAAClD,KAAK,CAAC,CAC1C,KAAM,CAAA2E,GAAG,CAAGD,GAAG,CAACE,SAAS,CAACtG,CAAC,EAAIA,CAAC,CAACuG,GAAG,GAAKoB,WAAW,CAACpB,GAAG,CAAC,CACzD,GAAIF,GAAG,EAAI,CAAC,CAAE,CACZD,GAAG,CAACvI,MAAM,CAACwI,GAAG,CAAE,CAAC,CAAC,CAClBhO,KAAK,CAAAgC,aAAA,CAAAA,aAAA,IACAhC,KAAK,MACR,CAACuM,YAAY,EAAAvK,aAAA,CAAAA,aAAA,IAAQhC,KAAK,CAACuM,YAAY,CAAC,MAAElD,KAAK,CAAE0E,GAAG,EAAE,EACjC,CACzB,CACF,CACArB,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,uFAA4E,CAAC,CAChF,SACF,CACF,CAEA;AACA,GAAK,CAAA8B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE8E,IAAI,IAAK,aAAa,EAAI8F,GAAG,GAAK,aAAa,CAAG,CAC9D,KAAM,CAAAwC,eAAe,CAAGnR,MAAM,CAAC,CAAC,GAAG4B,KAAK,CAACyI,QAAQ,CAAC,CAAChB,MAAM,CAAC,CAAC,CAC3D,KAAM,CAAA+H,iBAAiB,CAAGpR,MAAM,CAAC,CAAC,GAAG4B,KAAK,CAACuM,YAAY,CAAC,CAAC9E,MAAM,CAAC,CAAC,CACjE,GAAI+H,iBAAiB,CAAGD,eAAe,CAAE,CACvC,KAAM,CAAA7G,WAAW,CAAG1I,KAAK,CAACyI,QAAQ,CAAC,CAAChB,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAC5F,GAAIuB,WAAW,CAACnD,MAAM,CAAG,CAAC,CAAE,CAC1B;AACA3G,eAAe,CAAC8J,WAAW,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAAE,aAAa,CAAC,CAClDgE,QAAQ,CAAClH,MAAM,CAACoH,CAAC,CAAE,CAAC,CAAC,CAAEA,CAAC,EAAE,CAAED,YAAY,CAAG,IAAI,CAC/CtM,GAAG,kDAAAwB,MAAA,CAA0C6G,WAAW,CAAC,CAAC,CAAC,CAACzB,IAAI,iBAAe,CAAC,CAChF,SACF,CACF,CACF,CACF,CACF,CAEA,GAAI0F,YAAY,CAAE,CAChB,KAAM,CAAAnB,QAAQ,CAAAxJ,aAAA,CAAAA,aAAA,IAAQD,IAAI,CAAChC,KAAK,MAAE,CAAC0I,QAAQ,EAAGiE,QAAQ,EAAwB,CAC9E,MAAO,CAAC1M,KAAK,CAAEwL,QAAQ,CAAC,CAC1B,CACA,MAAO,CAAC,IAAI,CAAE,IAAI,CAAC,CACrB,CAAC,CAED;AACA,KAAM,CAAAiE,kBAAkB,CAAG1R,WAAW,CAAE+I,KAAgB,EAAgB,CACtE,GAAI,CAACA,KAAK,CAACpG,WAAW,EAAIoG,KAAK,CAACpG,WAAW,CAACgP,KAAK,CAACnK,MAAM,GAAK,CAAC,CAAE,CAC9D,MAAO,CAAAuB,KAAK,CACd,CAEA,KAAM,CAAC6I,QAAQ,CAAE3I,QAAQ,CAAC,CAAGjI,kBAAkB,CAAC6Q,YAAY,CAC1D9I,KAAK,CAACpG,WAAW,CACjBoG,KAAK,CACLzG,GACF,CAAC,CAED,OAAA2B,aAAA,CAAAA,aAAA,IACKgF,QAAQ,MACXtG,WAAW,CAAEiP,QAAQ,GAEzB,CAAC,CAAE,CAACtP,GAAG,CAAC,CAAC,CAET;AACA,KAAM,CAAAwP,eAAe,CAAGA,CAAC/I,KAAgB,CAAEH,MAAc,GAAa,CACpE,KAAM,CAAAa,QAAQ,CAAGV,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAC7F,KAAM,CAAAsB,QAAgB,CAAG9B,MAAM,GAAK,CAAC,CAAG,CAAC,CAAG,CAAC,CAC7C,GAAI,CAAAmJ,KAAK,CAAG,CAAC,CAEb;AACAhO,OAAO,CAACzB,GAAG,kCAAAwB,MAAA,CAAwB8E,MAAM,gBAAA9E,MAAA,CAAc2F,QAAQ,CAACjC,MAAM,uBACpEiC,QAAQ,CAACM,GAAG,CAACH,CAAC,KAAA9F,MAAA,CAAO8F,CAAC,CAACV,IAAI,MAAApF,MAAA,CAAI8F,CAAC,CAACM,SAAS,MAAI,CAAC,CAAC8H,IAAI,CAAC,IAAI,CAAC,CAAC,CAE7DvI,QAAQ,CAAC9C,OAAO,CAACmC,IAAI,EAAI,CACvB,GAAI,CAAAoB,SAAS,CAAGpB,IAAI,CAACoB,SAAS,CAE9B;AACA,KAAM,CAAA+H,OAAO,CAAGlJ,KAAK,CAAC7G,cAAc,CAAC0G,MAAM,CAAC,CAACzG,UAAU,CACvD,KAAM,CAAA+P,OAAO,CAAGnJ,KAAK,CAAC7G,cAAc,CAAC0G,MAAM,CAAC,CAACxG,MAAM,CAEnD;AACA,GAAI,CAAA6P,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE7I,IAAI,IAAK,MAAM,EAAK6I,OAAO,CAAiB/I,IAAI,GAAK,iBAAiB,CAAE,CACnF,GAAIJ,IAAI,CAACyG,CAAC,GAAK,CAAC,CAAErF,SAAS,EAAI,CAAC,CAClC,CAEA;AACA,GAAI,CAAA+H,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE7I,IAAI,IAAK,MAAM,EAAK6I,OAAO,CAAiB/I,IAAI,GAAK,kBAAkB,CAAE,CACpF,GAAIJ,IAAI,CAACyG,CAAC,GAAK,CAAC,CAAErF,SAAS,EAAI,CAAC,CAClC,CAEA;AACA,GAAI,CAAAgI,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE9I,IAAI,IAAK,MAAM,EAAK8I,OAAO,CAAiBhJ,IAAI,GAAK,mBAAmB,CAAE,CACrF,KAAM,CAAAiJ,aAAa,CAAG,CAAC,gBAAgB,CAAE,kBAAkB,CAAE,WAAW,CAAE,gBAAgB,CAAC,CAC3F,KAAM,CAAAC,WAAW,CAAGrJ,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CAAC+F,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,MAAM,EAAKQ,CAAC,CAAiBT,IAAI,GAAK,sBAAsB,EAAIgJ,aAAa,CAACxG,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAAC,CAAC,CAClK,GAAIkJ,WAAW,CAAElI,SAAS,EAAI,CAAC,CACjC,CAEA;AACA,GAAIpB,IAAI,CAACI,IAAI,GAAK,iBAAiB,EAAKJ,IAAI,CAASpE,MAAM,GAAK,WAAW,CAAE,CAC3E,KAAM,CAAA2N,UAAU,CAAGtJ,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CAAC+F,IAAI,CAACzH,CAAC,EACjDA,CAAC,CAACR,IAAI,GAAK,MAAM,EAChBQ,CAAC,CAAiBT,IAAI,GAAK,sBAAsB,EACjDS,CAAC,CAAS0I,GAAG,GAAK,KACrB,CAAC,CACD,GAAID,UAAU,CAAE,CACdnI,SAAS,EAAI,CAAC,CACd;AACA,GAAI,CAAEpB,IAAI,CAASyJ,eAAe,CAAE,CAClCxO,OAAO,CAACzB,GAAG,uEAA6D,CAAC,CACxEwG,IAAI,CAASyJ,eAAe,CAAG,IAAI,CACtC,CACF,CAAC,IAAM,CACJzJ,IAAI,CAASyJ,eAAe,CAAG,KAAK,CACvC,CACF,CAEA;AACA,GAAI,CAAAN,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE7I,IAAI,IAAK,MAAM,EAAK6I,OAAO,CAAiB/I,IAAI,GAAK,uBAAuB,CAAE,CACzF,KAAM,CAAAsJ,gBAAgB,CAAG,CAAC,iBAAiB,CAAE,cAAc,CAAE,YAAY,CAAE,gBAAgB,CAAE,kBAAkB,CAAE,WAAW,CAAE,gBAAgB,CAAC,CAC/I,KAAM,CAAAC,cAAc,CAAG1J,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CAAC+F,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,MAAM,EAAKQ,CAAC,CAAiBT,IAAI,GAAK,sBAAsB,EAAIqJ,gBAAgB,CAAC7G,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAAC,CAAC,CACxK,GAAI,CAACuJ,cAAc,CAAEvI,SAAS,EAAI,CAAC,CACrC,CAEA;AACA,KAAM,CAAAwI,UAAU,CAAG3J,KAAK,CAAC7G,cAAc,CAACwI,QAAQ,CAAC,CAACtI,MAAM,CACxD,GAAI,CAAAsQ,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEtJ,IAAI,IAAK,MAAM,EAAKsJ,UAAU,CAAiBxJ,IAAI,GAAK,oBAAoB,CAAE,CAC5F;AACA;AAAA,CAGF6I,KAAK,EAAI7H,SAAS,CACpB,CAAC,CAAC,CAEF;AACAnG,OAAO,CAACzB,GAAG,kCAAAwB,MAAA,CAAwB8E,MAAM,yBAAA9E,MAAA,CAAuBiO,KAAK,CAAE,CAAC,CACxE,MAAO,CAAAA,KAAK,CACd,CAAC,CAED;AAEA;AAEA,KAAM,CAAAY,2BAA2B,CAAG3S,WAAW,CAAC,CAAC4I,MAAc,CAAEG,KAAgB,GAAK,CACpFjE,eAAe,CAAC,6BAA6B,CAAE,CAAE8D,MAAM,CAAEnH,KAAK,CAAEsH,KAAK,CAACtH,KAAM,CAAC,CAAE,4BAA4B,CAAC,CAE5G,KAAM,CAAAmR,IAAI,CAAG,CAAC,GAAG7J,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CAAE,GAAGvC,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CAAC,CAC1EkJ,IAAI,CAACjM,OAAO,CAACiD,CAAC,EAAI,CACd,GAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAE,CACtB,KAAM,CAAAwC,OAAO,CAAGhC,CAAmB,CACnC,GAAIgC,OAAO,CAACiH,WAAW,EAAIjH,OAAO,CAACiH,WAAW,CAACpR,KAAK,GAAKsH,KAAK,CAACtH,KAAK,CAAE,CACpE,KAAM,CAAAwI,YAAY,CAAG2B,OAAO,CAAC1B,SAAS,CACtCrJ,eAAe,CAAC+K,OAAO,CAAEA,OAAO,CAACiH,WAAW,CAACC,MAAM,CAAE,iBAAiB,CAAC,CACvE,KAAM,CAAA3I,YAAY,CAAGyB,OAAO,CAAC1B,SAAS,CACtC5H,GAAG,8BAAAwB,MAAA,CAA8B8H,OAAO,CAAC1C,IAAI,OAAApF,MAAA,CAAKmG,YAAY,aAAAnG,MAAA,CAAMqG,YAAY,CAAE,CAAC,CACnFyB,OAAO,CAACiH,WAAW,CAAG,IAAI,CAC5B,CACA;AACAjH,OAAO,CAACmH,eAAe,CAAG,KAAK,CACjC,CACF,CAAC,CAAC,CAEF;AACA,KAAM,CAAAd,OAAO,CAAGlJ,KAAK,CAAC7G,cAAc,CAAC0G,MAAM,CAAC,CAACzG,UAAU,CACvD,KAAM,CAAA+P,OAAO,CAAGnJ,KAAK,CAAC7G,cAAc,CAAC0G,MAAM,CAAC,CAACxG,MAAM,CAEnD,GAAI6P,OAAO,EAAIA,OAAO,CAAC7I,IAAI,GAAK,MAAM,CAAE,CACtC,KAAM,CAAA4J,aAAa,CAAGf,OAAsB,CAC5CnN,eAAe,CAAC,0BAA0B,CAAE,CAAEmO,IAAI,CAAE,YAAY,CAAEC,UAAU,CAAEF,aAAa,CAAC9J,IAAK,CAAC,CAAE,4CAA4C,CAAC,CAEjJ,GAAI8J,aAAa,CAAC9J,IAAI,GAAK,oBAAoB,CAAE,CAC/C;AACA,KAAM,CAAAiK,aAAa,CAAGP,IAAI,CAACjJ,MAAM,CAACC,CAAC,EACjCA,CAAC,CAACR,IAAI,GAAK,KAAK,EAChB,CAAC,WAAW,CAAE,YAAY,CAAE,cAAc,CAAE,gBAAgB,CAAE,eAAe,CAAE,YAAY,CAAE,iBAAiB,CAAE,cAAc,CAAE,SAAS,CAAE,cAAc,CAAE,kBAAkB,CAAC,CAACuC,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAChM,CAAqB,CAErB5D,WAAW,CAAC,gBAAgB,CAAE,gBAAgB,CAAE,CAC9CuE,KAAK,CAAEsJ,aAAa,CAAC3L,MAAM,CAC3BsC,KAAK,CAAEqJ,aAAa,CAACpJ,GAAG,CAACH,CAAC,GAAK,CAAEV,IAAI,CAAEU,CAAC,CAACV,IAAI,CAAEgB,SAAS,CAAEN,CAAC,CAACR,IAAI,GAAK,KAAK,CAAIQ,CAAC,CAASM,SAAS,CAAG,CAAE,CAAC,CAAC,CAC1G,CAAC,CAAE,sDAAsD,CAAC,CAE1D,GAAI,CAAAkJ,oBAAoB,CAAG,CAAC,CAC5BD,aAAa,CAACxM,OAAO,CAACmC,IAAI,EAAI,CAC5B,KAAM,CAAAmB,YAAY,CAAGnB,IAAI,CAACoB,SAAS,CACnCrJ,eAAe,CAACiI,IAAI,CAAE,CAAC,CAAE,oBAAoB,CAAC,CAC9C,KAAM,CAAAqB,YAAY,CAAGrB,IAAI,CAACoB,SAAS,CACnCkJ,oBAAoB,EAAI,CAAC,CACzB5O,aAAa,CAAC,oBAAoB,IAAAV,MAAA,CAAKgF,IAAI,CAACI,IAAI,6BAAApF,MAAA,CAAwBmG,YAAY,aAAAnG,MAAA,CAAMqG,YAAY,KAAG,CAAC,CAC5G,CAAC,CAAC,CAEF,GAAIgJ,aAAa,CAAC3L,MAAM,CAAG,CAAC,CAAE,CAC5BhD,aAAa,CAAC,oBAAoB,IAAAV,MAAA,CAAKqP,aAAa,CAAC3L,MAAM,4BAAA1D,MAAA,CAA0BsP,oBAAoB,6CAAwC,CAAC,CACpJ,CAAC,IAAM,CACLpN,UAAU,CAAC,yBAAyB,CAAE,0CAA0C,CAAC,CACnF,CACF,CACF,CAEA,GAAIkM,OAAO,EAAIA,OAAO,CAAC9I,IAAI,GAAK,MAAM,CAAE,CACtC,KAAM,CAAAiK,aAAa,CAAGnB,OAAsB,CAC5CpN,eAAe,CAAC,0BAA0B,CAAE,CAAEmO,IAAI,CAAE,QAAQ,CAAEC,UAAU,CAAEG,aAAa,CAACnK,IAAK,CAAC,CAAE,wCAAwC,CAAC,CAEzI,GAAImK,aAAa,CAACnK,IAAI,GAAK,yBAAyB,CAAE,CACpD;AACA,KAAM,CAAAoK,UAAU,CAAGV,IAAI,CAACjJ,MAAM,CAACC,CAAC,EAC9BA,CAAC,CAACR,IAAI,GAAK,KAAK,EAChB,CAAC,eAAe,CAAE,iBAAiB,CAAE,UAAU,CAAE,YAAY,CAAC,CAACuC,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAChF,CAAqB,CAErB5D,WAAW,CAAC,gBAAgB,CAAE,aAAa,CAAE,CAC3CuE,KAAK,CAAEyJ,UAAU,CAAC9L,MAAM,CACxBsC,KAAK,CAAEwJ,UAAU,CAACvJ,GAAG,CAACH,CAAC,GAAK,CAAEV,IAAI,CAAEU,CAAC,CAACV,IAAI,CAAEgB,SAAS,CAAEN,CAAC,CAACR,IAAI,GAAK,KAAK,CAAIQ,CAAC,CAASM,SAAS,CAAG,CAAE,CAAC,CAAC,CACvG,CAAC,CAAE,wDAAwD,CAAC,CAE5D,GAAI,CAAAkJ,oBAAoB,CAAG,CAAC,CAC5BE,UAAU,CAAC3M,OAAO,CAACmC,IAAI,EAAI,CACzB,KAAM,CAAAmB,YAAY,CAAGnB,IAAI,CAACoB,SAAS,CACnCrJ,eAAe,CAACiI,IAAI,CAAE,CAAC,CAAE,yBAAyB,CAAC,CACnD,KAAM,CAAAqB,YAAY,CAAGrB,IAAI,CAACoB,SAAS,CACnCkJ,oBAAoB,EAAI,CAAC,CACzB5O,aAAa,CAAC,yBAAyB,IAAAV,MAAA,CAAKgF,IAAI,CAACI,IAAI,6BAAApF,MAAA,CAAwBmG,YAAY,aAAAnG,MAAA,CAAMqG,YAAY,KAAG,CAAC,CACjH,CAAC,CAAC,CAEF,GAAImJ,UAAU,CAAC9L,MAAM,CAAG,CAAC,CAAE,CACzBhD,aAAa,CAAC,yBAAyB,IAAAV,MAAA,CAAKwP,UAAU,CAAC9L,MAAM,+BAAA1D,MAAA,CAA6BsP,oBAAoB,6CAAwC,CAAC,CACzJ,CAAC,IAAM,CACLpN,UAAU,CAAC,sBAAsB,CAAE,+CAA+C,CAAC,CACrF,CACF,CACF,CAEA;AAEAlB,eAAe,CAAC,6BAA6B,CAAE,CAAE8D,MAAO,CAAC,CAAE,6BAA6B,CAAC,CAC3F,CAAC,CAAE,CAAC9D,eAAe,CAAEQ,WAAW,CAAEd,aAAa,CAAEwB,UAAU,CAAC,CAAC,CAE7D;AACA,KAAM,CAAAuN,iBAAiB,CAAGA,CAAC3K,MAAc,CAAEG,KAAgB,GAAc,CACvE,KAAM,CAAAyK,GAAG,CAAGzK,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CACtC,KAAM,CAAA+J,KAAK,CAAG,CAAC,gBAAgB,CAAC,CAChC,MAAO,CAAAD,GAAG,CAACnC,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,EAAIqK,KAAK,CAAC9H,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAAC,EAAI,CAAEU,CAAC,CAAoBgB,WAAW,CAAC,CACxG,CAAC,CAED;AACA,KAAM,CAAA8I,eAAe,CAAGA,CAAC9K,MAAc,CAAEG,KAAgB,GAAc,CACrE,KAAM,CAAA4K,GAAG,CAAG5K,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CACrC,KAAM,CAAAmI,KAAK,CAAG,CAAC,gBAAgB,CAAE,kBAAkB,CAAE,WAAW,CAAE,gBAAgB,CAAC,CACnF,MAAO,CAAAE,GAAG,CAACtC,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,EAAIqK,KAAK,CAAC9H,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAAC,EAAI,CAAEU,CAAC,CAAoBgB,WAAW,CAAC,CACxG,CAAC,CAED;AACA,KAAM,CAAAgJ,eAAe,CAAGA,CAAChL,MAAc,CAAEG,KAAgB,GAAc,CACrE,KAAM,CAAA4K,GAAG,CAAG5K,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CACrC,KAAM,CAAAmI,KAAK,CAAG,CAAC,iBAAiB,CAAE,UAAU,CAAE,SAAS,CAAE,cAAc,CAAC,CACxE,MAAO,CAAAE,GAAG,CAACtC,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,EAAIqK,KAAK,CAAC9H,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAAC,EAAI,CAAEU,CAAC,CAAoBgB,WAAW,CAAC,CACxG,CAAC,CAED;AACA,KAAM,CAAAiJ,eAAe,CAAGA,CAACjL,MAAc,CAAEG,KAAgB,GAAc,CACrE,KAAM,CAAAyK,GAAG,CAAGzK,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CACtC,KAAM,CAAA+J,KAAK,CAAG,CAAC,iBAAiB,CAAE,eAAe,CAAE,sBAAsB,CAAE,kBAAkB,CAAE,cAAc,CAAE,eAAe,CAAE,wBAAwB,CAAE,cAAc,CAAE,kBAAkB,CAAE,mBAAmB,CAAC,CAClN,MAAO,CAAAD,GAAG,CAACnC,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,EAAIqK,KAAK,CAAC9H,QAAQ,CAAC/B,CAAC,CAACV,IAAI,CAAC,EAAI,CAAEU,CAAC,CAAoBgB,WAAW,CAAC,CACxG,CAAC,CAED;AACA,KAAM,CAAAkJ,yBAAyB,CAAGA,CAAClL,MAAc,CAAEG,KAAgB,GAAc,CAC/E,KAAM,CAAAkJ,OAAO,CAAGlJ,KAAK,CAAC7G,cAAc,CAAC0G,MAAM,CAAC,CAACzG,UAAU,CACvD,GAAI,CAAC8P,OAAO,EAAIA,OAAO,CAAC7I,IAAI,GAAK,MAAM,CAAE,MAAO,MAAK,CACrD,KAAM,CAAA2F,IAAI,CAAGkD,OAAsB,CACnC,MAAO,CAAC,iBAAiB,CAAE,kBAAkB,CAAC,CAACtG,QAAQ,CAACoD,IAAI,CAAC7F,IAAI,CAAC,CACpE,CAAC,CAED;AACA,KAAM,CAAA6K,4BAA4B,CAAGA,CAACnL,MAAc,CAAEG,KAAgB,GAAc,CAClF,KAAM,CAAAU,QAAQ,CAAGV,KAAK,CAAC9G,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAC7F,MAAO,CAAAK,QAAQ,CAAC4H,IAAI,CAACzH,CAAC,EAAIA,CAAC,CAACV,IAAI,GAAK,gBAAgB,EAAI,CAACU,CAAC,CAACgB,WAAW,CAAC,CAC1E,CAAC,CAED,KAAM,CAAAoJ,cAAc,CAAGhU,WAAW,CAAEiU,KAAoB,EAAK,CAC3D5Q,oBAAoB,CAAC4Q,KAAK,CAAC,CAC7B,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,QAAQ,CAAGlU,WAAW,CAAE4I,MAAc,EAAK,CAC/CzF,YAAY,CAACa,IAAI,EAAI,CACnB,GAAIA,IAAI,CAACtC,OAAO,GAAKkH,MAAM,CAAE,MAAO,CAAA5E,IAAI,CAExC,KAAM,CAAAiF,QAAQ,CAAAhF,aAAA,CAAAA,aAAA,IAAQD,IAAI,MAAErC,MAAM,CAAAsC,aAAA,CAAAA,aAAA,IAAOD,IAAI,CAACrC,MAAM,MAAE,CAACiH,MAAM,EAAG,IAAI,EAAE,EAAE,CACxEtG,GAAG,YAAAwB,MAAA,CAAY8E,MAAM,WAAS,CAAC,CAE/B;AACA,GAAIK,QAAQ,CAACtH,MAAM,CAAC,CAAC,CAAC,EAAIsH,QAAQ,CAACtH,MAAM,CAAC,CAAC,CAAC,CAAE,CAC5C,MAAO,CAAA0K,YAAY,CAACpD,QAAQ,CAAC,CAC/B,CAEA,MAAO,CAAAA,QAAQ,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,CAAC3G,GAAG,CAAE+J,YAAY,CAAC,CAAC,CAEvB;AACA,KAAM,CAAA8H,iBAAiB,CAAGnU,WAAW,CAAC,CAAC4I,MAAc,CAAEwL,WAAmB,CAAEC,SAAiB,CAAEvB,MAAc,GAAK,CAChH3P,YAAY,CAACa,IAAI,EAAI,KAAAsQ,kBAAA,CACnB,GAAItQ,IAAI,CAACtC,OAAO,GAAKkH,MAAM,CAAE,MAAO,CAAA5E,IAAI,CAExC,KAAM,CAAAuF,KAAK,EAAA+K,kBAAA,CAAGtQ,IAAI,CAACtB,WAAW,UAAA4R,kBAAA,iBAAhBA,kBAAA,CAAmB1L,MAAM,CAAC,CACxC,GAAI,CAACW,KAAK,EAAIA,KAAK,CAACgL,6BAA6B,EAAIhL,KAAK,CAACuG,wBAAwB,CAAE,MAAO,CAAA9L,IAAI,CAChG,GAAI,CAAC6P,eAAe,CAACjL,MAAM,CAAE5E,IAAI,CAAC,CAAE,MAAO,CAAAA,IAAI,CAE/C;AACA,KAAM,CAAAyF,QAAQ,CAAGzF,IAAI,CAAC/B,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CAC1C,KAAM,CAAA8K,QAAQ,CAAG/K,QAAQ,CAACgL,IAAI,CAAC7K,CAAC,EAAIA,CAAC,CAACuG,GAAG,GAAKiE,WAAW,EAAIxK,CAAC,CAACR,IAAI,GAAK,KAAK,CAAmB,CAChG,KAAM,CAAAsL,MAAM,CAAGjL,QAAQ,CAACgL,IAAI,CAAC7K,CAAC,EAAIA,CAAC,CAACuG,GAAG,GAAKkE,SAAS,EAAIzK,CAAC,CAACR,IAAI,GAAK,KAAK,CAAmB,CAE5F,GAAI,CAACoL,QAAQ,EAAI,CAACE,MAAM,EAAIF,QAAQ,CAACtK,SAAS,CAAG4I,MAAM,CAAE,MAAO,CAAA9O,IAAI,CAEpE;AACAnD,eAAe,CAAC2T,QAAQ,CAAE,CAAC1B,MAAM,CAAE,mBAAmB,CAAC,CACvDjS,eAAe,CAAC6T,MAAM,CAAE5B,MAAM,CAAE,mBAAmB,CAAC,CAEpD;AACA,KAAM,CAAAjD,QAAQ,CAAA5L,aAAA,CAAAA,aAAA,IAAQsF,KAAK,MAAEgL,6BAA6B,CAAE,IAAI,EAAE,CAClE,KAAM,CAAA3G,cAAc,CAAA3J,aAAA,CAAAA,aAAA,IAAQD,IAAI,CAACtB,WAAW,MAAE,CAACkG,MAAM,EAAGiH,QAAQ,EAA8B,CAE9FvN,GAAG,KAAAwB,MAAA,CAAK8E,MAAM,mBAAA9E,MAAA,CAAiBgP,MAAM,mBAAAhP,MAAA,CAAiB0Q,QAAQ,CAACtL,IAAI,SAAApF,MAAA,CAAO4Q,MAAM,CAACxL,IAAI,gBAAc,CAAC,CAEpG,OAAAjF,aAAA,CAAAA,aAAA,IACKD,IAAI,MACPtB,WAAW,CAAEkL,cAAc,GAE/B,CAAC,CAAC,CACJ,CAAC,CAAE,CAACtL,GAAG,CAAC,CAAC,CAET;AACA,KAAM,CAAAqS,kBAAkB,CAAG3U,WAAW,CAAE4I,MAAc,EAAK,CACzD,MAAO,CAAA3H,sBAAsB,CAAC2T,qBAAqB,CAAChM,MAAM,CAAE1F,SAAS,CAAC,CACxE,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAA2R,gBAAgB,CAAG7U,WAAW,CAAC,CAAC8U,SAAiB,CAAEC,aAAsB,GAAK,CAClF5R,YAAY,CAACa,IAAI,EAAI,CACnB,KAAM,CAAA4E,MAAM,CAAG5E,IAAI,CAACtC,OAAO,CAC3B,KAAM,CAAAsT,SAAS,CAAG/T,sBAAsB,CAAC2T,qBAAqB,CAAChM,MAAM,CAAE5E,IAAI,CAAC,CAC5E,KAAM,CAAAiR,OAAO,CAAGD,SAAS,CAACP,IAAI,CAACxN,CAAC,EAAIA,CAAC,CAACiO,EAAE,GAAKJ,SAAS,CAAC,CAEvD,GAAI,CAACG,OAAO,EAAI,CAAChU,sBAAsB,CAACkU,aAAa,CAACF,OAAO,CAAErM,MAAM,CAAE5E,IAAI,CAAC,CAAE,CAC5E,MAAO,CAAAA,IAAI,CACb,CAEA;AACA,KAAM,CAAAoR,QAAQ,CAAG,CAAC,GAAGpR,IAAI,CAAC/B,KAAK,CAAC2G,MAAM,CAAC,CAAC0C,KAAK,CAAE,GAAGtH,IAAI,CAAC/B,KAAK,CAAC2G,MAAM,CAAC,CAACc,MAAM,CAAC,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAC9H,KAAM,CAAAiM,SAAS,CAAGD,QAAQ,CAACX,IAAI,CAAC7K,CAAC,EAAIqL,OAAO,CAACC,EAAE,CAACvJ,QAAQ,CAAC/B,CAAC,CAACuG,GAAG,CAACmF,QAAQ,CAAC,CAAC,CAAC,CAAC,CAE3E,GAAI,CAACD,SAAS,CAAE,MAAO,CAAArR,IAAI,CAE3B;AACA,GAAI,CAAAgG,UAAsC,CAC1C,GAAI+K,aAAa,CAAE,CACjB,KAAM,CAAAQ,UAAU,CAAG,CAAC,GAAGvR,IAAI,CAAC/B,KAAK,CAAC,CAAC,CAAC,CAACqJ,KAAK,CAAE,GAAGtH,IAAI,CAAC/B,KAAK,CAAC,CAAC,CAAC,CAACyH,MAAM,CAAE,GAAG1F,IAAI,CAAC/B,KAAK,CAAC,CAAC,CAAC,CAACqJ,KAAK,CAAE,GAAGtH,IAAI,CAAC/B,KAAK,CAAC,CAAC,CAAC,CAACyH,MAAM,CAAC,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CACvKY,UAAU,CAAGuL,UAAU,CAACd,IAAI,CAAC7K,CAAC,EAAIA,CAAC,CAACuG,GAAG,GAAK4E,aAAa,CAAC,CAC5D,CAEA,KAAM,CAAAS,MAAM,CAAG,CACbrM,IAAI,CAAE8L,OAAO,CAAC9L,IAAI,CAClBkM,SAAS,CACTI,WAAW,CAAE7M,MAAM,CACnBoB,UACF,CAAQ,CAER,KAAM,CAAAf,QAAQ,CAAGhI,sBAAsB,CAACyU,cAAc,CAACT,OAAO,CAAEO,MAAM,CAAExR,IAAI,CAAC,CAE7E1B,GAAG,IAAAwB,MAAA,CAAIuR,SAAS,CAACnM,IAAI,YAAApF,MAAA,CAAUmR,OAAO,CAAC/L,IAAI,EAAApF,MAAA,CAAGkG,UAAU,SAAAlG,MAAA,CAAWkG,UAAU,CAACd,IAAI,EAAK,EAAE,KAAG,CAAC,CAE7F,MAAO,CAAAD,QAAQ,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,CAAC/F,SAAS,CAAEZ,GAAG,CAAC,CAAC,CAEpB;AACA,KAAM,CAAAqT,oBAAoB,CAAG3V,WAAW,CAAE+I,KAAgB,EAAgB,CACxE,KAAM,CAAAE,QAAQ,CAAAhF,aAAA,IAAQ8E,KAAK,CAAE,CAE7B;AACA,CAAC,CAAC,CAAE,CAAC,CAAC,CAACpC,OAAO,CAACiC,MAAM,EAAI,CACvB,KAAM,CAAAwM,QAAQ,CAAG,CAAC,GAAGnM,QAAQ,CAAChH,KAAK,CAAC2G,MAAM,CAAW,CAAC0C,KAAK,CAAE,GAAGrC,QAAQ,CAAChH,KAAK,CAAC2G,MAAM,CAAW,CAACc,MAAM,CAAC,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CAC1JgM,QAAQ,CAACzO,OAAO,CAACmC,IAAI,EAAI,CACvBA,IAAI,CAAC8M,WAAW,CAAG,KAAK,CAC1B,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,MAAO,CAAA3M,QAAQ,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAA4M,8BAA8B,CAAG7V,WAAW,CAAE8V,mBAA6B,EAAK,CACpF3S,YAAY,CAACa,IAAI,EAAI,CACnB,KAAM,CAAA4E,MAAM,CAAG5E,IAAI,CAACtC,OAAO,CAC3B,KAAM,CAAAuH,QAAQ,CAAGhI,sBAAsB,CAAC4U,8BAA8B,CAAC7R,IAAI,CAAE4E,MAAM,CAAEkN,mBAAmB,CAAExT,GAAG,CAAC,CAC9G,MAAO,CAAA2G,QAAQ,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,CAAC3G,GAAG,CAAC,CAAC,CAET;AACA,KAAM,CAAAyT,6BAA6B,CAAG/V,WAAW,CAAE4I,MAAc,EAAc,CAC7E,KAAM,CAAA3G,KAAK,CAAGiB,SAAS,CAACjB,KAAK,CAAC2G,MAAM,CAAC,CACrC,KAAM,CAAAwM,QAAQ,CAAG,CAAC,GAAGnT,KAAK,CAACqJ,KAAK,CAAE,GAAGrJ,KAAK,CAACyH,MAAM,CAAC,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,KAAK,CAAqB,CACpG,KAAM,CAAA4M,KAAK,CAAGZ,QAAQ,CAACX,IAAI,CAAC7K,CAAC,EAAIA,CAAC,CAACV,IAAI,GAAK,gBAAgB,CAAC,CAE7D,GAAI,CAAC8M,KAAK,EAAIA,KAAK,CAACpL,WAAW,EAAIoL,KAAK,CAACJ,WAAW,CAAE,MAAO,MAAK,CAElE,KAAM,CAAAK,aAAa,CAAG/S,SAAS,CAACnB,KAAK,CAAC6G,MAAM,CAAC,CAACe,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACR,IAAI,GAAK,MAAM,CAAC,CAC5E,MAAO,CAAA6M,aAAa,CAACzO,MAAM,EAAI,CAAC,CAClC,CAAC,CAAE,CAACtE,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAAgT,iBAAiB,CAAGlW,WAAW,CAAC,IAAM,CAC1C+D,OAAO,CAACzB,GAAG,CAAC,6CAA6C,CAAC,CAC1DA,GAAG,CAAC,6CAA6C,CAAC,CAClDwJ,QAAQ,CAAC,CAAC,CACZ,CAAC,CAAE,CAACA,QAAQ,CAAExJ,GAAG,CAAC,CAAC,CAEnB,MAAO,CACLY,SAAS,CACTE,iBAAiB,CACjBd,GAAG,CACHoF,YAAY,CACZsM,cAAc,CAAE3Q,oBAAoB,CACpC6J,MAAM,CACNgJ,iBAAiB,CAAE;AAEnB;AACA7P,iBAAiB,CACjBgG,YAAY,CACZP,QAAQ,CAAE5F,WAAW,CAAC4F,QAAQ,CAC9BqK,OAAO,CAAEjQ,WAAW,CAACiQ,OAAO,CAC5BpJ,mBAAmB,CACnBpE,iBAAiB,CAEjB;AACA4K,iBAAiB,CACjBG,eAAe,CACfE,eAAe,CACfC,eAAe,CACfC,yBAAyB,CACzBC,4BAA4B,CAC5BjC,eAAe,CACfa,2BAA2B,CAE3B;AACAuB,QAAQ,CAAEhO,WAAW,CAACgO,QAAQ,CAC9BC,iBAAiB,CACjBQ,kBAAkB,CAClBE,gBAAgB,CAChBc,oBAAoB,CACpBE,8BAA8B,CAC9BE,6BAA6B,CAE7B;AACApO,mBAAmB,CAAEzB,WAAW,CAACyB,mBAAmB,CACpDa,cAAc,CAAEtC,WAAW,CAACsC,cAAc,CAC1C4N,QAAQ,CAAElQ,WAAW,CAACkQ,QAAQ,CAC9BC,yBAAyB,CAAEnQ,WAAW,CAACmQ,yBAAyB,CAEhE;AACAzJ,SAAS,CAAEzG,MAAM,CAACyG,SAAS,CAC3B5J,SAAS,CAAEmD,MAAM,CAACnD,SAAS,CAC3B8E,YAAY,CAAE3B,MAAM,CAAC2B,YAAY,CACjCwO,QAAQ,CAAEnQ,MAAM,CAACmQ,QAAQ,CACzBvO,WAAW,CAAE5B,MAAM,CAAC4B,WAAW,CAE/B;AACAc,iBAAiB,CACjB6I,kBACF,CAAC,CACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}