{"ast":null,"code":"import React,{useState,useCallback,useMemo,useEffect}from'react';import{Pols,Specials,PRESET_DECKS}from'../data/gameData';import{currentBuilderBudget,currentBuilderCount,drawCardImage}from'../utils/gameUtils';import{getCardDetails,formatWealth,formatSources,convertHPToUSD}from'../data/cardDetails';import{Icon}from'../ui/Icon';import{withIcons}from'../ui/withIcons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const DeckBuilder=_ref=>{let{isOpen,onClose,onApplyDeck,onStartMatch}=_ref;const[deck,setDeck]=useState([]);const[selectedDeckName,setSelectedDeckName]=useState('');const[searchQuery,setSearchQuery]=useState('');const[selectedCard,setSelectedCard]=useState(null);const[showSources,setShowSources]=useState(false);const budget=currentBuilderBudget(deck);const count=currentBuilderCount(deck);// Helper: classify a card into an effect category for sorting / grouping.\n// Priority: 0 = Influence (buffs), 1 = AP gain, 2 = Card draw, 3 = Other\nconst getEffectRank=base=>{// Government cards keep default rank to avoid mixing with specials\nif(base.type===undefined)return 0;const s=base;const rawTags=s.tags;const tags=(rawTags||[]).map(t=>t.toLowerCase());const key=s.effectKey;const has=needle=>tags.includes(needle)||(key?key.toLowerCase().includes(needle):false);if(has('buff')||has('influence'))return 0;// +Influence\nif(has('ap'))return 1;// +AP\nif(has('draw'))return 2;// +Card draw\nreturn 3;// other / mixed effects\n};const getEffectLabel=rank=>{switch(rank){case 0:return'+ Influence';case 1:return'+ AP';case 2:return'+ Cards';default:return'Other';}};const categorizedCards=useMemo(()=>{const categories={government:[],public:[],initiatives:[],interventions:[]};// Government cards\nPols.forEach(p=>categories.government.push({kind:'pol',base:p}));// Public cards\nSpecials.filter(s=>s.type==='Ã–ffentlichkeitskarte').forEach(s=>categories.public.push({kind:'spec',base:s}));// Initiatives (Instant and Ongoing)\nSpecials.filter(s=>s.type==='Sofort-Initiative'||s.type==='Dauerhaft-Initiative').forEach(s=>categories.initiatives.push({kind:'spec',base:s}));// Interventions\nSpecials.filter(s=>s.type==='Intervention').forEach(s=>categories.interventions.push({kind:'spec',base:s}));// Sort public, initiatives and interventions by effect rank (Influence, AP, Draw, Other)\nconst sortByEffect=arr=>arr.sort((a,b)=>getEffectRank(a.base)-getEffectRank(b.base));sortByEffect(categories.public);sortByEffect(categories.initiatives);sortByEffect(categories.interventions);// Filter by search term\nconst matches=(kind,base)=>{if(!searchQuery)return true;const hay=\"\".concat(base.name,\" \").concat(kind==='pol'?base.tag:base.type).toLowerCase();return hay.includes(searchQuery.toLowerCase());};// Combine all filtered cards for navigation\nconst allFilteredCards=[...categories.government.filter(_ref2=>{let{kind,base}=_ref2;return matches(kind,base);}),...categories.public.filter(_ref3=>{let{kind,base}=_ref3;return matches(kind,base);}),...categories.initiatives.filter(_ref4=>{let{kind,base}=_ref4;return matches(kind,base);}),...categories.interventions.filter(_ref5=>{let{kind,base}=_ref5;return matches(kind,base);})];return{categories:{government:categories.government.filter(_ref6=>{let{kind,base}=_ref6;return matches(kind,base);}),public:categories.public.filter(_ref7=>{let{kind,base}=_ref7;return matches(kind,base);}),initiatives:categories.initiatives.filter(_ref8=>{let{kind,base}=_ref8;return matches(kind,base);}),interventions:categories.interventions.filter(_ref9=>{let{kind,base}=_ref9;return matches(kind,base);})},allFilteredCards};},[searchQuery]);const builderCanAdd=useCallback((base,kind)=>{var _BP;const tier=kind==='spec'?base.tier:base.T;const limit=tier>=3?1:2;const entry=deck.find(e=>e.kind===kind&&e.baseId===base.id);const already=entry?entry.count:0;const cost=kind==='pol'?(_BP=base.BP)!==null&&_BP!==void 0?_BP:0:base.bp;return already<limit&&count<25&&budget+cost<=300;},[deck,budget,count]);const builderAdd=useCallback((base,kind)=>{if(!builderCanAdd(base,kind))return;setDeck(prev=>{const newDeck=[...prev];let entry=newDeck.find(e=>e.kind===kind&&e.baseId===base.id);if(!entry){entry={kind,baseId:base.id,count:0};newDeck.push(entry);}entry.count+=1;return newDeck;});// Clear preset name when manually modifying deck\nsetSelectedDeckName('');},[builderCanAdd]);const builderRemove=useCallback((base,kind)=>{setDeck(prev=>{const newDeck=[...prev];let entry=newDeck.find(e=>e.kind===kind&&e.baseId===base.id);if(!entry)return prev;entry.count-=1;if(entry.count<=0){return newDeck.filter(e=>e!==entry);}return newDeck;});// Clear preset name when manually modifying deck\nsetSelectedDeckName('');},[]);const loadPresetDeck=useCallback(which=>{const preset=PRESET_DECKS[which];if(preset&&preset.length>0){setDeck([...preset]);// Set deck name for display\nconst deckNames={'INITIATIVE_TEST_DECK':'âš¡ Initiative Test Deck (10 Karten)','TEST_DECK_WITH_DRAW_EFFECTS':'ðŸ§ª Test Deck - Draw Effects (11 Karten)','TEST_DECK_5_CARDS':'ðŸ§ª Test Deck (5 Karten)','NEOLIBERAL_TECHNOKRAT':'ðŸ›ï¸ Neoliberaler Technokrat','AUTORITAERER_REALIST':'ðŸ¦… AutoritÃ¤rer Realist','PROGRESSIVER_AKTIVISMUS':'ðŸŒ± Progressiver Aktivismus','POPULISTISCHER_OPPORTUNIST':'ðŸŽ­ Populistischer Opportunist'};setSelectedDeckName(deckNames[which]||'');}},[]);const handleApplyDeck=useCallback(()=>{if(count===25&&budget<=300){onApplyDeck(deck);onClose();}},[deck,count,budget,onApplyDeck,onClose]);const handleCardClick=useCallback((kind,base)=>{setSelectedCard({kind,base});},[]);const handleCloseCardDetail=useCallback(()=>{setSelectedCard(null);setShowSources(false);},[]);const handlePreviousCard=useCallback(()=>{if(!selectedCard||!categorizedCards.allFilteredCards.length)return;const currentIndex=categorizedCards.allFilteredCards.findIndex(card=>card.kind===selectedCard.kind&&card.base.id===selectedCard.base.id);if(currentIndex>0){const prevCard=categorizedCards.allFilteredCards[currentIndex-1];setSelectedCard({kind:prevCard.kind,base:prevCard.base});}},[selectedCard,categorizedCards.allFilteredCards]);const handleNextCard=useCallback(()=>{if(!selectedCard||!categorizedCards.allFilteredCards.length)return;const currentIndex=categorizedCards.allFilteredCards.findIndex(card=>card.kind===selectedCard.kind&&card.base.id===selectedCard.base.id);if(currentIndex<categorizedCards.allFilteredCards.length-1){const nextCard=categorizedCards.allFilteredCards[currentIndex+1];setSelectedCard({kind:nextCard.kind,base:nextCard.base});}},[selectedCard,categorizedCards.allFilteredCards]);// Keyboard navigation\nuseEffect(()=>{const handleKeyDown=event=>{if(!selectedCard)return;switch(event.key){case'ArrowLeft':event.preventDefault();handlePreviousCard();break;case'ArrowRight':event.preventDefault();handleNextCard();break;case'Escape':event.preventDefault();handleCloseCardDetail();break;}};window.addEventListener('keydown',handleKeyDown);return()=>window.removeEventListener('keydown',handleKeyDown);},[selectedCard,handlePreviousCard,handleNextCard,handleCloseCardDetail]);const handleStartMatch=useCallback(()=>{const p1Deck=deck.length?deck:[];// ðŸ§ª TEST DECK: P2 bekommt das gleiche Deck wie P1 fÃ¼r isoliertes Testing\nconst p2Deck=deck.length?[...deck]:[];// Same deck as P1\nconsole.log('ðŸ”§ DEBUG: Starting match with decks:',{p1Cards:p1Deck.length,p2Cards:p2Deck.length});onStartMatch(p1Deck,p2Deck);onClose();},[deck,onStartMatch,onClose]);// Card Tile Component\nconst CardTile=/*#__PURE__*/React.memo(_ref0=>{let{kind,base,onClick}=_ref0;return/*#__PURE__*/_jsxs(\"div\",{onClick:onClick,style:{background:'#0f1822',border:'1px solid #26394c',borderRadius:'8px',padding:'4px',display:'flex',flexDirection:'column',gap:'4px',cursor:'pointer',transition:'all 0.2s ease',width:'132px',height:'180px'},onMouseEnter:e=>{e.currentTarget.style.background='#1a2a3a';e.currentTarget.style.borderColor='#3a4c5d';},onMouseLeave:e=>{e.currentTarget.style.background='#0f1822';e.currentTarget.style.borderColor='#26394c';},children:[/*#__PURE__*/_jsx(\"canvas\",{width:120,height:120,style:{display:'block',width:'120px',height:'120px',borderRadius:'6px',background:'#0b1118',border:'1px solid #1e2c3b'},ref:canvas=>{if(canvas){const ctx=canvas.getContext('2d');if(ctx){const mockCard={kind,baseId:base.id,name:base.name,uid:base.id,id:base.id,key:base.key};drawCardImage(ctx,mockCard,0,0,120,'ui');}}}}),/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,fontSize:'10px',fontWeight:600,color:'#dbe9f8',textAlign:'center',lineHeight:'1.2',overflow:'hidden',textOverflow:'ellipsis',display:'-webkit-box',WebkitLineClamp:2,WebkitBoxOrient:'vertical',height:'24px'},children:base.name}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',gap:'6px',marginTop:'auto'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'9px',color:'#a9c1da',fontWeight:500},children:kind==='pol'?\"\".concat(convertHPToUSD(base.BP||0)):\"\".concat(convertHPToUSD(base.bp))}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();builderAdd(base,kind);},disabled:!builderCanAdd(base,kind),style:{background:'#90EE90',color:'#2d572d',border:'none',borderRadius:'4px',padding:'2px 6px',fontSize:'10px',fontWeight:'bold',cursor:'pointer',opacity:builderCanAdd(base,kind)?1:0.5,minWidth:'24px',height:'20px',display:'flex',alignItems:'center',justifyContent:'center'},children:\"+\"})]})]});});if(!isOpen)return null;const HP_LIMIT=108;// Regelwerk: 108 HP Budget fÃ¼r 25 Karten\nconst overBudget=budget>HP_LIMIT;const overCount=count>25;const isValid=!overBudget&&!overCount;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',inset:0,display:'flex',background:'rgba(4,8,12,.8)',backdropFilter:'blur(2px)',zIndex:40},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',inset:'12px',background:'#0d1621',border:'1px solid #1f3042',borderRadius:'12px',padding:'12px',display:'flex',flexDirection:'column',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,fontSize:'14px',letterSpacing:'.4px'},children:[\"Deckbuilder\",selectedDeckName?\" - \".concat(selectedDeckName):'']}),/*#__PURE__*/_jsxs(\"span\",{style:{padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px'},children:[\"Budget: \",convertHPToUSD(budget),\" / \",convertHPToUSD(HP_LIMIT)]}),/*#__PURE__*/_jsxs(\"span\",{style:{padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px'},children:[\"Karten: \",count,\" / 25\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',flex:'0 0 220px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"search\",size:14}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Suche (Name, Tag)\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),style:{flex:1,outline:'none',padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px',color:'#e8f0f8'}})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('INITIATIVE_TEST_DECK'),style:{background:'#4338ca',color:'#ffffff',border:'1px solid #6366f1',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap',fontWeight:'bold'},children:\"\\u26A1 Initiative Test (10 Karten)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('TEST_DECK_WITH_DRAW_EFFECTS'),style:{background:'#ff6b35',color:'#ffffff',border:'1px solid #ff8c61',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap',fontWeight:'bold'},children:\"\\uD83E\\uDDEA Draw Effects (11 Karten)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('TEST_DECK_5_CARDS'),style:{background:'#df6530',color:'#ffffff',border:'1px solid #e5844c',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap',fontWeight:'bold'},children:\"\\uD83E\\uDDEA Test (5 Karten)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('NEOLIBERAL_TECHNOKRAT'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83C\\uDFDB\\uFE0F Neoliberaler Technokrat\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('AUTORITAERER_REALIST'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83E\\uDD85 Autorit\\xE4rer Realist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('PROGRESSIVER_AKTIVISMUS'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83C\\uDF31 Progressiver Aktivismus\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('POPULISTISCHER_OPPORTUNIST'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83C\\uDFAD Populistischer Opportunist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'12px',cursor:'pointer'},children:\"Schlie\\xDFen\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 360px',gap:'12px',minHeight:0,flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{overflow:'auto',border:'1px solid #1f2c3a',borderRadius:'10px',padding:'8px',background:'#0a121b',display:'grid',gridTemplateColumns:'repeat(4, 1fr)',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(173, 216, 230, 0.2)',border:'1px solid #4a90e2',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#add8e6',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"government_row\",size:16}),\"Government\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#8bb5d9',lineHeight:'1.3'},children:withIcons('Politicians and state leaders who influence the government. Max 5 in the government hierarchy.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:categorizedCards.categories.government.map(_ref1=>{let{kind,base}=_ref1;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(kind,\"-\").concat(base.id));})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(245, 245, 220, 0.2)',border:'1px solid #d2b48c',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#f5f5dc',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"public_row\",size:16}),\"Public\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#d2b48c',lineHeight:'1.3'},children:withIcons('People from media, business, and academia who support your actions.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:[0,1,2,3].map(rank=>/*#__PURE__*/_jsxs(React.Fragment,{children:[categorizedCards.categories.public.some(_ref10=>{let{base}=_ref10;return getEffectRank(base)===rank;})&&/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',fontSize:'11px',fontWeight:600,color:'#d2b48c',margin:'4px 0'},children:getEffectLabel(rank)}),categorizedCards.categories.public.filter(_ref11=>{let{base}=_ref11;return getEffectRank(base)===rank;}).map(_ref12=>{let{kind,base}=_ref12;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(rank,\"-\").concat(kind,\"-\").concat(base.id));})]},rank))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(64, 224, 208, 0.2)',border:'1px solid #40e0d0',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#40e0d0',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"initiative\",size:16}),\"Initiatives\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#40e0d0',lineHeight:'1.3'},children:withIcons('One-time (Instant) and ongoing political actions for special effects.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:[0,1,2,3].map(rank=>/*#__PURE__*/_jsxs(React.Fragment,{children:[categorizedCards.categories.initiatives.some(_ref13=>{let{base}=_ref13;return getEffectRank(base)===rank;})&&/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',fontSize:'11px',fontWeight:600,color:'#40e0d0',margin:'4px 0'},children:getEffectLabel(rank)}),categorizedCards.categories.initiatives.filter(_ref14=>{let{base}=_ref14;return getEffectRank(base)===rank;}).map(_ref15=>{let{kind,base}=_ref15;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(rank,\"-\").concat(kind,\"-\").concat(base.id));})]},rank))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(200, 160, 255, 0.2)',border:'1px solid #c8a0ff',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#c8a0ff',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"intervention_trap\",size:16}),\"Interventions\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#c8a0ff',lineHeight:'1.3'},children:withIcons('Concealed trap cards that trigger automatically and disrupt enemy strategies.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:[0,1,2,3].map(rank=>/*#__PURE__*/_jsxs(React.Fragment,{children:[categorizedCards.categories.interventions.some(_ref16=>{let{base}=_ref16;return getEffectRank(base)===rank;})&&/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',fontSize:'11px',fontWeight:600,color:'#c8a0ff',margin:'4px 0'},children:getEffectLabel(rank)}),categorizedCards.categories.interventions.filter(_ref17=>{let{base}=_ref17;return getEffectRank(base)===rank;}).map(_ref18=>{let{kind,base}=_ref18;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(rank,\"-\").concat(kind,\"-\").concat(base.id));})]},rank))})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{overflow:'auto',border:'1px solid #1f2c3a',borderRadius:'10px',padding:'8px',background:'#0a121b',display:'flex',flexDirection:'column',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'6px',alignItems:'center',fontSize:'12px',color:'#cfe0f2'},children:/*#__PURE__*/_jsx(\"div\",{style:{padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px',color:isValid?'#4ade80':'#ef4444'},children:isValid?'Deck OK':\"Deck invalid\".concat(overBudget?' Â· Budget':'').concat(overCount?' Â· Cards':'')})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflow:'auto'},children:deck.map(entry=>{const base=entry.kind==='pol'?Pols.find(p=>p.id===entry.baseId):Specials.find(s=>s.id===entry.baseId);if(!base)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'6px 8px',borderBottom:'1px solid #182433',fontSize:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[entry.count,\"\\xD7 \",base.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{children:convertHPToUSD(entry.kind==='pol'?base.BP||0:base.bp)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'4px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();builderRemove(base,entry.kind);},style:{background:'#dc2626',border:'none',borderRadius:'4px',color:'white',width:'20px',height:'20px',fontSize:'12px',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center'},title:\"Remove one\",children:\"\\u2212\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();builderAdd(base,entry.kind);},disabled:!builderCanAdd(base,entry.kind),style:{background:builderCanAdd(base,entry.kind)?'#059669':'#6b7280',border:'none',borderRadius:'4px',color:'white',width:'20px',height:'20px',fontSize:'12px',cursor:builderCanAdd(base,entry.kind)?'pointer':'not-allowed',display:'flex',alignItems:'center',justifyContent:'center'},title:\"Add one\",children:\"+\"})]})]})]},\"\".concat(entry.kind,\"-\").concat(entry.baseId));})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleApplyDeck,disabled:!isValid,style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'12px',cursor:'pointer',opacity:isValid?1:0.6},children:\"Use as P1 Deck\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStartMatch,style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'12px',cursor:'pointer'},children:\"Start Match\"})]})]})]})]}),selectedCard&&(()=>{const cardDetails=getCardDetails(selectedCard.base.name);return/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.8)',display:'flex',alignItems:'center',justifyContent:'flex-start',paddingLeft:'20px',zIndex:50},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#0d1621',border:'3px solid #ffffff',borderRadius:'16px',padding:'24px',display:'flex',gap:'24px',width:'calc(70vw)',height:'calc(90vh)',overflow:'hidden',position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'0 0 1024px',height:'1024px',background:'#0b1118',border:'2px solid #ffffff',borderRadius:'12px',overflow:'hidden',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePreviousCard,style:{position:'absolute',left:'16px',top:'50%',transform:'translateY(-50%)',background:'rgba(13, 22, 33, 0.9)',border:'2px solid #1f3042',borderRadius:'50%',width:'48px',height:'48px',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',color:'#eaf3ff',fontSize:'20px',fontWeight:'bold',zIndex:10,transition:'all 0.2s ease'},onMouseEnter:e=>{e.currentTarget.style.background='rgba(22, 36, 54, 0.95)';e.currentTarget.style.borderColor='#27425b';},onMouseLeave:e=>{e.currentTarget.style.background='rgba(13, 22, 33, 0.9)';e.currentTarget.style.borderColor='#1f3042';},children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextCard,style:{position:'absolute',right:'16px',top:'50%',transform:'translateY(-50%)',background:'rgba(13, 22, 33, 0.9)',border:'2px solid #1f3042',borderRadius:'50%',width:'48px',height:'48px',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',color:'#eaf3ff',fontSize:'20px',fontWeight:'bold',zIndex:10,transition:'all 0.2s ease'},onMouseEnter:e=>{e.currentTarget.style.background='rgba(22, 36, 54, 0.95)';e.currentTarget.style.borderColor='#27425b';},onMouseLeave:e=>{e.currentTarget.style.background='rgba(13, 22, 33, 0.9)';e.currentTarget.style.borderColor='#1f3042';},children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"canvas\",{width:1024,height:1024,style:{display:'block',width:'1024px',height:'1024px'},ref:canvas=>{if(canvas){const ctx=canvas.getContext('2d');if(ctx){// Create a mock card object for drawing\nconst mockCard={kind:selectedCard.kind,baseId:selectedCard.base.id,name:selectedCard.base.name,uid:selectedCard.base.id,id:selectedCard.base.id,key:selectedCard.base.key};drawCardImage(ctx,mockCard,0,0,1024,'modal');}}}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1',minWidth:'400px',display:'flex',flexDirection:'column',gap:'20px',position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 8px 0',fontSize:'28px',fontWeight:700,color:'#eaf3ff',lineHeight:'1.2'},children:selectedCard.base.name}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',fontWeight:600,color:'#dbe9f8',marginBottom:'4px'},children:(cardDetails===null||cardDetails===void 0?void 0:cardDetails.category)||(selectedCard.kind==='pol'?'Government':'Public')}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.subcategories)&&cardDetails.subcategories.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#a9c1da',marginBottom:'4px'},children:cardDetails.subcategories.join(', ')}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.highestPosition)&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#8faecc',marginBottom:'8px'},children:cardDetails.highestPosition}),selectedCard.kind==='spec'&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#8faecc',marginBottom:'4px'},children:[(cardDetails===null||cardDetails===void 0?void 0:cardDetails.cardType)||(selectedCard.kind==='spec'?selectedCard.base.type:''),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.tier)&&\" \\u2022 \".concat(cardDetails.tier),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.speed)&&\" \\u2022 \".concat(cardDetails.speed),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.slot)&&\" \\u2022 Slot: \".concat(cardDetails.slot)]}),selectedCard.kind==='pol'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap',marginTop:'4px',marginBottom:'4px',color:'#a9c1da',fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Influence: \",selectedCard.base.influence]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Tier: \",selectedCard.base.T]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Keyword: \",selectedCard.base.tag]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#6b7280',fontWeight:500},children:[\"Card \",categorizedCards.allFilteredCards.findIndex(card=>card.kind===selectedCard.kind&&card.base.id===selectedCard.base.id)+1,\" of \",categorizedCards.allFilteredCards.length]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'flex-end',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#1f2937',border:'1px solid #374151',borderRadius:'8px',padding:'8px 12px',fontSize:'14px',color:'#e5e7eb'},children:[\"Cost: \",convertHPToUSD((cardDetails===null||cardDetails===void 0?void 0:cardDetails.deckCost)||(selectedCard.kind==='pol'?selectedCard.base.BP||0:selectedCard.base.bp))]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseCardDetail,style:{background:'none',border:'none',color:'#8faecc',fontSize:'24px',cursor:'pointer',padding:'4px',borderRadius:'4px'},onMouseEnter:e=>{e.currentTarget.style.background='#1a2a3a';},onMouseLeave:e=>{e.currentTarget.style.background='none';},children:\"\\xD7\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Game Effect\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#d1d5db',lineHeight:'1.5',fontSize:'15px'},children:(cardDetails===null||cardDetails===void 0?void 0:cardDetails.gameEffect)||(selectedCard.kind==='spec'?selectedCard.base.effect:'Passive Politician abilities based on Tag')})]}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.synergy)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Synergy\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#d1d5db',lineHeight:'1.5',fontSize:'15px'},children:cardDetails.synergy})]}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.trigger)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Trigger\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#d1d5db',lineHeight:'1.5',fontSize:'15px'},children:cardDetails.trigger})]}),((cardDetails===null||cardDetails===void 0?void 0:cardDetails.usage)||(cardDetails===null||cardDetails===void 0?void 0:cardDetails.example))&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[cardDetails.usage&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"When to play?\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'15px',lineHeight:'1.5'},children:cardDetails.usage})]}),cardDetails.example&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Example\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'15px',lineHeight:'1.5'},children:cardDetails.example})]})]}),cardDetails&&(cardDetails.nationality||cardDetails.birthDate||cardDetails.estimatedWealth||cardDetails.controversialQuote)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 16px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px'},children:[cardDetails.nationality&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Nationality\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#e5e7eb',fontWeight:500},children:cardDetails.nationality})]}),cardDetails.birthDate&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Birth Date\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#e5e7eb',fontWeight:500},children:cardDetails.birthDate})]})]}),cardDetails.estimatedWealth&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Estimated Wealth\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#e5e7eb',fontWeight:500},children:formatWealth(cardDetails.estimatedWealth)})]}),cardDetails.controversialQuote&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'16px',background:'#1f2937',border:'1px solid #ffffff',borderRadius:'8px',padding:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'6px'},children:\"Quote\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontStyle:'italic',lineHeight:'1.4',fontSize:'14px'},children:cardDetails.controversialQuote})]}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.sources)&&cardDetails.sources.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'16px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSources(!showSources),style:{background:'none',border:'none',color:'#9ca3af',fontSize:'12px',cursor:'pointer',textDecoration:'underline',padding:0},children:\"Show Sources\"})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'12px',marginTop:'auto'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{builderAdd(selectedCard.base,selectedCard.kind);handleCloseCardDetail();},disabled:!builderCanAdd(selectedCard.base,selectedCard.kind),style:{flex:1,background:builderCanAdd(selectedCard.base,selectedCard.kind)?'#374151':'#1f2937',color:'#e5e7eb',border:'1px solid #4b5563',borderRadius:'8px',padding:'12px',fontSize:'14px',fontWeight:600,cursor:builderCanAdd(selectedCard.base,selectedCard.kind)?'pointer':'not-allowed',opacity:builderCanAdd(selectedCard.base,selectedCard.kind)?1:0.6},children:\"Add to Deck\"})})]})]}),showSources&&(cardDetails===null||cardDetails===void 0?void 0:cardDetails.sources)&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:'calc(50% + 5px)',left:'calc(50% + 5px)',transform:'translate(-50%, -50%)',background:'#0d1621',border:'2px solid #ffffff',borderRadius:'12px',padding:'20px',minWidth:'400px',maxWidth:'600px',boxShadow:'0 20px 60px rgba(0, 0, 0, 0.8)',zIndex:60},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Sources & Calculation Basis\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSources(false),style:{background:'none',border:'none',color:'#9ca3af',fontSize:'20px',cursor:'pointer',padding:'4px'},children:\"\\xD7\"})]}),cardDetails.calculation&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'6px'},children:\"Calculation:\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'13px',lineHeight:'1.4',background:'#1f2937',padding:'10px',borderRadius:'6px'},children:cardDetails.calculation})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'6px'},children:\"Sources:\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'13px',lineHeight:'1.4'},children:formatSources(cardDetails.sources)})]})]});})()]});};","map":{"version":3,"names":["React","useState","useCallback","useMemo","useEffect","Pols","Specials","PRESET_DECKS","currentBuilderBudget","currentBuilderCount","drawCardImage","getCardDetails","formatWealth","formatSources","convertHPToUSD","Icon","withIcons","jsx","_jsx","jsxs","_jsxs","DeckBuilder","_ref","isOpen","onClose","onApplyDeck","onStartMatch","deck","setDeck","selectedDeckName","setSelectedDeckName","searchQuery","setSearchQuery","selectedCard","setSelectedCard","showSources","setShowSources","budget","count","getEffectRank","base","type","undefined","s","rawTags","tags","map","t","toLowerCase","key","effectKey","has","needle","includes","getEffectLabel","rank","categorizedCards","categories","government","public","initiatives","interventions","forEach","p","push","kind","filter","sortByEffect","arr","sort","a","b","matches","hay","concat","name","tag","allFilteredCards","_ref2","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","builderCanAdd","_BP","tier","T","limit","entry","find","e","baseId","id","already","cost","BP","bp","builderAdd","prev","newDeck","builderRemove","loadPresetDeck","which","preset","length","deckNames","handleApplyDeck","handleCardClick","handleCloseCardDetail","handlePreviousCard","currentIndex","findIndex","card","prevCard","handleNextCard","nextCard","handleKeyDown","event","preventDefault","window","addEventListener","removeEventListener","handleStartMatch","p1Deck","p2Deck","console","log","p1Cards","p2Cards","CardTile","memo","_ref0","onClick","style","background","border","borderRadius","padding","display","flexDirection","gap","cursor","transition","width","height","onMouseEnter","currentTarget","borderColor","onMouseLeave","children","ref","canvas","ctx","getContext","mockCard","uid","margin","fontSize","fontWeight","color","textAlign","lineHeight","overflow","textOverflow","WebkitLineClamp","WebkitBoxOrient","alignItems","justifyContent","marginTop","stopPropagation","disabled","opacity","minWidth","HP_LIMIT","overBudget","overCount","isValid","position","inset","backdropFilter","zIndex","letterSpacing","flex","size","placeholder","value","onChange","target","outline","whiteSpace","gridTemplateColumns","minHeight","marginBottom","alignContent","_ref1","Fragment","some","_ref10","gridColumn","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","flexWrap","borderBottom","title","cardDetails","top","left","right","bottom","paddingLeft","transform","category","subcategories","join","highestPosition","cardType","speed","slot","influence","deckCost","gameEffect","effect","synergy","trigger","usage","example","nationality","birthDate","estimatedWealth","controversialQuote","fontStyle","sources","textDecoration","maxWidth","boxShadow","calculation"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/components/DeckBuilder.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, useEffect } from 'react';\r\nimport { BuilderEntry, BasePolitician, BaseSpecial } from '../types/game';\r\nimport { Pols, Specials, PRESET_DECKS } from '../data/gameData';\r\nimport { currentBuilderBudget, currentBuilderCount, drawCardImage } from '../utils/gameUtils';\r\nimport { getCardDetails, formatWealth, formatSources, convertHPToUSD } from '../data/cardDetails';\r\nimport { Icon } from '../ui/Icon';\r\nimport { withIcons } from '../ui/withIcons';\r\n\r\ninterface DeckBuilderProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onApplyDeck: (deck: BuilderEntry[]) => void;\r\n  onStartMatch: (p1Deck: BuilderEntry[], p2Deck: BuilderEntry[]) => void;\r\n  images?: never;\r\n}\r\n\r\nexport const DeckBuilder: React.FC<DeckBuilderProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onApplyDeck,\r\n  onStartMatch\r\n}) => {\r\n  const [deck, setDeck] = useState<BuilderEntry[]>([]);\r\n  const [selectedDeckName, setSelectedDeckName] = useState<string>('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n\r\n  const [selectedCard, setSelectedCard] = useState<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial } | null>(null);\r\n  const [showSources, setShowSources] = useState(false);\r\n\r\n  const budget = currentBuilderBudget(deck);\r\n  const count = currentBuilderCount(deck);\r\n\r\n  // Helper: classify a card into an effect category for sorting / grouping.\r\n  // Priority: 0 = Influence (buffs), 1 = AP gain, 2 = Card draw, 3 = Other\r\n  const getEffectRank = (base: BasePolitician | BaseSpecial): number => {\r\n      // Government cards keep default rank to avoid mixing with specials\r\n      if ((base as any).type === undefined) return 0;\r\n\r\n      const s = base as BaseSpecial;\r\n      const rawTags = (s as any).tags as string[] | undefined;\r\n      const tags = (rawTags || []).map((t: string) => t.toLowerCase());\r\n      const key = (s as any).effectKey as string | undefined;\r\n\r\n      const has = (needle: string) => tags.includes(needle) || (key ? key.toLowerCase().includes(needle) : false);\r\n\r\n      if (has('buff') || has('influence')) return 0;     // +Influence\r\n      if (has('ap')) return 1;                            // +AP\r\n      if (has('draw')) return 2;                          // +Card draw\r\n      return 3;                                           // other / mixed effects\r\n  };\r\n\r\n  const getEffectLabel = (rank: number): string => {\r\n    switch (rank) {\r\n      case 0: return '+ Influence';\r\n      case 1: return '+ AP';\r\n      case 2: return '+ Cards';\r\n      default: return 'Other';\r\n    }\r\n  };\r\n\r\n  const categorizedCards = useMemo(() => {\r\n    const categories = {\r\n      government: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>,\r\n      public: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>,\r\n      initiatives: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>,\r\n      interventions: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>\r\n    };\r\n\r\n    // Government cards\r\n    Pols.forEach((p: BasePolitician) => categories.government.push({ kind: 'pol', base: p }));\r\n\r\n    // Public cards\r\n    Specials.filter((s: BaseSpecial) => s.type === 'Ã–ffentlichkeitskarte')\r\n      .forEach((s: BaseSpecial) => categories.public.push({ kind: 'spec', base: s }));\r\n\r\n    // Initiatives (Instant and Ongoing)\r\n    Specials.filter((s: BaseSpecial) => s.type === 'Sofort-Initiative' || s.type === 'Dauerhaft-Initiative')\r\n      .forEach((s: BaseSpecial) => categories.initiatives.push({ kind: 'spec', base: s }));\r\n\r\n    // Interventions\r\n    Specials.filter((s: BaseSpecial) => s.type === 'Intervention')\r\n      .forEach((s: BaseSpecial) => categories.interventions.push({ kind: 'spec', base: s }));\r\n\r\n    // Sort public, initiatives and interventions by effect rank (Influence, AP, Draw, Other)\r\n    const sortByEffect = (arr: Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>) =>\r\n      arr.sort((a, b) => getEffectRank(a.base) - getEffectRank(b.base));\r\n\r\n    sortByEffect(categories.public);\r\n    sortByEffect(categories.initiatives);\r\n    sortByEffect(categories.interventions);\r\n\r\n    // Filter by search term\r\n    const matches = (kind: 'pol' | 'spec', base: BasePolitician | BaseSpecial) => {\r\n      if (!searchQuery) return true;\r\n      const hay = `${base.name} ${kind === 'pol' ? (base as BasePolitician).tag : (base as BaseSpecial).type}`.toLowerCase();\r\n      return hay.includes(searchQuery.toLowerCase());\r\n    };\r\n\r\n    // Combine all filtered cards for navigation\r\n    const allFilteredCards = [\r\n      ...categories.government.filter(({ kind, base }) => matches(kind, base)),\r\n      ...categories.public.filter(({ kind, base }) => matches(kind, base)),\r\n      ...categories.initiatives.filter(({ kind, base }) => matches(kind, base)),\r\n      ...categories.interventions.filter(({ kind, base }) => matches(kind, base))\r\n    ];\r\n\r\n    return {\r\n      categories: {\r\n        government: categories.government.filter(({ kind, base }) => matches(kind, base)),\r\n        public: categories.public.filter(({ kind, base }) => matches(kind, base)),\r\n        initiatives: categories.initiatives.filter(({ kind, base }) => matches(kind, base)),\r\n        interventions: categories.interventions.filter(({ kind, base }) => matches(kind, base))\r\n      },\r\n      allFilteredCards\r\n    };\r\n  }, [searchQuery]);\r\n\r\n\r\n\r\n  const builderCanAdd = useCallback((base: BasePolitician | BaseSpecial, kind: 'pol' | 'spec'): boolean => {\r\n    const tier = kind === 'spec' ? (base as BaseSpecial).tier : (base as BasePolitician).T;\r\n    const limit = tier >= 3 ? 1 : 2;\r\n    const entry = deck.find(e => e.kind === kind && e.baseId === base.id);\r\n    const already = entry ? entry.count : 0;\r\n    const cost = kind === 'pol' ? ((base as BasePolitician).BP ?? 0) : (base as BaseSpecial).bp;\r\n\r\n    return already < limit && count < 25 && (budget + cost) <= 300;\r\n  }, [deck, budget, count]);\r\n\r\n  const builderAdd = useCallback((base: BasePolitician | BaseSpecial, kind: 'pol' | 'spec') => {\r\n    if (!builderCanAdd(base, kind)) return;\r\n\r\n    setDeck(prev => {\r\n      const newDeck = [...prev];\r\n      let entry = newDeck.find(e => e.kind === kind && e.baseId === base.id);\r\n      if (!entry) {\r\n        entry = { kind, baseId: base.id, count: 0 };\r\n        newDeck.push(entry);\r\n      }\r\n      entry.count += 1;\r\n      return newDeck;\r\n    });\r\n    // Clear preset name when manually modifying deck\r\n    setSelectedDeckName('');\r\n  }, [builderCanAdd]);\r\n\r\n  const builderRemove = useCallback((base: BasePolitician | BaseSpecial, kind: 'pol' | 'spec') => {\r\n    setDeck(prev => {\r\n      const newDeck = [...prev];\r\n      let entry = newDeck.find(e => e.kind === kind && e.baseId === base.id);\r\n      if (!entry) return prev;\r\n\r\n      entry.count -= 1;\r\n      if (entry.count <= 0) {\r\n        return newDeck.filter(e => e !== entry);\r\n      }\r\n      return newDeck;\r\n    });\r\n    // Clear preset name when manually modifying deck\r\n    setSelectedDeckName('');\r\n  }, []);\r\n\r\n  const loadPresetDeck = useCallback((which: keyof typeof PRESET_DECKS) => {\r\n    const preset = PRESET_DECKS[which] as BuilderEntry[];\r\n    if (preset && preset.length > 0) {\r\n      setDeck([...preset]);\r\n      // Set deck name for display\r\n      const deckNames = {\r\n        'INITIATIVE_TEST_DECK': 'âš¡ Initiative Test Deck (10 Karten)',\r\n        'TEST_DECK_WITH_DRAW_EFFECTS': 'ðŸ§ª Test Deck - Draw Effects (11 Karten)',\r\n        'TEST_DECK_5_CARDS': 'ðŸ§ª Test Deck (5 Karten)',\r\n        'NEOLIBERAL_TECHNOKRAT': 'ðŸ›ï¸ Neoliberaler Technokrat',\r\n        'AUTORITAERER_REALIST': 'ðŸ¦… AutoritÃ¤rer Realist',\r\n        'PROGRESSIVER_AKTIVISMUS': 'ðŸŒ± Progressiver Aktivismus',\r\n        'POPULISTISCHER_OPPORTUNIST': 'ðŸŽ­ Populistischer Opportunist'\r\n      };\r\n      setSelectedDeckName(deckNames[which] || '');\r\n    }\r\n  }, []);\r\n\r\n\r\n\r\n  const handleApplyDeck = useCallback(() => {\r\n    if (count === 25 && budget <= 300) {\r\n      onApplyDeck(deck);\r\n      onClose();\r\n    }\r\n  }, [deck, count, budget, onApplyDeck, onClose]);\r\n\r\n  const handleCardClick = useCallback((kind: 'pol' | 'spec', base: BasePolitician | BaseSpecial) => {\r\n    setSelectedCard({ kind, base });\r\n  }, []);\r\n\r\n  const handleCloseCardDetail = useCallback(() => {\r\n    setSelectedCard(null);\r\n    setShowSources(false);\r\n  }, []);\r\n\r\n  const handlePreviousCard = useCallback(() => {\r\n    if (!selectedCard || !categorizedCards.allFilteredCards.length) return;\r\n\r\n    const currentIndex = categorizedCards.allFilteredCards.findIndex(\r\n      card => card.kind === selectedCard.kind && card.base.id === selectedCard.base.id\r\n    );\r\n\r\n    if (currentIndex > 0) {\r\n      const prevCard = categorizedCards.allFilteredCards[currentIndex - 1];\r\n      setSelectedCard({ kind: prevCard.kind, base: prevCard.base });\r\n    }\r\n  }, [selectedCard, categorizedCards.allFilteredCards]);\r\n\r\n  const handleNextCard = useCallback(() => {\r\n    if (!selectedCard || !categorizedCards.allFilteredCards.length) return;\r\n\r\n    const currentIndex = categorizedCards.allFilteredCards.findIndex(\r\n      card => card.kind === selectedCard.kind && card.base.id === selectedCard.base.id\r\n    );\r\n\r\n    if (currentIndex < categorizedCards.allFilteredCards.length - 1) {\r\n      const nextCard = categorizedCards.allFilteredCards[currentIndex + 1];\r\n      setSelectedCard({ kind: nextCard.kind, base: nextCard.base });\r\n    }\r\n  }, [selectedCard, categorizedCards.allFilteredCards]);\r\n\r\n  // Keyboard navigation\r\n  useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (!selectedCard) return;\r\n\r\n      switch (event.key) {\r\n        case 'ArrowLeft':\r\n          event.preventDefault();\r\n          handlePreviousCard();\r\n          break;\r\n        case 'ArrowRight':\r\n          event.preventDefault();\r\n          handleNextCard();\r\n          break;\r\n        case 'Escape':\r\n          event.preventDefault();\r\n          handleCloseCardDetail();\r\n          break;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [selectedCard, handlePreviousCard, handleNextCard, handleCloseCardDetail]);\r\n\r\n  const handleStartMatch = useCallback(() => {\r\n    const p1Deck: BuilderEntry[] = deck.length ? deck : [];\r\n    // ðŸ§ª TEST DECK: P2 bekommt das gleiche Deck wie P1 fÃ¼r isoliertes Testing\r\n    const p2Deck: BuilderEntry[] = deck.length ? [...deck] : []; // Same deck as P1\r\n\r\n    console.log('ðŸ”§ DEBUG: Starting match with decks:', { p1Cards: p1Deck.length, p2Cards: p2Deck.length });\r\n    onStartMatch(p1Deck, p2Deck);\r\n    onClose();\r\n  }, [deck, onStartMatch, onClose]);\r\n\r\n  // Card Tile Component\r\n  const CardTile = React.memo(({ kind, base, onClick }: {\r\n    kind: 'pol' | 'spec';\r\n    base: BasePolitician | BaseSpecial;\r\n    onClick: () => void;\r\n  }) => (\r\n    <div\r\n      onClick={onClick}\r\n      style={{\r\n        background: '#0f1822',\r\n        border: '1px solid #26394c',\r\n        borderRadius: '8px',\r\n        padding: '4px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '4px',\r\n        cursor: 'pointer',\r\n        transition: 'all 0.2s ease',\r\n        width: '132px',\r\n        height: '180px',\r\n      }}\r\n      onMouseEnter={(e) => {\r\n        e.currentTarget.style.background = '#1a2a3a';\r\n        e.currentTarget.style.borderColor = '#3a4c5d';\r\n      }}\r\n      onMouseLeave={(e) => {\r\n        e.currentTarget.style.background = '#0f1822';\r\n        e.currentTarget.style.borderColor = '#26394c';\r\n      }}\r\n    >\r\n      <canvas\r\n        width={120}\r\n        height={120}\r\n        style={{\r\n          display: 'block',\r\n          width: '120px',\r\n          height: '120px',\r\n          borderRadius: '6px',\r\n          background: '#0b1118',\r\n          border: '1px solid #1e2c3b',\r\n        }}\r\n        ref={(canvas) => {\r\n          if (canvas) {\r\n            const ctx = canvas.getContext('2d');\r\n            if (ctx) {\r\n              const mockCard = {\r\n                kind,\r\n                baseId: base.id,\r\n                name: base.name,\r\n                uid: base.id,\r\n                id: base.id,\r\n                key: base.key,\r\n              } as any;\r\n              drawCardImage(ctx, mockCard, 0, 0, 120, 'ui');\r\n            }\r\n          }\r\n        }}\r\n      />\r\n      <h4 style={{\r\n        margin: 0,\r\n        fontSize: '10px',\r\n        fontWeight: 600,\r\n        color: '#dbe9f8',\r\n        textAlign: 'center',\r\n        lineHeight: '1.2',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        display: '-webkit-box',\r\n        WebkitLineClamp: 2,\r\n        WebkitBoxOrient: 'vertical',\r\n        height: '24px',\r\n      }}>\r\n        {base.name}\r\n      </h4>\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '6px',\r\n        marginTop: 'auto',\r\n      }}>\r\n        <span style={{\r\n          fontSize: '9px',\r\n          color: '#a9c1da',\r\n          fontWeight: 500,\r\n        }}>\r\n          {kind === 'pol'\r\n            ? `${convertHPToUSD((base as BasePolitician).BP || 0)}`\r\n            : `${convertHPToUSD((base as BaseSpecial).bp)}`\r\n          }\r\n        </span>\r\n        <button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            builderAdd(base, kind);\r\n          }}\r\n          disabled={!builderCanAdd(base, kind)}\r\n          style={{\r\n            background: '#90EE90',\r\n            color: '#2d572d',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            padding: '2px 6px',\r\n            fontSize: '10px',\r\n            fontWeight: 'bold',\r\n            cursor: 'pointer',\r\n            opacity: builderCanAdd(base, kind) ? 1 : 0.5,\r\n            minWidth: '24px',\r\n            height: '20px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n          }}\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n    </div>\r\n  ));\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const HP_LIMIT = 108; // Regelwerk: 108 HP Budget fÃ¼r 25 Karten\r\n  const overBudget = budget > HP_LIMIT;\r\n  const overCount = count > 25;\r\n  const isValid = !overBudget && !overCount;\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'absolute',\r\n      inset: 0,\r\n      display: 'flex',\r\n      background: 'rgba(4,8,12,.8)',\r\n      backdropFilter: 'blur(2px)',\r\n      zIndex: 40,\r\n    }}>\r\n      <div style={{\r\n        position: 'absolute',\r\n        inset: '12px',\r\n        background: '#0d1621',\r\n        border: '1px solid #1f3042',\r\n        borderRadius: '12px',\r\n        padding: '12px',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '10px',\r\n      }}>\r\n        {/* Header */}\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: '10px',\r\n          alignItems: 'center',\r\n        }}>\r\n          <div style={{ fontWeight: 600, fontSize: '14px', letterSpacing: '.4px' }}>\r\n            Deckbuilder{selectedDeckName ? ` - ${selectedDeckName}` : ''}\r\n          </div>\r\n          <span style={{\r\n            padding: '4px 8px',\r\n            borderRadius: '8px',\r\n            background: '#0f1a26',\r\n            border: '1px solid #203043',\r\n            fontSize: '12px',\r\n          }}>\r\n            Budget: {convertHPToUSD(budget)} / {convertHPToUSD(HP_LIMIT)}\r\n          </span>\r\n          <span style={{\r\n            padding: '4px 8px',\r\n            borderRadius: '8px',\r\n            background: '#0f1a26',\r\n            border: '1px solid #203043',\r\n            fontSize: '12px',\r\n          }}>\r\n            Karten: {count} / 25\r\n          </span>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '8px',\r\n            flex: '0 0 220px',\r\n          }}>\r\n            <Icon name=\"search\" size={14} />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Suche (Name, Tag)\"\r\n              value={searchQuery}\r\n              onChange={(e) => setSearchQuery(e.target.value)}\r\n              style={{\r\n                flex: 1,\r\n                outline: 'none',\r\n                padding: '4px 8px',\r\n                borderRadius: '8px',\r\n                background: '#0f1a26',\r\n                border: '1px solid #203043',\r\n                fontSize: '12px',\r\n                color: '#e8f0f8',\r\n              }}\r\n            />\r\n          </div>\r\n          <div style={{ flex: 1 }}></div>\r\n          <button\r\n            onClick={() => loadPresetDeck('INITIATIVE_TEST_DECK')}\r\n            style={{\r\n              background: '#4338ca',\r\n              color: '#ffffff',\r\n              border: '1px solid #6366f1',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '11px',\r\n              cursor: 'pointer',\r\n              whiteSpace: 'nowrap',\r\n              fontWeight: 'bold',\r\n            }}\r\n          >\r\n            âš¡ Initiative Test (10 Karten)\r\n          </button>\r\n          <button\r\n            onClick={() => loadPresetDeck('TEST_DECK_WITH_DRAW_EFFECTS')}\r\n            style={{\r\n              background: '#ff6b35',\r\n              color: '#ffffff',\r\n              border: '1px solid #ff8c61',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '11px',\r\n              cursor: 'pointer',\r\n              whiteSpace: 'nowrap',\r\n              fontWeight: 'bold',\r\n            }}\r\n          >\r\n            ðŸ§ª Draw Effects (11 Karten)\r\n          </button>\r\n          <button\r\n            onClick={() => loadPresetDeck('TEST_DECK_5_CARDS')}\r\n            style={{\r\n              background: '#df6530',\r\n              color: '#ffffff',\r\n              border: '1px solid #e5844c',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '11px',\r\n              cursor: 'pointer',\r\n              whiteSpace: 'nowrap',\r\n              fontWeight: 'bold',\r\n            }}\r\n          >\r\n            ðŸ§ª Test (5 Karten)\r\n          </button>\r\n          <button\r\n            onClick={() => loadPresetDeck('NEOLIBERAL_TECHNOKRAT')}\r\n            style={{\r\n              background: '#162436',\r\n              color: '#eaf3ff',\r\n              border: '1px solid #27425b',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '11px',\r\n              cursor: 'pointer',\r\n              whiteSpace: 'nowrap',\r\n            }}\r\n          >\r\n            ðŸ›ï¸ Neoliberaler Technokrat\r\n          </button>\r\n          <button\r\n            onClick={() => loadPresetDeck('AUTORITAERER_REALIST')}\r\n            style={{\r\n              background: '#162436',\r\n              color: '#eaf3ff',\r\n              border: '1px solid #27425b',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '11px',\r\n              cursor: 'pointer',\r\n              whiteSpace: 'nowrap',\r\n            }}\r\n          >\r\n            ðŸ¦… AutoritÃ¤rer Realist\r\n          </button>\r\n          <button\r\n            onClick={() => loadPresetDeck('PROGRESSIVER_AKTIVISMUS')}\r\n            style={{\r\n              background: '#162436',\r\n              color: '#eaf3ff',\r\n              border: '1px solid #27425b',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '11px',\r\n              cursor: 'pointer',\r\n              whiteSpace: 'nowrap',\r\n            }}\r\n          >\r\n            ðŸŒ± Progressiver Aktivismus\r\n          </button>\r\n          <button\r\n            onClick={() => loadPresetDeck('POPULISTISCHER_OPPORTUNIST')}\r\n            style={{\r\n              background: '#162436',\r\n              color: '#eaf3ff',\r\n              border: '1px solid #27425b',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '11px',\r\n              cursor: 'pointer',\r\n              whiteSpace: 'nowrap',\r\n            }}\r\n          >\r\n            ðŸŽ­ Populistischer Opportunist\r\n          </button>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: '#162436',\r\n              color: '#eaf3ff',\r\n              border: '1px solid #27425b',\r\n              borderRadius: '8px',\r\n              padding: '6px 10px',\r\n              fontSize: '12px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            SchlieÃŸen\r\n          </button>\r\n        </div>\r\n\r\n        {/* Body */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: '1fr 360px',\r\n          gap: '12px',\r\n          minHeight: 0,\r\n          flex: 1,\r\n        }}>\r\n          {/* Categorized Card Columns */}\r\n          <div style={{\r\n            overflow: 'auto',\r\n            border: '1px solid #1f2c3a',\r\n            borderRadius: '10px',\r\n            padding: '8px',\r\n            background: '#0a121b',\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(4, 1fr)',\r\n            gap: '12px',\r\n          }}>\r\n            {/* Government Column */}\r\n            <div style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              gap: '8px',\r\n            }}>\r\n              <div style={{\r\n                background: 'rgba(173, 216, 230, 0.2)',\r\n                border: '1px solid #4a90e2',\r\n                borderRadius: '8px',\r\n                padding: '8px',\r\n                textAlign: 'center',\r\n              }}>\r\n                <h3 style={{\r\n                  margin: 0,\r\n                  fontSize: '14px',\r\n                  fontWeight: 700,\r\n                  color: '#add8e6',\r\n                  marginBottom: '4px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '8px',\r\n                }}>\r\n                  <Icon name=\"government_row\" size={16} />\r\n                  Government\r\n                </h3>\r\n                <p style={{\r\n                  margin: 0,\r\n                  fontSize: '11px',\r\n                  color: '#8bb5d9',\r\n                  lineHeight: '1.3',\r\n                }}>\r\n                  {withIcons('Politicians and state leaders who influence the government. Max 5 in the government hierarchy.')}\r\n                </p>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\r\n                gap: '8px',\r\n                flex: 1,\r\n                justifyContent: 'start',\r\n                alignContent: 'start',\r\n              }}>\r\n                {categorizedCards.categories.government.map(({ kind, base }) => (\r\n                  <CardTile key={`${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Public Column */}\r\n            <div style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              gap: '8px',\r\n            }}>\r\n              <div style={{\r\n                background: 'rgba(245, 245, 220, 0.2)',\r\n                border: '1px solid #d2b48c',\r\n                borderRadius: '8px',\r\n                padding: '8px',\r\n                textAlign: 'center',\r\n              }}>\r\n                <h3 style={{\r\n                  margin: 0,\r\n                  fontSize: '14px',\r\n                  fontWeight: 700,\r\n                  color: '#f5f5dc',\r\n                  marginBottom: '4px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '8px',\r\n                }}>\r\n                  <Icon name=\"public_row\" size={16} />\r\n                  Public\r\n                </h3>\r\n                <p style={{\r\n                  margin: 0,\r\n                  fontSize: '11px',\r\n                  color: '#d2b48c',\r\n                  lineHeight: '1.3',\r\n                }}>\r\n                  {withIcons('People from media, business, and academia who support your actions.')}\r\n                </p>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\r\n                gap: '8px',\r\n                flex: 1,\r\n                justifyContent: 'start',\r\n                alignContent: 'start',\r\n              }}>\r\n                {[0,1,2,3].map(rank => (\r\n                  <React.Fragment key={rank}>\r\n                    {categorizedCards.categories.public.some(({ base }) => getEffectRank(base) === rank) && (\r\n                      <div style={{ gridColumn: '1 / -1', fontSize: '11px', fontWeight: 600, color: '#d2b48c', margin: '4px 0' }}>\r\n                        {getEffectLabel(rank)}\r\n                      </div>\r\n                    )}\r\n                    {categorizedCards.categories.public.filter(({ base }) => getEffectRank(base) === rank)\r\n                      .map(({ kind, base }) => (\r\n                        <CardTile key={`${rank}-${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\r\n                    ))}\r\n                  </React.Fragment>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Initiatives Column */}\r\n            <div style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              gap: '8px',\r\n            }}>\r\n              <div style={{\r\n                background: 'rgba(64, 224, 208, 0.2)',\r\n                border: '1px solid #40e0d0',\r\n                borderRadius: '8px',\r\n                padding: '8px',\r\n                textAlign: 'center',\r\n              }}>\r\n                <h3 style={{\r\n                  margin: 0,\r\n                  fontSize: '14px',\r\n                  fontWeight: 700,\r\n                  color: '#40e0d0',\r\n                  marginBottom: '4px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '8px',\r\n                }}>\r\n                  <Icon name=\"initiative\" size={16} />\r\n                  Initiatives\r\n                </h3>\r\n                <p style={{\r\n                  margin: 0,\r\n                  fontSize: '11px',\r\n                  color: '#40e0d0',\r\n                  lineHeight: '1.3',\r\n                }}>\r\n                  {withIcons('One-time (Instant) and ongoing political actions for special effects.')}\r\n                </p>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\r\n                gap: '8px',\r\n                flex: 1,\r\n                justifyContent: 'start',\r\n                alignContent: 'start',\r\n              }}>\r\n                {[0,1,2,3].map(rank => (\r\n                  <React.Fragment key={rank}>\r\n                    {categorizedCards.categories.initiatives.some(({ base }) => getEffectRank(base) === rank) && (\r\n                      <div style={{ gridColumn: '1 / -1', fontSize: '11px', fontWeight: 600, color: '#40e0d0', margin: '4px 0' }}>\r\n                        {getEffectLabel(rank)}\r\n                      </div>\r\n                    )}\r\n                    {categorizedCards.categories.initiatives.filter(({ base }) => getEffectRank(base) === rank)\r\n                      .map(({ kind, base }) => (\r\n                        <CardTile key={`${rank}-${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\r\n                    ))}\r\n                  </React.Fragment>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Interventions Column */}\r\n            <div style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              gap: '8px',\r\n            }}>\r\n              <div style={{\r\n                background: 'rgba(200, 160, 255, 0.2)',\r\n                border: '1px solid #c8a0ff',\r\n                borderRadius: '8px',\r\n                padding: '8px',\r\n                textAlign: 'center',\r\n              }}>\r\n                <h3 style={{\r\n                  margin: 0,\r\n                  fontSize: '14px',\r\n                  fontWeight: 700,\r\n                  color: '#c8a0ff',\r\n                  marginBottom: '4px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '8px',\r\n                }}>\r\n                  <Icon name=\"intervention_trap\" size={16} />\r\n                  Interventions\r\n                </h3>\r\n                <p style={{\r\n                  margin: 0,\r\n                  fontSize: '11px',\r\n                  color: '#c8a0ff',\r\n                  lineHeight: '1.3',\r\n                }}>\r\n                  {withIcons('Concealed trap cards that trigger automatically and disrupt enemy strategies.')}\r\n                </p>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\r\n                gap: '8px',\r\n                flex: 1,\r\n                justifyContent: 'start',\r\n                alignContent: 'start',\r\n              }}>\r\n                {[0,1,2,3].map(rank => (\r\n                  <React.Fragment key={rank}>\r\n                    {categorizedCards.categories.interventions.some(({ base }) => getEffectRank(base) === rank) && (\r\n                      <div style={{ gridColumn: '1 / -1', fontSize: '11px', fontWeight: 600, color: '#c8a0ff', margin: '4px 0' }}>\r\n                        {getEffectLabel(rank)}\r\n                      </div>\r\n                    )}\r\n                    {categorizedCards.categories.interventions.filter(({ base }) => getEffectRank(base) === rank)\r\n                      .map(({ kind, base }) => (\r\n                        <CardTile key={`${rank}-${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\r\n                    ))}\r\n                  </React.Fragment>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div style={{\r\n            overflow: 'auto',\r\n            border: '1px solid #1f2c3a',\r\n            borderRadius: '10px',\r\n            padding: '8px',\r\n            background: '#0a121b',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: '10px',\r\n          }}>\r\n            {/* Stats */}\r\n            <div style={{\r\n              display: 'flex',\r\n              flexWrap: 'wrap',\r\n              gap: '6px',\r\n              alignItems: 'center',\r\n              fontSize: '12px',\r\n              color: '#cfe0f2',\r\n            }}>\r\n              <div style={{\r\n                padding: '4px 8px',\r\n                borderRadius: '8px',\r\n                background: '#0f1a26',\r\n                border: '1px solid #203043',\r\n                fontSize: '12px',\r\n                color: isValid ? '#4ade80' : '#ef4444',\r\n              }}>\r\n                {isValid ? 'Deck OK' : `Deck invalid${overBudget ? ' Â· Budget' : ''}${overCount ? ' Â· Cards' : ''}`}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Deck List */}\r\n            <div style={{ flex: 1, overflow: 'auto' }}>\r\n              {deck.map(entry => {\r\n                const base = entry.kind === 'pol'\r\n                  ? Pols.find((p: BasePolitician) => p.id === entry.baseId)\r\n                  : Specials.find((s: BaseSpecial) => s.id === entry.baseId);\r\n                if (!base) return null;\r\n\r\n                return (\r\n                  <div key={`${entry.kind}-${entry.baseId}`} style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    padding: '6px 8px',\r\n                    borderBottom: '1px solid #182433',\r\n                    fontSize: '12px',\r\n                  }}>\r\n                    <div style={{ flex: 1 }}>{entry.count}Ã— {base.name}</div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                      <div>{convertHPToUSD(entry.kind === 'pol' ? (base as BasePolitician).BP || 0 : (base as BaseSpecial).bp)}</div>\r\n                      <div style={{ display: 'flex', gap: '4px' }}>\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            builderRemove(base, entry.kind);\r\n                          }}\r\n                          style={{\r\n                            background: '#dc2626',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            color: 'white',\r\n                            width: '20px',\r\n                            height: '20px',\r\n                            fontSize: '12px',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                          }}\r\n                          title=\"Remove one\"\r\n                        >\r\n                          âˆ’\r\n                        </button>\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            builderAdd(base, entry.kind);\r\n                          }}\r\n                          disabled={!builderCanAdd(base, entry.kind)}\r\n                          style={{\r\n                            background: builderCanAdd(base, entry.kind) ? '#059669' : '#6b7280',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            color: 'white',\r\n                            width: '20px',\r\n                            height: '20px',\r\n                            fontSize: '12px',\r\n                            cursor: builderCanAdd(base, entry.kind) ? 'pointer' : 'not-allowed',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                          }}\r\n                          title=\"Add one\"\r\n                        >\r\n                          +\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div style={{\r\n              display: 'flex',\r\n              gap: '8px',\r\n              flexWrap: 'wrap',\r\n            }}>\r\n              <button\r\n                onClick={handleApplyDeck}\r\n                disabled={!isValid}\r\n                style={{\r\n                  background: '#162436',\r\n                  color: '#eaf3ff',\r\n                  border: '1px solid #27425b',\r\n                  borderRadius: '8px',\r\n                  padding: '6px 10px',\r\n                  fontSize: '12px',\r\n                  cursor: 'pointer',\r\n                  opacity: isValid ? 1 : 0.6,\r\n                }}\r\n              >\r\n                Use as P1 Deck\r\n              </button>\r\n              <button\r\n                onClick={handleStartMatch}\r\n                style={{\r\n                  background: '#162436',\r\n                  color: '#eaf3ff',\r\n                  border: '1px solid #27425b',\r\n                  borderRadius: '8px',\r\n                  padding: '6px 10px',\r\n                  fontSize: '12px',\r\n                  cursor: 'pointer',\r\n                }}\r\n              >\r\n                Start Match\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Card Detail Modal */}\r\n      {selectedCard && (() => {\r\n        const cardDetails = getCardDetails(selectedCard.base.name);\r\n        return (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.8)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'flex-start',\r\n          paddingLeft: '20px',\r\n          zIndex: 50,\r\n        }}>\r\n          <div style={{\r\n            background: '#0d1621',\r\n            border: '3px solid #ffffff',\r\n            borderRadius: '16px',\r\n            padding: '24px',\r\n            display: 'flex',\r\n              gap: '24px',\r\n              width: 'calc(70vw)',\r\n              height: 'calc(90vh)',\r\n            overflow: 'hidden',\r\n              position: 'relative',\r\n          }}>\r\n              {/* Card Image - Full 1024x1024 size with custom corners */}\r\n            <div style={{\r\n              flex: '0 0 1024px',\r\n              height: '1024px',\r\n              background: '#0b1118',\r\n              border: '2px solid #ffffff',\r\n              borderRadius: '12px',\r\n              overflow: 'hidden',\r\n              position: 'relative',\r\n            }}>\r\n              {/* Navigation Arrows */}\r\n              <button\r\n                onClick={handlePreviousCard}\r\n                style={{\r\n                  position: 'absolute',\r\n                  left: '16px',\r\n                  top: '50%',\r\n                  transform: 'translateY(-50%)',\r\n                  background: 'rgba(13, 22, 33, 0.9)',\r\n                  border: '2px solid #1f3042',\r\n                  borderRadius: '50%',\r\n                  width: '48px',\r\n                  height: '48px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  cursor: 'pointer',\r\n                  color: '#eaf3ff',\r\n                  fontSize: '20px',\r\n                  fontWeight: 'bold',\r\n                  zIndex: 10,\r\n                  transition: 'all 0.2s ease',\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.background = 'rgba(22, 36, 54, 0.95)';\r\n                  e.currentTarget.style.borderColor = '#27425b';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.background = 'rgba(13, 22, 33, 0.9)';\r\n                  e.currentTarget.style.borderColor = '#1f3042';\r\n                }}\r\n              >\r\n                â€¹\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleNextCard}\r\n                style={{\r\n                  position: 'absolute',\r\n                  right: '16px',\r\n                  top: '50%',\r\n                  transform: 'translateY(-50%)',\r\n                  background: 'rgba(13, 22, 33, 0.9)',\r\n                  border: '2px solid #1f3042',\r\n                  borderRadius: '50%',\r\n                  width: '48px',\r\n                  height: '48px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  cursor: 'pointer',\r\n                  color: '#eaf3ff',\r\n                  fontSize: '20px',\r\n                  fontWeight: 'bold',\r\n                  zIndex: 10,\r\n                  transition: 'all 0.2s ease',\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.background = 'rgba(22, 36, 54, 0.95)';\r\n                  e.currentTarget.style.borderColor = '#27425b';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.background = 'rgba(13, 22, 33, 0.9)';\r\n                  e.currentTarget.style.borderColor = '#1f3042';\r\n                }}\r\n              >\r\n                â€º\r\n              </button>\r\n\r\n              <canvas\r\n                width={1024}\r\n                height={1024}\r\n                style={{\r\n                  display: 'block',\r\n                    width: '1024px',\r\n                    height: '1024px',\r\n                }}\r\n                ref={(canvas) => {\r\n                  if (canvas) {\r\n                    const ctx = canvas.getContext('2d');\r\n                    if (ctx) {\r\n                      // Create a mock card object for drawing\r\n                      const mockCard = {\r\n                        kind: selectedCard.kind,\r\n                        baseId: selectedCard.base.id,\r\n                        name: selectedCard.base.name,\r\n                        uid: selectedCard.base.id,\r\n                        id: selectedCard.base.id,\r\n                        key: selectedCard.base.key,\r\n                      } as any;\r\n                      drawCardImage(ctx, mockCard, 0, 0, 1024, 'modal');\r\n                    }\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n\r\n              {/* Card Information Panel */}\r\n            <div style={{\r\n              flex: '1',\r\n                minWidth: '400px',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n                gap: '20px',\r\n                position: 'relative',\r\n            }}>\r\n                {/* Header with Cost in Top Right */}\r\n              <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'flex-start',\r\n              }}>\r\n                  <div style={{ flex: 1 }}>\r\n                  <h2 style={{\r\n                      margin: '0 0 8px 0',\r\n                      fontSize: '28px',\r\n                    fontWeight: 700,\r\n                    color: '#eaf3ff',\r\n                      lineHeight: '1.2',\r\n                  }}>\r\n                    {selectedCard.base.name}\r\n                  </h2>\r\n\r\n                    {/* Category */}\r\n                  <div style={{\r\n                      fontSize: '16px',\r\n                      fontWeight: 600,\r\n                      color: '#dbe9f8',\r\n                      marginBottom: '4px',\r\n                    }}>\r\n                      {cardDetails?.category || (selectedCard.kind === 'pol' ? 'Government' : 'Public')}\r\n                    </div>\r\n\r\n                    {/* Subcategories */}\r\n                    {cardDetails?.subcategories && cardDetails.subcategories.length > 0 && (\r\n                      <div style={{\r\n                        fontSize: '14px',\r\n                        color: '#a9c1da',\r\n                        marginBottom: '4px',\r\n                      }}>\r\n                        {cardDetails.subcategories.join(', ')}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Position (without label) */}\r\n                    {cardDetails?.highestPosition && (\r\n                      <div style={{\r\n                        fontSize: '14px',\r\n                    color: '#8faecc',\r\n                        marginBottom: '8px',\r\n                      }}>\r\n                        {cardDetails.highestPosition}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* For specials: show type, tier, speed, slot */}\r\n                    {selectedCard.kind === 'spec' && (\r\n                      <div style={{\r\n                        fontSize: '14px',\r\n                        color: '#8faecc',\r\n                        marginBottom: '4px',\r\n                      }}>\r\n                        {cardDetails?.cardType || (selectedCard.kind === 'spec' ? (selectedCard.base as any).type : '')}\r\n                        {cardDetails?.tier && ` â€¢ ${cardDetails.tier}`}\r\n                        {cardDetails?.speed && ` â€¢ ${cardDetails.speed}`}\r\n                        {cardDetails?.slot && ` â€¢ Slot: ${cardDetails.slot}`}\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* For government: show base stats */}\r\n                    {selectedCard.kind === 'pol' && (\r\n                      <div style={{\r\n                        display: 'flex',\r\n                        gap: '10px',\r\n                        flexWrap: 'wrap',\r\n                        marginTop: '4px',\r\n                        marginBottom: '4px',\r\n                        color: '#a9c1da',\r\n                        fontSize: '14px',\r\n                      }}>\r\n                        <span>Influence: {(selectedCard.base as any).influence}</span>\r\n                        <span>Tier: {(selectedCard.base as any).T}</span>\r\n                        <span>Keyword: {(selectedCard.base as any).tag}</span>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div style={{\r\n                      fontSize: '12px',\r\n                      color: '#6b7280',\r\n                    fontWeight: 500,\r\n                  }}>\r\n                    Card {categorizedCards.allFilteredCards.findIndex(\r\n                      card => card.kind === selectedCard.kind && card.base.id === selectedCard.base.id\r\n                    ) + 1} of {categorizedCards.allFilteredCards.length}\r\n                  </div>\r\n                </div>\r\n\r\n                  {/* Cost in Top Right Corner */}\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'flex-end',\r\n                    gap: '8px',\r\n                  }}>\r\n                    <div style={{\r\n                      background: '#1f2937',\r\n                      border: '1px solid #374151',\r\n                      borderRadius: '8px',\r\n                      padding: '8px 12px',\r\n                      fontSize: '14px',\r\n                      color: '#e5e7eb',\r\n                    }}>\r\n                      Cost: {convertHPToUSD(cardDetails?.deckCost || (selectedCard.kind === 'pol' ? (selectedCard.base as BasePolitician).BP || 0 : (selectedCard.base as BaseSpecial).bp))}\r\n                    </div>\r\n\r\n                <button\r\n                  onClick={handleCloseCardDetail}\r\n                  style={{\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    color: '#8faecc',\r\n                    fontSize: '24px',\r\n                    cursor: 'pointer',\r\n                    padding: '4px',\r\n                    borderRadius: '4px',\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = '#1a2a3a';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.background = 'none';\r\n                  }}\r\n                >\r\n                  Ã—\r\n                </button>\r\n                  </div>\r\n              </div>\r\n\r\n                {/* Game Effect */}\r\n              <div style={{\r\n                  background: '#111827',\r\n                  border: '1px solid #ffffff',\r\n                  borderRadius: '12px',\r\n                  padding: '20px',\r\n              }}>\r\n                <h3 style={{\r\n                  margin: '0 0 12px 0',\r\n                  fontSize: '16px',\r\n                  fontWeight: 600,\r\n                    color: '#e5e7eb',\r\n                }}>\r\n                    Game Effect\r\n                </h3>\r\n\r\n                  <p style={{\r\n                    margin: 0,\r\n                    color: '#d1d5db',\r\n                    lineHeight: '1.5',\r\n                    fontSize: '15px',\r\n                  }}>\r\n                    {cardDetails?.gameEffect || (selectedCard.kind === 'spec'\r\n                      ? (selectedCard.base as BaseSpecial).effect\r\n                      : 'Passive Politician abilities based on Tag')}\r\n                  </p>\r\n              </div>\r\n\r\n                {/* Synergy for Public */}\r\n                {cardDetails?.synergy && (\r\n                  <div style={{\r\n                    background: '#111827',\r\n                    border: '1px solid #ffffff',\r\n                    borderRadius: '12px',\r\n                    padding: '20px',\r\n                  }}>\r\n                    <h3 style={{\r\n                      margin: '0 0 12px 0',\r\n                      fontSize: '16px',\r\n                      fontWeight: 600,\r\n                      color: '#e5e7eb',\r\n                    }}>\r\n                      Synergy\r\n                    </h3>\r\n                    <p style={{\r\n                      margin: 0,\r\n                      color: '#d1d5db',\r\n                      lineHeight: '1.5',\r\n                      fontSize: '15px',\r\n                    }}>\r\n                      {cardDetails.synergy}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Trigger Information for Interventions */}\r\n                {cardDetails?.trigger && (\r\n              <div style={{\r\n                    background: '#111827',\r\n                    border: '1px solid #ffffff',\r\n                    borderRadius: '12px',\r\n                    padding: '20px',\r\n              }}>\r\n                <h3 style={{\r\n                  margin: '0 0 12px 0',\r\n                  fontSize: '16px',\r\n                  fontWeight: 600,\r\n                      color: '#e5e7eb',\r\n                }}>\r\n                      Trigger\r\n                </h3>\r\n                <p style={{\r\n                  margin: 0,\r\n                      color: '#d1d5db',\r\n                  lineHeight: '1.5',\r\n                      fontSize: '15px',\r\n                }}>\r\n                      {cardDetails.trigger}\r\n                </p>\r\n              </div>\r\n                )}\r\n\r\n                {/* Usage and Example for Initiatives/Interventions */}\r\n                {(cardDetails?.usage || cardDetails?.example) && (\r\n                  <div style={{\r\n                    background: '#111827',\r\n                    border: '1px solid #ffffff',\r\n                    borderRadius: '12px',\r\n                    padding: '20px',\r\n                  }}>\r\n                    {cardDetails.usage && (\r\n                      <div style={{ marginBottom: '10px' }}>\r\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>When to play?</div>\r\n                        <div style={{ color: '#d1d5db', fontSize: '15px', lineHeight: '1.5' }}>{cardDetails.usage}</div>\r\n                      </div>\r\n                    )}\r\n                    {cardDetails.example && (\r\n                      <div>\r\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Example</div>\r\n                        <div style={{ color: '#d1d5db', fontSize: '15px', lineHeight: '1.5' }}>{cardDetails.example}</div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Personal Information */}\r\n                {cardDetails && (cardDetails.nationality || cardDetails.birthDate || cardDetails.estimatedWealth || cardDetails.controversialQuote) && (\r\n                  <div style={{\r\n                    background: '#111827',\r\n                    border: '1px solid #ffffff',\r\n                    borderRadius: '12px',\r\n                    padding: '20px',\r\n                  }}>\r\n                    <h3 style={{\r\n                      margin: '0 0 16px 0',\r\n                      fontSize: '16px',\r\n                      fontWeight: 600,\r\n                      color: '#e5e7eb',\r\n                    }}>\r\n                      Personal Information\r\n                    </h3>\r\n\r\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>\r\n                      {cardDetails.nationality && (\r\n                        <div>\r\n                          <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Nationality</div>\r\n                          <div style={{ color: '#e5e7eb', fontWeight: 500 }}>{cardDetails.nationality}</div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {cardDetails.birthDate && (\r\n                        <div>\r\n                          <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Birth Date</div>\r\n                          <div style={{ color: '#e5e7eb', fontWeight: 500 }}>{cardDetails.birthDate}</div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {cardDetails.estimatedWealth && (\r\n                      <div style={{ marginTop: '12px' }}>\r\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Estimated Wealth</div>\r\n                        <div style={{ color: '#e5e7eb', fontWeight: 500 }}>{formatWealth(cardDetails.estimatedWealth)}</div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {cardDetails.controversialQuote && (\r\n                      <div style={{\r\n                        marginTop: '16px',\r\n                        background: '#1f2937',\r\n                        border: '1px solid #ffffff',\r\n                        borderRadius: '8px',\r\n                        padding: '12px',\r\n                      }}>\r\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '6px' }}>Quote</div>\r\n                        <div style={{\r\n                          color: '#d1d5db',\r\n                          fontStyle: 'italic',\r\n                          lineHeight: '1.4',\r\n                          fontSize: '14px',\r\n                        }}>\r\n                          {cardDetails.controversialQuote}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Sources integrated into modal */}\r\n                    {cardDetails?.sources && cardDetails.sources.length > 0 && (\r\n                      <div style={{ marginTop: '16px' }}>\r\n                        <button\r\n                          onClick={() => setShowSources(!showSources)}\r\n                          style={{\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            color: '#9ca3af',\r\n                            fontSize: '12px',\r\n                            cursor: 'pointer',\r\n                            textDecoration: 'underline',\r\n                            padding: 0,\r\n                          }}\r\n                        >\r\n                          Show Sources\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Action Button */}\r\n              <div style={{\r\n                display: 'flex',\r\n                gap: '12px',\r\n                marginTop: 'auto',\r\n              }}>\r\n                <button\r\n                  onClick={() => {\r\n                    builderAdd(selectedCard.base, selectedCard.kind);\r\n                    handleCloseCardDetail();\r\n                  }}\r\n                  disabled={!builderCanAdd(selectedCard.base, selectedCard.kind)}\r\n                  style={{\r\n                    flex: 1,\r\n                      background: builderCanAdd(selectedCard.base, selectedCard.kind)\r\n                        ? '#374151'\r\n                        : '#1f2937',\r\n                      color: '#e5e7eb',\r\n                      border: '1px solid #4b5563',\r\n                    borderRadius: '8px',\r\n                    padding: '12px',\r\n                    fontSize: '14px',\r\n                    fontWeight: 600,\r\n                      cursor: builderCanAdd(selectedCard.base, selectedCard.kind) ? 'pointer' : 'not-allowed',\r\n                      opacity: builderCanAdd(selectedCard.base, selectedCard.kind) ? 1 : 0.6,\r\n                  }}\r\n                >\r\n                  Add to Deck\r\n                </button>\r\n              </div>\r\n            </div>\r\n            </div>\r\n\r\n            {/* Mini Modal for Sources */}\r\n            {showSources && cardDetails?.sources && (\r\n              <div style={{\r\n                position: 'fixed',\r\n                top: 'calc(50% + 5px)',\r\n                left: 'calc(50% + 5px)',\r\n                transform: 'translate(-50%, -50%)',\r\n                background: '#0d1621',\r\n                border: '2px solid #ffffff',\r\n                borderRadius: '12px',\r\n                padding: '20px',\r\n                minWidth: '400px',\r\n                maxWidth: '600px',\r\n                boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8)',\r\n                zIndex: 60,\r\n              }}>\r\n                <div style={{\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center',\r\n                  marginBottom: '16px',\r\n                }}>\r\n                  <h4 style={{\r\n                    margin: 0,\r\n                    fontSize: '16px',\r\n                    fontWeight: 600,\r\n                    color: '#e5e7eb',\r\n                  }}>\r\n                    Sources & Calculation Basis\r\n                  </h4>\r\n                  <button\r\n                    onClick={() => setShowSources(false)}\r\n                    style={{\r\n                      background: 'none',\r\n                      border: 'none',\r\n                      color: '#9ca3af',\r\n                      fontSize: '20px',\r\n                      cursor: 'pointer',\r\n                      padding: '4px',\r\n                    }}\r\n                  >\r\n                    Ã—\r\n                  </button>\r\n                </div>\r\n\r\n                {cardDetails.calculation && (\r\n                  <div style={{ marginBottom: '16px' }}>\r\n                    <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '6px' }}>Calculation:</div>\r\n                    <div style={{\r\n                      color: '#d1d5db',\r\n                      fontSize: '13px',\r\n                      lineHeight: '1.4',\r\n                      background: '#1f2937',\r\n                      padding: '10px',\r\n                      borderRadius: '6px',\r\n                    }}>\r\n                      {cardDetails.calculation}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n                <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '6px' }}>Sources:</div>\r\n                <div style={{\r\n                  color: '#d1d5db',\r\n                  fontSize: '13px',\r\n                  lineHeight: '1.4',\r\n                }}>\r\n                  {formatSources(cardDetails.sources)}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })()}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}