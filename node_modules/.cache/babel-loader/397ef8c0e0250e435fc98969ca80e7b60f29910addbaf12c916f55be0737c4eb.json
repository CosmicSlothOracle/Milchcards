{"ast":null,"code":"import React,{useState,useCallback,useMemo,useEffect}from'react';import{Pols,Specials,PRESET_DECKS}from'../data/gameData';import{currentBuilderBudget,currentBuilderCount,drawCardImage}from'../utils/gameUtils';import{getCardDetails,formatWealth,formatSources,convertHPToUSD}from'../data/cardDetails';import{Icon}from'../ui/Icon';import{withIcons}from'../ui/withIcons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const DeckBuilder=_ref=>{let{isOpen,onClose,onApplyDeck,onStartMatch}=_ref;const[deck,setDeck]=useState([]);const[selectedDeckName,setSelectedDeckName]=useState('');const[searchQuery,setSearchQuery]=useState('');const[selectedCard,setSelectedCard]=useState(null);const[showSources,setShowSources]=useState(false);const budget=currentBuilderBudget(deck);const count=currentBuilderCount(deck);// Helper: classify a card into an effect category for sorting / grouping.\n// Priority: 0 = Influence (buffs), 1 = AP gain, 2 = Card draw, 3 = Other\nconst getEffectRank=base=>{// Government cards keep default rank to avoid mixing with specials\nif(base.type===undefined)return 0;const s=base;const rawTags=s.tags;const tags=(rawTags||[]).map(t=>t.toLowerCase());const key=s.effectKey;const has=needle=>tags.includes(needle)||(key?key.toLowerCase().includes(needle):false);if(has('buff')||has('influence'))return 0;// +Influence\nif(has('ap'))return 1;// +AP\nif(has('draw'))return 2;// +Card draw\nreturn 3;// other / mixed effects\n};const getEffectLabel=rank=>{switch(rank){case 0:return'+ Influence';case 1:return'+ AP';case 2:return'+ Cards';default:return'Other';}};const categorizedCards=useMemo(()=>{const categories={government:[],public:[],initiatives:[],interventions:[],corruptions:[]};// Government cards\nPols.forEach(p=>categories.government.push({kind:'pol',base:p}));// Public cards\nSpecials.filter(s=>s.type==='Öffentlichkeitskarte').forEach(s=>categories.public.push({kind:'spec',base:s}));// Initiatives (Instant and Ongoing)\nSpecials.filter(s=>s.type==='Sofort-Initiative'||s.type==='Dauerhaft-Initiative').forEach(s=>categories.initiatives.push({kind:'spec',base:s}));// Interventions\nSpecials.filter(s=>s.type==='Intervention').forEach(s=>categories.interventions.push({kind:'spec',base:s}));// Corruption cards\nSpecials.filter(s=>s.type==='Corruption').forEach(s=>categories.corruptions.push({kind:'spec',base:s}));// Sort public, initiatives and interventions by effect rank (Influence, AP, Draw, Other)\nconst sortByEffect=arr=>arr.sort((a,b)=>getEffectRank(a.base)-getEffectRank(b.base));sortByEffect(categories.public);sortByEffect(categories.initiatives);sortByEffect(categories.interventions);// Filter by search term\nconst matches=(kind,base)=>{if(!searchQuery)return true;const hay=\"\".concat(base.name,\" \").concat(kind==='pol'?base.tag:base.type).toLowerCase();return hay.includes(searchQuery.toLowerCase());};// Combine all filtered cards for navigation\nconst allFilteredCards=[...categories.government.filter(_ref2=>{let{kind,base}=_ref2;return matches(kind,base);}),...categories.public.filter(_ref3=>{let{kind,base}=_ref3;return matches(kind,base);}),...categories.initiatives.filter(_ref4=>{let{kind,base}=_ref4;return matches(kind,base);}),...categories.interventions.filter(_ref5=>{let{kind,base}=_ref5;return matches(kind,base);}),...categories.corruptions.filter(_ref6=>{let{kind,base}=_ref6;return matches(kind,base);})];return{categories:{government:categories.government.filter(_ref7=>{let{kind,base}=_ref7;return matches(kind,base);}),public:categories.public.filter(_ref8=>{let{kind,base}=_ref8;return matches(kind,base);}),initiatives:categories.initiatives.filter(_ref9=>{let{kind,base}=_ref9;return matches(kind,base);}),interventions:categories.interventions.filter(_ref0=>{let{kind,base}=_ref0;return matches(kind,base);}),corruptions:categories.corruptions.filter(_ref1=>{let{kind,base}=_ref1;return matches(kind,base);})},allFilteredCards};},[searchQuery]);const builderCanAdd=useCallback((base,kind)=>{var _BP;const tier=kind==='spec'?base.tier:base.T;const limit=tier>=3?1:2;const entry=deck.find(e=>e.kind===kind&&e.baseId===base.id);const already=entry?entry.count:0;const cost=kind==='pol'?(_BP=base.BP)!==null&&_BP!==void 0?_BP:0:base.bp;return already<limit&&count<25&&budget+cost<=300;},[deck,budget,count]);const builderAdd=useCallback((base,kind)=>{if(!builderCanAdd(base,kind))return;setDeck(prev=>{const newDeck=[...prev];let entry=newDeck.find(e=>e.kind===kind&&e.baseId===base.id);if(!entry){entry={kind,baseId:base.id,count:0};newDeck.push(entry);}entry.count+=1;return newDeck;});// Clear preset name when manually modifying deck\nsetSelectedDeckName('');},[builderCanAdd]);const builderRemove=useCallback((base,kind)=>{setDeck(prev=>{const newDeck=[...prev];let entry=newDeck.find(e=>e.kind===kind&&e.baseId===base.id);if(!entry)return prev;entry.count-=1;if(entry.count<=0){return newDeck.filter(e=>e!==entry);}return newDeck;});// Clear preset name when manually modifying deck\nsetSelectedDeckName('');},[]);const loadPresetDeck=useCallback(which=>{const preset=PRESET_DECKS[which];if(preset&&preset.length>0){setDeck([...preset]);// Set deck name for display\nconst deckNames={'INITIATIVE_TEST_DECK':'⚡ Initiative Test Deck (10 Karten)','TEST_DECK_WITH_DRAW_EFFECTS':'🧪 Test Deck - Draw Effects (11 Karten)','TEST_DECK_5_CARDS':'🧪 Test Deck (5 Karten)','NEOLIBERAL_TECHNOKRAT':'🏛️ Neoliberaler Technokrat','AUTORITAERER_REALIST':'🦅 Autoritärer Realist','PROGRESSIVER_AKTIVISMUS':'🌱 Progressiver Aktivismus','POPULISTISCHER_OPPORTUNIST':'🎭 Populistischer Opportunist'};setSelectedDeckName(deckNames[which]||'');}},[]);const handleApplyDeck=useCallback(()=>{if(count===25&&budget<=300){onApplyDeck(deck);onClose();}},[deck,count,budget,onApplyDeck,onClose]);const handleCardClick=useCallback((kind,base)=>{setSelectedCard({kind,base});},[]);const handleCloseCardDetail=useCallback(()=>{setSelectedCard(null);setShowSources(false);},[]);const handlePreviousCard=useCallback(()=>{if(!selectedCard||!categorizedCards.allFilteredCards.length)return;const currentIndex=categorizedCards.allFilteredCards.findIndex(card=>card.kind===selectedCard.kind&&card.base.id===selectedCard.base.id);if(currentIndex>0){const prevCard=categorizedCards.allFilteredCards[currentIndex-1];setSelectedCard({kind:prevCard.kind,base:prevCard.base});}},[selectedCard,categorizedCards.allFilteredCards]);const handleNextCard=useCallback(()=>{if(!selectedCard||!categorizedCards.allFilteredCards.length)return;const currentIndex=categorizedCards.allFilteredCards.findIndex(card=>card.kind===selectedCard.kind&&card.base.id===selectedCard.base.id);if(currentIndex<categorizedCards.allFilteredCards.length-1){const nextCard=categorizedCards.allFilteredCards[currentIndex+1];setSelectedCard({kind:nextCard.kind,base:nextCard.base});}},[selectedCard,categorizedCards.allFilteredCards]);// Keyboard navigation\nuseEffect(()=>{const handleKeyDown=event=>{if(!selectedCard)return;switch(event.key){case'ArrowLeft':event.preventDefault();handlePreviousCard();break;case'ArrowRight':event.preventDefault();handleNextCard();break;case'Escape':event.preventDefault();handleCloseCardDetail();break;}};window.addEventListener('keydown',handleKeyDown);return()=>window.removeEventListener('keydown',handleKeyDown);},[selectedCard,handlePreviousCard,handleNextCard,handleCloseCardDetail]);const handleStartMatch=useCallback(()=>{const p1Deck=deck.length?deck:[];// 🧪 TEST DECK: P2 bekommt das gleiche Deck wie P1 für isoliertes Testing\nconst p2Deck=deck.length?[...deck]:[];// Same deck as P1\nconsole.log('🔧 DEBUG: Starting match with decks:',{p1Cards:p1Deck.length,p2Cards:p2Deck.length});onStartMatch(p1Deck,p2Deck);onClose();},[deck,onStartMatch,onClose]);// Card Tile Component\nconst CardTile=/*#__PURE__*/React.memo(_ref10=>{let{kind,base,onClick}=_ref10;return/*#__PURE__*/_jsxs(\"div\",{onClick:onClick,style:{background:'#0f1822',border:'1px solid #26394c',borderRadius:'8px',padding:'4px',display:'flex',flexDirection:'column',gap:'4px',cursor:'pointer',transition:'all 0.2s ease',width:'132px',height:'180px'},onMouseEnter:e=>{e.currentTarget.style.background='#1a2a3a';e.currentTarget.style.borderColor='#3a4c5d';},onMouseLeave:e=>{e.currentTarget.style.background='#0f1822';e.currentTarget.style.borderColor='#26394c';},children:[/*#__PURE__*/_jsx(\"canvas\",{width:120,height:120,style:{display:'block',width:'120px',height:'120px',borderRadius:'6px',background:'#0b1118',border:'1px solid #1e2c3b'},ref:canvas=>{if(canvas){const ctx=canvas.getContext('2d');if(ctx){const mockCard={kind,baseId:base.id,name:base.name,uid:base.id,id:base.id,key:base.key};drawCardImage(ctx,mockCard,0,0,120,'ui');}}}}),/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,fontSize:'10px',fontWeight:600,color:'#dbe9f8',textAlign:'center',lineHeight:'1.2',overflow:'hidden',textOverflow:'ellipsis',display:'-webkit-box',WebkitLineClamp:2,WebkitBoxOrient:'vertical',height:'24px'},children:base.name}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',gap:'6px',marginTop:'auto'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'9px',color:'#a9c1da',fontWeight:500},children:kind==='pol'?\"\".concat(convertHPToUSD(base.BP||0)):\"\".concat(convertHPToUSD(base.bp))}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();builderAdd(base,kind);},disabled:!builderCanAdd(base,kind),style:{background:'#90EE90',color:'#2d572d',border:'none',borderRadius:'4px',padding:'2px 6px',fontSize:'10px',fontWeight:'bold',cursor:'pointer',opacity:builderCanAdd(base,kind)?1:0.5,minWidth:'24px',height:'20px',display:'flex',alignItems:'center',justifyContent:'center'},children:\"+\"})]})]});});if(!isOpen)return null;const HP_LIMIT=108;// Regelwerk: 108 HP Budget für 25 Karten\nconst overBudget=budget>HP_LIMIT;const overCount=count>25;const isValid=!overBudget&&!overCount;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',inset:0,display:'flex',background:'rgba(4,8,12,.8)',backdropFilter:'blur(2px)',zIndex:40},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',inset:'12px',background:'#0d1621',border:'1px solid #1f3042',borderRadius:'12px',padding:'12px',display:'flex',flexDirection:'column',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:600,fontSize:'14px',letterSpacing:'.4px'},children:[\"Deckbuilder\",selectedDeckName?\" - \".concat(selectedDeckName):'']}),/*#__PURE__*/_jsxs(\"span\",{style:{padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px'},children:[\"Budget: \",convertHPToUSD(budget),\" / \",convertHPToUSD(HP_LIMIT)]}),/*#__PURE__*/_jsxs(\"span\",{style:{padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px'},children:[\"Karten: \",count,\" / 25\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',flex:'0 0 220px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"search\",size:14}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Suche (Name, Tag)\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),style:{flex:1,outline:'none',padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px',color:'#e8f0f8'}})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('INITIATIVE_TEST_DECK'),style:{background:'#4338ca',color:'#ffffff',border:'1px solid #6366f1',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap',fontWeight:'bold'},children:\"\\u26A1 Initiative Test (10 Karten)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('TEST_DECK_WITH_DRAW_EFFECTS'),style:{background:'#ff6b35',color:'#ffffff',border:'1px solid #ff8c61',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap',fontWeight:'bold'},children:\"\\uD83E\\uDDEA Draw Effects (11 Karten)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('TEST_DECK_5_CARDS'),style:{background:'#df6530',color:'#ffffff',border:'1px solid #e5844c',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap',fontWeight:'bold'},children:\"\\uD83E\\uDDEA Test (5 Karten)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('NEOLIBERAL_TECHNOKRAT'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83C\\uDFDB\\uFE0F Neoliberaler Technokrat\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('AUTORITAERER_REALIST'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83E\\uDD85 Autorit\\xE4rer Realist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('PROGRESSIVER_AKTIVISMUS'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83C\\uDF31 Progressiver Aktivismus\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadPresetDeck('POPULISTISCHER_OPPORTUNIST'),style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'11px',cursor:'pointer',whiteSpace:'nowrap'},children:\"\\uD83C\\uDFAD Populistischer Opportunist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'12px',cursor:'pointer'},children:\"Schlie\\xDFen\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 360px',gap:'12px',minHeight:0,flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{overflow:'auto',border:'1px solid #1f2c3a',borderRadius:'10px',padding:'8px',background:'#0a121b',display:'grid',gridTemplateColumns:'repeat(4, 1fr)',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(173, 216, 230, 0.2)',border:'1px solid #4a90e2',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#add8e6',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"government_row\",size:16}),\"Government\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#8bb5d9',lineHeight:'1.3'},children:withIcons('Politicians and state leaders who influence the government. Max 5 in the government hierarchy.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:categorizedCards.categories.government.map(_ref11=>{let{kind,base}=_ref11;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(kind,\"-\").concat(base.id));})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(245, 245, 220, 0.2)',border:'1px solid #d2b48c',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#f5f5dc',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"public_row\",size:16}),\"Public\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#d2b48c',lineHeight:'1.3'},children:withIcons('People from media, business, and academia who support your actions.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:[0,1,2,3].map(rank=>/*#__PURE__*/_jsxs(React.Fragment,{children:[categorizedCards.categories.public.some(_ref12=>{let{base}=_ref12;return getEffectRank(base)===rank;})&&/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',fontSize:'11px',fontWeight:600,color:'#d2b48c',margin:'4px 0'},children:getEffectLabel(rank)}),categorizedCards.categories.public.filter(_ref13=>{let{base}=_ref13;return getEffectRank(base)===rank;}).map(_ref14=>{let{kind,base}=_ref14;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(rank,\"-\").concat(kind,\"-\").concat(base.id));})]},rank))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(64, 224, 208, 0.2)',border:'1px solid #40e0d0',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#40e0d0',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"initiative\",size:16}),\"Initiatives\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#40e0d0',lineHeight:'1.3'},children:withIcons('One-time (Instant) and ongoing political actions for special effects.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:[0,1,2,3].map(rank=>/*#__PURE__*/_jsxs(React.Fragment,{children:[categorizedCards.categories.initiatives.some(_ref15=>{let{base}=_ref15;return getEffectRank(base)===rank;})&&/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',fontSize:'11px',fontWeight:600,color:'#40e0d0',margin:'4px 0'},children:getEffectLabel(rank)}),categorizedCards.categories.initiatives.filter(_ref16=>{let{base}=_ref16;return getEffectRank(base)===rank;}).map(_ref17=>{let{kind,base}=_ref17;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(rank,\"-\").concat(kind,\"-\").concat(base.id));})]},rank))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(200, 160, 255, 0.2)',border:'1px solid #c8a0ff',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#c8a0ff',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"intervention_trap\",size:16}),\"Interventions\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#c8a0ff',lineHeight:'1.3'},children:withIcons('Concealed trap cards that trigger automatically and disrupt enemy strategies.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:[0,1,2,3].map(rank=>/*#__PURE__*/_jsxs(React.Fragment,{children:[categorizedCards.categories.interventions.some(_ref18=>{let{base}=_ref18;return getEffectRank(base)===rank;})&&/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',fontSize:'11px',fontWeight:600,color:'#c8a0ff',margin:'4px 0'},children:getEffectLabel(rank)}),categorizedCards.categories.interventions.filter(_ref19=>{let{base}=_ref19;return getEffectRank(base)===rank;}).map(_ref20=>{let{kind,base}=_ref20;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(rank,\"-\").concat(kind,\"-\").concat(base.id));})]},rank))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(255, 200, 120, 0.06)',border:'1px solid #ffb86b',borderRadius:'8px',padding:'8px',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'14px',fontWeight:700,color:'#ffb86b',marginBottom:'4px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Icon,{name:\"intervention_trap\",size:16}),\"Corruption\"]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'11px',color:'#ffb86b',lineHeight:'1.3'},children:withIcons('Korruptionskarten: Risikoreiche W6-Proben zur Übernahme gegnerischer Regierungen. Wähle ein Ziel, würfle, Boni durch Oligarchen.')})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(132px, 1fr))',gap:'8px',flex:1,justifyContent:'start',alignContent:'start'},children:[0,1,2,3].map(rank=>/*#__PURE__*/_jsxs(React.Fragment,{children:[categorizedCards.categories.corruptions.some(_ref21=>{let{base}=_ref21;return getEffectRank(base)===rank;})&&/*#__PURE__*/_jsx(\"div\",{style:{gridColumn:'1 / -1',fontSize:'11px',fontWeight:600,color:'#ffb86b',margin:'4px 0'},children:getEffectLabel(rank)}),categorizedCards.categories.corruptions.filter(_ref22=>{let{base}=_ref22;return getEffectRank(base)===rank;}).map(_ref23=>{let{kind,base}=_ref23;return/*#__PURE__*/_jsx(CardTile,{kind:kind,base:base,onClick:()=>handleCardClick(kind,base)},\"\".concat(rank,\"-\").concat(kind,\"-\").concat(base.id));})]},rank))})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{overflow:'auto',border:'1px solid #1f2c3a',borderRadius:'10px',padding:'8px',background:'#0a121b',display:'flex',flexDirection:'column',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'6px',alignItems:'center',fontSize:'12px',color:'#cfe0f2'},children:/*#__PURE__*/_jsx(\"div\",{style:{padding:'4px 8px',borderRadius:'8px',background:'#0f1a26',border:'1px solid #203043',fontSize:'12px',color:isValid?'#4ade80':'#ef4444'},children:isValid?'Deck OK':\"Deck invalid\".concat(overBudget?' · Budget':'').concat(overCount?' · Cards':'')})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflow:'auto'},children:deck.map(entry=>{const base=entry.kind==='pol'?Pols.find(p=>p.id===entry.baseId):Specials.find(s=>s.id===entry.baseId);if(!base)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'6px 8px',borderBottom:'1px solid #182433',fontSize:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[entry.count,\"\\xD7 \",base.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{children:convertHPToUSD(entry.kind==='pol'?base.BP||0:base.bp)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'4px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();builderRemove(base,entry.kind);},style:{background:'#dc2626',border:'none',borderRadius:'4px',color:'white',width:'20px',height:'20px',fontSize:'12px',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center'},title:\"Remove one\",children:\"\\u2212\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();builderAdd(base,entry.kind);},disabled:!builderCanAdd(base,entry.kind),style:{background:builderCanAdd(base,entry.kind)?'#059669':'#6b7280',border:'none',borderRadius:'4px',color:'white',width:'20px',height:'20px',fontSize:'12px',cursor:builderCanAdd(base,entry.kind)?'pointer':'not-allowed',display:'flex',alignItems:'center',justifyContent:'center'},title:\"Add one\",children:\"+\"})]})]})]},\"\".concat(entry.kind,\"-\").concat(entry.baseId));})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleApplyDeck,disabled:!isValid,style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'12px',cursor:'pointer',opacity:isValid?1:0.6},children:\"Use as P1 Deck\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStartMatch,style:{background:'#162436',color:'#eaf3ff',border:'1px solid #27425b',borderRadius:'8px',padding:'6px 10px',fontSize:'12px',cursor:'pointer'},children:\"Start Match\"})]})]})]})]}),selectedCard&&(()=>{const cardDetails=getCardDetails(selectedCard.base.name);return/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.8)',display:'flex',alignItems:'center',justifyContent:'flex-start',paddingLeft:'20px',zIndex:50},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#0d1621',border:'3px solid #ffffff',borderRadius:'16px',padding:'24px',display:'flex',gap:'24px',width:'calc(70vw)',height:'calc(90vh)',overflow:'hidden',position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'0 0 1024px',height:'1024px',background:'#0b1118',border:'2px solid #ffffff',borderRadius:'12px',overflow:'hidden',position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePreviousCard,style:{position:'absolute',left:'16px',top:'50%',transform:'translateY(-50%)',background:'rgba(13, 22, 33, 0.9)',border:'2px solid #1f3042',borderRadius:'50%',width:'48px',height:'48px',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',color:'#eaf3ff',fontSize:'20px',fontWeight:'bold',zIndex:10,transition:'all 0.2s ease'},onMouseEnter:e=>{e.currentTarget.style.background='rgba(22, 36, 54, 0.95)';e.currentTarget.style.borderColor='#27425b';},onMouseLeave:e=>{e.currentTarget.style.background='rgba(13, 22, 33, 0.9)';e.currentTarget.style.borderColor='#1f3042';},children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextCard,style:{position:'absolute',right:'16px',top:'50%',transform:'translateY(-50%)',background:'rgba(13, 22, 33, 0.9)',border:'2px solid #1f3042',borderRadius:'50%',width:'48px',height:'48px',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',color:'#eaf3ff',fontSize:'20px',fontWeight:'bold',zIndex:10,transition:'all 0.2s ease'},onMouseEnter:e=>{e.currentTarget.style.background='rgba(22, 36, 54, 0.95)';e.currentTarget.style.borderColor='#27425b';},onMouseLeave:e=>{e.currentTarget.style.background='rgba(13, 22, 33, 0.9)';e.currentTarget.style.borderColor='#1f3042';},children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"canvas\",{width:1024,height:1024,style:{display:'block',width:'1024px',height:'1024px'},ref:canvas=>{if(canvas){const ctx=canvas.getContext('2d');if(ctx){// Create a mock card object for drawing\nconst mockCard={kind:selectedCard.kind,baseId:selectedCard.base.id,name:selectedCard.base.name,uid:selectedCard.base.id,id:selectedCard.base.id,key:selectedCard.base.key};drawCardImage(ctx,mockCard,0,0,1024,'modal');}}}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1',minWidth:'400px',display:'flex',flexDirection:'column',gap:'20px',position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 8px 0',fontSize:'28px',fontWeight:700,color:'#eaf3ff',lineHeight:'1.2'},children:selectedCard.base.name}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',fontWeight:600,color:'#dbe9f8',marginBottom:'4px'},children:(cardDetails===null||cardDetails===void 0?void 0:cardDetails.category)||(selectedCard.kind==='pol'?'Government':'Public')}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.subcategories)&&cardDetails.subcategories.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#a9c1da',marginBottom:'4px'},children:withIcons(cardDetails.subcategories.join(', '),14)}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.highestPosition)&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#8faecc',marginBottom:'8px'},children:cardDetails.highestPosition}),selectedCard.kind==='spec'&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#8faecc',marginBottom:'4px'},children:[(cardDetails===null||cardDetails===void 0?void 0:cardDetails.cardType)||(selectedCard.kind==='spec'?selectedCard.base.type:''),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.tier)&&\" \\u2022 \".concat(cardDetails.tier),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.speed)&&\" \\u2022 \".concat(cardDetails.speed),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.slot)&&\" \\u2022 Slot: \".concat(cardDetails.slot)]}),selectedCard.kind==='pol'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap',marginTop:'4px',marginBottom:'4px',color:'#a9c1da',fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Influence: \",selectedCard.base.influence]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Tier: \",selectedCard.base.T]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Keyword: \",selectedCard.base.tag]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#6b7280',fontWeight:500},children:[\"Card \",categorizedCards.allFilteredCards.findIndex(card=>card.kind===selectedCard.kind&&card.base.id===selectedCard.base.id)+1,\" of \",categorizedCards.allFilteredCards.length]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'flex-end',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#1f2937',border:'1px solid #374151',borderRadius:'8px',padding:'8px 12px',fontSize:'14px',color:'#e5e7eb'},children:[\"Cost: \",convertHPToUSD((cardDetails===null||cardDetails===void 0?void 0:cardDetails.deckCost)||(selectedCard.kind==='pol'?selectedCard.base.BP||0:selectedCard.base.bp))]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCloseCardDetail,style:{background:'none',border:'none',color:'#8faecc',fontSize:'24px',cursor:'pointer',padding:'4px',borderRadius:'4px'},onMouseEnter:e=>{e.currentTarget.style.background='#1a2a3a';},onMouseLeave:e=>{e.currentTarget.style.background='none';},children:\"\\xD7\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Game Effect\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#d1d5db',lineHeight:'1.5',fontSize:'15px'},children:cardDetails!==null&&cardDetails!==void 0&&cardDetails.gameEffect?withIcons(cardDetails.gameEffect,14):selectedCard.kind==='spec'?selectedCard.base.effect:'Passive Politician abilities based on Tag'})]}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.synergy)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Synergy\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#d1d5db',lineHeight:'1.5',fontSize:'15px'},children:cardDetails.synergy})]}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.trigger)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Trigger\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#d1d5db',lineHeight:'1.5',fontSize:'15px'},children:cardDetails.trigger})]}),((cardDetails===null||cardDetails===void 0?void 0:cardDetails.usage)||(cardDetails===null||cardDetails===void 0?void 0:cardDetails.example))&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[cardDetails.usage&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"When to play?\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'15px',lineHeight:'1.5'},children:cardDetails.usage})]}),cardDetails.example&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Example\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'15px',lineHeight:'1.5'},children:cardDetails.example})]})]}),cardDetails&&(cardDetails.nationality||cardDetails.birthDate||cardDetails.estimatedWealth||cardDetails.controversialQuote)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111827',border:'1px solid #ffffff',borderRadius:'12px',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 16px 0',fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px'},children:[cardDetails.nationality&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Nationality\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#e5e7eb',fontWeight:500},children:cardDetails.nationality})]}),cardDetails.birthDate&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Birth Date\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#e5e7eb',fontWeight:500},children:cardDetails.birthDate})]})]}),cardDetails.estimatedWealth&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'4px'},children:\"Estimated Wealth\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#e5e7eb',fontWeight:500},children:formatWealth(cardDetails.estimatedWealth)})]}),cardDetails.controversialQuote&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'16px',background:'#1f2937',border:'1px solid #ffffff',borderRadius:'8px',padding:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'6px'},children:\"Quote\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontStyle:'italic',lineHeight:'1.4',fontSize:'14px'},children:cardDetails.controversialQuote})]}),(cardDetails===null||cardDetails===void 0?void 0:cardDetails.sources)&&cardDetails.sources.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'16px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSources(!showSources),style:{background:'none',border:'none',color:'#9ca3af',fontSize:'12px',cursor:'pointer',textDecoration:'underline',padding:0},children:\"Show Sources\"})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'12px',marginTop:'auto'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{builderAdd(selectedCard.base,selectedCard.kind);handleCloseCardDetail();},disabled:!builderCanAdd(selectedCard.base,selectedCard.kind),style:{flex:1,background:builderCanAdd(selectedCard.base,selectedCard.kind)?'#374151':'#1f2937',color:'#e5e7eb',border:'1px solid #4b5563',borderRadius:'8px',padding:'12px',fontSize:'14px',fontWeight:600,cursor:builderCanAdd(selectedCard.base,selectedCard.kind)?'pointer':'not-allowed',opacity:builderCanAdd(selectedCard.base,selectedCard.kind)?1:0.6},children:\"Add to Deck\"})})]})]}),showSources&&(cardDetails===null||cardDetails===void 0?void 0:cardDetails.sources)&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:'calc(50% + 5px)',left:'calc(50% + 5px)',transform:'translate(-50%, -50%)',background:'#0d1621',border:'2px solid #ffffff',borderRadius:'12px',padding:'20px',minWidth:'400px',maxWidth:'600px',boxShadow:'0 20px 60px rgba(0, 0, 0, 0.8)',zIndex:60},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,fontSize:'16px',fontWeight:600,color:'#e5e7eb'},children:\"Sources & Calculation Basis\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSources(false),style:{background:'none',border:'none',color:'#9ca3af',fontSize:'20px',cursor:'pointer',padding:'4px'},children:\"\\xD7\"})]}),cardDetails.calculation&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'6px'},children:\"Calculation:\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'13px',lineHeight:'1.4',background:'#1f2937',padding:'10px',borderRadius:'6px'},children:cardDetails.calculation})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginBottom:'6px'},children:\"Sources:\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#d1d5db',fontSize:'13px',lineHeight:'1.4'},children:formatSources(cardDetails.sources)})]})]});})()]});};","map":{"version":3,"names":["React","useState","useCallback","useMemo","useEffect","Pols","Specials","PRESET_DECKS","currentBuilderBudget","currentBuilderCount","drawCardImage","getCardDetails","formatWealth","formatSources","convertHPToUSD","Icon","withIcons","jsx","_jsx","jsxs","_jsxs","DeckBuilder","_ref","isOpen","onClose","onApplyDeck","onStartMatch","deck","setDeck","selectedDeckName","setSelectedDeckName","searchQuery","setSearchQuery","selectedCard","setSelectedCard","showSources","setShowSources","budget","count","getEffectRank","base","type","undefined","s","rawTags","tags","map","t","toLowerCase","key","effectKey","has","needle","includes","getEffectLabel","rank","categorizedCards","categories","government","public","initiatives","interventions","corruptions","forEach","p","push","kind","filter","sortByEffect","arr","sort","a","b","matches","hay","concat","name","tag","allFilteredCards","_ref2","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref0","_ref1","builderCanAdd","_BP","tier","T","limit","entry","find","e","baseId","id","already","cost","BP","bp","builderAdd","prev","newDeck","builderRemove","loadPresetDeck","which","preset","length","deckNames","handleApplyDeck","handleCardClick","handleCloseCardDetail","handlePreviousCard","currentIndex","findIndex","card","prevCard","handleNextCard","nextCard","handleKeyDown","event","preventDefault","window","addEventListener","removeEventListener","handleStartMatch","p1Deck","p2Deck","console","log","p1Cards","p2Cards","CardTile","memo","_ref10","onClick","style","background","border","borderRadius","padding","display","flexDirection","gap","cursor","transition","width","height","onMouseEnter","currentTarget","borderColor","onMouseLeave","children","ref","canvas","ctx","getContext","mockCard","uid","margin","fontSize","fontWeight","color","textAlign","lineHeight","overflow","textOverflow","WebkitLineClamp","WebkitBoxOrient","alignItems","justifyContent","marginTop","stopPropagation","disabled","opacity","minWidth","HP_LIMIT","overBudget","overCount","isValid","position","inset","backdropFilter","zIndex","letterSpacing","flex","size","placeholder","value","onChange","target","outline","whiteSpace","gridTemplateColumns","minHeight","marginBottom","alignContent","_ref11","Fragment","some","_ref12","gridColumn","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","flexWrap","borderBottom","title","cardDetails","top","left","right","bottom","paddingLeft","transform","category","subcategories","join","highestPosition","cardType","speed","slot","influence","deckCost","gameEffect","effect","synergy","trigger","usage","example","nationality","birthDate","estimatedWealth","controversialQuote","fontStyle","sources","textDecoration","maxWidth","boxShadow","calculation"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/components/DeckBuilder.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport { BuilderEntry, BasePolitician, BaseSpecial } from '../types/game';\nimport { Pols, Specials, PRESET_DECKS } from '../data/gameData';\nimport { currentBuilderBudget, currentBuilderCount, drawCardImage } from '../utils/gameUtils';\nimport { getCardDetails, formatWealth, formatSources, convertHPToUSD } from '../data/cardDetails';\nimport { Icon } from '../ui/Icon';\nimport { withIcons } from '../ui/withIcons';\n\ninterface DeckBuilderProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onApplyDeck: (deck: BuilderEntry[]) => void;\n  onStartMatch: (p1Deck: BuilderEntry[], p2Deck: BuilderEntry[]) => void;\n  images?: never;\n}\n\nexport const DeckBuilder: React.FC<DeckBuilderProps> = ({\n  isOpen,\n  onClose,\n  onApplyDeck,\n  onStartMatch\n}) => {\n  const [deck, setDeck] = useState<BuilderEntry[]>([]);\n  const [selectedDeckName, setSelectedDeckName] = useState<string>('');\n  const [searchQuery, setSearchQuery] = useState('');\n\n\n  const [selectedCard, setSelectedCard] = useState<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial } | null>(null);\n  const [showSources, setShowSources] = useState(false);\n\n  const budget = currentBuilderBudget(deck);\n  const count = currentBuilderCount(deck);\n\n  // Helper: classify a card into an effect category for sorting / grouping.\n  // Priority: 0 = Influence (buffs), 1 = AP gain, 2 = Card draw, 3 = Other\n  const getEffectRank = (base: BasePolitician | BaseSpecial): number => {\n      // Government cards keep default rank to avoid mixing with specials\n      if ((base as any).type === undefined) return 0;\n\n      const s = base as BaseSpecial;\n      const rawTags = (s as any).tags as string[] | undefined;\n      const tags = (rawTags || []).map((t: string) => t.toLowerCase());\n      const key = (s as any).effectKey as string | undefined;\n\n      const has = (needle: string) => tags.includes(needle) || (key ? key.toLowerCase().includes(needle) : false);\n\n      if (has('buff') || has('influence')) return 0;     // +Influence\n      if (has('ap')) return 1;                            // +AP\n      if (has('draw')) return 2;                          // +Card draw\n      return 3;                                           // other / mixed effects\n  };\n\n  const getEffectLabel = (rank: number): string => {\n    switch (rank) {\n      case 0: return '+ Influence';\n      case 1: return '+ AP';\n      case 2: return '+ Cards';\n      default: return 'Other';\n    }\n  };\n\n  const categorizedCards = useMemo(() => {\n    const categories = {\n      government: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>,\n      public: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>,\n      initiatives: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>,\n      interventions: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>,\n      corruptions: [] as Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>\n    };\n\n    // Government cards\n    Pols.forEach((p: BasePolitician) => categories.government.push({ kind: 'pol', base: p }));\n\n    // Public cards\n    Specials.filter((s: BaseSpecial) => s.type === 'Öffentlichkeitskarte')\n      .forEach((s: BaseSpecial) => categories.public.push({ kind: 'spec', base: s }));\n\n    // Initiatives (Instant and Ongoing)\n    Specials.filter((s: BaseSpecial) => s.type === 'Sofort-Initiative' || s.type === 'Dauerhaft-Initiative')\n      .forEach((s: BaseSpecial) => categories.initiatives.push({ kind: 'spec', base: s }));\n\n    // Interventions\n    Specials.filter((s: BaseSpecial) => s.type === 'Intervention')\n      .forEach((s: BaseSpecial) => categories.interventions.push({ kind: 'spec', base: s }));\n\n    // Corruption cards\n    Specials.filter((s: BaseSpecial) => s.type === 'Corruption')\n      .forEach((s: BaseSpecial) => categories.corruptions.push({ kind: 'spec', base: s }));\n\n    // Sort public, initiatives and interventions by effect rank (Influence, AP, Draw, Other)\n    const sortByEffect = (arr: Array<{ kind: 'pol' | 'spec'; base: BasePolitician | BaseSpecial }>) =>\n      arr.sort((a, b) => getEffectRank(a.base) - getEffectRank(b.base));\n\n    sortByEffect(categories.public);\n    sortByEffect(categories.initiatives);\n    sortByEffect(categories.interventions);\n\n    // Filter by search term\n    const matches = (kind: 'pol' | 'spec', base: BasePolitician | BaseSpecial) => {\n      if (!searchQuery) return true;\n      const hay = `${base.name} ${kind === 'pol' ? (base as BasePolitician).tag : (base as BaseSpecial).type}`.toLowerCase();\n      return hay.includes(searchQuery.toLowerCase());\n    };\n\n    // Combine all filtered cards for navigation\n    const allFilteredCards = [\n      ...categories.government.filter(({ kind, base }) => matches(kind, base)),\n      ...categories.public.filter(({ kind, base }) => matches(kind, base)),\n      ...categories.initiatives.filter(({ kind, base }) => matches(kind, base)),\n      ...categories.interventions.filter(({ kind, base }) => matches(kind, base)),\n      ...categories.corruptions.filter(({ kind, base }) => matches(kind, base))\n    ];\n\n    return {\n      categories: {\n        government: categories.government.filter(({ kind, base }) => matches(kind, base)),\n        public: categories.public.filter(({ kind, base }) => matches(kind, base)),\n        initiatives: categories.initiatives.filter(({ kind, base }) => matches(kind, base)),\n        interventions: categories.interventions.filter(({ kind, base }) => matches(kind, base)),\n        corruptions: categories.corruptions.filter(({ kind, base }) => matches(kind, base))\n      },\n      allFilteredCards\n    };\n  }, [searchQuery]);\n\n\n\n  const builderCanAdd = useCallback((base: BasePolitician | BaseSpecial, kind: 'pol' | 'spec'): boolean => {\n    const tier = kind === 'spec' ? (base as BaseSpecial).tier : (base as BasePolitician).T;\n    const limit = tier >= 3 ? 1 : 2;\n    const entry = deck.find(e => e.kind === kind && e.baseId === base.id);\n    const already = entry ? entry.count : 0;\n    const cost = kind === 'pol' ? ((base as BasePolitician).BP ?? 0) : (base as BaseSpecial).bp;\n\n    return already < limit && count < 25 && (budget + cost) <= 300;\n  }, [deck, budget, count]);\n\n  const builderAdd = useCallback((base: BasePolitician | BaseSpecial, kind: 'pol' | 'spec') => {\n    if (!builderCanAdd(base, kind)) return;\n\n    setDeck(prev => {\n      const newDeck = [...prev];\n      let entry = newDeck.find(e => e.kind === kind && e.baseId === base.id);\n      if (!entry) {\n        entry = { kind, baseId: base.id, count: 0 };\n        newDeck.push(entry);\n      }\n      entry.count += 1;\n      return newDeck;\n    });\n    // Clear preset name when manually modifying deck\n    setSelectedDeckName('');\n  }, [builderCanAdd]);\n\n  const builderRemove = useCallback((base: BasePolitician | BaseSpecial, kind: 'pol' | 'spec') => {\n    setDeck(prev => {\n      const newDeck = [...prev];\n      let entry = newDeck.find(e => e.kind === kind && e.baseId === base.id);\n      if (!entry) return prev;\n\n      entry.count -= 1;\n      if (entry.count <= 0) {\n        return newDeck.filter(e => e !== entry);\n      }\n      return newDeck;\n    });\n    // Clear preset name when manually modifying deck\n    setSelectedDeckName('');\n  }, []);\n\n  const loadPresetDeck = useCallback((which: keyof typeof PRESET_DECKS) => {\n    const preset = PRESET_DECKS[which] as BuilderEntry[];\n    if (preset && preset.length > 0) {\n      setDeck([...preset]);\n      // Set deck name for display\n      const deckNames = {\n        'INITIATIVE_TEST_DECK': '⚡ Initiative Test Deck (10 Karten)',\n        'TEST_DECK_WITH_DRAW_EFFECTS': '🧪 Test Deck - Draw Effects (11 Karten)',\n        'TEST_DECK_5_CARDS': '🧪 Test Deck (5 Karten)',\n        'NEOLIBERAL_TECHNOKRAT': '🏛️ Neoliberaler Technokrat',\n        'AUTORITAERER_REALIST': '🦅 Autoritärer Realist',\n        'PROGRESSIVER_AKTIVISMUS': '🌱 Progressiver Aktivismus',\n        'POPULISTISCHER_OPPORTUNIST': '🎭 Populistischer Opportunist'\n      };\n      setSelectedDeckName(deckNames[which] || '');\n    }\n  }, []);\n\n\n\n  const handleApplyDeck = useCallback(() => {\n    if (count === 25 && budget <= 300) {\n      onApplyDeck(deck);\n      onClose();\n    }\n  }, [deck, count, budget, onApplyDeck, onClose]);\n\n  const handleCardClick = useCallback((kind: 'pol' | 'spec', base: BasePolitician | BaseSpecial) => {\n    setSelectedCard({ kind, base });\n  }, []);\n\n  const handleCloseCardDetail = useCallback(() => {\n    setSelectedCard(null);\n    setShowSources(false);\n  }, []);\n\n  const handlePreviousCard = useCallback(() => {\n    if (!selectedCard || !categorizedCards.allFilteredCards.length) return;\n\n    const currentIndex = categorizedCards.allFilteredCards.findIndex(\n      card => card.kind === selectedCard.kind && card.base.id === selectedCard.base.id\n    );\n\n    if (currentIndex > 0) {\n      const prevCard = categorizedCards.allFilteredCards[currentIndex - 1];\n      setSelectedCard({ kind: prevCard.kind, base: prevCard.base });\n    }\n  }, [selectedCard, categorizedCards.allFilteredCards]);\n\n  const handleNextCard = useCallback(() => {\n    if (!selectedCard || !categorizedCards.allFilteredCards.length) return;\n\n    const currentIndex = categorizedCards.allFilteredCards.findIndex(\n      card => card.kind === selectedCard.kind && card.base.id === selectedCard.base.id\n    );\n\n    if (currentIndex < categorizedCards.allFilteredCards.length - 1) {\n      const nextCard = categorizedCards.allFilteredCards[currentIndex + 1];\n      setSelectedCard({ kind: nextCard.kind, base: nextCard.base });\n    }\n  }, [selectedCard, categorizedCards.allFilteredCards]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (!selectedCard) return;\n\n      switch (event.key) {\n        case 'ArrowLeft':\n          event.preventDefault();\n          handlePreviousCard();\n          break;\n        case 'ArrowRight':\n          event.preventDefault();\n          handleNextCard();\n          break;\n        case 'Escape':\n          event.preventDefault();\n          handleCloseCardDetail();\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [selectedCard, handlePreviousCard, handleNextCard, handleCloseCardDetail]);\n\n  const handleStartMatch = useCallback(() => {\n    const p1Deck: BuilderEntry[] = deck.length ? deck : [];\n    // 🧪 TEST DECK: P2 bekommt das gleiche Deck wie P1 für isoliertes Testing\n    const p2Deck: BuilderEntry[] = deck.length ? [...deck] : []; // Same deck as P1\n\n    console.log('🔧 DEBUG: Starting match with decks:', { p1Cards: p1Deck.length, p2Cards: p2Deck.length });\n    onStartMatch(p1Deck, p2Deck);\n    onClose();\n  }, [deck, onStartMatch, onClose]);\n\n  // Card Tile Component\n  const CardTile = React.memo(({ kind, base, onClick }: {\n    kind: 'pol' | 'spec';\n    base: BasePolitician | BaseSpecial;\n    onClick: () => void;\n  }) => (\n    <div\n      onClick={onClick}\n      style={{\n        background: '#0f1822',\n        border: '1px solid #26394c',\n        borderRadius: '8px',\n        padding: '4px',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '4px',\n        cursor: 'pointer',\n        transition: 'all 0.2s ease',\n        width: '132px',\n        height: '180px',\n      }}\n      onMouseEnter={(e) => {\n        e.currentTarget.style.background = '#1a2a3a';\n        e.currentTarget.style.borderColor = '#3a4c5d';\n      }}\n      onMouseLeave={(e) => {\n        e.currentTarget.style.background = '#0f1822';\n        e.currentTarget.style.borderColor = '#26394c';\n      }}\n    >\n      <canvas\n        width={120}\n        height={120}\n        style={{\n          display: 'block',\n          width: '120px',\n          height: '120px',\n          borderRadius: '6px',\n          background: '#0b1118',\n          border: '1px solid #1e2c3b',\n        }}\n        ref={(canvas) => {\n          if (canvas) {\n            const ctx = canvas.getContext('2d');\n            if (ctx) {\n              const mockCard = {\n                kind,\n                baseId: base.id,\n                name: base.name,\n                uid: base.id,\n                id: base.id,\n                key: base.key,\n              } as any;\n              drawCardImage(ctx, mockCard, 0, 0, 120, 'ui');\n            }\n          }\n        }}\n      />\n      <h4 style={{\n        margin: 0,\n        fontSize: '10px',\n        fontWeight: 600,\n        color: '#dbe9f8',\n        textAlign: 'center',\n        lineHeight: '1.2',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        display: '-webkit-box',\n        WebkitLineClamp: 2,\n        WebkitBoxOrient: 'vertical',\n        height: '24px',\n      }}>\n        {base.name}\n      </h4>\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: '6px',\n        marginTop: 'auto',\n      }}>\n        <span style={{\n          fontSize: '9px',\n          color: '#a9c1da',\n          fontWeight: 500,\n        }}>\n          {kind === 'pol'\n            ? `${convertHPToUSD((base as BasePolitician).BP || 0)}`\n            : `${convertHPToUSD((base as BaseSpecial).bp)}`\n          }\n        </span>\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            builderAdd(base, kind);\n          }}\n          disabled={!builderCanAdd(base, kind)}\n          style={{\n            background: '#90EE90',\n            color: '#2d572d',\n            border: 'none',\n            borderRadius: '4px',\n            padding: '2px 6px',\n            fontSize: '10px',\n            fontWeight: 'bold',\n            cursor: 'pointer',\n            opacity: builderCanAdd(base, kind) ? 1 : 0.5,\n            minWidth: '24px',\n            height: '20px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}\n        >\n          +\n        </button>\n      </div>\n    </div>\n  ));\n\n  if (!isOpen) return null;\n\n  const HP_LIMIT = 108; // Regelwerk: 108 HP Budget für 25 Karten\n  const overBudget = budget > HP_LIMIT;\n  const overCount = count > 25;\n  const isValid = !overBudget && !overCount;\n\n  return (\n    <div style={{\n      position: 'absolute',\n      inset: 0,\n      display: 'flex',\n      background: 'rgba(4,8,12,.8)',\n      backdropFilter: 'blur(2px)',\n      zIndex: 40,\n    }}>\n      <div style={{\n        position: 'absolute',\n        inset: '12px',\n        background: '#0d1621',\n        border: '1px solid #1f3042',\n        borderRadius: '12px',\n        padding: '12px',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '10px',\n      }}>\n        {/* Header */}\n        <div style={{\n          display: 'flex',\n          gap: '10px',\n          alignItems: 'center',\n        }}>\n          <div style={{ fontWeight: 600, fontSize: '14px', letterSpacing: '.4px' }}>\n            Deckbuilder{selectedDeckName ? ` - ${selectedDeckName}` : ''}\n          </div>\n          <span style={{\n            padding: '4px 8px',\n            borderRadius: '8px',\n            background: '#0f1a26',\n            border: '1px solid #203043',\n            fontSize: '12px',\n          }}>\n            Budget: {convertHPToUSD(budget)} / {convertHPToUSD(HP_LIMIT)}\n          </span>\n          <span style={{\n            padding: '4px 8px',\n            borderRadius: '8px',\n            background: '#0f1a26',\n            border: '1px solid #203043',\n            fontSize: '12px',\n          }}>\n            Karten: {count} / 25\n          </span>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px',\n            flex: '0 0 220px',\n          }}>\n            <Icon name=\"search\" size={14} />\n            <input\n              type=\"text\"\n              placeholder=\"Suche (Name, Tag)\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              style={{\n                flex: 1,\n                outline: 'none',\n                padding: '4px 8px',\n                borderRadius: '8px',\n                background: '#0f1a26',\n                border: '1px solid #203043',\n                fontSize: '12px',\n                color: '#e8f0f8',\n              }}\n            />\n          </div>\n          <div style={{ flex: 1 }}></div>\n          <button\n            onClick={() => loadPresetDeck('INITIATIVE_TEST_DECK')}\n            style={{\n              background: '#4338ca',\n              color: '#ffffff',\n              border: '1px solid #6366f1',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '11px',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n              fontWeight: 'bold',\n            }}\n          >\n            ⚡ Initiative Test (10 Karten)\n          </button>\n          <button\n            onClick={() => loadPresetDeck('TEST_DECK_WITH_DRAW_EFFECTS')}\n            style={{\n              background: '#ff6b35',\n              color: '#ffffff',\n              border: '1px solid #ff8c61',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '11px',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n              fontWeight: 'bold',\n            }}\n          >\n            🧪 Draw Effects (11 Karten)\n          </button>\n          <button\n            onClick={() => loadPresetDeck('TEST_DECK_5_CARDS')}\n            style={{\n              background: '#df6530',\n              color: '#ffffff',\n              border: '1px solid #e5844c',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '11px',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n              fontWeight: 'bold',\n            }}\n          >\n            🧪 Test (5 Karten)\n          </button>\n          <button\n            onClick={() => loadPresetDeck('NEOLIBERAL_TECHNOKRAT')}\n            style={{\n              background: '#162436',\n              color: '#eaf3ff',\n              border: '1px solid #27425b',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '11px',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n            }}\n          >\n            🏛️ Neoliberaler Technokrat\n          </button>\n          <button\n            onClick={() => loadPresetDeck('AUTORITAERER_REALIST')}\n            style={{\n              background: '#162436',\n              color: '#eaf3ff',\n              border: '1px solid #27425b',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '11px',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n            }}\n          >\n            🦅 Autoritärer Realist\n          </button>\n          <button\n            onClick={() => loadPresetDeck('PROGRESSIVER_AKTIVISMUS')}\n            style={{\n              background: '#162436',\n              color: '#eaf3ff',\n              border: '1px solid #27425b',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '11px',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n            }}\n          >\n            🌱 Progressiver Aktivismus\n          </button>\n          <button\n            onClick={() => loadPresetDeck('POPULISTISCHER_OPPORTUNIST')}\n            style={{\n              background: '#162436',\n              color: '#eaf3ff',\n              border: '1px solid #27425b',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '11px',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n            }}\n          >\n            🎭 Populistischer Opportunist\n          </button>\n          <button\n            onClick={onClose}\n            style={{\n              background: '#162436',\n              color: '#eaf3ff',\n              border: '1px solid #27425b',\n              borderRadius: '8px',\n              padding: '6px 10px',\n              fontSize: '12px',\n              cursor: 'pointer',\n            }}\n          >\n            Schließen\n          </button>\n        </div>\n\n        {/* Body */}\n        <div style={{\n          display: 'grid',\n          gridTemplateColumns: '1fr 360px',\n          gap: '12px',\n          minHeight: 0,\n          flex: 1,\n        }}>\n          {/* Categorized Card Columns */}\n          <div style={{\n            overflow: 'auto',\n            border: '1px solid #1f2c3a',\n            borderRadius: '10px',\n            padding: '8px',\n            background: '#0a121b',\n            display: 'grid',\n            gridTemplateColumns: 'repeat(4, 1fr)',\n            gap: '12px',\n          }}>\n            {/* Government Column */}\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '8px',\n            }}>\n              <div style={{\n                background: 'rgba(173, 216, 230, 0.2)',\n                border: '1px solid #4a90e2',\n                borderRadius: '8px',\n                padding: '8px',\n                textAlign: 'center',\n              }}>\n                <h3 style={{\n                  margin: 0,\n                  fontSize: '14px',\n                  fontWeight: 700,\n                  color: '#add8e6',\n                  marginBottom: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px',\n                }}>\n                  <Icon name=\"government_row\" size={16} />\n                  Government\n                </h3>\n                <p style={{\n                  margin: 0,\n                  fontSize: '11px',\n                  color: '#8bb5d9',\n                  lineHeight: '1.3',\n                }}>\n                  {withIcons('Politicians and state leaders who influence the government. Max 5 in the government hierarchy.')}\n                </p>\n              </div>\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\n                gap: '8px',\n                flex: 1,\n                justifyContent: 'start',\n                alignContent: 'start',\n              }}>\n                {categorizedCards.categories.government.map(({ kind, base }) => (\n                  <CardTile key={`${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\n                ))}\n              </div>\n            </div>\n\n            {/* Public Column */}\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '8px',\n            }}>\n              <div style={{\n                background: 'rgba(245, 245, 220, 0.2)',\n                border: '1px solid #d2b48c',\n                borderRadius: '8px',\n                padding: '8px',\n                textAlign: 'center',\n              }}>\n                <h3 style={{\n                  margin: 0,\n                  fontSize: '14px',\n                  fontWeight: 700,\n                  color: '#f5f5dc',\n                  marginBottom: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px',\n                }}>\n                  <Icon name=\"public_row\" size={16} />\n                  Public\n                </h3>\n                <p style={{\n                  margin: 0,\n                  fontSize: '11px',\n                  color: '#d2b48c',\n                  lineHeight: '1.3',\n                }}>\n                  {withIcons('People from media, business, and academia who support your actions.')}\n                </p>\n              </div>\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\n                gap: '8px',\n                flex: 1,\n                justifyContent: 'start',\n                alignContent: 'start',\n              }}>\n                {[0,1,2,3].map(rank => (\n                  <React.Fragment key={rank}>\n                    {categorizedCards.categories.public.some(({ base }) => getEffectRank(base) === rank) && (\n                      <div style={{ gridColumn: '1 / -1', fontSize: '11px', fontWeight: 600, color: '#d2b48c', margin: '4px 0' }}>\n                        {getEffectLabel(rank)}\n                      </div>\n                    )}\n                    {categorizedCards.categories.public.filter(({ base }) => getEffectRank(base) === rank)\n                      .map(({ kind, base }) => (\n                        <CardTile key={`${rank}-${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\n                    ))}\n                  </React.Fragment>\n                ))}\n              </div>\n            </div>\n\n            {/* Initiatives Column */}\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '8px',\n            }}>\n              <div style={{\n                background: 'rgba(64, 224, 208, 0.2)',\n                border: '1px solid #40e0d0',\n                borderRadius: '8px',\n                padding: '8px',\n                textAlign: 'center',\n              }}>\n                <h3 style={{\n                  margin: 0,\n                  fontSize: '14px',\n                  fontWeight: 700,\n                  color: '#40e0d0',\n                  marginBottom: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px',\n                }}>\n                  <Icon name=\"initiative\" size={16} />\n                  Initiatives\n                </h3>\n                <p style={{\n                  margin: 0,\n                  fontSize: '11px',\n                  color: '#40e0d0',\n                  lineHeight: '1.3',\n                }}>\n                  {withIcons('One-time (Instant) and ongoing political actions for special effects.')}\n                </p>\n              </div>\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\n                gap: '8px',\n                flex: 1,\n                justifyContent: 'start',\n                alignContent: 'start',\n              }}>\n                {[0,1,2,3].map(rank => (\n                  <React.Fragment key={rank}>\n                    {categorizedCards.categories.initiatives.some(({ base }) => getEffectRank(base) === rank) && (\n                      <div style={{ gridColumn: '1 / -1', fontSize: '11px', fontWeight: 600, color: '#40e0d0', margin: '4px 0' }}>\n                        {getEffectLabel(rank)}\n                      </div>\n                    )}\n                    {categorizedCards.categories.initiatives.filter(({ base }) => getEffectRank(base) === rank)\n                      .map(({ kind, base }) => (\n                        <CardTile key={`${rank}-${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\n                    ))}\n                  </React.Fragment>\n                ))}\n              </div>\n            </div>\n\n            {/* Interventions Column */}\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '8px',\n            }}>\n              <div style={{\n                background: 'rgba(200, 160, 255, 0.2)',\n                border: '1px solid #c8a0ff',\n                borderRadius: '8px',\n                padding: '8px',\n                textAlign: 'center',\n              }}>\n                <h3 style={{\n                  margin: 0,\n                  fontSize: '14px',\n                  fontWeight: 700,\n                  color: '#c8a0ff',\n                  marginBottom: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px',\n                }}>\n                  <Icon name=\"intervention_trap\" size={16} />\n                  Interventions\n                </h3>\n                <p style={{\n                  margin: 0,\n                  fontSize: '11px',\n                  color: '#c8a0ff',\n                  lineHeight: '1.3',\n                }}>\n                  {withIcons('Concealed trap cards that trigger automatically and disrupt enemy strategies.')}\n                </p>\n              </div>\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\n                gap: '8px',\n                flex: 1,\n                justifyContent: 'start',\n                alignContent: 'start',\n              }}>\n                {[0,1,2,3].map(rank => (\n                  <React.Fragment key={rank}>\n                    {categorizedCards.categories.interventions.some(({ base }) => getEffectRank(base) === rank) && (\n                      <div style={{ gridColumn: '1 / -1', fontSize: '11px', fontWeight: 600, color: '#c8a0ff', margin: '4px 0' }}>\n                        {getEffectLabel(rank)}\n                      </div>\n                    )}\n                    {categorizedCards.categories.interventions.filter(({ base }) => getEffectRank(base) === rank)\n                      .map(({ kind, base }) => (\n                        <CardTile key={`${rank}-${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\n                    ))}\n                  </React.Fragment>\n                ))}\n              </div>\n            </div>\n\n            {/* Corruption Column */}\n            <div style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '8px',\n            }}>\n              <div style={{\n                background: 'rgba(255, 200, 120, 0.06)',\n                border: '1px solid #ffb86b',\n                borderRadius: '8px',\n                padding: '8px',\n                textAlign: 'center',\n              }}>\n                <h3 style={{\n                  margin: 0,\n                  fontSize: '14px',\n                  fontWeight: 700,\n                  color: '#ffb86b',\n                  marginBottom: '4px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px',\n                }}>\n                  <Icon name=\"intervention_trap\" size={16} />\n                  Corruption\n                </h3>\n                <p style={{\n                  margin: 0,\n                  fontSize: '11px',\n                  color: '#ffb86b',\n                  lineHeight: '1.3',\n                }}>\n                  {withIcons('Korruptionskarten: Risikoreiche W6-Proben zur Übernahme gegnerischer Regierungen. Wähle ein Ziel, würfle, Boni durch Oligarchen.')}\n                </p>\n              </div>\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fill, minmax(132px, 1fr))',\n                gap: '8px',\n                flex: 1,\n                justifyContent: 'start',\n                alignContent: 'start',\n              }}>\n                {[0,1,2,3].map(rank => (\n                  <React.Fragment key={rank}>\n                    {categorizedCards.categories.corruptions.some(({ base }) => getEffectRank(base) === rank) && (\n                      <div style={{ gridColumn: '1 / -1', fontSize: '11px', fontWeight: 600, color: '#ffb86b', margin: '4px 0' }}>\n                        {getEffectLabel(rank)}\n                      </div>\n                    )}\n                    {categorizedCards.categories.corruptions.filter(({ base }) => getEffectRank(base) === rank)\n                      .map(({ kind, base }) => (\n                        <CardTile key={`${rank}-${kind}-${base.id}`} kind={kind} base={base} onClick={() => handleCardClick(kind, base)} />\n                  ))}\n                </React.Fragment>\n              ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Sidebar */}\n          <div style={{\n            overflow: 'auto',\n            border: '1px solid #1f2c3a',\n            borderRadius: '10px',\n            padding: '8px',\n            background: '#0a121b',\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '10px',\n          }}>\n            {/* Stats */}\n            <div style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: '6px',\n              alignItems: 'center',\n              fontSize: '12px',\n              color: '#cfe0f2',\n            }}>\n              <div style={{\n                padding: '4px 8px',\n                borderRadius: '8px',\n                background: '#0f1a26',\n                border: '1px solid #203043',\n                fontSize: '12px',\n                color: isValid ? '#4ade80' : '#ef4444',\n              }}>\n                {isValid ? 'Deck OK' : `Deck invalid${overBudget ? ' · Budget' : ''}${overCount ? ' · Cards' : ''}`}\n              </div>\n            </div>\n\n            {/* Deck List */}\n            <div style={{ flex: 1, overflow: 'auto' }}>\n              {deck.map(entry => {\n                const base = entry.kind === 'pol'\n                  ? Pols.find((p: BasePolitician) => p.id === entry.baseId)\n                  : Specials.find((s: BaseSpecial) => s.id === entry.baseId);\n                if (!base) return null;\n\n                return (\n                  <div key={`${entry.kind}-${entry.baseId}`} style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    padding: '6px 8px',\n                    borderBottom: '1px solid #182433',\n                    fontSize: '12px',\n                  }}>\n                    <div style={{ flex: 1 }}>{entry.count}× {base.name}</div>\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                      <div>{convertHPToUSD(entry.kind === 'pol' ? (base as BasePolitician).BP || 0 : (base as BaseSpecial).bp)}</div>\n                      <div style={{ display: 'flex', gap: '4px' }}>\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            builderRemove(base, entry.kind);\n                          }}\n                          style={{\n                            background: '#dc2626',\n                            border: 'none',\n                            borderRadius: '4px',\n                            color: 'white',\n                            width: '20px',\n                            height: '20px',\n                            fontSize: '12px',\n                            cursor: 'pointer',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                          title=\"Remove one\"\n                        >\n                          −\n                        </button>\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            builderAdd(base, entry.kind);\n                          }}\n                          disabled={!builderCanAdd(base, entry.kind)}\n                          style={{\n                            background: builderCanAdd(base, entry.kind) ? '#059669' : '#6b7280',\n                            border: 'none',\n                            borderRadius: '4px',\n                            color: 'white',\n                            width: '20px',\n                            height: '20px',\n                            fontSize: '12px',\n                            cursor: builderCanAdd(base, entry.kind) ? 'pointer' : 'not-allowed',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                          title=\"Add one\"\n                        >\n                          +\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Actions */}\n            <div style={{\n              display: 'flex',\n              gap: '8px',\n              flexWrap: 'wrap',\n            }}>\n              <button\n                onClick={handleApplyDeck}\n                disabled={!isValid}\n                style={{\n                  background: '#162436',\n                  color: '#eaf3ff',\n                  border: '1px solid #27425b',\n                  borderRadius: '8px',\n                  padding: '6px 10px',\n                  fontSize: '12px',\n                  cursor: 'pointer',\n                  opacity: isValid ? 1 : 0.6,\n                }}\n              >\n                Use as P1 Deck\n              </button>\n              <button\n                onClick={handleStartMatch}\n                style={{\n                  background: '#162436',\n                  color: '#eaf3ff',\n                  border: '1px solid #27425b',\n                  borderRadius: '8px',\n                  padding: '6px 10px',\n                  fontSize: '12px',\n                  cursor: 'pointer',\n                }}\n              >\n                Start Match\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Card Detail Modal */}\n      {selectedCard && (() => {\n        const cardDetails = getCardDetails(selectedCard.base.name);\n        return (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0,0,0,0.8)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'flex-start',\n          paddingLeft: '20px',\n          zIndex: 50,\n        }}>\n          <div style={{\n            background: '#0d1621',\n            border: '3px solid #ffffff',\n            borderRadius: '16px',\n            padding: '24px',\n            display: 'flex',\n              gap: '24px',\n              width: 'calc(70vw)',\n              height: 'calc(90vh)',\n            overflow: 'hidden',\n              position: 'relative',\n          }}>\n              {/* Card Image - Full 1024x1024 size with custom corners */}\n            <div style={{\n              flex: '0 0 1024px',\n              height: '1024px',\n              background: '#0b1118',\n              border: '2px solid #ffffff',\n              borderRadius: '12px',\n              overflow: 'hidden',\n              position: 'relative',\n            }}>\n              {/* Navigation Arrows */}\n              <button\n                onClick={handlePreviousCard}\n                style={{\n                  position: 'absolute',\n                  left: '16px',\n                  top: '50%',\n                  transform: 'translateY(-50%)',\n                  background: 'rgba(13, 22, 33, 0.9)',\n                  border: '2px solid #1f3042',\n                  borderRadius: '50%',\n                  width: '48px',\n                  height: '48px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  cursor: 'pointer',\n                  color: '#eaf3ff',\n                  fontSize: '20px',\n                  fontWeight: 'bold',\n                  zIndex: 10,\n                  transition: 'all 0.2s ease',\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.background = 'rgba(22, 36, 54, 0.95)';\n                  e.currentTarget.style.borderColor = '#27425b';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.background = 'rgba(13, 22, 33, 0.9)';\n                  e.currentTarget.style.borderColor = '#1f3042';\n                }}\n              >\n                ‹\n              </button>\n\n              <button\n                onClick={handleNextCard}\n                style={{\n                  position: 'absolute',\n                  right: '16px',\n                  top: '50%',\n                  transform: 'translateY(-50%)',\n                  background: 'rgba(13, 22, 33, 0.9)',\n                  border: '2px solid #1f3042',\n                  borderRadius: '50%',\n                  width: '48px',\n                  height: '48px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  cursor: 'pointer',\n                  color: '#eaf3ff',\n                  fontSize: '20px',\n                  fontWeight: 'bold',\n                  zIndex: 10,\n                  transition: 'all 0.2s ease',\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.background = 'rgba(22, 36, 54, 0.95)';\n                  e.currentTarget.style.borderColor = '#27425b';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.background = 'rgba(13, 22, 33, 0.9)';\n                  e.currentTarget.style.borderColor = '#1f3042';\n                }}\n              >\n                ›\n              </button>\n\n              <canvas\n                width={1024}\n                height={1024}\n                style={{\n                  display: 'block',\n                    width: '1024px',\n                    height: '1024px',\n                }}\n                ref={(canvas) => {\n                  if (canvas) {\n                    const ctx = canvas.getContext('2d');\n                    if (ctx) {\n                      // Create a mock card object for drawing\n                      const mockCard = {\n                        kind: selectedCard.kind,\n                        baseId: selectedCard.base.id,\n                        name: selectedCard.base.name,\n                        uid: selectedCard.base.id,\n                        id: selectedCard.base.id,\n                        key: selectedCard.base.key,\n                      } as any;\n                      drawCardImage(ctx, mockCard, 0, 0, 1024, 'modal');\n                    }\n                  }\n                }}\n              />\n            </div>\n\n              {/* Card Information Panel */}\n            <div style={{\n              flex: '1',\n                minWidth: '400px',\n              display: 'flex',\n              flexDirection: 'column',\n                gap: '20px',\n                position: 'relative',\n            }}>\n                {/* Header with Cost in Top Right */}\n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'flex-start',\n              }}>\n                  <div style={{ flex: 1 }}>\n                  <h2 style={{\n                      margin: '0 0 8px 0',\n                      fontSize: '28px',\n                    fontWeight: 700,\n                    color: '#eaf3ff',\n                      lineHeight: '1.2',\n                  }}>\n                    {selectedCard.base.name}\n                  </h2>\n\n                    {/* Category */}\n                  <div style={{\n                      fontSize: '16px',\n                      fontWeight: 600,\n                      color: '#dbe9f8',\n                      marginBottom: '4px',\n                    }}>\n                      {cardDetails?.category || (selectedCard.kind === 'pol' ? 'Government' : 'Public')}\n                    </div>\n\n                    {/* Subcategories */}\n                    {cardDetails?.subcategories && cardDetails.subcategories.length > 0 && (\n                      <div style={{\n                        fontSize: '14px',\n                        color: '#a9c1da',\n                        marginBottom: '4px',\n                      }}>\n                        {withIcons(cardDetails.subcategories.join(', '), 14)}\n                      </div>\n                    )}\n\n                    {/* Position (without label) */}\n                    {cardDetails?.highestPosition && (\n                      <div style={{\n                        fontSize: '14px',\n                    color: '#8faecc',\n                        marginBottom: '8px',\n                      }}>\n                        {cardDetails.highestPosition}\n                      </div>\n                    )}\n\n                    {/* For specials: show type, tier, speed, slot */}\n                    {selectedCard.kind === 'spec' && (\n                      <div style={{\n                        fontSize: '14px',\n                        color: '#8faecc',\n                        marginBottom: '4px',\n                      }}>\n                        {cardDetails?.cardType || (selectedCard.kind === 'spec' ? (selectedCard.base as any).type : '')}\n                        {cardDetails?.tier && ` • ${cardDetails.tier}`}\n                        {cardDetails?.speed && ` • ${cardDetails.speed}`}\n                        {cardDetails?.slot && ` • Slot: ${cardDetails.slot}`}\n                      </div>\n                    )}\n\n                    {/* For government: show base stats */}\n                    {selectedCard.kind === 'pol' && (\n                      <div style={{\n                        display: 'flex',\n                        gap: '10px',\n                        flexWrap: 'wrap',\n                        marginTop: '4px',\n                        marginBottom: '4px',\n                        color: '#a9c1da',\n                        fontSize: '14px',\n                      }}>\n                        <span>Influence: {(selectedCard.base as any).influence}</span>\n                        <span>Tier: {(selectedCard.base as any).T}</span>\n                        <span>Keyword: {(selectedCard.base as any).tag}</span>\n                      </div>\n                    )}\n\n                    <div style={{\n                      fontSize: '12px',\n                      color: '#6b7280',\n                    fontWeight: 500,\n                  }}>\n                    Card {categorizedCards.allFilteredCards.findIndex(\n                      card => card.kind === selectedCard.kind && card.base.id === selectedCard.base.id\n                    ) + 1} of {categorizedCards.allFilteredCards.length}\n                  </div>\n                </div>\n\n                  {/* Cost in Top Right Corner */}\n                  <div style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'flex-end',\n                    gap: '8px',\n                  }}>\n                    <div style={{\n                      background: '#1f2937',\n                      border: '1px solid #374151',\n                      borderRadius: '8px',\n                      padding: '8px 12px',\n                      fontSize: '14px',\n                      color: '#e5e7eb',\n                    }}>\n                      Cost: {convertHPToUSD(cardDetails?.deckCost || (selectedCard.kind === 'pol' ? (selectedCard.base as BasePolitician).BP || 0 : (selectedCard.base as BaseSpecial).bp))}\n                    </div>\n\n                <button\n                  onClick={handleCloseCardDetail}\n                  style={{\n                    background: 'none',\n                    border: 'none',\n                    color: '#8faecc',\n                    fontSize: '24px',\n                    cursor: 'pointer',\n                    padding: '4px',\n                    borderRadius: '4px',\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.background = '#1a2a3a';\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.background = 'none';\n                  }}\n                >\n                  ×\n                </button>\n                  </div>\n              </div>\n\n                {/* Game Effect */}\n              <div style={{\n                  background: '#111827',\n                  border: '1px solid #ffffff',\n                  borderRadius: '12px',\n                  padding: '20px',\n              }}>\n                <h3 style={{\n                  margin: '0 0 12px 0',\n                  fontSize: '16px',\n                  fontWeight: 600,\n                    color: '#e5e7eb',\n                }}>\n                    Game Effect\n                </h3>\n\n                  <p style={{\n                    margin: 0,\n                    color: '#d1d5db',\n                    lineHeight: '1.5',\n                    fontSize: '15px',\n                  }}>\n                    {cardDetails?.gameEffect ? withIcons(cardDetails.gameEffect, 14)\n                      : (selectedCard.kind === 'spec'\n                      ? (selectedCard.base as BaseSpecial).effect\n                      : 'Passive Politician abilities based on Tag')}\n                  </p>\n              </div>\n\n                {/* Synergy for Public */}\n                {cardDetails?.synergy && (\n                  <div style={{\n                    background: '#111827',\n                    border: '1px solid #ffffff',\n                    borderRadius: '12px',\n                    padding: '20px',\n                  }}>\n                    <h3 style={{\n                      margin: '0 0 12px 0',\n                      fontSize: '16px',\n                      fontWeight: 600,\n                      color: '#e5e7eb',\n                    }}>\n                      Synergy\n                    </h3>\n                    <p style={{\n                      margin: 0,\n                      color: '#d1d5db',\n                      lineHeight: '1.5',\n                      fontSize: '15px',\n                    }}>\n                      {cardDetails.synergy}\n                    </p>\n                  </div>\n                )}\n\n                {/* Trigger Information for Interventions */}\n                {cardDetails?.trigger && (\n              <div style={{\n                    background: '#111827',\n                    border: '1px solid #ffffff',\n                    borderRadius: '12px',\n                    padding: '20px',\n              }}>\n                <h3 style={{\n                  margin: '0 0 12px 0',\n                  fontSize: '16px',\n                  fontWeight: 600,\n                      color: '#e5e7eb',\n                }}>\n                      Trigger\n                </h3>\n                <p style={{\n                  margin: 0,\n                      color: '#d1d5db',\n                  lineHeight: '1.5',\n                      fontSize: '15px',\n                }}>\n                      {cardDetails.trigger}\n                </p>\n              </div>\n                )}\n\n                {/* Usage and Example for Initiatives/Interventions */}\n                {(cardDetails?.usage || cardDetails?.example) && (\n                  <div style={{\n                    background: '#111827',\n                    border: '1px solid #ffffff',\n                    borderRadius: '12px',\n                    padding: '20px',\n                  }}>\n                    {cardDetails.usage && (\n                      <div style={{ marginBottom: '10px' }}>\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>When to play?</div>\n                        <div style={{ color: '#d1d5db', fontSize: '15px', lineHeight: '1.5' }}>{cardDetails.usage}</div>\n                      </div>\n                    )}\n                    {cardDetails.example && (\n                      <div>\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Example</div>\n                        <div style={{ color: '#d1d5db', fontSize: '15px', lineHeight: '1.5' }}>{cardDetails.example}</div>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* Personal Information */}\n                {cardDetails && (cardDetails.nationality || cardDetails.birthDate || cardDetails.estimatedWealth || cardDetails.controversialQuote) && (\n                  <div style={{\n                    background: '#111827',\n                    border: '1px solid #ffffff',\n                    borderRadius: '12px',\n                    padding: '20px',\n                  }}>\n                    <h3 style={{\n                      margin: '0 0 16px 0',\n                      fontSize: '16px',\n                      fontWeight: 600,\n                      color: '#e5e7eb',\n                    }}>\n                      Personal Information\n                    </h3>\n\n                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>\n                      {cardDetails.nationality && (\n                        <div>\n                          <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Nationality</div>\n                          <div style={{ color: '#e5e7eb', fontWeight: 500 }}>{cardDetails.nationality}</div>\n                        </div>\n                      )}\n\n                      {cardDetails.birthDate && (\n                        <div>\n                          <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Birth Date</div>\n                          <div style={{ color: '#e5e7eb', fontWeight: 500 }}>{cardDetails.birthDate}</div>\n                        </div>\n                      )}\n                    </div>\n\n                    {cardDetails.estimatedWealth && (\n                      <div style={{ marginTop: '12px' }}>\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '4px' }}>Estimated Wealth</div>\n                        <div style={{ color: '#e5e7eb', fontWeight: 500 }}>{formatWealth(cardDetails.estimatedWealth)}</div>\n                      </div>\n                    )}\n\n                    {cardDetails.controversialQuote && (\n                      <div style={{\n                        marginTop: '16px',\n                        background: '#1f2937',\n                        border: '1px solid #ffffff',\n                        borderRadius: '8px',\n                        padding: '12px',\n                      }}>\n                        <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '6px' }}>Quote</div>\n                        <div style={{\n                          color: '#d1d5db',\n                          fontStyle: 'italic',\n                          lineHeight: '1.4',\n                          fontSize: '14px',\n                        }}>\n                          {cardDetails.controversialQuote}\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Sources integrated into modal */}\n                    {cardDetails?.sources && cardDetails.sources.length > 0 && (\n                      <div style={{ marginTop: '16px' }}>\n                        <button\n                          onClick={() => setShowSources(!showSources)}\n                          style={{\n                            background: 'none',\n                            border: 'none',\n                            color: '#9ca3af',\n                            fontSize: '12px',\n                            cursor: 'pointer',\n                            textDecoration: 'underline',\n                            padding: 0,\n                          }}\n                        >\n                          Show Sources\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* Action Button */}\n              <div style={{\n                display: 'flex',\n                gap: '12px',\n                marginTop: 'auto',\n              }}>\n                <button\n                  onClick={() => {\n                    builderAdd(selectedCard.base, selectedCard.kind);\n                    handleCloseCardDetail();\n                  }}\n                  disabled={!builderCanAdd(selectedCard.base, selectedCard.kind)}\n                  style={{\n                    flex: 1,\n                      background: builderCanAdd(selectedCard.base, selectedCard.kind)\n                        ? '#374151'\n                        : '#1f2937',\n                      color: '#e5e7eb',\n                      border: '1px solid #4b5563',\n                    borderRadius: '8px',\n                    padding: '12px',\n                    fontSize: '14px',\n                    fontWeight: 600,\n                      cursor: builderCanAdd(selectedCard.base, selectedCard.kind) ? 'pointer' : 'not-allowed',\n                      opacity: builderCanAdd(selectedCard.base, selectedCard.kind) ? 1 : 0.6,\n                  }}\n                >\n                  Add to Deck\n                </button>\n              </div>\n            </div>\n            </div>\n\n            {/* Mini Modal for Sources */}\n            {showSources && cardDetails?.sources && (\n              <div style={{\n                position: 'fixed',\n                top: 'calc(50% + 5px)',\n                left: 'calc(50% + 5px)',\n                transform: 'translate(-50%, -50%)',\n                background: '#0d1621',\n                border: '2px solid #ffffff',\n                borderRadius: '12px',\n                padding: '20px',\n                minWidth: '400px',\n                maxWidth: '600px',\n                boxShadow: '0 20px 60px rgba(0, 0, 0, 0.8)',\n                zIndex: 60,\n              }}>\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  marginBottom: '16px',\n                }}>\n                  <h4 style={{\n                    margin: 0,\n                    fontSize: '16px',\n                    fontWeight: 600,\n                    color: '#e5e7eb',\n                  }}>\n                    Sources & Calculation Basis\n                  </h4>\n                  <button\n                    onClick={() => setShowSources(false)}\n                    style={{\n                      background: 'none',\n                      border: 'none',\n                      color: '#9ca3af',\n                      fontSize: '20px',\n                      cursor: 'pointer',\n                      padding: '4px',\n                    }}\n                  >\n                    ×\n                  </button>\n                </div>\n\n                {cardDetails.calculation && (\n                  <div style={{ marginBottom: '16px' }}>\n                    <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '6px' }}>Calculation:</div>\n                    <div style={{\n                      color: '#d1d5db',\n                      fontSize: '13px',\n                      lineHeight: '1.4',\n                      background: '#1f2937',\n                      padding: '10px',\n                      borderRadius: '6px',\n                    }}>\n                      {cardDetails.calculation}\n          </div>\n        </div>\n      )}\n\n                <div style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '6px' }}>Sources:</div>\n                <div style={{\n                  color: '#d1d5db',\n                  fontSize: '13px',\n                  lineHeight: '1.4',\n                }}>\n                  {formatSources(cardDetails.sources)}\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      })()}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}