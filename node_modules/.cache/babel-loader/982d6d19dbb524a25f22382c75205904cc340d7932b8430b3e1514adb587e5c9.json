{"ast":null,"code":"// Animation Viewer Modal for QTE System\nimport{SpriteAnimator}from\"./spriteAnimator\";import{loadAtlas}from\"./atlasLoader\";export class AnimationViewer{constructor(){this.modal=void 0;this.canvas=void 0;this.ctx=void 0;this.currentAnimationIndex=0;this.animations=[];this.animators=new Map();this.isVisible=false;this.animationId=null;this.currentCharacter=\"ninja\";this.createModal();this.setupEventListeners();this.loadAnimations();}createModal(){// Create modal container\nthis.modal=document.createElement('div');this.modal.style.cssText=\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background: rgba(0, 0, 0, 0.8);\\n      display: none;\\n      z-index: 10000;\\n      font-family: Arial, sans-serif;\\n    \";// Create modal content\nconst content=document.createElement('div');content.style.cssText=\"\\n      position: absolute;\\n      top: 50%;\\n      left: 50%;\\n      transform: translate(-50%, -50%);\\n      background: #1a1a1a;\\n      border: 2px solid #333;\\n      border-radius: 8px;\\n      padding: 20px;\\n      min-width: 600px;\\n      max-width: 90vw;\\n      max-height: 90vh;\\n      overflow: hidden;\\n    \";// Create header\nconst header=document.createElement('div');header.style.cssText=\"\\n      display: flex;\\n      justify-content: space-between;\\n      align-items: center;\\n      margin-bottom: 20px;\\n      border-bottom: 1px solid #333;\\n      padding-bottom: 10px;\\n    \";const title=document.createElement('h2');title.textContent='QTE Animation Viewer';title.style.cssText=\"\\n      color: #fff;\\n      margin: 0;\\n      font-size: 24px;\\n    \";const closeBtn=document.createElement('button');closeBtn.textContent='×';closeBtn.style.cssText=\"\\n      background: #ff4444;\\n      color: white;\\n      border: none;\\n      border-radius: 4px;\\n      width: 30px;\\n      height: 30px;\\n      font-size: 18px;\\n      cursor: pointer;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n    \";closeBtn.onclick=()=>this.hide();header.appendChild(title);header.appendChild(closeBtn);// Create character selector\nconst characterSelector=document.createElement('div');characterSelector.style.cssText=\"\\n      margin-bottom: 20px;\\n      display: flex;\\n      gap: 10px;\\n      align-items: center;\\n    \";const characterLabel=document.createElement('label');characterLabel.textContent='Character:';characterLabel.style.cssText='color: #fff; font-weight: bold;';const characterSelect=document.createElement('select');characterSelect.style.cssText=\"\\n      background: #333;\\n      color: #fff;\\n      border: 1px solid #555;\\n      border-radius: 4px;\\n      padding: 5px 10px;\\n      font-size: 14px;\\n    \";characterSelect.innerHTML=\"\\n      <option value=\\\"ninja\\\">Ninja</option>\\n      <option value=\\\"cyboard\\\">Cyboard</option>\\n    \";characterSelect.onchange=e=>{this.currentCharacter=e.target.value;this.loadAnimations();this.currentAnimationIndex=0;this.updateDisplay();};characterSelector.appendChild(characterLabel);characterSelector.appendChild(characterSelect);// Create animation display area\nconst displayArea=document.createElement('div');displayArea.style.cssText=\"\\n      display: flex;\\n      flex-direction: column;\\n      align-items: center;\\n      gap: 20px;\\n    \";// Create canvas for animation\nthis.canvas=document.createElement('canvas');this.canvas.width=256;this.canvas.height=256;this.canvas.style.cssText=\"\\n      border: 2px solid #555;\\n      border-radius: 4px;\\n      background: #000;\\n      image-rendering: pixelated;\\n      image-rendering: -moz-crisp-edges;\\n      image-rendering: crisp-edges;\\n    \";this.ctx=this.canvas.getContext('2d');// Create animation info display\nconst infoDisplay=document.createElement('div');infoDisplay.id='animation-info';infoDisplay.style.cssText=\"\\n      color: #fff;\\n      text-align: center;\\n      font-size: 16px;\\n      min-height: 60px;\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: center;\\n    \";// Create navigation controls\nconst controls=document.createElement('div');controls.style.cssText=\"\\n      display: flex;\\n      gap: 10px;\\n      align-items: center;\\n      justify-content: center;\\n    \";const prevBtn=document.createElement('button');prevBtn.textContent='◀ Previous';prevBtn.style.cssText=\"\\n      background: #444;\\n      color: white;\\n      border: 1px solid #666;\\n      border-radius: 4px;\\n      padding: 8px 16px;\\n      cursor: pointer;\\n      font-size: 14px;\\n    \";prevBtn.onclick=()=>this.previousAnimation();const nextBtn=document.createElement('button');nextBtn.textContent='Next ▶';nextBtn.style.cssText=\"\\n      background: #444;\\n      color: white;\\n      border: 1px solid #666;\\n      border-radius: 4px;\\n      padding: 8px 16px;\\n      cursor: pointer;\\n      font-size: 14px;\\n    \";nextBtn.onclick=()=>this.nextAnimation();const playPauseBtn=document.createElement('button');playPauseBtn.id='play-pause-btn';playPauseBtn.textContent='⏸ Pause';playPauseBtn.style.cssText=\"\\n      background: #0066cc;\\n      color: white;\\n      border: 1px solid #0088ff;\\n      border-radius: 4px;\\n      padding: 8px 16px;\\n      cursor: pointer;\\n      font-size: 14px;\\n    \";playPauseBtn.onclick=()=>this.togglePlayPause();controls.appendChild(prevBtn);controls.appendChild(playPauseBtn);controls.appendChild(nextBtn);// Create animation list\nconst animationList=document.createElement('div');animationList.id='animation-list';animationList.style.cssText=\"\\n      margin-top: 20px;\\n      max-height: 200px;\\n      overflow-y: auto;\\n      border: 1px solid #333;\\n      border-radius: 4px;\\n      background: #222;\\n    \";displayArea.appendChild(this.canvas);displayArea.appendChild(infoDisplay);displayArea.appendChild(controls);displayArea.appendChild(animationList);content.appendChild(header);content.appendChild(characterSelector);content.appendChild(displayArea);this.modal.appendChild(content);document.body.appendChild(this.modal);}setupEventListeners(){// Keyboard navigation\ndocument.addEventListener('keydown',e=>{if(!this.isVisible)return;switch(e.key){case'Escape':this.hide();break;case'ArrowLeft':this.previousAnimation();break;case'ArrowRight':this.nextAnimation();break;case' ':e.preventDefault();this.togglePlayPause();break;}});}async loadAnimations(){try{var _atlas$image;console.log(\"[AnimationViewer] Loading animations for \".concat(this.currentCharacter));// Load atlas for current character\nconst atlas=await loadAtlas(\"/qte/\".concat(this.currentCharacter));console.log(\"[AnimationViewer] Atlas loaded:\",{hasImage:!!atlas.image,imageSrc:(_atlas$image=atlas.image)===null||_atlas$image===void 0?void 0:_atlas$image.src,animations:Object.keys(atlas.animations),frameW:atlas.frameW,frameH:atlas.frameH});// Clear previous animations\nthis.animations=[];this.animators.clear();// Get actual frame counts from atlas data\nconst getFrameCount=animationName=>{if(atlas.animations&&atlas.animations[animationName]){console.log(\"[AnimationViewer] Found \".concat(animationName,\" in animations: \").concat(atlas.animations[animationName].frames.length,\" frames\"));return atlas.animations[animationName].frames.length;}// Fallback: count frames in the frames object\nlet count=0;if(atlas.frames){for(const key in atlas.frames){if(key.startsWith(\"\".concat(animationName,\"_\"))){count++;}}}console.log(\"[AnimationViewer] Fallback count for \".concat(animationName,\": \").concat(count,\" frames\"));return count;};// Define animation configurations with actual frame counts\nconst animationConfigs=[{name:'idle',frames:getFrameCount('idle'),fps:6,loop:true},{name:'walk',frames:getFrameCount('walk'),fps:10,loop:true},{name:'jump',frames:getFrameCount('jump'),fps:12,loop:false},{name:'attack',frames:getFrameCount('attack'),fps:12,loop:false},{name:'parry',frames:getFrameCount('parry'),fps:10,loop:false},{name:'spawn',frames:getFrameCount('spawn'),fps:8,loop:false},{name:'defeat',frames:getFrameCount('defeat'),fps:6,loop:false},{name:'projectile',frames:getFrameCount('projectile'),fps:12,loop:true},{name:'ranged',frames:getFrameCount('ranged'),fps:12,loop:false},{name:'blast',frames:getFrameCount('blast'),fps:12,loop:false}];// Create animations and animators\nfor(const config of animationConfigs){var _atlas$animations$con;// Skip animations with no frames\nif(config.frames===0){console.log(\"[AnimationViewer] Skipping \".concat(config.name,\" - no frames found\"));continue;}const animationInfo={name:config.name,character:this.currentCharacter,frames:config.frames,fps:config.fps,loop:config.loop};// Create sprite animator for this animation\nconst animator=new SpriteAnimator(atlas.image,256,256,{[config.name]:{src:'',// No individual file needed when using atlas\nframes:config.frames,fps:config.fps,loop:config.loop,frameW:256,frameH:256,rects:((_atlas$animations$con=atlas.animations[config.name])===null||_atlas$animations$con===void 0?void 0:_atlas$animations$con.frames)||[],image:atlas.image,imageLoaded:true,imageBroken:false}});// Ensure atlas data is properly set\nconst animDef=animator.animations[config.name];if(atlas.animations[config.name]){animDef.rects=atlas.animations[config.name].frames;animDef.frames=atlas.animations[config.name].frames.length;}animDef.image=atlas.image;animDef.imageLoaded=true;animDef.imageBroken=false;this.animations.push(animationInfo);this.animators.set(config.name,animator);console.log(\"[AnimationViewer] Created animation: \".concat(config.name,\" with \").concat(config.frames,\" frames\"));}console.log(\"[AnimationViewer] Total animations loaded: \".concat(this.animations.length));this.updateAnimationList();this.updateDisplay();}catch(error){console.error('Failed to load animations:',error);}}updateAnimationList(){const list=document.getElementById('animation-list');if(!list)return;list.innerHTML='';this.animations.forEach((anim,index)=>{const item=document.createElement('div');item.style.cssText=\"\\n        padding: 8px 12px;\\n        cursor: pointer;\\n        border-bottom: 1px solid #333;\\n        color: #fff;\\n        font-size: 14px;\\n        transition: background-color 0.2s;\\n      \";if(index===this.currentAnimationIndex){item.style.backgroundColor='#0066cc';}item.innerHTML=\"\\n        <div style=\\\"font-weight: bold;\\\">\".concat(anim.name,\"</div>\\n        <div style=\\\"font-size: 12px; color: #aaa;\\\">\\n          \").concat(anim.frames,\" frames \\u2022 \").concat(anim.fps,\" fps \\u2022 \").concat(anim.loop?'Loop':'Once',\"\\n        </div>\\n      \");item.onclick=()=>{this.currentAnimationIndex=index;this.updateDisplay();this.updateAnimationList();};item.onmouseenter=()=>{if(index!==this.currentAnimationIndex){item.style.backgroundColor='#444';}};item.onmouseleave=()=>{if(index!==this.currentAnimationIndex){item.style.backgroundColor='transparent';}};list.appendChild(item);});}updateDisplay(){if(this.animations.length===0)return;const currentAnim=this.animations[this.currentAnimationIndex];const animator=this.animators.get(currentAnim.name);if(!animator)return;// Set the animation state\nanimator.setState(currentAnim.name);// Update info display\nconst infoDisplay=document.getElementById('animation-info');if(infoDisplay){infoDisplay.innerHTML=\"\\n        <div style=\\\"font-size: 20px; font-weight: bold; margin-bottom: 5px;\\\">\\n          \".concat(currentAnim.name.toUpperCase(),\"\\n        </div>\\n        <div style=\\\"font-size: 14px; color: #aaa;\\\">\\n          \").concat(currentAnim.character,\" \\u2022 \").concat(currentAnim.frames,\" frames \\u2022 \").concat(currentAnim.fps,\" fps \\u2022 \").concat(currentAnim.loop?'Looping':'Single play',\"\\n        </div>\\n      \");}// Start animation loop if not already running\nif(!this.animationId){this.startAnimationLoop();}}startAnimationLoop(){const animate=timestamp=>{if(!this.isVisible){this.animationId=null;return;}const currentAnim=this.animations[this.currentAnimationIndex];const animator=this.animators.get(currentAnim.name);if(animator){// Clear canvas\nthis.ctx.fillStyle='#000';this.ctx.fillRect(0,0,256,256);// Update and draw animation\nanimator.update(1/60);// Assume 60fps\nanimator.draw(this.ctx,0,0,256,256);}else{// Debug: draw a red box if no animator\nthis.ctx.fillStyle='#ff0000';this.ctx.fillRect(0,0,256,256);this.ctx.fillStyle='#ffffff';this.ctx.font='16px Arial';this.ctx.fillText('No animator found',10,30);}this.animationId=requestAnimationFrame(animate);};this.animationId=requestAnimationFrame(animate);}previousAnimation(){if(this.animations.length===0)return;this.currentAnimationIndex=(this.currentAnimationIndex-1+this.animations.length)%this.animations.length;this.updateDisplay();this.updateAnimationList();}nextAnimation(){if(this.animations.length===0)return;this.currentAnimationIndex=(this.currentAnimationIndex+1)%this.animations.length;this.updateDisplay();this.updateAnimationList();}togglePlayPause(){const btn=document.getElementById('play-pause-btn');if(!btn)return;if(this.animationId){// Pause\ncancelAnimationFrame(this.animationId);this.animationId=null;btn.textContent='▶ Play';btn.style.background='#0066cc';}else{// Play\nthis.startAnimationLoop();btn.textContent='⏸ Pause';btn.style.background='#cc6600';}}show(){this.isVisible=true;this.modal.style.display='block';this.updateDisplay();}hide(){this.isVisible=false;this.modal.style.display='none';if(this.animationId){cancelAnimationFrame(this.animationId);this.animationId=null;}}toggle(){if(this.isVisible){this.hide();}else{this.show();}}}// Global instance\nlet animationViewer=null;export function getAnimationViewer(){if(!animationViewer){animationViewer=new AnimationViewer();}return animationViewer;}// Add global function for easy access\nwindow.showAnimationViewer=()=>getAnimationViewer().show();window.hideAnimationViewer=()=>getAnimationViewer().hide();window.toggleAnimationViewer=()=>getAnimationViewer().toggle();","map":{"version":3,"names":["SpriteAnimator","loadAtlas","AnimationViewer","constructor","modal","canvas","ctx","currentAnimationIndex","animations","animators","Map","isVisible","animationId","currentCharacter","createModal","setupEventListeners","loadAnimations","document","createElement","style","cssText","content","header","title","textContent","closeBtn","onclick","hide","appendChild","characterSelector","characterLabel","characterSelect","innerHTML","onchange","e","target","value","updateDisplay","displayArea","width","height","getContext","infoDisplay","id","controls","prevBtn","previousAnimation","nextBtn","nextAnimation","playPauseBtn","togglePlayPause","animationList","body","addEventListener","key","preventDefault","_atlas$image","console","log","concat","atlas","hasImage","image","imageSrc","src","Object","keys","frameW","frameH","clear","getFrameCount","animationName","frames","length","count","startsWith","animationConfigs","name","fps","loop","config","_atlas$animations$con","animationInfo","character","animator","rects","imageLoaded","imageBroken","animDef","push","set","updateAnimationList","error","list","getElementById","forEach","anim","index","item","backgroundColor","onmouseenter","onmouseleave","currentAnim","get","setState","toUpperCase","startAnimationLoop","animate","timestamp","fillStyle","fillRect","update","draw","font","fillText","requestAnimationFrame","btn","cancelAnimationFrame","background","show","display","toggle","animationViewer","getAnimationViewer","window","showAnimationViewer","hideAnimationViewer","toggleAnimationViewer"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/qte/animationViewer.ts"],"sourcesContent":["// Animation Viewer Modal for QTE System\nimport { SpriteAnimator } from \"./spriteAnimator\";\nimport { loadAtlas } from \"./atlasLoader\";\n\nexport interface AnimationInfo {\n  name: string;\n  character: string;\n  frames: number;\n  fps: number;\n  loop: boolean;\n}\n\nexport class AnimationViewer {\n  private modal!: HTMLElement;\n  private canvas!: HTMLCanvasElement;\n  private ctx!: CanvasRenderingContext2D;\n  private currentAnimationIndex = 0;\n  private animations: AnimationInfo[] = [];\n  private animators: Map<string, SpriteAnimator> = new Map();\n  private isVisible = false;\n  private animationId: number | null = null;\n  private currentCharacter = \"ninja\";\n\n  constructor() {\n    this.createModal();\n    this.setupEventListeners();\n    this.loadAnimations();\n  }\n\n  private createModal() {\n    // Create modal container\n    this.modal = document.createElement('div');\n    this.modal.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.8);\n      display: none;\n      z-index: 10000;\n      font-family: Arial, sans-serif;\n    `;\n\n    // Create modal content\n    const content = document.createElement('div');\n    content.style.cssText = `\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: #1a1a1a;\n      border: 2px solid #333;\n      border-radius: 8px;\n      padding: 20px;\n      min-width: 600px;\n      max-width: 90vw;\n      max-height: 90vh;\n      overflow: hidden;\n    `;\n\n    // Create header\n    const header = document.createElement('div');\n    header.style.cssText = `\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 20px;\n      border-bottom: 1px solid #333;\n      padding-bottom: 10px;\n    `;\n\n    const title = document.createElement('h2');\n    title.textContent = 'QTE Animation Viewer';\n    title.style.cssText = `\n      color: #fff;\n      margin: 0;\n      font-size: 24px;\n    `;\n\n    const closeBtn = document.createElement('button');\n    closeBtn.textContent = '×';\n    closeBtn.style.cssText = `\n      background: #ff4444;\n      color: white;\n      border: none;\n      border-radius: 4px;\n      width: 30px;\n      height: 30px;\n      font-size: 18px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `;\n    closeBtn.onclick = () => this.hide();\n\n    header.appendChild(title);\n    header.appendChild(closeBtn);\n\n    // Create character selector\n    const characterSelector = document.createElement('div');\n    characterSelector.style.cssText = `\n      margin-bottom: 20px;\n      display: flex;\n      gap: 10px;\n      align-items: center;\n    `;\n\n    const characterLabel = document.createElement('label');\n    characterLabel.textContent = 'Character:';\n    characterLabel.style.cssText = 'color: #fff; font-weight: bold;';\n\n    const characterSelect = document.createElement('select');\n    characterSelect.style.cssText = `\n      background: #333;\n      color: #fff;\n      border: 1px solid #555;\n      border-radius: 4px;\n      padding: 5px 10px;\n      font-size: 14px;\n    `;\n    characterSelect.innerHTML = `\n      <option value=\"ninja\">Ninja</option>\n      <option value=\"cyboard\">Cyboard</option>\n    `;\n    characterSelect.onchange = (e) => {\n      this.currentCharacter = (e.target as HTMLSelectElement).value;\n      this.loadAnimations();\n      this.currentAnimationIndex = 0;\n      this.updateDisplay();\n    };\n\n    characterSelector.appendChild(characterLabel);\n    characterSelector.appendChild(characterSelect);\n\n    // Create animation display area\n    const displayArea = document.createElement('div');\n    displayArea.style.cssText = `\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 20px;\n    `;\n\n    // Create canvas for animation\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = 256;\n    this.canvas.height = 256;\n    this.canvas.style.cssText = `\n      border: 2px solid #555;\n      border-radius: 4px;\n      background: #000;\n      image-rendering: pixelated;\n      image-rendering: -moz-crisp-edges;\n      image-rendering: crisp-edges;\n    `;\n    this.ctx = this.canvas.getContext('2d')!;\n\n    // Create animation info display\n    const infoDisplay = document.createElement('div');\n    infoDisplay.id = 'animation-info';\n    infoDisplay.style.cssText = `\n      color: #fff;\n      text-align: center;\n      font-size: 16px;\n      min-height: 60px;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    `;\n\n    // Create navigation controls\n    const controls = document.createElement('div');\n    controls.style.cssText = `\n      display: flex;\n      gap: 10px;\n      align-items: center;\n      justify-content: center;\n    `;\n\n    const prevBtn = document.createElement('button');\n    prevBtn.textContent = '◀ Previous';\n    prevBtn.style.cssText = `\n      background: #444;\n      color: white;\n      border: 1px solid #666;\n      border-radius: 4px;\n      padding: 8px 16px;\n      cursor: pointer;\n      font-size: 14px;\n    `;\n    prevBtn.onclick = () => this.previousAnimation();\n\n    const nextBtn = document.createElement('button');\n    nextBtn.textContent = 'Next ▶';\n    nextBtn.style.cssText = `\n      background: #444;\n      color: white;\n      border: 1px solid #666;\n      border-radius: 4px;\n      padding: 8px 16px;\n      cursor: pointer;\n      font-size: 14px;\n    `;\n    nextBtn.onclick = () => this.nextAnimation();\n\n    const playPauseBtn = document.createElement('button');\n    playPauseBtn.id = 'play-pause-btn';\n    playPauseBtn.textContent = '⏸ Pause';\n    playPauseBtn.style.cssText = `\n      background: #0066cc;\n      color: white;\n      border: 1px solid #0088ff;\n      border-radius: 4px;\n      padding: 8px 16px;\n      cursor: pointer;\n      font-size: 14px;\n    `;\n    playPauseBtn.onclick = () => this.togglePlayPause();\n\n    controls.appendChild(prevBtn);\n    controls.appendChild(playPauseBtn);\n    controls.appendChild(nextBtn);\n\n    // Create animation list\n    const animationList = document.createElement('div');\n    animationList.id = 'animation-list';\n    animationList.style.cssText = `\n      margin-top: 20px;\n      max-height: 200px;\n      overflow-y: auto;\n      border: 1px solid #333;\n      border-radius: 4px;\n      background: #222;\n    `;\n\n    displayArea.appendChild(this.canvas);\n    displayArea.appendChild(infoDisplay);\n    displayArea.appendChild(controls);\n    displayArea.appendChild(animationList);\n\n    content.appendChild(header);\n    content.appendChild(characterSelector);\n    content.appendChild(displayArea);\n    this.modal.appendChild(content);\n    document.body.appendChild(this.modal);\n  }\n\n  private setupEventListeners() {\n    // Keyboard navigation\n    document.addEventListener('keydown', (e) => {\n      if (!this.isVisible) return;\n\n      switch (e.key) {\n        case 'Escape':\n          this.hide();\n          break;\n        case 'ArrowLeft':\n          this.previousAnimation();\n          break;\n        case 'ArrowRight':\n          this.nextAnimation();\n          break;\n        case ' ':\n          e.preventDefault();\n          this.togglePlayPause();\n          break;\n      }\n    });\n  }\n\n  private async loadAnimations() {\n    try {\n      console.log(`[AnimationViewer] Loading animations for ${this.currentCharacter}`);\n      // Load atlas for current character\n      const atlas = await loadAtlas(`/qte/${this.currentCharacter}`);\n      console.log(`[AnimationViewer] Atlas loaded:`, {\n        hasImage: !!atlas.image,\n        imageSrc: atlas.image?.src,\n        animations: Object.keys(atlas.animations),\n        frameW: atlas.frameW,\n        frameH: atlas.frameH\n      });\n\n      // Clear previous animations\n      this.animations = [];\n      this.animators.clear();\n\n      // Get actual frame counts from atlas data\n      const getFrameCount = (animationName: string): number => {\n        if (atlas.animations && atlas.animations[animationName]) {\n          console.log(`[AnimationViewer] Found ${animationName} in animations: ${atlas.animations[animationName].frames.length} frames`);\n          return atlas.animations[animationName].frames.length;\n        }\n\n        // Fallback: count frames in the frames object\n        let count = 0;\n        if (atlas.frames) {\n          for (const key in atlas.frames) {\n            if (key.startsWith(`${animationName}_`)) {\n              count++;\n            }\n          }\n        }\n        console.log(`[AnimationViewer] Fallback count for ${animationName}: ${count} frames`);\n        return count;\n      };\n\n      // Define animation configurations with actual frame counts\n      const animationConfigs = [\n        { name: 'idle', frames: getFrameCount('idle'), fps: 6, loop: true },\n        { name: 'walk', frames: getFrameCount('walk'), fps: 10, loop: true },\n        { name: 'jump', frames: getFrameCount('jump'), fps: 12, loop: false },\n        { name: 'attack', frames: getFrameCount('attack'), fps: 12, loop: false },\n        { name: 'parry', frames: getFrameCount('parry'), fps: 10, loop: false },\n        { name: 'spawn', frames: getFrameCount('spawn'), fps: 8, loop: false },\n        { name: 'defeat', frames: getFrameCount('defeat'), fps: 6, loop: false },\n        { name: 'projectile', frames: getFrameCount('projectile'), fps: 12, loop: true },\n        { name: 'ranged', frames: getFrameCount('ranged'), fps: 12, loop: false },\n        { name: 'blast', frames: getFrameCount('blast'), fps: 12, loop: false },\n      ];\n\n      // Create animations and animators\n      for (const config of animationConfigs) {\n        // Skip animations with no frames\n        if (config.frames === 0) {\n          console.log(`[AnimationViewer] Skipping ${config.name} - no frames found`);\n          continue;\n        }\n\n        const animationInfo: AnimationInfo = {\n          name: config.name,\n          character: this.currentCharacter,\n          frames: config.frames,\n          fps: config.fps,\n          loop: config.loop\n        };\n\n        // Create sprite animator for this animation\n        const animator = new SpriteAnimator(atlas.image, 256, 256, {\n          [config.name]: {\n            src: '', // No individual file needed when using atlas\n            frames: config.frames,\n            fps: config.fps,\n            loop: config.loop,\n            frameW: 256,\n            frameH: 256,\n            rects: atlas.animations[config.name]?.frames || [],\n            image: atlas.image,\n            imageLoaded: true,\n            imageBroken: false\n          }\n        });\n\n        // Ensure atlas data is properly set\n        const animDef = animator.animations[config.name];\n        if (atlas.animations[config.name]) {\n          animDef.rects = atlas.animations[config.name].frames;\n          animDef.frames = atlas.animations[config.name].frames.length;\n        }\n        animDef.image = atlas.image;\n        (animDef as any).imageLoaded = true;\n        (animDef as any).imageBroken = false;\n\n        this.animations.push(animationInfo);\n        this.animators.set(config.name, animator);\n        console.log(`[AnimationViewer] Created animation: ${config.name} with ${config.frames} frames`);\n      }\n\n      console.log(`[AnimationViewer] Total animations loaded: ${this.animations.length}`);\n      this.updateAnimationList();\n      this.updateDisplay();\n    } catch (error) {\n      console.error('Failed to load animations:', error);\n    }\n  }\n\n  private updateAnimationList() {\n    const list = document.getElementById('animation-list');\n    if (!list) return;\n\n    list.innerHTML = '';\n\n    this.animations.forEach((anim, index) => {\n      const item = document.createElement('div');\n      item.style.cssText = `\n        padding: 8px 12px;\n        cursor: pointer;\n        border-bottom: 1px solid #333;\n        color: #fff;\n        font-size: 14px;\n        transition: background-color 0.2s;\n      `;\n\n      if (index === this.currentAnimationIndex) {\n        item.style.backgroundColor = '#0066cc';\n      }\n\n      item.innerHTML = `\n        <div style=\"font-weight: bold;\">${anim.name}</div>\n        <div style=\"font-size: 12px; color: #aaa;\">\n          ${anim.frames} frames • ${anim.fps} fps • ${anim.loop ? 'Loop' : 'Once'}\n        </div>\n      `;\n\n      item.onclick = () => {\n        this.currentAnimationIndex = index;\n        this.updateDisplay();\n        this.updateAnimationList();\n      };\n\n      item.onmouseenter = () => {\n        if (index !== this.currentAnimationIndex) {\n          item.style.backgroundColor = '#444';\n        }\n      };\n\n      item.onmouseleave = () => {\n        if (index !== this.currentAnimationIndex) {\n          item.style.backgroundColor = 'transparent';\n        }\n      };\n\n      list.appendChild(item);\n    });\n  }\n\n  private updateDisplay() {\n    if (this.animations.length === 0) return;\n\n    const currentAnim = this.animations[this.currentAnimationIndex];\n    const animator = this.animators.get(currentAnim.name);\n\n    if (!animator) return;\n\n    // Set the animation state\n    animator.setState(currentAnim.name);\n\n    // Update info display\n    const infoDisplay = document.getElementById('animation-info');\n    if (infoDisplay) {\n      infoDisplay.innerHTML = `\n        <div style=\"font-size: 20px; font-weight: bold; margin-bottom: 5px;\">\n          ${currentAnim.name.toUpperCase()}\n        </div>\n        <div style=\"font-size: 14px; color: #aaa;\">\n          ${currentAnim.character} • ${currentAnim.frames} frames • ${currentAnim.fps} fps • ${currentAnim.loop ? 'Looping' : 'Single play'}\n        </div>\n      `;\n    }\n\n    // Start animation loop if not already running\n    if (!this.animationId) {\n      this.startAnimationLoop();\n    }\n  }\n\n  private startAnimationLoop() {\n    const animate = (timestamp: number) => {\n      if (!this.isVisible) {\n        this.animationId = null;\n        return;\n      }\n\n      const currentAnim = this.animations[this.currentAnimationIndex];\n      const animator = this.animators.get(currentAnim.name);\n\n      if (animator) {\n        // Clear canvas\n        this.ctx.fillStyle = '#000';\n        this.ctx.fillRect(0, 0, 256, 256);\n\n        // Update and draw animation\n        animator.update(1/60); // Assume 60fps\n        animator.draw(this.ctx, 0, 0, 256, 256);\n      } else {\n        // Debug: draw a red box if no animator\n        this.ctx.fillStyle = '#ff0000';\n        this.ctx.fillRect(0, 0, 256, 256);\n        this.ctx.fillStyle = '#ffffff';\n        this.ctx.font = '16px Arial';\n        this.ctx.fillText('No animator found', 10, 30);\n      }\n\n      this.animationId = requestAnimationFrame(animate);\n    };\n\n    this.animationId = requestAnimationFrame(animate);\n  }\n\n  private previousAnimation() {\n    if (this.animations.length === 0) return;\n    this.currentAnimationIndex = (this.currentAnimationIndex - 1 + this.animations.length) % this.animations.length;\n    this.updateDisplay();\n    this.updateAnimationList();\n  }\n\n  private nextAnimation() {\n    if (this.animations.length === 0) return;\n    this.currentAnimationIndex = (this.currentAnimationIndex + 1) % this.animations.length;\n    this.updateDisplay();\n    this.updateAnimationList();\n  }\n\n  private togglePlayPause() {\n    const btn = document.getElementById('play-pause-btn');\n    if (!btn) return;\n\n    if (this.animationId) {\n      // Pause\n      cancelAnimationFrame(this.animationId);\n      this.animationId = null;\n      btn.textContent = '▶ Play';\n      btn.style.background = '#0066cc';\n    } else {\n      // Play\n      this.startAnimationLoop();\n      btn.textContent = '⏸ Pause';\n      btn.style.background = '#cc6600';\n    }\n  }\n\n  public show() {\n    this.isVisible = true;\n    this.modal.style.display = 'block';\n    this.updateDisplay();\n  }\n\n  public hide() {\n    this.isVisible = false;\n    this.modal.style.display = 'none';\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n      this.animationId = null;\n    }\n  }\n\n  public toggle() {\n    if (this.isVisible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n}\n\n// Global instance\nlet animationViewer: AnimationViewer | null = null;\n\nexport function getAnimationViewer(): AnimationViewer {\n  if (!animationViewer) {\n    animationViewer = new AnimationViewer();\n  }\n  return animationViewer;\n}\n\n// Add global function for easy access\n(window as any).showAnimationViewer = () => getAnimationViewer().show();\n(window as any).hideAnimationViewer = () => getAnimationViewer().hide();\n(window as any).toggleAnimationViewer = () => getAnimationViewer().toggle();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}