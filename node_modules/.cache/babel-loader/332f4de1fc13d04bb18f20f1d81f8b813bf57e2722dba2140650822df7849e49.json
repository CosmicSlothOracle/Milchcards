{"ast":null,"code":"function sanitizeGameState(state) {\n  var _pendingAbilitySelect;\n  // Create a shallow sanitized copy without function fields that could break JSON.stringify\n  const {\n    effectQueue,\n    // drop queue with functions\n    activeAbilities,\n    pendingAbilitySelect,\n    ...rest\n  } = state;\n  return {\n    ...rest,\n    // keep minimal flags for debugging\n    activeAbilities: undefined,\n    pendingAbilitySelect: pendingAbilitySelect ? {\n      ...pendingAbilitySelect,\n      actorCard: (_pendingAbilitySelect = pendingAbilitySelect.actorCard) === null || _pendingAbilitySelect === void 0 ? void 0 : _pendingAbilitySelect.uid\n    } : undefined\n  };\n}\nexport function buildDebugSnapshot(gameState) {\n  const dbg = window.__politicardDebug || {};\n  const now = new Date();\n  const payload = {\n    meta: {\n      ts: now.toISOString(),\n      userAgent: navigator.userAgent,\n      viewport: {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        dpr: window.devicePixelRatio || 1\n      }\n    },\n    ui: {\n      zones: dbg.zones || null,\n      clickZones: dbg.clickZones || [],\n      uiTransform: dbg.uiTransform || null,\n      canvasSize: dbg.canvasSize || null\n    },\n    state: sanitizeGameState(gameState)\n  };\n  return payload;\n}\nexport async function copyDebugSnapshotToClipboard(gameState) {\n  var _navigator$clipboard;\n  const json = JSON.stringify(buildDebugSnapshot(gameState), null, 2);\n  await ((_navigator$clipboard = navigator.clipboard) === null || _navigator$clipboard === void 0 ? void 0 : _navigator$clipboard.writeText(json));\n}\nexport function downloadDebugSnapshot(gameState) {\n  const json = JSON.stringify(buildDebugSnapshot(gameState), null, 2);\n  const blob = new Blob([json], {\n    type: 'application/json'\n  });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `politicard_debug_${Date.now()}.json`;\n  document.body.appendChild(a);\n  a.click();\n  a.remove();\n  URL.revokeObjectURL(url);\n}","map":{"version":3,"names":["sanitizeGameState","state","_pendingAbilitySelect","effectQueue","activeAbilities","pendingAbilitySelect","rest","undefined","actorCard","uid","buildDebugSnapshot","gameState","dbg","window","__politicardDebug","now","Date","payload","meta","ts","toISOString","userAgent","navigator","viewport","width","innerWidth","height","innerHeight","dpr","devicePixelRatio","ui","zones","clickZones","uiTransform","canvasSize","copyDebugSnapshotToClipboard","_navigator$clipboard","json","JSON","stringify","clipboard","writeText","downloadDebugSnapshot","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","remove","revokeObjectURL"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/utils/debugExport.ts"],"sourcesContent":["import { GameState } from '../types/game';\r\n\r\ntype DebugUIInfo = {\r\n  zones?: any;\r\n  clickZones?: Array<{ x: number; y: number; w: number; h: number; data: any }>;\r\n  uiTransform?: { scale: number; offX: number; offY: number };\r\n  canvasSize?: { width: number; height: number };\r\n};\r\n\r\nfunction sanitizeGameState(state: GameState) {\r\n  // Create a shallow sanitized copy without function fields that could break JSON.stringify\r\n  const {\r\n    effectQueue, // drop queue with functions\r\n    activeAbilities,\r\n    pendingAbilitySelect,\r\n    ...rest\r\n  } = state as any;\r\n  return {\r\n    ...rest,\r\n    // keep minimal flags for debugging\r\n    activeAbilities: undefined,\r\n    pendingAbilitySelect: pendingAbilitySelect ? { ...pendingAbilitySelect, actorCard: pendingAbilitySelect.actorCard?.uid } : undefined\r\n  };\r\n}\r\n\r\nexport function buildDebugSnapshot(gameState: GameState) {\r\n  const dbg: DebugUIInfo = (window as any).__politicardDebug || {};\r\n  const now = new Date();\r\n  const payload = {\r\n    meta: {\r\n      ts: now.toISOString(),\r\n      userAgent: navigator.userAgent,\r\n      viewport: { width: window.innerWidth, height: window.innerHeight, dpr: window.devicePixelRatio || 1 }\r\n    },\r\n    ui: {\r\n      zones: dbg.zones || null,\r\n      clickZones: dbg.clickZones || [],\r\n      uiTransform: dbg.uiTransform || null,\r\n      canvasSize: dbg.canvasSize || null\r\n    },\r\n    state: sanitizeGameState(gameState)\r\n  };\r\n  return payload;\r\n}\r\n\r\nexport async function copyDebugSnapshotToClipboard(gameState: GameState) {\r\n  const json = JSON.stringify(buildDebugSnapshot(gameState), null, 2);\r\n  await navigator.clipboard?.writeText(json);\r\n}\r\n\r\nexport function downloadDebugSnapshot(gameState: GameState) {\r\n  const json = JSON.stringify(buildDebugSnapshot(gameState), null, 2);\r\n  const blob = new Blob([json], { type: 'application/json' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `politicard_debug_${Date.now()}.json`;\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  a.remove();\r\n  URL.revokeObjectURL(url);\r\n}\r\n\r\n\r\n\r\n"],"mappings":"AASA,SAASA,iBAAiBA,CAACC,KAAgB,EAAE;EAAA,IAAAC,qBAAA;EAC3C;EACA,MAAM;IACJC,WAAW;IAAE;IACbC,eAAe;IACfC,oBAAoB;IACpB,GAAGC;EACL,CAAC,GAAGL,KAAY;EAChB,OAAO;IACL,GAAGK,IAAI;IACP;IACAF,eAAe,EAAEG,SAAS;IAC1BF,oBAAoB,EAAEA,oBAAoB,GAAG;MAAE,GAAGA,oBAAoB;MAAEG,SAAS,GAAAN,qBAAA,GAAEG,oBAAoB,CAACG,SAAS,cAAAN,qBAAA,uBAA9BA,qBAAA,CAAgCO;IAAI,CAAC,GAAGF;EAC7H,CAAC;AACH;AAEA,OAAO,SAASG,kBAAkBA,CAACC,SAAoB,EAAE;EACvD,MAAMC,GAAgB,GAAIC,MAAM,CAASC,iBAAiB,IAAI,CAAC,CAAC;EAChE,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB,MAAMC,OAAO,GAAG;IACdC,IAAI,EAAE;MACJC,EAAE,EAAEJ,GAAG,CAACK,WAAW,CAAC,CAAC;MACrBC,SAAS,EAAEC,SAAS,CAACD,SAAS;MAC9BE,QAAQ,EAAE;QAAEC,KAAK,EAAEX,MAAM,CAACY,UAAU;QAAEC,MAAM,EAAEb,MAAM,CAACc,WAAW;QAAEC,GAAG,EAAEf,MAAM,CAACgB,gBAAgB,IAAI;MAAE;IACtG,CAAC;IACDC,EAAE,EAAE;MACFC,KAAK,EAAEnB,GAAG,CAACmB,KAAK,IAAI,IAAI;MACxBC,UAAU,EAAEpB,GAAG,CAACoB,UAAU,IAAI,EAAE;MAChCC,WAAW,EAAErB,GAAG,CAACqB,WAAW,IAAI,IAAI;MACpCC,UAAU,EAAEtB,GAAG,CAACsB,UAAU,IAAI;IAChC,CAAC;IACDjC,KAAK,EAAED,iBAAiB,CAACW,SAAS;EACpC,CAAC;EACD,OAAOM,OAAO;AAChB;AAEA,OAAO,eAAekB,4BAA4BA,CAACxB,SAAoB,EAAE;EAAA,IAAAyB,oBAAA;EACvE,MAAMC,IAAI,GAAGC,IAAI,CAACC,SAAS,CAAC7B,kBAAkB,CAACC,SAAS,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;EACnE,QAAAyB,oBAAA,GAAMd,SAAS,CAACkB,SAAS,cAAAJ,oBAAA,uBAAnBA,oBAAA,CAAqBK,SAAS,CAACJ,IAAI,CAAC;AAC5C;AAEA,OAAO,SAASK,qBAAqBA,CAAC/B,SAAoB,EAAE;EAC1D,MAAM0B,IAAI,GAAGC,IAAI,CAACC,SAAS,CAAC7B,kBAAkB,CAACC,SAAS,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;EACnE,MAAMgC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACP,IAAI,CAAC,EAAE;IAAEQ,IAAI,EAAE;EAAmB,CAAC,CAAC;EAC3D,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;EACrC,MAAMM,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACrCF,CAAC,CAACG,IAAI,GAAGN,GAAG;EACZG,CAAC,CAACI,QAAQ,GAAG,oBAAoBrC,IAAI,CAACD,GAAG,CAAC,CAAC,OAAO;EAClDmC,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,CAAC,CAAC;EAC5BA,CAAC,CAACO,KAAK,CAAC,CAAC;EACTP,CAAC,CAACQ,MAAM,CAAC,CAAC;EACVV,GAAG,CAACW,eAAe,CAACZ,GAAG,CAAC;AAC1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}