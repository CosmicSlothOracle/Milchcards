{"ast":null,"code":"import _objectSpread from\"C:/Users/skank/Videos/Cards/Milchcards/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{sumRow,getCardActionPointCost}from'../utils/gameUtils';// Basic AI player module with three difficulty presets.\n// takeTurn applies a state update via setGameState(prev => newState).\nexport function takeTurn(setGameState,difficulty,log){setGameState(prev=>{var _prev$aiEnabled$,_prev$aiEnabled;const aiEnabled=(_prev$aiEnabled$=(_prev$aiEnabled=prev.aiEnabled)===null||_prev$aiEnabled===void 0?void 0:_prev$aiEnabled[2])!==null&&_prev$aiEnabled$!==void 0?_prev$aiEnabled$:false;if(!aiEnabled||prev.current!==2)return prev;const hand=prev.hands[2];const playerBoard=prev.board[1];const aiBoard=prev.board[2];const aiAP=prev.actionPoints[2];log(\"\\uD83E\\uDD16 AI(\".concat(difficulty,\") Analyse: P=\").concat(sumRow([...playerBoard.aussen]),\" vs AI=\").concat(sumRow([...aiBoard.aussen])));if(aiAP<=0){log('ðŸ¤– AI passt - keine AP mehr.');return _objectSpread(_objectSpread({},prev),{},{passed:_objectSpread(_objectSpread({},prev.passed),{},{2:true})});}// Use the centralized decision helper so tests and takeTurn share logic\nconst action=decideBestAction(prev,2,difficulty);if(action.type==='pass'){log('ðŸ¤– AI passt - keine guten Aktionen.');return _objectSpread(_objectSpread({},prev),{},{passed:_objectSpread(_objectSpread({},prev.passed),{},{2:true})});}// Execute chosen play\nconst playIndex=action.type==='play'?action.index:-1;const chosenCard=prev.hands[2][playIndex];if(!chosenCard){log('ðŸ¤– AI Fehler: UngÃ¼ltiger Kartenindex, passe.');return _objectSpread(_objectSpread({},prev),{},{passed:_objectSpread(_objectSpread({},prev.passed),{},{2:true})});}const apCost=getCardActionPointCost(chosenCard,prev,2);if(chosenCard.kind==='pol'){var _action$lane,_influence;const lane=(_action$lane=action.lane)!==null&&_action$lane!==void 0?_action$lane:chosenCard.tag==='Staatsoberhaupt'||chosenCard.tag==='Regierungschef'||chosenCard.tag==='Diplomat'?'aussen':'innen';const newP2Hand=[...prev.hands[2]];const[played]=newP2Hand.splice(playIndex,1);const newP2Lane=[...prev.board[2][lane],played];const newP2Board=_objectSpread(_objectSpread({},prev.board[2]),{},{[lane]:newP2Lane});const newBoard=_objectSpread(_objectSpread({},prev.board),{},{2:newP2Board});const newActionPoints=_objectSpread(_objectSpread({},prev.actionPoints),{},{2:prev.actionPoints[2]-apCost});const laneName=lane==='aussen'?'Regierungsreihe':'Ã–ffentlichkeitsreihe';const power=(_influence=played.influence)!==null&&_influence!==void 0?_influence:0;log(\"\\uD83E\\uDD16 AI spielt \".concat(played.name,\" (\").concat(power,\" Einfluss) nach \").concat(laneName,\".\"));return _objectSpread(_objectSpread({},prev),{},{hands:_objectSpread(_objectSpread({},prev.hands),{},{2:newP2Hand}),board:newBoard,actionPoints:newActionPoints});}// spec cards\nconst newP2Hand=[...prev.hands[2]];const[playedSpec]=newP2Hand.splice(playIndex,1);const newActionPoints=_objectSpread(_objectSpread({},prev.actionPoints),{},{2:prev.actionPoints[2]-apCost});if(playedSpec.type==='Dauerhaft-Initiative'){const slotType=playedSpec.slot==='Ã–ffentlichkeit'?'public':'government';if(slotType==='government'&&!prev.permanentSlots[2].government){const newPermanentSlots=_objectSpread(_objectSpread({},prev.permanentSlots),{},{2:_objectSpread(_objectSpread({},prev.permanentSlots[2]),{},{government:playedSpec})});log(\"\\uD83E\\uDD16 AI legt \".concat(playedSpec.name,\" in Regierung Spezial-Slot.\"));return _objectSpread(_objectSpread({},prev),{},{hands:_objectSpread(_objectSpread({},prev.hands),{},{2:newP2Hand}),permanentSlots:newPermanentSlots,actionPoints:newActionPoints});}else if(slotType==='public'&&!prev.permanentSlots[2].public){const newPermanentSlots=_objectSpread(_objectSpread({},prev.permanentSlots),{},{2:_objectSpread(_objectSpread({},prev.permanentSlots[2]),{},{public:playedSpec})});log(\"\\uD83E\\uDD16 AI legt \".concat(playedSpec.name,\" in \\xD6ffentlichkeit Spezial-Slot.\"));return _objectSpread(_objectSpread({},prev),{},{hands:_objectSpread(_objectSpread({},prev.hands),{},{2:newP2Hand}),permanentSlots:newPermanentSlots,actionPoints:newActionPoints});}}log(\"\\uD83E\\uDD16 AI spielt Spezialkarte \".concat(playedSpec.name,\".\"));return _objectSpread(_objectSpread({},prev),{},{hands:_objectSpread(_objectSpread({},prev.hands),{},{2:newP2Hand}),actionPoints:newActionPoints});});}// Expose a light-weight decision helper for tests\nexport function decideBestAction(state,player){let difficulty=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'easy';// reuse takeTurn logic but without mutating state: produce an action suggestions\nconst hand=state.hands[player];const aiAP=state.actionPoints[player];if(aiAP<=0)return{type:'pass'};// Build richer candidates with lane suggestion and scoring\nconst candidates=[];hand.forEach((card,idx)=>{const apCost=getCardActionPointCost(card,state,player);if(apCost>aiAP)return;let baseScore=0;let suggestedLane=undefined;if(card.kind==='pol'){const pol=card;suggestedLane=pol.tag==='Staatsoberhaupt'||pol.tag==='Regierungschef'||pol.tag==='Diplomat'?'aussen':'innen';// prefer higher influence and filling missing lanes\nconst myGov=state.board[player].aussen.length;const myPub=state.board[player].innen.length;baseScore=(pol.influence||0)*2+(suggestedLane==='aussen'?Math.max(0,3-myGov)*10:Math.max(0,3-myPub)*6);// Penalize placing weak politicians into lanes where opponent already dominates\nconst opponent=player===1?2:1;const oppGovInfluence=sumRow([...state.board[opponent].aussen]);const myGovInfluence=sumRow([...state.board[player].aussen]);const influenceDiff=oppGovInfluence-myGovInfluence;if(suggestedLane==='aussen'&&influenceDiff>5){// prefer stronger government plays to catch up\nbaseScore+=(pol.influence||0)*1.5;}}else if(card.kind==='spec'){const spec=card;// Recognize interventions that counter opponent patterns\nif(spec.type==='Intervention'){baseScore=50;// if opponent has media, Fake News is more valuable\nconst opponent=player===1?2:1;const opponentHasMedia=state.board[opponent].innen.some(c=>c.kind==='pol'&&(c.name.includes('Oprah')||c.name.includes('Zuckerberg')));if(spec.name&&spec.name.includes('Fake News')&&opponentHasMedia)baseScore+=30;}else if(spec.type==='Dauerhaft-Initiative')baseScore=55+(spec.bp||0)*5;else baseScore=35+(spec.bp||0)*2;}// Difficulty adjustments\nif(difficulty==='medium')baseScore+=Math.floor(Math.random()*10)-3;if(difficulty==='hard')baseScore+=12;// Prefer lower AP cost plays slightly\nconst costFactor=Math.max(0,5-apCost);const finalScore=baseScore+costFactor;candidates.push({index:idx,card,score:finalScore,lane:suggestedLane});});if(candidates.length===0)return{type:'pass'};candidates.sort((a,b)=>b.score-a.score);// If hard difficulty, run light Monte Carlo rollouts from top candidates\nif(difficulty==='hard'){var _rolloutScores$get;const top=candidates.slice(0,Math.min(4,candidates.length));const rolloutScores=new Map();const simulate=(stateSnapshot,playIndex,lane)=>{// Very lightweight simulation: apply the play and evaluate immediate board influence difference\nconst simState=JSON.parse(JSON.stringify(stateSnapshot));const card=simState.hands[player][playIndex];const apCost=getCardActionPointCost(card,simState,player);// apply simple play\nsimState.actionPoints[player]=Math.max(0,simState.actionPoints[player]-apCost);simState.hands[player].splice(playIndex,1);if(card.kind==='pol'){const targetLane=lane!==null&&lane!==void 0?lane:card.tag==='Staatsoberhaupt'||card.tag==='Regierungschef'||card.tag==='Diplomat'?'aussen':'innen';simState.board[player][targetLane].push(card);}else if(card.kind==='spec'&&card.type==='Intervention'){simState.traps[player].push(card);}// Quick eval: difference in government influence\nconst myInf=sumRow([...simState.board[player].aussen]);const opp=player===1?2:1;const oppInf=sumRow([...simState.board[opp].aussen]);return myInf-oppInf;};for(const c of top){let acc=0;const trials=6;for(let t=0;t<trials;t++){acc+=simulate(state,c.index,c.lane);}rolloutScores.set(c.index,acc/trials+c.score);}// pick best by rollout-adjusted score\nlet bestIdx=top[0].index;let bestScore=(_rolloutScores$get=rolloutScores.get(bestIdx))!==null&&_rolloutScores$get!==void 0?_rolloutScores$get:top[0].score;for(const c of top){var _rolloutScores$get2;const s=(_rolloutScores$get2=rolloutScores.get(c.index))!==null&&_rolloutScores$get2!==void 0?_rolloutScores$get2:c.score;if(s>bestScore){bestScore=s;bestIdx=c.index;}}const chosen=candidates.find(x=>x.index===bestIdx);return{type:'play',index:chosen.index,lane:chosen.lane};}const best=candidates[0];return{type:'play',index:best.index,lane:best.lane};}","map":{"version":3,"names":["sumRow","getCardActionPointCost","takeTurn","setGameState","difficulty","log","prev","_prev$aiEnabled$","_prev$aiEnabled","aiEnabled","current","hand","hands","playerBoard","board","aiBoard","aiAP","actionPoints","concat","aussen","_objectSpread","passed","action","decideBestAction","type","playIndex","index","chosenCard","apCost","kind","_action$lane","_influence","lane","tag","newP2Hand","played","splice","newP2Lane","newP2Board","newBoard","newActionPoints","laneName","power","influence","name","playedSpec","slotType","slot","permanentSlots","government","newPermanentSlots","public","state","player","arguments","length","undefined","candidates","forEach","card","idx","baseScore","suggestedLane","pol","myGov","myPub","innen","Math","max","opponent","oppGovInfluence","myGovInfluence","influenceDiff","spec","opponentHasMedia","some","c","includes","bp","floor","random","costFactor","finalScore","push","score","sort","a","b","_rolloutScores$get","top","slice","min","rolloutScores","Map","simulate","stateSnapshot","simState","JSON","parse","stringify","targetLane","traps","myInf","opp","oppInf","acc","trials","t","set","bestIdx","bestScore","get","_rolloutScores$get2","s","chosen","find","x","best"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/ai/aiPlayer.ts"],"sourcesContent":["import { GameState, Card, Player } from '../types/game';\nimport { sumRow, getCardActionPointCost } from '../utils/gameUtils';\nimport { buildDeckFromEntries } from '../utils/gameUtils';\n\nexport type Difficulty = 'easy' | 'medium' | 'hard';\n\nexport type AIAction =\n  | { type: 'pass' }\n  | { type: 'play'; index: number; lane?: 'innen' | 'aussen' };\n\n// Basic AI player module with three difficulty presets.\n// takeTurn applies a state update via setGameState(prev => newState).\nexport function takeTurn(\n  setGameState: React.Dispatch<React.SetStateAction<GameState>>,\n  difficulty: Difficulty,\n  log: (msg: string) => void\n) {\n  setGameState(prev => {\n    const aiEnabled = prev.aiEnabled?.[2] ?? false;\n    if (!aiEnabled || prev.current !== 2) return prev;\n\n    const hand = prev.hands[2];\n    const playerBoard = prev.board[1];\n    const aiBoard = prev.board[2];\n    const aiAP = prev.actionPoints[2];\n\n    log(`ðŸ¤– AI(${difficulty}) Analyse: P=${sumRow([...playerBoard.aussen])} vs AI=${sumRow([...aiBoard.aussen])}`);\n\n    if (aiAP <= 0) {\n      log('ðŸ¤– AI passt - keine AP mehr.');\n      return { ...prev, passed: { ...prev.passed, 2: true } };\n    }\n\n    // Use the centralized decision helper so tests and takeTurn share logic\n    const action = decideBestAction(prev, 2, difficulty);\n    if (action.type === 'pass') {\n      log('ðŸ¤– AI passt - keine guten Aktionen.');\n      return { ...prev, passed: { ...prev.passed, 2: true } };\n    }\n\n    // Execute chosen play\n    const playIndex = action.type === 'play' ? action.index : -1;\n    const chosenCard = prev.hands[2][playIndex];\n    if (!chosenCard) {\n      log('ðŸ¤– AI Fehler: UngÃ¼ltiger Kartenindex, passe.');\n      return { ...prev, passed: { ...prev.passed, 2: true } };\n    }\n\n    const apCost = getCardActionPointCost(chosenCard, prev, 2);\n\n    if (chosenCard.kind === 'pol') {\n      const lane = action.lane ?? ((chosenCard as any).tag === 'Staatsoberhaupt' || (chosenCard as any).tag === 'Regierungschef' || (chosenCard as any).tag === 'Diplomat' ? 'aussen' : 'innen');\n      const newP2Hand = [...prev.hands[2]];\n      const [played] = newP2Hand.splice(playIndex, 1);\n      const newP2Lane = [...prev.board[2][lane], played];\n      const newP2Board = { ...prev.board[2], [lane]: newP2Lane };\n      const newBoard = { ...prev.board, 2: newP2Board };\n      const newActionPoints = { ...prev.actionPoints, 2: prev.actionPoints[2] - apCost };\n\n      const laneName = lane === 'aussen' ? 'Regierungsreihe' : 'Ã–ffentlichkeitsreihe';\n      const power = (played as any).influence ?? 0;\n      log(`ðŸ¤– AI spielt ${played.name} (${power} Einfluss) nach ${laneName}.`);\n\n      return {\n        ...prev,\n        hands: { ...prev.hands, 2: newP2Hand },\n        board: newBoard,\n        actionPoints: newActionPoints\n      };\n    }\n\n    // spec cards\n    const newP2Hand = [...prev.hands[2]];\n    const [playedSpec] = newP2Hand.splice(playIndex, 1);\n    const newActionPoints = { ...prev.actionPoints, 2: prev.actionPoints[2] - apCost };\n\n    if ((playedSpec as any).type === 'Dauerhaft-Initiative') {\n      const slotType = (playedSpec as any).slot === 'Ã–ffentlichkeit' ? 'public' : 'government';\n      if (slotType === 'government' && !prev.permanentSlots[2].government) {\n        const newPermanentSlots = { ...prev.permanentSlots, 2: { ...prev.permanentSlots[2], government: playedSpec } };\n        log(`ðŸ¤– AI legt ${playedSpec.name} in Regierung Spezial-Slot.`);\n        return { ...prev, hands: { ...prev.hands, 2: newP2Hand }, permanentSlots: newPermanentSlots, actionPoints: newActionPoints };\n      } else if (slotType === 'public' && !prev.permanentSlots[2].public) {\n        const newPermanentSlots = { ...prev.permanentSlots, 2: { ...prev.permanentSlots[2], public: playedSpec } };\n        log(`ðŸ¤– AI legt ${playedSpec.name} in Ã–ffentlichkeit Spezial-Slot.`);\n        return { ...prev, hands: { ...prev.hands, 2: newP2Hand }, permanentSlots: newPermanentSlots, actionPoints: newActionPoints };\n      }\n    }\n\n    log(`ðŸ¤– AI spielt Spezialkarte ${playedSpec.name}.`);\n    return { ...prev, hands: { ...prev.hands, 2: newP2Hand }, actionPoints: newActionPoints };\n  });\n}\n\n// Expose a light-weight decision helper for tests\nexport function decideBestAction(state: GameState, player: Player, difficulty: Difficulty = 'easy'): AIAction {\n  // reuse takeTurn logic but without mutating state: produce an action suggestions\n  const hand = state.hands[player];\n  const aiAP = state.actionPoints[player];\n  if (aiAP <= 0) return { type: 'pass' };\n  // Build richer candidates with lane suggestion and scoring\n  const candidates: Array<{ index: number; card: Card; score: number; lane?: 'innen' | 'aussen' }> = [];\n  hand.forEach((card, idx) => {\n    const apCost = getCardActionPointCost(card, state, player);\n    if (apCost > aiAP) return;\n\n    let baseScore = 0;\n    let suggestedLane: 'innen' | 'aussen' | undefined = undefined;\n\n    if (card.kind === 'pol') {\n      const pol = card as any;\n      suggestedLane = pol.tag === 'Staatsoberhaupt' || pol.tag === 'Regierungschef' || pol.tag === 'Diplomat' ? 'aussen' : 'innen';\n      // prefer higher influence and filling missing lanes\n      const myGov = state.board[player].aussen.length;\n      const myPub = state.board[player].innen.length;\n      baseScore = (pol.influence || 0) * 2 + (suggestedLane === 'aussen' ? Math.max(0, 3 - myGov) * 10 : Math.max(0, 3 - myPub) * 6);\n\n      // Penalize placing weak politicians into lanes where opponent already dominates\n      const opponent = player === 1 ? 2 : 1;\n      const oppGovInfluence = sumRow([...state.board[opponent].aussen]);\n      const myGovInfluence = sumRow([...state.board[player].aussen]);\n      const influenceDiff = oppGovInfluence - myGovInfluence;\n      if (suggestedLane === 'aussen' && influenceDiff > 5) {\n        // prefer stronger government plays to catch up\n        baseScore += (pol.influence || 0) * 1.5;\n      }\n    } else if (card.kind === 'spec') {\n      const spec = card as any;\n      // Recognize interventions that counter opponent patterns\n      if (spec.type === 'Intervention') {\n        baseScore = 50;\n        // if opponent has media, Fake News is more valuable\n        const opponent = player === 1 ? 2 : 1;\n        const opponentHasMedia = state.board[opponent].innen.some(c => (c.kind === 'pol') && (c.name.includes('Oprah') || c.name.includes('Zuckerberg')));\n        if (spec.name && spec.name.includes('Fake News') && opponentHasMedia) baseScore += 30;\n      } else if (spec.type === 'Dauerhaft-Initiative') baseScore = 55 + (spec.bp || 0) * 5;\n      else baseScore = 35 + (spec.bp || 0) * 2;\n    }\n\n    // Difficulty adjustments\n    if (difficulty === 'medium') baseScore += Math.floor(Math.random() * 10) - 3;\n    if (difficulty === 'hard') baseScore += 12;\n\n    // Prefer lower AP cost plays slightly\n    const costFactor = Math.max(0, 5 - apCost);\n    const finalScore = baseScore + costFactor;\n\n    candidates.push({ index: idx, card, score: finalScore, lane: suggestedLane });\n  });\n\n  if (candidates.length === 0) return { type: 'pass' };\n\n  candidates.sort((a, b) => b.score - a.score);\n  // If hard difficulty, run light Monte Carlo rollouts from top candidates\n  if (difficulty === 'hard') {\n    const top = candidates.slice(0, Math.min(4, candidates.length));\n    const rolloutScores: Map<number, number> = new Map();\n\n    const simulate = (stateSnapshot: GameState, playIndex: number, lane?: 'innen' | 'aussen') => {\n      // Very lightweight simulation: apply the play and evaluate immediate board influence difference\n      const simState = JSON.parse(JSON.stringify(stateSnapshot)) as GameState;\n      const card = simState.hands[player][playIndex];\n      const apCost = getCardActionPointCost(card, simState, player);\n\n      // apply simple play\n      simState.actionPoints[player] = Math.max(0, simState.actionPoints[player] - apCost);\n      simState.hands[player].splice(playIndex, 1);\n      if (card.kind === 'pol') {\n        const targetLane = lane ?? ((card as any).tag === 'Staatsoberhaupt' || (card as any).tag === 'Regierungschef' || (card as any).tag === 'Diplomat' ? 'aussen' : 'innen');\n        (simState.board[player] as any)[targetLane].push(card);\n      } else if (card.kind === 'spec' && (card as any).type === 'Intervention') {\n        simState.traps[player].push(card);\n      }\n\n      // Quick eval: difference in government influence\n      const myInf = sumRow([...simState.board[player].aussen]);\n      const opp = player === 1 ? 2 : 1;\n      const oppInf = sumRow([...simState.board[opp].aussen]);\n      return myInf - oppInf;\n    };\n\n    for (const c of top) {\n      let acc = 0;\n      const trials = 6;\n      for (let t = 0; t < trials; t++) {\n        acc += simulate(state, c.index, c.lane);\n      }\n      rolloutScores.set(c.index, acc / trials + c.score);\n    }\n\n    // pick best by rollout-adjusted score\n    let bestIdx = top[0].index;\n    let bestScore = rolloutScores.get(bestIdx) ?? top[0].score;\n    for (const c of top) {\n      const s = rolloutScores.get(c.index) ?? c.score;\n      if (s > bestScore) {\n        bestScore = s;\n        bestIdx = c.index;\n      }\n    }\n\n    const chosen = candidates.find(x => x.index === bestIdx)!;\n    return { type: 'play', index: chosen.index, lane: chosen.lane };\n  }\n\n  const best = candidates[0];\n  return { type: 'play', index: best.index, lane: best.lane };\n}\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}