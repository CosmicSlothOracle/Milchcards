{"ast":null,"code":"import React,{createContext,useContext,useRef,useMemo}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const VisualEffectsContext=/*#__PURE__*/createContext(undefined);export function VisualEffectsProvider(_ref){let{children}=_ref;const particlesRef=useRef([]);const popsRef=useRef([]);const ripplesRef=useRef([]);const apLabelsRef=useRef([]);const reducedMotion=typeof window!=='undefined'&&window.matchMedia&&window.matchMedia('(prefers-reduced-motion: reduce)').matches||!!window.__pc_reduced_motion;const spawnParticles=function(cx,cy){let count=arguments.length>2&&arguments[2]!==undefined?arguments[2]:12;if(reducedMotion)return;const now=performance.now();for(let i=0;i<count;i++){particlesRef.current.push({start:now,life:600+Math.random()*500,x:cx+(Math.random()-0.5)*48,y:cy+(Math.random()-0.5)*48,vx:(Math.random()-0.5)*6,vy:-Math.random()*6,size:3+Math.random()*6,color:['#ffd166','#ff6b6b','#4ade80'][Math.floor(Math.random()*3)],gravity:0.12});}};const spawnPop=uid=>{popsRef.current.push({uid,started:performance.now(),duration:420});};const spawnRipple=(cx,cy,opts)=>{var _opts$radius;if(reducedMotion)return;ripplesRef.current.push({cx,cy,started:performance.now(),duration:opts!==null&&opts!==void 0&&opts.radius?700:700,radius:(_opts$radius=opts===null||opts===void 0?void 0:opts.radius)!==null&&_opts$radius!==void 0?_opts$radius:480,showAp:!!(opts!==null&&opts!==void 0&&opts.showAp),apX:opts===null||opts===void 0?void 0:opts.apX,apY:opts===null||opts===void 0?void 0:opts.apY});if(opts!==null&&opts!==void 0&&opts.showAp){var _opts$apX,_opts$apY;apLabelsRef.current.push({x:(_opts$apX=opts.apX)!==null&&_opts$apX!==void 0?_opts$apX:cx,y:(_opts$apY=opts.apY)!==null&&_opts$apY!==void 0?_opts$apY:cy,started:performance.now(),duration:900,text:'+1'});}};const value=useMemo(()=>({particlesRef,popsRef,ripplesRef,apLabelsRef,reducedMotion,spawnParticles,spawnPop,spawnRipple}),[]);return/*#__PURE__*/_jsx(VisualEffectsContext.Provider,{value:value,children:children});}export function useVisualEffects(){const ctx=useContext(VisualEffectsContext);if(!ctx)throw new Error('useVisualEffects must be used within VisualEffectsProvider');return ctx;}// Safe variant that returns null when no provider is present. Use this when a caller\n// cannot guarantee being rendered inside the provider (avoids rules-of-hooks errors\n// when attempting to call hooks conditionally).\nexport function useVisualEffectsSafe(){return useContext(VisualEffectsContext)||null;}export default VisualEffectsContext;","map":{"version":3,"names":["React","createContext","useContext","useRef","useMemo","jsx","_jsx","VisualEffectsContext","undefined","VisualEffectsProvider","_ref","children","particlesRef","popsRef","ripplesRef","apLabelsRef","reducedMotion","window","matchMedia","matches","__pc_reduced_motion","spawnParticles","cx","cy","count","arguments","length","now","performance","i","current","push","start","life","Math","random","x","y","vx","vy","size","color","floor","gravity","spawnPop","uid","started","duration","spawnRipple","opts","_opts$radius","radius","showAp","apX","apY","_opts$apX","_opts$apY","text","value","Provider","useVisualEffects","ctx","Error","useVisualEffectsSafe"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/context/VisualEffectsContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useRef, ReactNode, useMemo } from 'react';\r\n\r\ntype Particle = { start: number; life: number; x: number; y: number; vx: number; vy: number; size?: number; color?: string; gravity?: number };\r\ntype Pop = { uid: number | string; started: number; duration: number };\r\ntype Ripple = { cx: number; cy: number; started: number; duration: number; radius: number; showAp?: boolean; apX?: number; apY?: number; _apSpawned?: boolean };\r\ntype ApLabel = { x: number; y: number; started: number; duration: number; text: string };\r\n\r\ninterface VisualEffectsContextType {\r\n  particlesRef: React.MutableRefObject<Particle[]>;\r\n  popsRef: React.MutableRefObject<Pop[]>;\r\n  ripplesRef: React.MutableRefObject<Ripple[]>;\r\n  apLabelsRef: React.MutableRefObject<ApLabel[]>;\r\n  reducedMotion: boolean;\r\n  spawnParticles: (cx: number, cy: number, count?: number) => void;\r\n  spawnPop: (uid: number | string) => void;\r\n  spawnRipple: (cx: number, cy: number, opts?: { radius?: number; showAp?: boolean; apX?: number; apY?: number }) => void;\r\n}\r\n\r\nconst VisualEffectsContext = createContext<VisualEffectsContextType | undefined>(undefined);\r\n\r\nexport function VisualEffectsProvider({ children }: { children: ReactNode }) {\r\n  const particlesRef = useRef<Particle[]>([]);\r\n  const popsRef = useRef<Pop[]>([]);\r\n  const ripplesRef = useRef<Ripple[]>([]);\r\n  const apLabelsRef = useRef<ApLabel[]>([]);\r\n\r\n  const reducedMotion = typeof window !== 'undefined' && (window as any).matchMedia && (window as any).matchMedia('(prefers-reduced-motion: reduce)').matches || !!(window as any).__pc_reduced_motion;\r\n\r\n  const spawnParticles = (cx: number, cy: number, count = 12) => {\r\n    if (reducedMotion) return;\r\n    const now = performance.now();\r\n    for (let i = 0; i < count; i++) {\r\n      particlesRef.current.push({ start: now, life: 600 + Math.random() * 500, x: cx + (Math.random() - 0.5) * 48, y: cy + (Math.random() - 0.5) * 48, vx: (Math.random() - 0.5) * 6, vy: -Math.random() * 6, size: 3 + Math.random() * 6, color: ['#ffd166', '#ff6b6b', '#4ade80'][Math.floor(Math.random() * 3)], gravity: 0.12 });\r\n    }\r\n  };\r\n\r\n  const spawnPop = (uid: number | string) => {\r\n    popsRef.current.push({ uid, started: performance.now(), duration: 420 });\r\n  };\r\n\r\n  const spawnRipple = (cx: number, cy: number, opts?: { radius?: number; showAp?: boolean; apX?: number; apY?: number }) => {\r\n    if (reducedMotion) return;\r\n    ripplesRef.current.push({ cx, cy, started: performance.now(), duration: opts?.radius ? 700 : 700, radius: opts?.radius ?? 480, showAp: !!opts?.showAp, apX: opts?.apX, apY: opts?.apY });\r\n    if (opts?.showAp) {\r\n      apLabelsRef.current.push({ x: opts.apX ?? cx, y: opts.apY ?? cy, started: performance.now(), duration: 900, text: '+1' });\r\n    }\r\n  };\r\n\r\n  const value = useMemo(() => ({ particlesRef, popsRef, ripplesRef, apLabelsRef, reducedMotion, spawnParticles, spawnPop, spawnRipple }), []);\r\n\r\n  return <VisualEffectsContext.Provider value={value}>{children}</VisualEffectsContext.Provider>;\r\n}\r\n\r\nexport function useVisualEffects() {\r\n  const ctx = useContext(VisualEffectsContext);\r\n  if (!ctx) throw new Error('useVisualEffects must be used within VisualEffectsProvider');\r\n  return ctx;\r\n}\r\n\r\n// Safe variant that returns null when no provider is present. Use this when a caller\r\n// cannot guarantee being rendered inside the provider (avoids rules-of-hooks errors\r\n// when attempting to call hooks conditionally).\r\nexport function useVisualEffectsSafe() {\r\n  return useContext(VisualEffectsContext) || null;\r\n}\r\n\r\nexport default VisualEffectsContext;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}