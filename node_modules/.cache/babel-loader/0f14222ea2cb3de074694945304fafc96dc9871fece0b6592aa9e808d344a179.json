{"ast":null,"code":"function other(p){return p===1?2:1;}export function startOfTurn(state,p){var _state$board$p$innen,_state$board$p,_state$board$p$aussen,_state$board$p2;// AP reset\nstate.actionPoints[p]=2;// Flags reset\nconst f=state.effectFlags[p];// Flags reset\nconst prevZuck=f.zuckSpent;f.zuckOnceAp=false;f.zuckSpent=false;f.aiWeiweiOnActivate=false;f.auraScience=0;f.auraHealth=0;f.auraMilitaryPenalty=0;// Oppositionsblockade ends at start of player's turn\nf.initiativesLocked=false;// Simplified AP system: No initiative-specific bonuses\n// Helper to consume double aura flag once\nconst consumeDouble=()=>{if(f.doublePublicAura){f.doublePublicAura=false;if(!state._effectQueue)state._effectQueue=[];state._effectQueue.push({type:'LOG',msg:'Double Public Aura consumed.'});return true;}return false;};// Determine active public cards (inner lane)\nconst pubNames=((_state$board$p$innen=(_state$board$p=state.board[p])===null||_state$board$p===void 0?void 0:_state$board$p.innen)!==null&&_state$board$p$innen!==void 0?_state$board$p$innen:[]).map(c=>c.name);// Apply auras with possible doubling (consume order defined)\nif(pubNames.includes('Jennifer Doudna')){var _f$auraScience;const doubled=consumeDouble();f.auraScience=((_f$auraScience=f.auraScience)!==null&&_f$auraScience!==void 0?_f$auraScience:0)+(doubled?2:1);}if(pubNames.includes('Anthony Fauci')){var _f$auraHealth;const doubled=consumeDouble();f.auraHealth=((_f$auraHealth=f.auraHealth)!==null&&_f$auraHealth!==void 0?_f$auraHealth:0)+(doubled?2:1);}if(pubNames.includes('Noam Chomsky')){var _f$auraMilitaryPenalt;const doubled=consumeDouble();f.auraMilitaryPenalty=((_f$auraMilitaryPenalt=f.auraMilitaryPenalty)!==null&&_f$auraMilitaryPenalt!==void 0?_f$auraMilitaryPenalt:0)+(doubled?2:1);}// einmalige Aktivierungsboni\nif(pubNames.includes('Mark Zuckerberg'))f.zuckOnceAp=true;if(pubNames.includes('Ai Weiwei'))f.aiWeiweiOnActivate=true;// Leadership effect: +1 AP immediately\nconst govNames=((_state$board$p$aussen=(_state$board$p2=state.board[p])===null||_state$board$p2===void 0?void 0:_state$board$p2.aussen)!==null&&_state$board$p$aussen!==void 0?_state$board$p$aussen:[]).map(c=>c.name);if(govNames.some(name=>['Justin Trudeau','Volodymyr Zelenskyy','Ursula von der Leyen','Donald Trump','Mohammed bin Salman','Benjamin Netanyahu','Helmut Schmidt'].includes(name))){// Simplified AP system: Leadership gives +1 AP immediately\nstate.actionPoints[p]+=1;}}// Legacy compatibility\nexport function applyStartOfTurnFlags(state,player,log){startOfTurn(state,player);}export function applyStartOfTurnHooks(state,player,log){applyStartOfTurnFlags(state,player,log);}","map":{"version":3,"names":["other","p","startOfTurn","state","_state$board$p$innen","_state$board$p","_state$board$p$aussen","_state$board$p2","actionPoints","f","effectFlags","prevZuck","zuckSpent","zuckOnceAp","aiWeiweiOnActivate","auraScience","auraHealth","auraMilitaryPenalty","initiativesLocked","consumeDouble","doublePublicAura","_effectQueue","push","type","msg","pubNames","board","innen","map","c","name","includes","_f$auraScience","doubled","_f$auraHealth","_f$auraMilitaryPenalt","govNames","aussen","some","applyStartOfTurnFlags","player","log","applyStartOfTurnHooks"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/utils/startOfTurnHooks.ts"],"sourcesContent":["import { GameState, Player } from '../types/game';\n\nfunction other(p: Player): Player { return p === 1 ? 2 : 1; }\n\nexport function startOfTurn(state: GameState, p: Player) {\n  // AP reset\n  state.actionPoints[p] = 2;\n\n  // Flags reset\n  const f = state.effectFlags[p];\n  // Flags reset\n  const prevZuck = f.zuckSpent;\n  f.zuckOnceAp = false;\n  f.zuckSpent = false;\n  f.aiWeiweiOnActivate = false;\n  f.auraScience = 0;\n  f.auraHealth = 0;\n  f.auraMilitaryPenalty = 0;\n  // Oppositionsblockade ends at start of player's turn\n  f.initiativesLocked = false;\n  // Simplified AP system: No initiative-specific bonuses\n\n  // Helper to consume double aura flag once\n  const consumeDouble = (): boolean => {\n    if (f.doublePublicAura) {\n      f.doublePublicAura = false;\n      if (!state._effectQueue) state._effectQueue = [];\n      state._effectQueue.push({ type: 'LOG', msg: 'Double Public Aura consumed.' } as any);\n      return true;\n    }\n    return false;\n  };\n\n  // Determine active public cards (inner lane)\n  const pubNames: string[] = (state.board[p]?.innen ?? []).map(c => c.name);\n\n  // Apply auras with possible doubling (consume order defined)\n  if (pubNames.includes('Jennifer Doudna')) {\n    const doubled = consumeDouble();\n    f.auraScience = (f.auraScience ?? 0) + (doubled ? 2 : 1);\n  }\n  if (pubNames.includes('Anthony Fauci')) {\n    const doubled = consumeDouble();\n    f.auraHealth = (f.auraHealth ?? 0) + (doubled ? 2 : 1);\n  }\n  if (pubNames.includes('Noam Chomsky')) {\n    const doubled = consumeDouble();\n    f.auraMilitaryPenalty = (f.auraMilitaryPenalty ?? 0) + (doubled ? 2 : 1);\n  }\n\n  // einmalige Aktivierungsboni\n  if (pubNames.includes('Mark Zuckerberg')) f.zuckOnceAp = true;\n  if (pubNames.includes('Ai Weiwei')) f.aiWeiweiOnActivate = true;\n\n  // Leadership effect: +1 AP immediately\n  const govNames: string[] = (state.board[p]?.aussen ?? []).map((c: any) => c.name);\n  if (govNames.some(name => ['Justin Trudeau', 'Volodymyr Zelenskyy', 'Ursula von der Leyen', 'Donald Trump', 'Mohammed bin Salman', 'Benjamin Netanyahu', 'Helmut Schmidt'].includes(name))) {\n    // Simplified AP system: Leadership gives +1 AP immediately\n    state.actionPoints[p] += 1;\n  }\n}\n\n// Legacy compatibility\nexport function applyStartOfTurnFlags(state: GameState, player: Player, log: (m: string) => void) {\n  startOfTurn(state, player);\n}\n\nexport function applyStartOfTurnHooks(state: GameState, player: Player, log: (m: string) => void) {\n  applyStartOfTurnFlags(state, player, log);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}