{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\skank\\\\Videos\\\\Cards\\\\Milchcards\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { logger } from './debug/logger';\nimport { GameCanvas } from './components/GameCanvas';\nimport { DeckBuilder } from './components/DeckBuilder';\nimport { GameInfoModal } from './components/GameInfoModal';\nimport { EventLogModal } from './components/EventLogModal';\nimport { HandCardModal } from './components/HandCardModal';\nimport { GameLogModal } from './components/GameLogModal';\nimport UILayoutEditor from './components/UILayoutEditor';\nimport CardEffectTestSuite from './test/CardEffectTestSuite';\nimport { useGameState } from './hooks/useGameState';\nimport { Specials, PRESET_DECKS, Pols } from './data/gameData';\nimport { buildDeckFromEntries } from './utils/gameUtils';\nimport { copyDebugSnapshotToClipboard, downloadDebugSnapshot } from './utils/debugExport';\nimport { GameProvider } from './context/GameContext';\nimport { getCardDetails } from './data/cardDetails';\n// Temporarily disabled for build\n// import { hasAnyZeroApPlay } from './utils/ap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppContent() {\n  _s();\n  // Old image atlas/background removed; cards load their own images per file mapping\n\n  const [deckBuilderOpen, setDeckBuilderOpen] = useState(true);\n  const [gameInfoModalOpen, setGameInfoModalOpen] = useState(true);\n  const [eventLogModalOpen, setEventLogModalOpen] = useState(false);\n  const [handCardModalOpen, setHandCardModalOpen] = useState(false);\n  const [gameLogModalOpen, setGameLogModalOpen] = useState(false);\n  const [hoveredCard, setHoveredCard] = useState(null);\n\n  // 🔧 DEV MODE: Toggle für lokales Testing ohne KI\n  const [devMode, setDevMode] = useState(false);\n\n  // UI Layout Editor Route\n  const [currentRoute, setCurrentRoute] = useState('game');\n  const {\n    gameState,\n    selectedHandIndex,\n    log,\n    startMatchWithDecks,\n    startMatchVsAI,\n    playCard,\n    activateInstantInitiative,\n    runAITurn,\n    selectHandCard,\n    passTurn,\n    nextTurn\n  } = useGameState();\n\n  // No global image preloading required\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.key === 'i' || event.key === 'I') {\n        setGameInfoModalOpen(!gameInfoModalOpen);\n      }\n      if (event.key === 'l' || event.key === 'L') {\n        setEventLogModalOpen(!eventLogModalOpen);\n      }\n      if (event.key === 'g' || event.key === 'G') {\n        setGameLogModalOpen(!gameLogModalOpen);\n      }\n      // 🔧 DEV MODE: Toggle mit 'M' Taste (M für Manual-Mode)\n      if (event.key === 'm' || event.key === 'M') {\n        const newDevMode = !devMode;\n        setDevMode(newDevMode);\n        log(`🔧 DEV MODE ${newDevMode ? 'AKTIVIERT' : 'DEAKTIVIERT'} - KI ist ${newDevMode ? 'AUS' : 'AN'}`);\n      }\n      // 🔧 DEV MODE: Zusätzliche Controls für manuelles Testen\n      if (devMode) {\n        // 'P' für Pass (aktueller Spieler)\n        if (event.key === 'p' || event.key === 'P') {\n          passTurn(gameState.current);\n          log(`⏭️ Player ${gameState.current} passt`);\n        }\n\n        // 'E' für Zug beenden (aktueller Spieler)\n        if (event.key === 'e' || event.key === 'E') {\n          nextTurn();\n          log(`⏭️ Player ${gameState.current} beendet Zug`);\n        }\n\n        // 'A' für Sofort-Initiative aktivieren (aktueller Spieler)\n        if (event.key === 'a' || event.key === 'A') {\n          activateInstantInitiative(gameState.current);\n          log(`🎯 Player ${gameState.current} aktiviert Sofort-Initiative`);\n        }\n      }\n\n      // UI Layout Editor Toggle mit 'U' Taste\n      if (event.key === 'u' || event.key === 'U') {\n        setCurrentRoute(currentRoute === 'game' ? 'ui-editor' : 'game');\n      }\n\n      // Test Suite Toggle mit 'T' Taste\n      if (event.key === 't' || event.key === 'T') {\n        setCurrentRoute(currentRoute === 'game' ? 'test-suite' : 'game');\n      }\n\n      // Debug snapshot: Ctrl+D copies to clipboard, Shift+D downloads file\n      if ((event.key === 'd' || event.key === 'D') && event.ctrlKey) {\n        copyDebugSnapshotToClipboard(gameState).then(() => {\n          logger.info('Debug snapshot copied to clipboard');\n        }).catch(() => {});\n      }\n      if ((event.key === 'd' || event.key === 'D') && event.shiftKey) {\n        downloadDebugSnapshot(gameState);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [gameInfoModalOpen, eventLogModalOpen, gameLogModalOpen, devMode, log, gameState, passTurn, nextTurn, currentRoute, activateInstantInitiative]);\n  const handleCardClick = useCallback(data => {\n    logger.info('🔧 DEBUG: handleCardClick called with:', data);\n    if (!data) return;\n\n    // Handle game control buttons\n\n    if (data.type === 'button_pass_turn') {\n      const currentPlayer = gameState.current;\n      logger.info(`🔧 DEBUG: button_pass_turn clicked - currentPlayer: ${currentPlayer}`);\n      log(`🎯 UI: Passen-Button geklickt - Spieler ${currentPlayer} passt`);\n      log(`📊 FLOW: UI → passTurn(${currentPlayer}) | Button click | Data: { type: \"button_pass_turn\", current: ${currentPlayer} }`);\n      passTurn(currentPlayer);\n      return;\n    }\n    if (data.type === 'button_end_turn') {\n      const currentPlayer = gameState.current;\n      logger.info(`🔧 DEBUG: button_end_turn clicked - currentPlayer: ${currentPlayer}`);\n      log(`🎯 UI: Zug-beenden-Button geklickt - Spieler ${currentPlayer} beendet Zug`);\n      log(`📊 FLOW: UI → nextTurn() | Button click | Data: { type: \"button_end_turn\", current: ${currentPlayer} }`);\n      nextTurn();\n      return;\n    }\n    if (data.type === 'hand_p1') {\n      if (gameState.current !== 1) {\n        log('❌ ERROR: Handkarte geklickt aber nicht Spieler-Zug - Current: ' + gameState.current);\n        return;\n      }\n      const same = selectedHandIndex === data.index;\n      log('🎯 UI: Handkarte geklickt - ' + data.card.name + ' (Index: ' + data.index + ', Selected: ' + selectedHandIndex + ')');\n      log('📊 FLOW: UI → handleCardClick | Card selection | Data: { card: \"' + data.card.name + '\", index: ' + data.index + ', same: ' + same + ' }');\n      if (same) {\n        // Double-click to open modal\n        log('🎯 UI: Handkarte doppelgeklickt - ' + data.card.name);\n        log('📊 FLOW: UI → setHandCardModalOpen(true) | Double click | Data: { card: \"' + data.card.name + '\" }');\n        setHandCardModalOpen(true);\n      } else {\n        var _data$card$uid, _data$card, _data$card2, _gameState$hands;\n        // Fallback: UI index may not match authoritative state. Prefer UID lookup.\n        const uid = (_data$card$uid = (_data$card = data.card) === null || _data$card === void 0 ? void 0 : _data$card.uid) !== null && _data$card$uid !== void 0 ? _data$card$uid : (_data$card2 = data.card) === null || _data$card2 === void 0 ? void 0 : _data$card2.id;\n        const stateHand = ((_gameState$hands = gameState.hands) === null || _gameState$hands === void 0 ? void 0 : _gameState$hands[1]) || [];\n        let idxInState = stateHand.findIndex(c => {\n          var _c$uid;\n          return ((_c$uid = c.uid) !== null && _c$uid !== void 0 ? _c$uid : c.id) === uid;\n        });\n        if (idxInState === -1) {\n          // Not found in authoritative state -> log diagnostic and abort selection\n          console.warn('[DIAG] hand click: card uid not found in state.hands[1]', {\n            uid,\n            data\n          });\n          log('❌ ERROR: Karte nicht in Hand gefunden - UID: ' + uid);\n          window.__politicardDebug = {\n            ...window.__politicardDebug,\n            lastClickMismatch: {\n              ts: Date.now(),\n              uid,\n              data\n            }\n          };\n          return;\n        }\n        log('🎯 UI: Handkarte ausgewählt - ' + data.card.name + ' (Index: ' + idxInState + ')');\n        log('📊 FLOW: UI → selectHandCard(' + idxInState + ') | Card selection | Data: { card: \"' + data.card.name + '\", stateIndex: ' + idxInState + ' }');\n        selectHandCard(idxInState);\n      }\n      return;\n    }\n\n    // 🔧 DEV MODE: Player 2 Hand Clicks\n    if (data.type === 'hand_p2') {\n      if (gameState.current !== 2) {\n        log('❌ ERROR: P2 Handkarte geklickt aber nicht P2-Zug - Current: ' + gameState.current);\n        return;\n      }\n      const same = selectedHandIndex === data.index;\n      log('🎯 UI: P2 Handkarte geklickt - ' + data.card.name + ' (Index: ' + data.index + ', Selected: ' + selectedHandIndex + ')');\n      log('📊 FLOW: UI → handleCardClick | P2 Card selection | Data: { card: \"' + data.card.name + '\", index: ' + data.index + ', same: ' + same + ' }');\n      if (same) {\n        // Double-click to open modal for P2\n        log('🎯 UI: P2 Handkarte doppelgeklickt - ' + data.card.name);\n        log('📊 FLOW: UI → setHandCardModalOpen(true) | P2 Double click | Data: { card: \"' + data.card.name + '\" }');\n        setHandCardModalOpen(true);\n      } else {\n        var _data$card$uid2, _data$card3, _data$card4, _gameState$hands2;\n        // Fallback: UI index may not match authoritative state. Prefer UID lookup for P2.\n        const uid = (_data$card$uid2 = (_data$card3 = data.card) === null || _data$card3 === void 0 ? void 0 : _data$card3.uid) !== null && _data$card$uid2 !== void 0 ? _data$card$uid2 : (_data$card4 = data.card) === null || _data$card4 === void 0 ? void 0 : _data$card4.id;\n        const stateHand = ((_gameState$hands2 = gameState.hands) === null || _gameState$hands2 === void 0 ? void 0 : _gameState$hands2[2]) || [];\n        let idxInState = stateHand.findIndex(c => {\n          var _c$uid2;\n          return ((_c$uid2 = c.uid) !== null && _c$uid2 !== void 0 ? _c$uid2 : c.id) === uid;\n        });\n        if (idxInState === -1) {\n          console.warn('[DIAG] P2 hand click: card uid not found in state.hands[2]', {\n            uid,\n            data\n          });\n          log('❌ ERROR: P2 Karte nicht in Hand gefunden - UID: ' + uid);\n          window.__politicardDebug = {\n            ...window.__politicardDebug,\n            lastClickMismatch: {\n              ts: Date.now(),\n              uid,\n              data,\n              player: 2\n            }\n          };\n          return;\n        }\n        log('🎯 UI: P2 Handkarte ausgewählt - ' + data.card.name + ' (Index: ' + idxInState + ')');\n        log('📊 FLOW: UI → selectHandCard(' + idxInState + ') | P2 Card selection | Data: { card: \"' + data.card.name + '\", stateIndex: ' + idxInState + ' }');\n        selectHandCard(idxInState);\n      }\n      return;\n    }\n    if (data.type === 'row_slot') {\n      var _gameState$hands3;\n      const currentPlayer = gameState.current;\n      if (selectedHandIndex === null) {\n        console.log('❌ ERROR: Slot geklickt aber keine Karte ausgewählt');\n        return;\n      }\n      const playerHand = (_gameState$hands3 = gameState.hands) === null || _gameState$hands3 === void 0 ? void 0 : _gameState$hands3[currentPlayer];\n      if (!playerHand || selectedHandIndex < 0 || selectedHandIndex >= playerHand.length) {\n        console.log('❌ ERROR: Ungültige Hand oder Index - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer + ', Hand-Größe: ' + ((playerHand === null || playerHand === void 0 ? void 0 : playerHand.length) || 0));\n        return;\n      }\n      const card = playerHand[selectedHandIndex];\n      if (!card) {\n        console.log('❌ ERROR: Ausgewählte Karte nicht gefunden - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer);\n        return;\n      }\n      const lane = data.lane;\n      console.log('🎯 UI: Karte auf Slot gespielt - ' + card.name + ' nach ' + (lane === 'aussen' ? 'Regierungsreihe' : 'Öffentlichkeitsreihe') + ' (Slot ' + (data.index + 1) + ') für Player ' + currentPlayer);\n      console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ', \"' + lane + '\") | Card placement | Data: { card: \"' + card.name + '\", lane: \"' + lane + '\", slot: ' + (data.index + 1) + ', player: ' + currentPlayer + ' }');\n      playCard(currentPlayer, selectedHandIndex, lane);\n      selectHandCard(null);\n      return;\n    }\n    if (data.type === 'empty_slot') {\n      var _gameState$hands4;\n      const currentPlayer = gameState.current;\n      const clickedSlotType = data.slot;\n\n      // Spezielle Behandlung für leere Instant-Slots\n      if (clickedSlotType === 'instant') {\n        if (selectedHandIndex === null) {\n          console.log('ℹ️ INFO: Leerer Sofort-Initiative-Slot geklickt - wähle eine Sofort-Initiative aus der Hand aus');\n          return;\n        }\n        // Fall durch zur normalen Slot-Logik\n      } else if (selectedHandIndex === null) {\n        console.log('❌ ERROR: Leerer Slot geklickt aber keine Karte ausgewählt');\n        return;\n      }\n      const playerHand = (_gameState$hands4 = gameState.hands) === null || _gameState$hands4 === void 0 ? void 0 : _gameState$hands4[currentPlayer];\n      if (!playerHand || selectedHandIndex < 0 || selectedHandIndex >= playerHand.length) {\n        console.log('❌ ERROR: Ungültige Hand oder Index - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer + ', Hand-Größe: ' + ((playerHand === null || playerHand === void 0 ? void 0 : playerHand.length) || 0));\n        return;\n      }\n      const card = playerHand[selectedHandIndex];\n      if (!card || card.kind !== 'spec') {\n        console.log('❌ ERROR: Ausgewählte Karte ist keine Spezialkarte - Kind: ' + ((card === null || card === void 0 ? void 0 : card.kind) || 'null') + ', Player: ' + currentPlayer);\n        return;\n      }\n      const specCard = card; // Cast to access type property\n      const slotType = data.slot;\n      console.log('🎯 UI: Leerer Slot geklickt - ' + card.name + ' auf ' + slotType);\n      console.log('📊 FLOW: UI → handleCardClick | Empty slot click | Data: { card: \"' + card.name + '\", type: \"' + specCard.type + '\", slot: \"' + slotType + '\" }');\n\n      // Check if card type matches slot\n      if (slotType === 'permanent_government' && specCard.type === 'Dauerhaft-Initiative') {\n        // Place permanent initiative in government slot\n        console.log('🎯 UI: Dauerhafte Initiative in Regierungs-Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Permanent initiative | Data: { card: \"' + card.name + '\", slot: \"government\", player: ' + currentPlayer + ' }');\n        playCard(currentPlayer, selectedHandIndex);\n        selectHandCard(null);\n        return;\n      }\n      if (slotType === 'permanent_public' && specCard.type === 'Dauerhaft-Initiative') {\n        // Place permanent initiative in public slot\n        console.log('🎯 UI: Dauerhafte Initiative in Öffentlichkeits-Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Permanent initiative | Data: { card: \"' + card.name + '\", slot: \"public\", player: ' + currentPlayer + ' }');\n        playCard(currentPlayer, selectedHandIndex);\n        selectHandCard(null);\n        return;\n      }\n      if (slotType === 'instant' && specCard.type === 'Sofort-Initiative') {\n        // Place instant initiative in sofort slot\n        console.log('🎯 UI: Sofort-Initiative in Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Instant initiative | Data: { card: \"' + card.name + '\", type: \"Sofort-Initiative\", player: ' + currentPlayer + ' }');\n        playCard(currentPlayer, selectedHandIndex);\n        selectHandCard(null);\n        return;\n      }\n      console.log('❌ ERROR: Karten-Typ passt nicht zum Slot - Card: ' + specCard.type + ', Slot: ' + slotType);\n      return;\n    }\n\n    // 🔧 NEU: Sofort-Initiative aus dem Slot aktivieren\n    if (data.type === 'activate_instant') {\n      const player = data.player;\n      const card = data.card;\n      console.log('🎯 UI: Sofort-Initiative aus Slot aktiviert - ' + card.name + ' für Player ' + player);\n      activateInstantInitiative(player);\n      return;\n    }\n  }, [gameState, selectedHandIndex, playCard, selectHandCard, passTurn, nextTurn, log]);\n  const handleCardHover = useCallback(data => {\n    setHoveredCard(data);\n  }, []);\n  const handleApplyDeck = useCallback(deck => {\n    const cardDeck = buildDeckFromEntries(deck);\n    console.log('Applied deck:', cardDeck);\n  }, []);\n  const handleStartMatch = useCallback((p1Deck, p2Deck) => {\n    if (p1Deck && p1Deck.length > 0 && p2Deck && p2Deck.length > 0) {\n      startMatchWithDecks(p1Deck, p2Deck);\n    } else if (p1Deck && p1Deck.length > 0) {\n      if (devMode) {\n        // Dev Mode: Beide Spieler manuell steuern - nutze preset für P2 aber ohne KI\n        const defaultP2Deck = PRESET_DECKS.AUTORITAERER_REALIST;\n        startMatchWithDecks(p1Deck, defaultP2Deck);\n        log('🔧 DEV MODE: Spiel gestartet ohne KI - beide Spieler manuell steuerbar');\n      } else {\n        // Versus AI with a default preset if only P1 provided\n        startMatchVsAI(p1Deck, 'AUTORITAERER_REALIST');\n        log('🤖 KI-Spiel gestartet');\n      }\n    } else {\n      // Use default preset decks if no decks are provided\n      const defaultP1Deck = PRESET_DECKS.NEOLIBERAL_TECHNOKRAT;\n      const defaultP2Deck = PRESET_DECKS.AUTORITAERER_REALIST;\n      startMatchWithDecks(defaultP1Deck, defaultP2Deck);\n      log('🎮 Spiel gestartet mit Standard-Decks');\n    }\n  }, [startMatchWithDecks, startMatchVsAI, devMode, log]);\n  const handlePlayCardFromModal = useCallback((index, targetSlot) => {\n    var _gameState$hands5;\n    console.log('🔧 DEBUG: handlePlayCardFromModal called with:', index, targetSlot);\n    const currentPlayer = gameState.current;\n    const playerHand = (_gameState$hands5 = gameState.hands) === null || _gameState$hands5 === void 0 ? void 0 : _gameState$hands5[currentPlayer];\n    if (!playerHand || index < 0 || index >= playerHand.length) {\n      console.log('❌ DEBUG: Invalid hand or index:', index, 'for player:', currentPlayer, 'hand size:', (playerHand === null || playerHand === void 0 ? void 0 : playerHand.length) || 0);\n      return;\n    }\n    const card = playerHand[index];\n    if (!card) {\n      console.log('❌ DEBUG: No card found at index:', index, 'for player:', currentPlayer);\n      return;\n    }\n\n    // effectKey sicherstellen (Legacy-Namen → Keys)\n    try {\n      const {\n        resolveEffectKey\n      } = require('./effects/resolveEffectKey');\n      const k = resolveEffectKey(card.name, card.effectKey);\n      if (k) card.effectKey = k;\n    } catch {}\n    console.log('🔧 DEBUG: Card found:', card.name, 'for player:', currentPlayer);\n    if (targetSlot === 'aussen' || targetSlot === 'innen') {\n      console.log('🔧 DEBUG: Calling playCard with lane:', targetSlot);\n      playCard(currentPlayer, index, targetSlot);\n    } else {\n      // Handle special slots\n      console.log('🔧 DEBUG: Calling playCard without lane');\n      log(`🃏 Player ${currentPlayer}: ${card.name} gespielt in ${targetSlot}`);\n      // TODO: Implement special slot placement\n      playCard(currentPlayer, index);\n    }\n    selectHandCard(null);\n    // nextTurn() wird jetzt automatisch in playCard aufgerufen wenn nötig\n  }, [gameState, playCard, selectHandCard, log]);\n\n  // Auto-run AI turn whenever it's AI's turn (nur wenn nicht im Dev Mode)\n  useEffect(() => {\n    var _gameState$aiEnabled;\n    if (gameState.current === 2 && !devMode && (_gameState$aiEnabled = gameState.aiEnabled) !== null && _gameState$aiEnabled !== void 0 && _gameState$aiEnabled[2]) {\n      const t = setTimeout(() => runAITurn(), 120);\n      return () => clearTimeout(t);\n    }\n  }, [gameState, runAITurn, devMode]);\n  const renderTooltip = () => {\n    if (!hoveredCard || !hoveredCard.card) return null;\n    const card = hoveredCard.card;\n    if (card.kind === 'pol') {\n      const polCard = card;\n      const base = Pols.find(p => p.name === polCard.name || p.key === polCard.key);\n      const baseInf = base ? base.influence : polCard.influence;\n      const delta = polCard.influence - baseInf;\n      const deltaStr = delta === 0 ? '' : ` (${baseInf} ${delta > 0 ? '+' : ''}${delta})`;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          pointerEvents: 'none',\n          background: '#0b1220',\n          border: '1px solid #2a3a4e',\n          color: '#dce8f5',\n          padding: '8px 10px',\n          borderRadius: '8px',\n          maxWidth: '340px',\n          fontSize: '12px',\n          zIndex: 30,\n          boxShadow: '0 10px 25px rgba(0,0,0,.35)',\n          left: hoveredCard.x + 12,\n          top: hoveredCard.y + 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '4px',\n            fontWeight: 600\n          },\n          children: polCard.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Einfluss: \", polCard.influence, deltaStr]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this);\n    } else {\n      const base = Specials.find(s => s.id === card.baseId);\n      if (!base) return null;\n      const details = getCardDetails(base.name || card.name);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          pointerEvents: 'none',\n          background: '#0b1220',\n          border: '1px solid #2a3a4e',\n          color: '#dce8f5',\n          padding: '8px 10px',\n          borderRadius: '8px',\n          maxWidth: '340px',\n          fontSize: '12px',\n          zIndex: 30,\n          boxShadow: '0 10px 25px rgba(0,0,0,.35)',\n          left: hoveredCard.x + 12,\n          top: hoveredCard.y + 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 600,\n            marginBottom: 4\n          },\n          children: base.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#9ca3af',\n            fontSize: '11px'\n          },\n          children: (details === null || details === void 0 ? void 0 : details.gameEffect) || 'Kein Effekttext vorhanden'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: 0,\n      padding: 0,\n      background: '#0b0f14',\n      color: '#e8f0f8',\n      fontFamily: 'ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, \"Apple Color Emoji\", \"Segoe UI Emoji\"',\n      height: '100vh',\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: '10px',\n        left: '10px',\n        zIndex: 1001,\n        display: 'flex',\n        gap: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentRoute('game'),\n        style: {\n          background: currentRoute === 'game' ? '#3b82f6' : '#374151',\n          color: 'white',\n          border: 'none',\n          padding: '8px 12px',\n          borderRadius: '6px',\n          fontSize: '12px',\n          fontWeight: 600,\n          cursor: 'pointer'\n        },\n        children: \"\\uD83C\\uDFAE Game\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentRoute('ui-editor'),\n        style: {\n          background: currentRoute === 'ui-editor' ? '#3b82f6' : '#374151',\n          color: 'white',\n          border: 'none',\n          padding: '8px 12px',\n          borderRadius: '6px',\n          fontSize: '12px',\n          fontWeight: 600,\n          cursor: 'pointer'\n        },\n        children: \"\\uD83C\\uDFA8 UI Editor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentRoute('test-suite'),\n        style: {\n          background: currentRoute === 'test-suite' ? '#3b82f6' : '#374151',\n          color: 'white',\n          border: 'none',\n          padding: '8px 12px',\n          borderRadius: '6px',\n          fontSize: '12px',\n          fontWeight: 600,\n          cursor: 'pointer'\n        },\n        children: \"\\uD83E\\uDDEA Test Suite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 7\n    }, this), currentRoute === 'ui-editor' ? /*#__PURE__*/_jsxDEV(UILayoutEditor, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 9\n    }, this) : currentRoute === 'test-suite' ? /*#__PURE__*/_jsxDEV(CardEffectTestSuite, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        inset: 0,\n        display: 'grid',\n        gridTemplateRows: '1fr',\n        gap: 0,\n        padding: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          overflow: 'hidden',\n          background: '#0e141b'\n        },\n        children: [/*#__PURE__*/_jsxDEV(GameCanvas, {\n          gameState: gameState,\n          selectedHandIndex: selectedHandIndex,\n          onCardClick: handleCardClick,\n          onCardHover: handleCardHover,\n          devMode: devMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DeckBuilder, {\n          isOpen: deckBuilderOpen,\n          onClose: () => setDeckBuilderOpen(false),\n          onApplyDeck: handleApplyDeck,\n          onStartMatch: handleStartMatch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 13\n        }, this), !deckBuilderOpen && /*#__PURE__*/_jsxDEV(GameInfoModal, {\n          gameState: gameState,\n          isVisible: gameInfoModalOpen,\n          onToggle: () => setGameInfoModalOpen(!gameInfoModalOpen),\n          onPassTurn: passTurn,\n          onToggleLog: () => setGameLogModalOpen(!gameLogModalOpen),\n          onCardClick: handleCardClick,\n          devMode: devMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 15\n        }, this), !deckBuilderOpen && /*#__PURE__*/_jsxDEV(EventLogModal, {\n          gameState: gameState,\n          isVisible: eventLogModalOpen,\n          onToggle: () => setEventLogModalOpen(!eventLogModalOpen)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 15\n        }, this), !deckBuilderOpen && /*#__PURE__*/_jsxDEV(HandCardModal, {\n          gameState: gameState,\n          selectedHandIndex: selectedHandIndex,\n          isVisible: handCardModalOpen,\n          onClose: () => setHandCardModalOpen(false),\n          onPlayCard: handlePlayCardFromModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 15\n        }, this), !deckBuilderOpen && /*#__PURE__*/_jsxDEV(GameLogModal, {\n          gameState: gameState,\n          isVisible: gameLogModalOpen,\n          onToggle: () => setGameLogModalOpen(!gameLogModalOpen)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 15\n        }, this), renderTooltip(), devMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'fixed',\n            top: '10px',\n            right: '10px',\n            background: '#ff6b35',\n            color: 'white',\n            padding: '8px 12px',\n            borderRadius: '6px',\n            fontSize: '12px',\n            fontWeight: 600,\n            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\n            zIndex: 1000\n          },\n          children: \"\\uD83D\\uDD27 DEV MODE - KI AUS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 15\n        }, this), devMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'fixed',\n            top: '60px',\n            right: '10px',\n            background: gameState.current === 1 ? '#4ade80' : '#ef4444',\n            color: 'white',\n            padding: '12px 16px',\n            borderRadius: '8px',\n            fontSize: '16px',\n            fontWeight: 700,\n            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\n            zIndex: 1000,\n            border: '2px solid rgba(255, 255, 255, 0.3)'\n          },\n          children: [\"\\uD83C\\uDFAE Player \", gameState.current, \" am Zug\", /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '11px',\n              fontWeight: 400,\n              opacity: 0.9,\n              marginTop: '4px'\n            },\n            children: [\"AP: \", gameState.actionPoints[gameState.current]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 468,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContent, \"YCOTerVxRCGadOCEg98Gz35HZ+A=\", false, function () {\n  return [useGameState];\n});\n_c = AppContent;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(GameProvider, {\n    children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 661,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","logger","GameCanvas","DeckBuilder","GameInfoModal","EventLogModal","HandCardModal","GameLogModal","UILayoutEditor","CardEffectTestSuite","useGameState","Specials","PRESET_DECKS","Pols","buildDeckFromEntries","copyDebugSnapshotToClipboard","downloadDebugSnapshot","GameProvider","getCardDetails","jsxDEV","_jsxDEV","AppContent","_s","deckBuilderOpen","setDeckBuilderOpen","gameInfoModalOpen","setGameInfoModalOpen","eventLogModalOpen","setEventLogModalOpen","handCardModalOpen","setHandCardModalOpen","gameLogModalOpen","setGameLogModalOpen","hoveredCard","setHoveredCard","devMode","setDevMode","currentRoute","setCurrentRoute","gameState","selectedHandIndex","log","startMatchWithDecks","startMatchVsAI","playCard","activateInstantInitiative","runAITurn","selectHandCard","passTurn","nextTurn","handleKeyDown","event","key","newDevMode","current","ctrlKey","then","info","catch","shiftKey","window","addEventListener","removeEventListener","handleCardClick","data","type","currentPlayer","same","index","card","name","_data$card$uid","_data$card","_data$card2","_gameState$hands","uid","id","stateHand","hands","idxInState","findIndex","c","_c$uid","console","warn","__politicardDebug","lastClickMismatch","ts","Date","now","_data$card$uid2","_data$card3","_data$card4","_gameState$hands2","_c$uid2","player","_gameState$hands3","playerHand","length","lane","_gameState$hands4","clickedSlotType","slot","kind","specCard","slotType","handleCardHover","handleApplyDeck","deck","cardDeck","handleStartMatch","p1Deck","p2Deck","defaultP2Deck","AUTORITAERER_REALIST","defaultP1Deck","NEOLIBERAL_TECHNOKRAT","handlePlayCardFromModal","targetSlot","_gameState$hands5","resolveEffectKey","require","k","effectKey","_gameState$aiEnabled","aiEnabled","t","setTimeout","clearTimeout","renderTooltip","polCard","base","find","p","baseInf","influence","delta","deltaStr","style","position","pointerEvents","background","border","color","padding","borderRadius","maxWidth","fontSize","zIndex","boxShadow","left","x","top","y","children","marginTop","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","s","baseId","details","marginBottom","gameEffect","margin","fontFamily","height","overflow","display","gap","onClick","cursor","inset","gridTemplateRows","onCardClick","onCardHover","isOpen","onClose","onApplyDeck","onStartMatch","isVisible","onToggle","onPassTurn","onToggleLog","onPlayCard","right","opacity","actionPoints","_c","App","_c2","$RefreshReg$"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { logger } from './debug/logger';\r\nimport { GameCanvas } from './components/GameCanvas';\r\nimport { DeckBuilder } from './components/DeckBuilder';\r\nimport { GameInfoModal } from './components/GameInfoModal';\r\nimport { EventLogModal } from './components/EventLogModal';\r\nimport { HandCardModal } from './components/HandCardModal';\r\nimport { GameLogModal } from './components/GameLogModal';\r\nimport UILayoutEditor from './components/UILayoutEditor';\r\nimport CardEffectTestSuite from './test/CardEffectTestSuite';\r\nimport { useGameState } from './hooks/useGameState';\r\nimport { BuilderEntry, PoliticianCard, Player } from './types/game';\r\nimport { Specials, PRESET_DECKS, Pols } from './data/gameData';\r\nimport { buildDeckFromEntries } from './utils/gameUtils';\r\nimport { copyDebugSnapshotToClipboard, downloadDebugSnapshot } from './utils/debugExport';\r\nimport { GameProvider } from './context/GameContext';\r\nimport { getCardDetails } from './data/cardDetails';\r\n// Temporarily disabled for build\r\n// import { hasAnyZeroApPlay } from './utils/ap';\r\n\r\nfunction AppContent() {\r\n  // Old image atlas/background removed; cards load their own images per file mapping\r\n\r\n  const [deckBuilderOpen, setDeckBuilderOpen] = useState(true);\r\n  const [gameInfoModalOpen, setGameInfoModalOpen] = useState(true);\r\n  const [eventLogModalOpen, setEventLogModalOpen] = useState(false);\r\n  const [handCardModalOpen, setHandCardModalOpen] = useState(false);\r\n  const [gameLogModalOpen, setGameLogModalOpen] = useState(false);\r\n  const [hoveredCard, setHoveredCard] = useState<any>(null);\r\n\r\n  // 🔧 DEV MODE: Toggle für lokales Testing ohne KI\r\n  const [devMode, setDevMode] = useState(false);\r\n\r\n  // UI Layout Editor Route\r\n  const [currentRoute, setCurrentRoute] = useState<'game' | 'ui-editor' | 'test-suite'>('game');\r\n\r\n  const {\r\n    gameState,\r\n    selectedHandIndex,\r\n    log,\r\n    startMatchWithDecks,\r\n    startMatchVsAI,\r\n    playCard,\r\n    activateInstantInitiative,\r\n    runAITurn,\r\n    selectHandCard,\r\n    passTurn,\r\n    nextTurn,\r\n  } = useGameState();\r\n\r\n  // No global image preloading required\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === 'i' || event.key === 'I') {\r\n        setGameInfoModalOpen(!gameInfoModalOpen);\r\n      }\r\n      if (event.key === 'l' || event.key === 'L') {\r\n        setEventLogModalOpen(!eventLogModalOpen);\r\n      }\r\n      if (event.key === 'g' || event.key === 'G') {\r\n        setGameLogModalOpen(!gameLogModalOpen);\r\n      }\r\n      // 🔧 DEV MODE: Toggle mit 'M' Taste (M für Manual-Mode)\r\n      if (event.key === 'm' || event.key === 'M') {\r\n        const newDevMode = !devMode;\r\n        setDevMode(newDevMode);\r\n        log(`🔧 DEV MODE ${newDevMode ? 'AKTIVIERT' : 'DEAKTIVIERT'} - KI ist ${newDevMode ? 'AUS' : 'AN'}`);\r\n      }\r\n      // 🔧 DEV MODE: Zusätzliche Controls für manuelles Testen\r\n      if (devMode) {\r\n        // 'P' für Pass (aktueller Spieler)\r\n        if (event.key === 'p' || event.key === 'P') {\r\n          passTurn(gameState.current);\r\n          log(`⏭️ Player ${gameState.current} passt`);\r\n        }\r\n\r\n        // 'E' für Zug beenden (aktueller Spieler)\r\n        if (event.key === 'e' || event.key === 'E') {\r\n          nextTurn();\r\n          log(`⏭️ Player ${gameState.current} beendet Zug`);\r\n        }\r\n\r\n        // 'A' für Sofort-Initiative aktivieren (aktueller Spieler)\r\n        if (event.key === 'a' || event.key === 'A') {\r\n          activateInstantInitiative(gameState.current);\r\n          log(`🎯 Player ${gameState.current} aktiviert Sofort-Initiative`);\r\n        }\r\n      }\r\n\r\n      // UI Layout Editor Toggle mit 'U' Taste\r\n      if (event.key === 'u' || event.key === 'U') {\r\n        setCurrentRoute(currentRoute === 'game' ? 'ui-editor' : 'game');\r\n      }\r\n\r\n      // Test Suite Toggle mit 'T' Taste\r\n      if (event.key === 't' || event.key === 'T') {\r\n        setCurrentRoute(currentRoute === 'game' ? 'test-suite' : 'game');\r\n      }\r\n\r\n      // Debug snapshot: Ctrl+D copies to clipboard, Shift+D downloads file\r\n      if ((event.key === 'd' || event.key === 'D') && event.ctrlKey) {\r\n        copyDebugSnapshotToClipboard(gameState).then(() => {\r\n          logger.info('Debug snapshot copied to clipboard');\r\n        }).catch(() => {});\r\n      }\r\n      if ((event.key === 'd' || event.key === 'D') && event.shiftKey) {\r\n        downloadDebugSnapshot(gameState);\r\n      }\r\n\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [gameInfoModalOpen, eventLogModalOpen, gameLogModalOpen, devMode, log, gameState, passTurn, nextTurn, currentRoute, activateInstantInitiative]);\r\n\r\n  const handleCardClick = useCallback((data: any) => {\r\n    logger.info('🔧 DEBUG: handleCardClick called with:', data);\r\n    if (!data) return;\r\n\r\n    // Handle game control buttons\r\n\r\n\r\n    if (data.type === 'button_pass_turn') {\r\n      const currentPlayer = gameState.current;\r\n      logger.info(`🔧 DEBUG: button_pass_turn clicked - currentPlayer: ${currentPlayer}`);\r\n      log(`🎯 UI: Passen-Button geklickt - Spieler ${currentPlayer} passt`);\r\n      log(`📊 FLOW: UI → passTurn(${currentPlayer}) | Button click | Data: { type: \"button_pass_turn\", current: ${currentPlayer} }`);\r\n      passTurn(currentPlayer);\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'button_end_turn') {\r\n      const currentPlayer = gameState.current;\r\n      logger.info(`🔧 DEBUG: button_end_turn clicked - currentPlayer: ${currentPlayer}`);\r\n      log(`🎯 UI: Zug-beenden-Button geklickt - Spieler ${currentPlayer} beendet Zug`);\r\n      log(`📊 FLOW: UI → nextTurn() | Button click | Data: { type: \"button_end_turn\", current: ${currentPlayer} }`);\r\n      nextTurn();\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    if (data.type === 'hand_p1') {\r\n      if (gameState.current !== 1) {\r\n        log('❌ ERROR: Handkarte geklickt aber nicht Spieler-Zug - Current: ' + gameState.current);\r\n        return;\r\n      }\r\n\r\n      const same = selectedHandIndex === data.index;\r\n      log('🎯 UI: Handkarte geklickt - ' + data.card.name + ' (Index: ' + data.index + ', Selected: ' + selectedHandIndex + ')');\r\n      log('📊 FLOW: UI → handleCardClick | Card selection | Data: { card: \"' + data.card.name + '\", index: ' + data.index + ', same: ' + same + ' }');\r\n\r\n      if (same) {\r\n        // Double-click to open modal\r\n        log('🎯 UI: Handkarte doppelgeklickt - ' + data.card.name);\r\n        log('📊 FLOW: UI → setHandCardModalOpen(true) | Double click | Data: { card: \"' + data.card.name + '\" }');\r\n        setHandCardModalOpen(true);\r\n      } else {\r\n        // Fallback: UI index may not match authoritative state. Prefer UID lookup.\r\n        const uid = data.card?.uid ?? data.card?.id;\r\n        const stateHand = gameState.hands?.[1] || [];\r\n        let idxInState = stateHand.findIndex((c: any) => (c.uid ?? c.id) === uid);\r\n\r\n        if (idxInState === -1) {\r\n          // Not found in authoritative state -> log diagnostic and abort selection\r\n          console.warn('[DIAG] hand click: card uid not found in state.hands[1]', { uid, data });\r\n          log('❌ ERROR: Karte nicht in Hand gefunden - UID: ' + uid);\r\n          (window as any).__politicardDebug = {\r\n            ...(window as any).__politicardDebug,\r\n            lastClickMismatch: { ts: Date.now(), uid, data }\r\n          };\r\n          return;\r\n        }\r\n\r\n        log('🎯 UI: Handkarte ausgewählt - ' + data.card.name + ' (Index: ' + idxInState + ')');\r\n        log('📊 FLOW: UI → selectHandCard(' + idxInState + ') | Card selection | Data: { card: \"' + data.card.name + '\", stateIndex: ' + idxInState + ' }');\r\n        selectHandCard(idxInState);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // 🔧 DEV MODE: Player 2 Hand Clicks\r\n    if (data.type === 'hand_p2') {\r\n      if (gameState.current !== 2) {\r\n        log('❌ ERROR: P2 Handkarte geklickt aber nicht P2-Zug - Current: ' + gameState.current);\r\n        return;\r\n      }\r\n\r\n      const same = selectedHandIndex === data.index;\r\n      log('🎯 UI: P2 Handkarte geklickt - ' + data.card.name + ' (Index: ' + data.index + ', Selected: ' + selectedHandIndex + ')');\r\n      log('📊 FLOW: UI → handleCardClick | P2 Card selection | Data: { card: \"' + data.card.name + '\", index: ' + data.index + ', same: ' + same + ' }');\r\n\r\n      if (same) {\r\n        // Double-click to open modal for P2\r\n        log('🎯 UI: P2 Handkarte doppelgeklickt - ' + data.card.name);\r\n        log('📊 FLOW: UI → setHandCardModalOpen(true) | P2 Double click | Data: { card: \"' + data.card.name + '\" }');\r\n        setHandCardModalOpen(true);\r\n      } else {\r\n        // Fallback: UI index may not match authoritative state. Prefer UID lookup for P2.\r\n        const uid = data.card?.uid ?? data.card?.id;\r\n        const stateHand = gameState.hands?.[2] || [];\r\n        let idxInState = stateHand.findIndex((c: any) => (c.uid ?? c.id) === uid);\r\n\r\n        if (idxInState === -1) {\r\n          console.warn('[DIAG] P2 hand click: card uid not found in state.hands[2]', { uid, data });\r\n          log('❌ ERROR: P2 Karte nicht in Hand gefunden - UID: ' + uid);\r\n          (window as any).__politicardDebug = {\r\n            ...(window as any).__politicardDebug,\r\n            lastClickMismatch: { ts: Date.now(), uid, data, player: 2 }\r\n          };\r\n          return;\r\n        }\r\n\r\n        log('🎯 UI: P2 Handkarte ausgewählt - ' + data.card.name + ' (Index: ' + idxInState + ')');\r\n        log('📊 FLOW: UI → selectHandCard(' + idxInState + ') | P2 Card selection | Data: { card: \"' + data.card.name + '\", stateIndex: ' + idxInState + ' }');\r\n        selectHandCard(idxInState);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'row_slot') {\r\n      const currentPlayer = gameState.current;\r\n      if (selectedHandIndex === null) {\r\n        console.log('❌ ERROR: Slot geklickt aber keine Karte ausgewählt');\r\n        return;\r\n      }\r\n\r\n      const playerHand = gameState.hands?.[currentPlayer];\r\n      if (!playerHand || selectedHandIndex < 0 || selectedHandIndex >= playerHand.length) {\r\n        console.log('❌ ERROR: Ungültige Hand oder Index - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer + ', Hand-Größe: ' + (playerHand?.length || 0));\r\n        return;\r\n      }\r\n\r\n      const card = playerHand[selectedHandIndex];\r\n      if (!card) {\r\n        console.log('❌ ERROR: Ausgewählte Karte nicht gefunden - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer);\r\n        return;\r\n      }\r\n\r\n      const lane = data.lane;\r\n      console.log('🎯 UI: Karte auf Slot gespielt - ' + card.name + ' nach ' + (lane === 'aussen' ? 'Regierungsreihe' : 'Öffentlichkeitsreihe') + ' (Slot ' + (data.index + 1) + ') für Player ' + currentPlayer);\r\n      console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ', \"' + lane + '\") | Card placement | Data: { card: \"' + card.name + '\", lane: \"' + lane + '\", slot: ' + (data.index + 1) + ', player: ' + currentPlayer + ' }');\r\n      playCard(currentPlayer, selectedHandIndex, lane);\r\n      selectHandCard(null);\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'empty_slot') {\r\n      const currentPlayer = gameState.current;\r\n      const clickedSlotType = data.slot;\r\n\r\n      // Spezielle Behandlung für leere Instant-Slots\r\n      if (clickedSlotType === 'instant') {\r\n        if (selectedHandIndex === null) {\r\n          console.log('ℹ️ INFO: Leerer Sofort-Initiative-Slot geklickt - wähle eine Sofort-Initiative aus der Hand aus');\r\n          return;\r\n        }\r\n        // Fall durch zur normalen Slot-Logik\r\n      } else if (selectedHandIndex === null) {\r\n        console.log('❌ ERROR: Leerer Slot geklickt aber keine Karte ausgewählt');\r\n        return;\r\n      }\r\n\r\n      const playerHand = gameState.hands?.[currentPlayer];\r\n      if (!playerHand || selectedHandIndex < 0 || selectedHandIndex >= playerHand.length) {\r\n        console.log('❌ ERROR: Ungültige Hand oder Index - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer + ', Hand-Größe: ' + (playerHand?.length || 0));\r\n        return;\r\n      }\r\n\r\n      const card = playerHand[selectedHandIndex];\r\n      if (!card || card.kind !== 'spec') {\r\n        console.log('❌ ERROR: Ausgewählte Karte ist keine Spezialkarte - Kind: ' + (card?.kind || 'null') + ', Player: ' + currentPlayer);\r\n        return;\r\n      }\r\n\r\n      const specCard = card as any; // Cast to access type property\r\n      const slotType = data.slot;\r\n\r\n      console.log('🎯 UI: Leerer Slot geklickt - ' + card.name + ' auf ' + slotType);\r\n      console.log('📊 FLOW: UI → handleCardClick | Empty slot click | Data: { card: \"' + card.name + '\", type: \"' + specCard.type + '\", slot: \"' + slotType + '\" }');\r\n\r\n      // Check if card type matches slot\r\n      if (slotType === 'permanent_government' && specCard.type === 'Dauerhaft-Initiative') {\r\n        // Place permanent initiative in government slot\r\n        console.log('🎯 UI: Dauerhafte Initiative in Regierungs-Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\r\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Permanent initiative | Data: { card: \"' + card.name + '\", slot: \"government\", player: ' + currentPlayer + ' }');\r\n        playCard(currentPlayer, selectedHandIndex);\r\n        selectHandCard(null);\r\n        return;\r\n      }\r\n\r\n      if (slotType === 'permanent_public' && specCard.type === 'Dauerhaft-Initiative') {\r\n        // Place permanent initiative in public slot\r\n        console.log('🎯 UI: Dauerhafte Initiative in Öffentlichkeits-Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\r\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Permanent initiative | Data: { card: \"' + card.name + '\", slot: \"public\", player: ' + currentPlayer + ' }');\r\n        playCard(currentPlayer, selectedHandIndex);\r\n        selectHandCard(null);\r\n        return;\r\n      }\r\n\r\n      if (slotType === 'instant' && specCard.type === 'Sofort-Initiative') {\r\n        // Place instant initiative in sofort slot\r\n        console.log('🎯 UI: Sofort-Initiative in Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\r\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Instant initiative | Data: { card: \"' + card.name + '\", type: \"Sofort-Initiative\", player: ' + currentPlayer + ' }');\r\n        playCard(currentPlayer, selectedHandIndex);\r\n        selectHandCard(null);\r\n        return;\r\n      }\r\n\r\n      console.log('❌ ERROR: Karten-Typ passt nicht zum Slot - Card: ' + specCard.type + ', Slot: ' + slotType);\r\n      return;\r\n    }\r\n\r\n    // 🔧 NEU: Sofort-Initiative aus dem Slot aktivieren\r\n    if (data.type === 'activate_instant') {\r\n      const player = data.player as Player;\r\n      const card = data.card;\r\n      console.log('🎯 UI: Sofort-Initiative aus Slot aktiviert - ' + card.name + ' für Player ' + player);\r\n      activateInstantInitiative(player);\r\n      return;\r\n    }\r\n  }, [gameState, selectedHandIndex, playCard, selectHandCard, passTurn, nextTurn, log]);\r\n\r\n  const handleCardHover = useCallback((data: any) => {\r\n    setHoveredCard(data);\r\n  }, []);\r\n\r\n  const handleApplyDeck = useCallback((deck: BuilderEntry[]) => {\r\n    const cardDeck = buildDeckFromEntries(deck);\r\n    console.log('Applied deck:', cardDeck);\r\n  }, []);\r\n\r\n  const handleStartMatch = useCallback((p1Deck: BuilderEntry[], p2Deck: BuilderEntry[]) => {\r\n    if (p1Deck && p1Deck.length > 0 && p2Deck && p2Deck.length > 0) {\r\n      startMatchWithDecks(p1Deck, p2Deck);\r\n    } else if (p1Deck && p1Deck.length > 0) {\r\n      if (devMode) {\r\n        // Dev Mode: Beide Spieler manuell steuern - nutze preset für P2 aber ohne KI\r\n        const defaultP2Deck = PRESET_DECKS.AUTORITAERER_REALIST as BuilderEntry[];\r\n        startMatchWithDecks(p1Deck, defaultP2Deck);\r\n        log('🔧 DEV MODE: Spiel gestartet ohne KI - beide Spieler manuell steuerbar');\r\n      } else {\r\n        // Versus AI with a default preset if only P1 provided\r\n        startMatchVsAI(p1Deck, 'AUTORITAERER_REALIST');\r\n        log('🤖 KI-Spiel gestartet');\r\n      }\r\n    } else {\r\n      // Use default preset decks if no decks are provided\r\n      const defaultP1Deck = PRESET_DECKS.NEOLIBERAL_TECHNOKRAT as BuilderEntry[];\r\n      const defaultP2Deck = PRESET_DECKS.AUTORITAERER_REALIST as BuilderEntry[];\r\n      startMatchWithDecks(defaultP1Deck, defaultP2Deck);\r\n      log('🎮 Spiel gestartet mit Standard-Decks');\r\n    }\r\n  }, [startMatchWithDecks, startMatchVsAI, devMode, log]);\r\n\r\n  const handlePlayCardFromModal = useCallback((index: number, targetSlot?: string) => {\r\n    console.log('🔧 DEBUG: handlePlayCardFromModal called with:', index, targetSlot);\r\n    const currentPlayer = gameState.current;\r\n    const playerHand = gameState.hands?.[currentPlayer];\r\n    if (!playerHand || index < 0 || index >= playerHand.length) {\r\n      console.log('❌ DEBUG: Invalid hand or index:', index, 'for player:', currentPlayer, 'hand size:', (playerHand?.length || 0));\r\n      return;\r\n    }\r\n\r\n    const card = playerHand[index];\r\n    if (!card) {\r\n      console.log('❌ DEBUG: No card found at index:', index, 'for player:', currentPlayer);\r\n      return;\r\n    }\r\n\r\n    // effectKey sicherstellen (Legacy-Namen → Keys)\r\n    try {\r\n      const { resolveEffectKey } = require('./effects/resolveEffectKey');\r\n      const k = resolveEffectKey(card.name, (card as any).effectKey);\r\n      if (k) (card as any).effectKey = k;\r\n    } catch {}\r\n\r\n    console.log('🔧 DEBUG: Card found:', card.name, 'for player:', currentPlayer);\r\n\r\n    if (targetSlot === 'aussen' || targetSlot === 'innen') {\r\n      console.log('🔧 DEBUG: Calling playCard with lane:', targetSlot);\r\n      playCard(currentPlayer, index, targetSlot as any);\r\n    } else {\r\n      // Handle special slots\r\n      console.log('🔧 DEBUG: Calling playCard without lane');\r\n      log(`🃏 Player ${currentPlayer}: ${card.name} gespielt in ${targetSlot}`);\r\n      // TODO: Implement special slot placement\r\n      playCard(currentPlayer, index);\r\n    }\r\n\r\n    selectHandCard(null);\r\n    // nextTurn() wird jetzt automatisch in playCard aufgerufen wenn nötig\r\n  }, [gameState, playCard, selectHandCard, log]);\r\n\r\n  // Auto-run AI turn whenever it's AI's turn (nur wenn nicht im Dev Mode)\r\n  useEffect(() => {\r\n    if (gameState.current === 2 && !devMode && gameState.aiEnabled?.[2]) {\r\n      const t = setTimeout(() => runAITurn(), 120);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [gameState, runAITurn, devMode]);\r\n\r\n\r\n\r\n  const renderTooltip = () => {\r\n    if (!hoveredCard || !hoveredCard.card) return null;\r\n\r\n    const card = hoveredCard.card;\r\n\r\n    if (card.kind === 'pol') {\r\n      const polCard = card as PoliticianCard;\r\n      const base = Pols.find(p => p.name === polCard.name || p.key === polCard.key);\r\n      const baseInf = base ? base.influence : polCard.influence;\r\n      const delta = polCard.influence - baseInf;\r\n      const deltaStr = delta === 0 ? '' : ` (${baseInf} ${delta > 0 ? '+' : ''}${delta})`;\r\n      return (\r\n        <div style={{\r\n          position: 'fixed',\r\n          pointerEvents: 'none',\r\n          background: '#0b1220',\r\n          border: '1px solid #2a3a4e',\r\n          color: '#dce8f5',\r\n          padding: '8px 10px',\r\n          borderRadius: '8px',\r\n          maxWidth: '340px',\r\n          fontSize: '12px',\r\n          zIndex: 30,\r\n          boxShadow: '0 10px 25px rgba(0,0,0,.35)',\r\n          left: hoveredCard.x + 12,\r\n          top: hoveredCard.y + 12,\r\n        }}>\r\n          <div style={{ marginTop: '4px', fontWeight: 600 }}>\r\n            {polCard.name}\r\n          </div>\r\n          <div>Einfluss: {polCard.influence}{deltaStr}</div>\r\n        </div>\r\n      );\r\n    } else {\r\n      const base = Specials.find((s: any) => s.id === card.baseId);\r\n      if (!base) return null;\r\n      const details = getCardDetails(base.name || card.name);\r\n      return (\r\n        <div style={{\r\n          position: 'fixed',\r\n          pointerEvents: 'none',\r\n          background: '#0b1220',\r\n          border: '1px solid #2a3a4e',\r\n          color: '#dce8f5',\r\n          padding: '8px 10px',\r\n          borderRadius: '8px',\r\n          maxWidth: '340px',\r\n          fontSize: '12px',\r\n          zIndex: 30,\r\n          boxShadow: '0 10px 25px rgba(0,0,0,.35)',\r\n          left: hoveredCard.x + 12,\r\n          top: hoveredCard.y + 12,\r\n        }}>\r\n          <div style={{ fontWeight: 600, marginBottom: 4 }}>{base.name}</div>\r\n          <div style={{ color: '#9ca3af', fontSize: '11px' }}>{details?.gameEffect || 'Kein Effekttext vorhanden'}</div>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      margin: 0,\r\n      padding: 0,\r\n      background: '#0b0f14',\r\n      color: '#e8f0f8',\r\n      fontFamily: 'ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, \"Apple Color Emoji\", \"Segoe UI Emoji\"',\r\n      height: '100vh',\r\n      overflow: 'hidden',\r\n    }}>\r\n      {/* Route Navigation */}\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: '10px',\r\n        left: '10px',\r\n        zIndex: 1001,\r\n        display: 'flex',\r\n        gap: '8px',\r\n      }}>\r\n        <button\r\n          onClick={() => setCurrentRoute('game')}\r\n          style={{\r\n            background: currentRoute === 'game' ? '#3b82f6' : '#374151',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 12px',\r\n            borderRadius: '6px',\r\n            fontSize: '12px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          🎮 Game\r\n        </button>\r\n        <button\r\n          onClick={() => setCurrentRoute('ui-editor')}\r\n          style={{\r\n            background: currentRoute === 'ui-editor' ? '#3b82f6' : '#374151',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 12px',\r\n            borderRadius: '6px',\r\n            fontSize: '12px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          🎨 UI Editor\r\n        </button>\r\n        <button\r\n          onClick={() => setCurrentRoute('test-suite')}\r\n          style={{\r\n            background: currentRoute === 'test-suite' ? '#3b82f6' : '#374151',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 12px',\r\n            borderRadius: '6px',\r\n            fontSize: '12px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          🧪 Test Suite\r\n        </button>\r\n      </div>\r\n\r\n      {currentRoute === 'ui-editor' ? (\r\n        <UILayoutEditor />\r\n      ) : currentRoute === 'test-suite' ? (\r\n        <CardEffectTestSuite />\r\n      ) : (\r\n        <div style={{\r\n          position: 'fixed',\r\n          inset: 0,\r\n          display: 'grid',\r\n          gridTemplateRows: '1fr',\r\n          gap: 0,\r\n          padding: 0,\r\n        }}>\r\n          <div style={{\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n            background: '#0e141b',\r\n          }}>\r\n            <GameCanvas\r\n              gameState={gameState}\r\n              selectedHandIndex={selectedHandIndex}\r\n              onCardClick={handleCardClick}\r\n              onCardHover={handleCardHover}\r\n              devMode={devMode}\r\n            />\r\n\r\n            <DeckBuilder\r\n              isOpen={deckBuilderOpen}\r\n              onClose={() => setDeckBuilderOpen(false)}\r\n              onApplyDeck={handleApplyDeck}\r\n              onStartMatch={handleStartMatch}\r\n            />\r\n\r\n            {!deckBuilderOpen && (\r\n              <GameInfoModal\r\n                gameState={gameState}\r\n                isVisible={gameInfoModalOpen}\r\n                onToggle={() => setGameInfoModalOpen(!gameInfoModalOpen)}\r\n                onPassTurn={passTurn}\r\n                onToggleLog={() => setGameLogModalOpen(!gameLogModalOpen)}\r\n                onCardClick={handleCardClick}\r\n                devMode={devMode}\r\n              />\r\n            )}\r\n\r\n            {!deckBuilderOpen && (\r\n              <EventLogModal\r\n                gameState={gameState}\r\n                isVisible={eventLogModalOpen}\r\n                onToggle={() => setEventLogModalOpen(!eventLogModalOpen)}\r\n              />\r\n            )}\r\n\r\n            {!deckBuilderOpen && (\r\n              <HandCardModal\r\n                gameState={gameState}\r\n                selectedHandIndex={selectedHandIndex}\r\n                isVisible={handCardModalOpen}\r\n                onClose={() => setHandCardModalOpen(false)}\r\n                onPlayCard={handlePlayCardFromModal}\r\n              />\r\n            )}\r\n\r\n            {!deckBuilderOpen && (\r\n              <GameLogModal\r\n                gameState={gameState}\r\n                isVisible={gameLogModalOpen}\r\n                onToggle={() => setGameLogModalOpen(!gameLogModalOpen)}\r\n              />\r\n            )}\r\n\r\n            {renderTooltip()}\r\n\r\n            {/* 🔧 DEV MODE Indikator */}\r\n            {devMode && (\r\n              <div style={{\r\n                position: 'fixed',\r\n                top: '10px',\r\n                right: '10px',\r\n                background: '#ff6b35',\r\n                color: 'white',\r\n                padding: '8px 12px',\r\n                borderRadius: '6px',\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\r\n                zIndex: 1000,\r\n              }}>\r\n                🔧 DEV MODE - KI AUS\r\n              </div>\r\n            )}\r\n\r\n          {/* 🎯 Current Player Indicator (immer sichtbar im Dev Mode) */}\r\n          {devMode && (\r\n            <div style={{\r\n              position: 'fixed',\r\n              top: '60px',\r\n              right: '10px',\r\n              background: gameState.current === 1 ? '#4ade80' : '#ef4444',\r\n              color: 'white',\r\n              padding: '12px 16px',\r\n              borderRadius: '8px',\r\n              fontSize: '16px',\r\n              fontWeight: 700,\r\n              boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\r\n              zIndex: 1000,\r\n              border: '2px solid rgba(255, 255, 255, 0.3)',\r\n            }}>\r\n              🎮 Player {gameState.current} am Zug\r\n              <div style={{\r\n                fontSize: '11px',\r\n                fontWeight: 400,\r\n                opacity: 0.9,\r\n                marginTop: '4px',\r\n              }}>\r\n                AP: {gameState.actionPoints[gameState.current]}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <GameProvider>\r\n      <AppContent />\r\n    </GameProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}