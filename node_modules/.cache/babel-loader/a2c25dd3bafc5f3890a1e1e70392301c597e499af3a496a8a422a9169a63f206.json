{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useState } from 'react';\nimport { takeTurn as aiTakeTurn } from '../ai/aiPlayer';\nexport function useGameAI(gameState, setGameState, log) {\n  _s();\n  var _gameState$aiEnabled$, _gameState$aiEnabled;\n  const aiEnabled = (_gameState$aiEnabled$ = (_gameState$aiEnabled = gameState.aiEnabled) === null || _gameState$aiEnabled === void 0 ? void 0 : _gameState$aiEnabled[2]) !== null && _gameState$aiEnabled$ !== void 0 ? _gameState$aiEnabled$ : false;\n  const [aiPreset, setAiPreset] = useState('AUTORITAERER_REALIST');\n\n  // Debug logging for AI state changes (only in development)\n  if (process.env.NODE_ENV === 'development') {\n    console.log('ðŸ”§ DEBUG: useGameAI state - aiEnabled:', aiEnabled, 'aiPreset:', aiPreset);\n  }\n\n  // AI enabled state - controlled by game logic\n  // const forceAIEnabled = true; // Removed force-enable hack\n\n  // Enhanced setAiEnabled with logging\n  const setAiEnabledWithLog = useCallback(enabled => {\n    setGameState(prev => {\n      var _prev$aiEnabled$, _prev$aiEnabled;\n      return {\n        ...prev,\n        aiEnabled: {\n          1: (_prev$aiEnabled$ = (_prev$aiEnabled = prev.aiEnabled) === null || _prev$aiEnabled === void 0 ? void 0 : _prev$aiEnabled[1]) !== null && _prev$aiEnabled$ !== void 0 ? _prev$aiEnabled$ : false,\n          2: enabled\n        }\n      };\n    });\n\n    // Only set preset when AI is enabled\n    if (enabled) {\n      setAiPreset('AUTORITAERER_REALIST');\n    }\n  }, [setGameState]);\n\n  // Enhanced setAiPreset with logging - only when AI is enabled\n  const setAiPresetWithLog = useCallback(preset => {\n    if (aiEnabled) {\n      console.log('ðŸ”§ DEBUG: setAiPreset called with:', preset);\n      setAiPreset(preset);\n    } else {\n      console.log('ðŸ”§ DEBUG: setAiPreset ignored - AI not enabled');\n    }\n  }, [aiEnabled]);\n  const runAITurn = useCallback(() => {\n    console.log('ðŸ”§ DEBUG: runAITurn called - aiEnabled:', aiEnabled, 'current player:', gameState.current);\n\n    // Determine difficulty mapping (default to medium)\n    const difficulty = 'medium';\n\n    // Schedule AI execution to avoid React state update conflicts\n    setTimeout(() => {\n      try {\n        aiTakeTurn(setGameState, difficulty, log);\n      } catch (err) {\n        console.error('AI execution error', err);\n        log('âŒ AI execution error');\n      }\n    }, 50);\n  }, [aiEnabled, log, gameState.current, setGameState, aiPreset]);\n  const canUsePutinDoubleIntervention = useCallback(player => {\n    const board = gameState.board[player];\n    const allCards = [...board.innen, ...board.aussen].filter(c => c.kind === 'pol');\n    const putin = allCards.find(c => c.name === 'Vladimir Putin');\n    if (!putin || putin.deactivated || putin._activeUsed) return false;\n    const interventions = gameState.hands[player].filter(c => c.kind === 'spec');\n    return interventions.length >= 2;\n  }, [gameState]);\n  const executePutinDoubleIntervention = useCallback(interventionCardIds => {\n    setGameState(prev => {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const player = prev.current;\n      // Putin special ability implementation would go here\n      log(`ðŸ¤– Putin setzt doppelte Intervention ein`);\n      return prev;\n    });\n  }, [log]);\n  return {\n    runAITurn,\n    canUsePutinDoubleIntervention,\n    executePutinDoubleIntervention,\n    aiEnabled,\n    setAiEnabled: setAiEnabledWithLog,\n    aiPreset,\n    setAiPreset: setAiPreset // Use original function temporarily\n  };\n}\n_s(useGameAI, \"+uhHMLxDap/B8NVFNqsXEy76SxQ=\");","map":{"version":3,"names":["useCallback","useState","takeTurn","aiTakeTurn","useGameAI","gameState","setGameState","log","_s","_gameState$aiEnabled$","_gameState$aiEnabled","aiEnabled","aiPreset","setAiPreset","process","env","NODE_ENV","console","setAiEnabledWithLog","enabled","prev","_prev$aiEnabled$","_prev$aiEnabled","setAiPresetWithLog","preset","runAITurn","current","difficulty","setTimeout","err","error","canUsePutinDoubleIntervention","player","board","allCards","innen","aussen","filter","c","kind","putin","find","name","deactivated","_activeUsed","interventions","hands","length","executePutinDoubleIntervention","interventionCardIds","setAiEnabled"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/hooks/useGameAI.ts"],"sourcesContent":["import { useCallback, useState } from 'react';\nimport { GameState, Card, Player } from '../types/game';\nimport { PRESET_DECKS } from '../data/gameData';\nimport { sumRow, getCardActionPointCost } from '../utils/gameUtils';\nimport { takeTurn as aiTakeTurn, Difficulty } from '../ai/aiPlayer';\n\nexport function useGameAI(\n  gameState: GameState,\n  setGameState: React.Dispatch<React.SetStateAction<GameState>>,\n  log: (msg: string) => void\n) {\n  const aiEnabled = gameState.aiEnabled?.[2] ?? false;\n  const [aiPreset, setAiPreset] = useState<keyof typeof PRESET_DECKS>('AUTORITAERER_REALIST');\n\n  // Debug logging for AI state changes (only in development)\n  if (process.env.NODE_ENV === 'development') {\n    console.log('ðŸ”§ DEBUG: useGameAI state - aiEnabled:', aiEnabled, 'aiPreset:', aiPreset);\n  }\n\n  // AI enabled state - controlled by game logic\n  // const forceAIEnabled = true; // Removed force-enable hack\n\n  // Enhanced setAiEnabled with logging\n  const setAiEnabledWithLog = useCallback((enabled: boolean) => {\n    setGameState(prev => ({\n      ...prev,\n      aiEnabled: {\n        1: prev.aiEnabled?.[1] ?? false,\n        2: enabled\n      }\n    }));\n\n    // Only set preset when AI is enabled\n    if (enabled) {\n      setAiPreset('AUTORITAERER_REALIST');\n    }\n  }, [setGameState]);\n\n  // Enhanced setAiPreset with logging - only when AI is enabled\n  const setAiPresetWithLog = useCallback((preset: keyof typeof PRESET_DECKS) => {\n    if (aiEnabled) {\n      console.log('ðŸ”§ DEBUG: setAiPreset called with:', preset);\n      setAiPreset(preset);\n    } else {\n      console.log('ðŸ”§ DEBUG: setAiPreset ignored - AI not enabled');\n    }\n  }, [aiEnabled]);\n\n  const runAITurn = useCallback(() => {\n    console.log('ðŸ”§ DEBUG: runAITurn called - aiEnabled:', aiEnabled, 'current player:', gameState.current);\n\n    // Determine difficulty mapping (default to medium)\n    const difficulty: Difficulty = 'medium';\n\n    // Schedule AI execution to avoid React state update conflicts\n    setTimeout(() => {\n      try {\n        aiTakeTurn(setGameState, difficulty, log);\n      } catch (err) {\n        console.error('AI execution error', err);\n        log('âŒ AI execution error');\n      }\n    }, 50);\n  }, [aiEnabled, log, gameState.current, setGameState, aiPreset]);\n\n  const canUsePutinDoubleIntervention = useCallback((player: Player): boolean => {\n    const board = gameState.board[player];\n    const allCards = [...board.innen, ...board.aussen].filter(c => c.kind === 'pol') as any[];\n    const putin = allCards.find(c => c.name === 'Vladimir Putin');\n\n    if (!putin || putin.deactivated || putin._activeUsed) return false;\n\n    const interventions = gameState.hands[player].filter(c => c.kind === 'spec');\n    return interventions.length >= 2;\n  }, [gameState]);\n\n  const executePutinDoubleIntervention = useCallback((interventionCardIds: number[]) => {\n    setGameState(prev => {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const player = prev.current;\n      // Putin special ability implementation would go here\n      log(`ðŸ¤– Putin setzt doppelte Intervention ein`);\n      return prev;\n    });\n  }, [log]);\n\n  return {\n    runAITurn,\n    canUsePutinDoubleIntervention,\n    executePutinDoubleIntervention,\n    aiEnabled,\n    setAiEnabled: setAiEnabledWithLog,\n    aiPreset,\n    setAiPreset: setAiPreset, // Use original function temporarily\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}