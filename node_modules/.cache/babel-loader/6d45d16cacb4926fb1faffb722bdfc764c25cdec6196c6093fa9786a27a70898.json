{"ast":null,"code":"// src/state/board.ts\n\nexport const emptyBoardSide = () => ({\n  innen: [],\n  aussen: [],\n  sofort: [] // ðŸ‘ˆ always present\n});\nexport const emptyBoard = () => ({\n  1: emptyBoardSide(),\n  2: emptyBoardSide()\n});\n\n/**\r\n * Defensive upgrade for any state that might miss the new field (e.g., tests, fixtures).\r\n */\nexport function ensureSofortBoard(state) {\n  for (const p of [1, 2]) {\n    const side = state.board[p];\n    if (!side.innen) side.innen = [];\n    if (!side.aussen) side.aussen = [];\n    if (!Array.isArray(side.sofort)) side.sofort = [];\n  }\n  return state;\n}","map":{"version":3,"names":["emptyBoardSide","innen","aussen","sofort","emptyBoard","ensureSofortBoard","state","p","side","board","Array","isArray"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/state/board.ts"],"sourcesContent":["// src/state/board.ts\r\nimport { BoardSide, GameState } from '../types/game';\r\n\r\nexport const emptyBoardSide = (): BoardSide => ({\r\n  innen: [],\r\n  aussen: [],\r\n  sofort: [],   // ðŸ‘ˆ always present\r\n});\r\n\r\nexport const emptyBoard = (): GameState['board'] => ({\r\n  1: emptyBoardSide(),\r\n  2: emptyBoardSide(),\r\n});\r\n\r\n/**\r\n * Defensive upgrade for any state that might miss the new field (e.g., tests, fixtures).\r\n */\r\nexport function ensureSofortBoard(state: GameState) {\r\n  for (const p of [1, 2] as const) {\r\n    const side = state.board[p] as any;\r\n    if (!side.innen)  side.innen  = [];\r\n    if (!side.aussen) side.aussen = [];\r\n    if (!Array.isArray(side.sofort)) side.sofort = [];\r\n  }\r\n  return state;\r\n}\r\n"],"mappings":"AAAA;;AAGA,OAAO,MAAMA,cAAc,GAAGA,CAAA,MAAkB;EAC9CC,KAAK,EAAE,EAAE;EACTC,MAAM,EAAE,EAAE;EACVC,MAAM,EAAE,EAAE,CAAI;AAChB,CAAC,CAAC;AAEF,OAAO,MAAMC,UAAU,GAAGA,CAAA,MAA2B;EACnD,CAAC,EAAEJ,cAAc,CAAC,CAAC;EACnB,CAAC,EAAEA,cAAc,CAAC;AACpB,CAAC,CAAC;;AAEF;AACA;AACA;AACA,OAAO,SAASK,iBAAiBA,CAACC,KAAgB,EAAE;EAClD,KAAK,MAAMC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,EAAW;IAC/B,MAAMC,IAAI,GAAGF,KAAK,CAACG,KAAK,CAACF,CAAC,CAAQ;IAClC,IAAI,CAACC,IAAI,CAACP,KAAK,EAAGO,IAAI,CAACP,KAAK,GAAI,EAAE;IAClC,IAAI,CAACO,IAAI,CAACN,MAAM,EAAEM,IAAI,CAACN,MAAM,GAAG,EAAE;IAClC,IAAI,CAACQ,KAAK,CAACC,OAAO,CAACH,IAAI,CAACL,MAAM,CAAC,EAAEK,IAAI,CAACL,MAAM,GAAG,EAAE;EACnD;EACA,OAAOG,KAAK;AACd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}