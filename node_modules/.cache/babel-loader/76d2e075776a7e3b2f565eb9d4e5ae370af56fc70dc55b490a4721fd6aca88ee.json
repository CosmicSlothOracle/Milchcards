{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\skank\\\\Videos\\\\Cards\\\\Milchcards\\\\src\\\\context\\\\VisualEffectsContext.tsx\",\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { createContext, useContext, useRef, useMemo, useState } from 'react';\nimport { getUiTransform } from '../ui/layout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VisualEffectsContext = /*#__PURE__*/createContext(undefined);\nexport function VisualEffectsProvider({\n  children\n}) {\n  _s2();\n  const particlesRef = useRef([]);\n  const popsRef = useRef([]);\n  const ripplesRef = useRef([]);\n  const apLabelsRef = useRef([]);\n  const gifOverlaysRef = useRef([]);\n  const spawnedGifIdsRef = useRef(new Set());\n  const playAnimsRef = useRef([]);\n  const reducedMotion = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches || !!window.__pc_reduced_motion;\n  const spawnParticles = (cx, cy, count = 12) => {\n    if (reducedMotion) return;\n    const now = performance.now();\n    for (let i = 0; i < count; i++) {\n      particlesRef.current.push({\n        start: now,\n        life: 600 + Math.random() * 500,\n        x: cx + (Math.random() - 0.5) * 48,\n        y: cy + (Math.random() - 0.5) * 48,\n        vx: (Math.random() - 0.5) * 6,\n        vy: -Math.random() * 6,\n        size: 3 + Math.random() * 6,\n        color: ['#ffd166', '#ff6b6b', '#4ade80'][Math.floor(Math.random() * 3)],\n        gravity: 0.12\n      });\n    }\n  };\n  const spawnPop = uid => {\n    popsRef.current.push({\n      uid,\n      started: performance.now(),\n      duration: 420\n    });\n  };\n  const spawnRipple = (cx, cy, opts) => {\n    var _opts$radius;\n    if (reducedMotion) return;\n    ripplesRef.current.push({\n      cx,\n      cy,\n      started: performance.now(),\n      duration: opts !== null && opts !== void 0 && opts.radius ? 700 : 700,\n      radius: (_opts$radius = opts === null || opts === void 0 ? void 0 : opts.radius) !== null && _opts$radius !== void 0 ? _opts$radius : 480,\n      showAp: !!(opts !== null && opts !== void 0 && opts.showAp),\n      apX: opts === null || opts === void 0 ? void 0 : opts.apX,\n      apY: opts === null || opts === void 0 ? void 0 : opts.apY\n    });\n    if (opts !== null && opts !== void 0 && opts.showAp) {\n      var _opts$apX, _opts$apY;\n      apLabelsRef.current.push({\n        x: (_opts$apX = opts.apX) !== null && _opts$apX !== void 0 ? _opts$apX : cx,\n        y: (_opts$apY = opts.apY) !== null && _opts$apY !== void 0 ? _opts$apY : cy,\n        started: performance.now(),\n        duration: 900,\n        text: '+1'\n      });\n    }\n  };\n  const spawnGifOverlay = opts => {\n    try {\n      var _opts$id, _opts$duration;\n      const id = (_opts$id = opts.id) !== null && _opts$id !== void 0 ? _opts$id : (Math.random() * 1e9).toFixed(0);\n      const started = performance.now();\n      const duration = (_opts$duration = opts.duration) !== null && _opts$duration !== void 0 ? _opts$duration : 700;\n      const entry = {\n        id,\n        cx: opts.cx,\n        cy: opts.cy,\n        w: opts.w,\n        h: opts.h,\n        src: opts.src,\n        started,\n        duration\n      };\n      // prevent immediate duplicates\n      if (spawnedGifIdsRef.current.has(String(id))) return;\n      spawnedGifIdsRef.current.add(String(id));\n      gifOverlaysRef.current = [...gifOverlaysRef.current, entry];\n      // schedule removal after duration + small buffer\n      setTimeout(() => {\n        try {\n          gifOverlaysRef.current = gifOverlaysRef.current.filter(g => !(g.id === id && g.started === started));\n          spawnedGifIdsRef.current.delete(String(id));\n        } catch (e) {}\n      }, (duration || 700) + 80);\n    } catch (e) {\n      // swallow non-critical errors\n    }\n  };\n  const spawnGifOverlayUi = opts => {\n    try {\n      var _opts$w, _ref, _opts$h;\n      // Convert canvas-space coords into screen-space so provider overlay div can position it absolutely\n      const canvas = document.querySelector('canvas');\n      let screenCx = opts.cx;\n      let screenCy = opts.cy;\n      let screenW = (_opts$w = opts.w) !== null && _opts$w !== void 0 ? _opts$w : 256;\n      let screenH = (_ref = (_opts$h = opts.h) !== null && _opts$h !== void 0 ? _opts$h : opts.w) !== null && _ref !== void 0 ? _ref : 256;\n      if (canvas) {\n        var _opts$w2, _ref2, _opts$h2;\n        const rect = canvas.getBoundingClientRect();\n        const ui = getUiTransform(canvas.width, canvas.height);\n        // Compute CSS pixel scale between canvas logical size and displayed size\n        const cssScaleX = rect.width / canvas.width;\n        const cssScaleY = rect.height / canvas.height;\n        // Apply UI transform (offsets are in logical canvas pixels) then map to screen CSS pixels\n        screenCx = rect.left + (opts.cx + ui.offsetX) * cssScaleX;\n        screenCy = rect.top + (opts.cy + ui.offsetY) * cssScaleY;\n        screenW = ((_opts$w2 = opts.w) !== null && _opts$w2 !== void 0 ? _opts$w2 : 256) * cssScaleX;\n        screenH = ((_ref2 = (_opts$h2 = opts.h) !== null && _opts$h2 !== void 0 ? _opts$h2 : opts.w) !== null && _ref2 !== void 0 ? _ref2 : 256) * cssScaleY;\n      } else {\n        // fallback: center of window\n        screenCx = window.innerWidth / 2;\n        screenCy = window.innerHeight / 2;\n      }\n      spawnGifOverlay({\n        id: opts.id,\n        cx: screenCx,\n        cy: screenCy,\n        w: screenW,\n        h: screenH,\n        src: opts.src,\n        duration: opts.duration\n      });\n    } catch (e) {\n      // ignore\n    }\n  };\n  const value = useMemo(() => ({\n    particlesRef,\n    popsRef,\n    ripplesRef,\n    apLabelsRef,\n    reducedMotion,\n    spawnParticles,\n    spawnPop,\n    spawnRipple,\n    gifOverlaysRef,\n    playAnimsRef,\n    spawnGifOverlay,\n    spawnGifOverlayUi\n  }), []);\n  // Expose value for non-hook callsites (fallback)\n  React.useEffect(() => {\n    try {\n      window.__pc_visual_effects = value;\n    } catch (e) {}\n    return () => {\n      try {\n        window.__pc_visual_effects = undefined;\n      } catch (e) {}\n    };\n  }, [value]);\n  return /*#__PURE__*/_jsxDEV(VisualEffectsContext.Provider, {\n    value: value,\n    children: [children, /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        pointerEvents: 'none',\n        width: '100%',\n        height: '100%',\n        zIndex: 800\n      },\n      children: gifOverlaysRef.current.map(g => {\n        var _s = $RefreshSig$();\n        const age = Math.min(1, Math.max(0, (performance.now() - g.started) / g.duration));\n        const alpha = 1 - age; // fade out\n        const sizeW = Math.round(g.w);\n        const sizeH = Math.round(g.h);\n        const left = Math.round(g.cx);\n        const top = Math.round(g.cy);\n        const style = {\n          position: 'absolute',\n          left: left,\n          top: top,\n          width: sizeW,\n          height: sizeH,\n          opacity: alpha,\n          transform: 'translate(-50%, -50%) translateZ(0)',\n          transition: 'opacity 120ms linear',\n          pointerEvents: 'none'\n        };\n        // Render video (WebM) when available by convention: replace .gif -> .webm\n        const OverlayMedia = ({\n          src,\n          style,\n          alt\n        }) => {\n          _s();\n          const [useVideo, setUseVideo] = useState(true);\n          const webm = String(src).replace(/\\.gif$/i, '.webm');\n          const keyBase = String(g.id) + '_' + String(g.started);\n          if (useVideo) {\n            return /*#__PURE__*/_jsxDEV(\"video\", {\n              src: webm,\n              style: style,\n              autoPlay: true,\n              muted: true,\n              playsInline: true,\n              loop: true,\n              onError: () => setUseVideo(false)\n            }, keyBase + '_video', false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this);\n          }\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            src: src,\n            style: style,\n            alt: alt\n          }, keyBase + '_img', false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 18\n          }, this);\n        };\n        _s(OverlayMedia, \"o93qxjR6bdjIrWDnVN3d2fYP1nc=\");\n        return /*#__PURE__*/_jsxDEV(OverlayMedia, {\n          src: g.src,\n          style: style,\n          alt: \"effect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 16\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 10\n  }, this);\n}\n_s2(VisualEffectsProvider, \"zwEDKIxGNUHfxZFOSiwKDldJlaw=\");\n_c = VisualEffectsProvider;\nexport function useVisualEffects() {\n  _s3();\n  const ctx = useContext(VisualEffectsContext);\n  if (!ctx) throw new Error('useVisualEffects must be used within VisualEffectsProvider');\n  return ctx;\n}\n\n// Safe variant that returns null when no provider is present. Use this when a caller\n// cannot guarantee being rendered inside the provider (avoids rules-of-hooks errors\n// when attempting to call hooks conditionally).\n_s3(useVisualEffects, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nexport function useVisualEffectsSafe() {\n  _s4();\n  return useContext(VisualEffectsContext) || null;\n}\n_s4(useVisualEffectsSafe, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport default VisualEffectsContext;\nvar _c;\n$RefreshReg$(_c, \"VisualEffectsProvider\");","map":{"version":3,"names":["React","createContext","useContext","useRef","useMemo","useState","getUiTransform","jsxDEV","_jsxDEV","VisualEffectsContext","undefined","VisualEffectsProvider","children","_s2","particlesRef","popsRef","ripplesRef","apLabelsRef","gifOverlaysRef","spawnedGifIdsRef","Set","playAnimsRef","reducedMotion","window","matchMedia","matches","__pc_reduced_motion","spawnParticles","cx","cy","count","now","performance","i","current","push","start","life","Math","random","x","y","vx","vy","size","color","floor","gravity","spawnPop","uid","started","duration","spawnRipple","opts","_opts$radius","radius","showAp","apX","apY","_opts$apX","_opts$apY","text","spawnGifOverlay","_opts$id","_opts$duration","id","toFixed","entry","w","h","src","has","String","add","setTimeout","filter","g","delete","e","spawnGifOverlayUi","_opts$w","_ref","_opts$h","canvas","document","querySelector","screenCx","screenCy","screenW","screenH","_opts$w2","_ref2","_opts$h2","rect","getBoundingClientRect","ui","width","height","cssScaleX","cssScaleY","left","offsetX","top","offsetY","innerWidth","innerHeight","value","useEffect","__pc_visual_effects","Provider","style","position","pointerEvents","zIndex","map","_s","$RefreshSig$","age","min","max","alpha","sizeW","round","sizeH","opacity","transform","transition","OverlayMedia","alt","useVideo","setUseVideo","webm","replace","keyBase","autoPlay","muted","playsInline","loop","onError","fileName","_jsxFileName","lineNumber","columnNumber","_c","useVisualEffects","_s3","ctx","Error","useVisualEffectsSafe","_s4","$RefreshReg$"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/context/VisualEffectsContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useRef, ReactNode, useMemo, useState } from 'react';\nimport { getUiTransform } from '../ui/layout';\n\ntype Particle = { start: number; life: number; x: number; y: number; vx: number; vy: number; size?: number; color?: string; gravity?: number };\ntype Pop = { uid: number | string; started: number; duration: number };\ntype Ripple = { cx: number; cy: number; started: number; duration: number; radius: number; showAp?: boolean; apX?: number; apY?: number; _apSpawned?: boolean };\ntype ApLabel = { x: number; y: number; started: number; duration: number; text: string };\n\ninterface VisualEffectsContextType {\n  particlesRef: React.MutableRefObject<Particle[]>;\n  popsRef: React.MutableRefObject<Pop[]>;\n  ripplesRef: React.MutableRefObject<Ripple[]>;\n  apLabelsRef: React.MutableRefObject<ApLabel[]>;\n  reducedMotion: boolean;\n  spawnParticles: (cx: number, cy: number, count?: number) => void;\n  spawnPop: (uid: number | string) => void;\n  spawnRipple: (cx: number, cy: number, opts?: { radius?: number; showAp?: boolean; apX?: number; apY?: number }) => void;\n  // New: gif overlays and per-card play animations\n  gifOverlaysRef: React.MutableRefObject<Array<{ id: string | number; cx: number; cy: number; w: number; h: number; src: string; started: number; duration: number }>>;\n  playAnimsRef: React.MutableRefObject<Array<{ uid: string | number; started: number; duration: number }>>;\n  spawnGifOverlay: (opts: { id?: string | number; cx: number; cy: number; w: number; h: number; src: string; duration?: number }) => void;\n  // spawn overlay by UI canvas coordinates (untransformed). The context will convert\n  // to screen coords using the active canvas bounding rect and ui transform. This\n  // ensures overlays align exactly with canvas-drawn elements.\n  spawnGifOverlayUi: (opts: { id?: string | number; cx: number; cy: number; w?: number; h?: number; src: string; duration?: number }) => void;\n}\n\nconst VisualEffectsContext = createContext<VisualEffectsContextType | undefined>(undefined);\n\nexport function VisualEffectsProvider({ children }: { children: ReactNode }) {\n  const particlesRef = useRef<Particle[]>([]);\n  const popsRef = useRef<Pop[]>([]);\n  const ripplesRef = useRef<Ripple[]>([]);\n  const apLabelsRef = useRef<ApLabel[]>([]);\n  const gifOverlaysRef = useRef<Array<{ id: string | number; cx: number; cy: number; w: number; h: number; src: string; started: number; duration: number }>>([]);\n  const spawnedGifIdsRef = useRef<Set<string|number>>(new Set());\n  const playAnimsRef = useRef<Array<{ uid: string | number; started: number; duration: number }>>([]);\n\n  const reducedMotion = typeof window !== 'undefined' && (window as any).matchMedia && (window as any).matchMedia('(prefers-reduced-motion: reduce)').matches || !!(window as any).__pc_reduced_motion;\n\n  const spawnParticles = (cx: number, cy: number, count = 12) => {\n    if (reducedMotion) return;\n    const now = performance.now();\n    for (let i = 0; i < count; i++) {\n      particlesRef.current.push({ start: now, life: 600 + Math.random() * 500, x: cx + (Math.random() - 0.5) * 48, y: cy + (Math.random() - 0.5) * 48, vx: (Math.random() - 0.5) * 6, vy: -Math.random() * 6, size: 3 + Math.random() * 6, color: ['#ffd166', '#ff6b6b', '#4ade80'][Math.floor(Math.random() * 3)], gravity: 0.12 });\n    }\n  };\n\n  const spawnPop = (uid: number | string) => {\n    popsRef.current.push({ uid, started: performance.now(), duration: 420 });\n  };\n\n  const spawnRipple = (cx: number, cy: number, opts?: { radius?: number; showAp?: boolean; apX?: number; apY?: number }) => {\n    if (reducedMotion) return;\n    ripplesRef.current.push({ cx, cy, started: performance.now(), duration: opts?.radius ? 700 : 700, radius: opts?.radius ?? 480, showAp: !!opts?.showAp, apX: opts?.apX, apY: opts?.apY });\n    if (opts?.showAp) {\n      apLabelsRef.current.push({ x: opts.apX ?? cx, y: opts.apY ?? cy, started: performance.now(), duration: 900, text: '+1' });\n    }\n  };\n\n  const spawnGifOverlay = (opts: { id?: string | number; cx: number; cy: number; w: number; h: number; src: string; duration?: number }) => {\n    try {\n      const id = opts.id ?? (Math.random() * 1e9).toFixed(0);\n      const started = performance.now();\n      const duration = opts.duration ?? 700;\n      const entry = { id, cx: opts.cx, cy: opts.cy, w: opts.w, h: opts.h, src: opts.src, started, duration };\n      // prevent immediate duplicates\n      if (spawnedGifIdsRef.current.has(String(id))) return;\n      spawnedGifIdsRef.current.add(String(id));\n      gifOverlaysRef.current = [...gifOverlaysRef.current, entry];\n      // schedule removal after duration + small buffer\n      setTimeout(() => {\n        try {\n          gifOverlaysRef.current = gifOverlaysRef.current.filter(g => !(g.id === id && g.started === started));\n          spawnedGifIdsRef.current.delete(String(id));\n        } catch (e) {}\n      }, (duration || 700) + 80);\n    } catch (e) {\n      // swallow non-critical errors\n    }\n  };\n\n  const spawnGifOverlayUi = (opts: { id?: string | number; cx: number; cy: number; w?: number; h?: number; src: string; duration?: number }) => {\n    try {\n      // Convert canvas-space coords into screen-space so provider overlay div can position it absolutely\n      const canvas = document.querySelector('canvas');\n      let screenCx = opts.cx;\n      let screenCy = opts.cy;\n      let screenW = opts.w ?? 256;\n      let screenH = opts.h ?? opts.w ?? 256;\n      if (canvas) {\n        const rect = canvas.getBoundingClientRect();\n        const ui = getUiTransform((canvas as HTMLCanvasElement).width, (canvas as HTMLCanvasElement).height);\n        // Compute CSS pixel scale between canvas logical size and displayed size\n        const cssScaleX = rect.width / (canvas as HTMLCanvasElement).width;\n        const cssScaleY = rect.height / (canvas as HTMLCanvasElement).height;\n        // Apply UI transform (offsets are in logical canvas pixels) then map to screen CSS pixels\n        screenCx = rect.left + (opts.cx + ui.offsetX) * cssScaleX;\n        screenCy = rect.top  + (opts.cy + ui.offsetY) * cssScaleY;\n        screenW = (opts.w ?? 256) * cssScaleX;\n        screenH = (opts.h ?? opts.w ?? 256) * cssScaleY;\n      } else {\n        // fallback: center of window\n        screenCx = window.innerWidth / 2;\n        screenCy = window.innerHeight / 2;\n      }\n      spawnGifOverlay({ id: opts.id, cx: screenCx, cy: screenCy, w: screenW, h: screenH, src: opts.src, duration: opts.duration });\n    } catch (e) {\n      // ignore\n    }\n  };\n\n  const value = useMemo(() => ({ particlesRef, popsRef, ripplesRef, apLabelsRef, reducedMotion, spawnParticles, spawnPop, spawnRipple, gifOverlaysRef, playAnimsRef, spawnGifOverlay, spawnGifOverlayUi }), []);\n  // Expose value for non-hook callsites (fallback)\n  React.useEffect(() => {\n    try {\n      (window as any).__pc_visual_effects = value;\n    } catch (e) {}\n    return () => { try { (window as any).__pc_visual_effects = undefined; } catch (e) {} };\n  }, [value]);\n\n  return <VisualEffectsContext.Provider value={value}>\n    {children}\n    {/* Render GIF overlays as absolutely positioned images on top of canvas */}\n    <div style={{ position: 'fixed', left: 0, top: 0, pointerEvents: 'none', width: '100%', height: '100%', zIndex: 800 }}>\n      {gifOverlaysRef.current.map(g => {\n        const age = Math.min(1, Math.max(0, (performance.now() - g.started) / g.duration));\n        const alpha = 1 - age; // fade out\n        const sizeW = Math.round(g.w);\n        const sizeH = Math.round(g.h);\n        const left = Math.round(g.cx);\n        const top = Math.round(g.cy);\n        const style: React.CSSProperties = {\n          position: 'absolute',\n          left: left,\n          top: top,\n          width: sizeW,\n          height: sizeH,\n          opacity: alpha,\n          transform: 'translate(-50%, -50%) translateZ(0)',\n          transition: 'opacity 120ms linear',\n          pointerEvents: 'none',\n        };\n        // Render video (WebM) when available by convention: replace .gif -> .webm\n        const OverlayMedia: React.FC<{ src: string; style: React.CSSProperties; alt?: string }> = ({ src, style, alt }) => {\n          const [useVideo, setUseVideo] = useState(true);\n          const webm = String(src).replace(/\\.gif$/i, '.webm');\n          const keyBase = String(g.id) + '_' + String(g.started);\n          if (useVideo) {\n            return (\n              <video\n                key={keyBase + '_video'}\n                src={webm}\n                style={style}\n                autoPlay\n                muted\n                playsInline\n                loop\n                onError={() => setUseVideo(false)}\n              />\n            );\n          }\n          return <img key={keyBase + '_img'} src={src} style={style} alt={alt} />;\n        };\n\n        return <OverlayMedia src={g.src} style={style} alt=\"effect\" />;\n      })}\n    </div>\n  </VisualEffectsContext.Provider>;\n}\n\nexport function useVisualEffects() {\n  const ctx = useContext(VisualEffectsContext);\n  if (!ctx) throw new Error('useVisualEffects must be used within VisualEffectsProvider');\n  return ctx;\n}\n\n// Safe variant that returns null when no provider is present. Use this when a caller\n// cannot guarantee being rendered inside the provider (avoids rules-of-hooks errors\n// when attempting to call hooks conditionally).\nexport function useVisualEffectsSafe() {\n  return useContext(VisualEffectsContext) || null;\n}\n\nexport default VisualEffectsContext;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}