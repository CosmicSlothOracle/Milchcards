{"ast":null,"code":"// Card instance creation\nlet NEXT_UID = 1;\nexport function makePolInstance(base) {\n  var _base$BP;\n  return {\n    id: base.id,\n    key: base.key,\n    name: base.name,\n    kind: 'pol',\n    baseId: base.id,\n    tag: base.tag,\n    T: base.T,\n    BP: (_base$BP = base.BP) !== null && _base$BP !== void 0 ? _base$BP : 0,\n    influence: base.influence,\n    // 🔥 VEREINFACHT: Direkt von base.influence, kein M mehr!\n    ...(base.effect && {\n      effect: base.effect\n    }),\n    // 🔥 EFFEKT ÜBERTRAGUNG FÜR JOSCHKA FISCHER NGO-BOOST!\n    protected: false,\n    protectedUntil: null,\n    deactivated: false,\n    tempDebuffs: 0,\n    tempBuffs: 0,\n    uid: NEXT_UID++,\n    _activeUsed: false\n  };\n}\nexport function makeSpecInstance(base) {\n  const card = {\n    id: base.id,\n    key: base.key,\n    name: base.name,\n    kind: 'spec',\n    baseId: base.id,\n    // Normalize type strings so downstream logic (German/English mixes) recognizes Public cards\n    type: (() => {\n      if (!base.type) return '';\n      const t = String(base.type).toLowerCase();\n      // Common mappings\n      if (t === 'public' || t === 'öffentlichkeitskarte' || t === 'oeffentlichkeitskarte' || t === 'öffentlichkeit') return 'Öffentlichkeitskarte';\n      if (/sofort/i.test(base.type) || /initiative/i.test(base.type) || /sofort-?initiative/i.test(base.type)) return base.type; // keep initiative labels as-is\n      return base.type;\n    })(),\n    impl: base.impl,\n    bp: base.bp,\n    ...(base.effectKey && {\n      effectKey: base.effectKey\n    }),\n    ...(base.tag && {\n      tag: base.tag\n    }),\n    // 🔥 TAG ÜBERTRAGUNG FÜR NGO/PLATTFORM DETECTION!\n    uid: NEXT_UID++,\n    deactivated: false\n  };\n\n  // Debug logging for Bestechungsskandal\n  if (base.name === 'Bestechungsskandal 2.0') {\n    console.log('🔥 CREATING BESTECHUNGSSKANDAL CARD:', card);\n    console.log('🔥 Base effectKey:', base.effectKey);\n    console.log('🔥 Card effectKey:', card.effectKey);\n  }\n  return card;\n}\n\n// Card placement logic\nexport function isOfficeTag(tag) {\n  return tag === 'Staatsoberhaupt' || tag === 'Regierungschef' || tag === 'Diplomat';\n}\nexport function getAllowedLaneForCard(card) {\n  if (card.kind === 'pol') {\n    return isOfficeTag(card.tag) ? 'aussen' : 'innen';\n  } else if (card.kind === 'spec') {\n    const specCard = card;\n    if (specCard.type === 'Öffentlichkeitskarte') {\n      return 'innen'; // Public cards go to public row\n    }\n    // Other special cards (initiatives, interventions) don't have lane restrictions\n    return null;\n  }\n  return null;\n}\nexport function isLaneAllowedForCard(card, lane) {\n  if (!card || card.kind !== 'pol') return true;\n  return getAllowedLaneForCard(card) === lane;\n}\nexport function laneDisplayName(lane) {\n  return lane === 'aussen' ? 'Regierungsreihe' : 'Öffentlichkeitsreihe';\n}\n\n// Card state manipulation\nexport function adjustInfluence(card, amount, source) {\n  const oldInfluence = card.influence;\n  card.influence = Math.max(0, card.influence + amount);\n  console.log(`[${source}] ${card.name}: ${oldInfluence} → ${card.influence} Einfluss`);\n}\nexport function findCardLocation(card, state) {\n  for (const player of [1, 2]) {\n    for (const lane of ['innen', 'aussen']) {\n      if (state.board[player][lane].some(c => c.uid === card.uid)) {\n        return {\n          player,\n          lane\n        };\n      }\n    }\n  }\n  return null;\n}\n\n// Action point calculation\nexport function getCardActionPointCost(card, state, player) {\n  var _state$effectFlags;\n  if (card.kind !== 'pol' && card.kind !== 'spec') return 1;\n  let baseCost = 1;\n  const flags = (_state$effectFlags = state.effectFlags) === null || _state$effectFlags === void 0 ? void 0 : _state$effectFlags[player];\n  if (card.kind === 'pol') {\n    const polCard = card;\n    const lane = getAllowedLaneForCard(card);\n\n    // ⚠️ Keine harte Freistellung mehr für Regierungskarten – Refund-Modell wird in getNetApCost angewandt\n  } else if (card.kind === 'spec') {\n    const specCard = card;\n\n    // Free initiative from leadership\n    if (flags !== null && flags !== void 0 && flags.freeInitiativeAvailable) {\n      return 0;\n    }\n\n    // NGO discount\n    if (flags !== null && flags !== void 0 && flags.ngoInitiativeDiscount && flags.ngoInitiativeDiscount > 0) {\n      baseCost = Math.max(0, baseCost - flags.ngoInitiativeDiscount);\n    }\n  }\n  return baseCost;\n}\n\n// Card sorting and filtering\nexport function sortHandCards(cards) {\n  return [...cards].sort((a, b) => {\n    // Politicians first, then specials\n    if (a.kind !== b.kind) {\n      return a.kind === 'pol' ? -1 : 1;\n    }\n\n    // Within same kind, sort by name\n    return a.name.localeCompare(b.name);\n  });\n}\n\n// Card validation\nexport function isValidCardPlacement(card, player, lane, state) {\n  // Check lane capacity\n  if (state.board[player][lane].length >= 5) return false;\n\n  // Check lane restrictions\n  if (!isLaneAllowedForCard(card, lane)) return false;\n\n  // Check for duplicate placement\n  const alreadyOnBoard = [...state.board[player].innen, ...state.board[player].aussen].some(c => c.uid === card.uid);\n  if (alreadyOnBoard) return false;\n  return true;\n}\n\n// Card type checking utilities\nexport function isPoliticianCard(card) {\n  return card.kind === 'pol';\n}\nexport function isSpecialCard(card) {\n  return card.kind === 'spec';\n}\nexport function isPublicCard(card) {\n  return card.kind === 'spec' && card.type === 'Öffentlichkeitskarte';\n}\nexport function isGovernmentCard(card) {\n  return card.kind === 'pol';\n}\nexport function isInitiativeCard(card) {\n  if (card.kind !== 'spec') return false;\n  const spec = card;\n  return spec.type === 'Sofort-Initiative' || spec.type === 'Dauerhaft-Initiative';\n}\nexport function isInterventionCard(card) {\n  return card.kind === 'spec' && card.type === 'Intervention';\n}\n\n// Card power calculation\nexport function getCardPower(card) {\n  if (card.kind === 'pol') {\n    return card.influence; // 🔥 VEREINFACHT: M → influence\n  } else if (card.kind === 'spec') {\n    return card.bp;\n  }\n  return 0;\n}\nexport function getCardInfluence(card) {\n  if (card.kind === 'pol') {\n    return card.influence;\n  }\n  return 0;\n}\n\n// Card effect utilities\nexport function canCardActivateAbility(card) {\n  return !card.deactivated && !card._activeUsed && !card.protected;\n}\nexport function hasCardTag(card, tag) {\n  return card.kind === 'pol' && card.tag === tag;\n}\nexport function isCardProtected(card, currentRound) {\n  var _card$protectedUntil;\n  if (!card.protected) return false;\n  if (card.protectedUntil === null) return true;\n  return ((_card$protectedUntil = card.protectedUntil) !== null && _card$protectedUntil !== void 0 ? _card$protectedUntil : 0) >= currentRound;\n}\n\n// Deck composition analysis\nexport function analyzeDeckComposition(cards) {\n  const politicians = cards.filter(c => c.kind === 'pol').length;\n  const publicCards = cards.filter(c => isPublicCard(c)).length;\n  const initiatives = cards.filter(c => isInitiativeCard(c)).length;\n  const interventions = cards.filter(c => isInterventionCard(c)).length;\n  const totalPower = cards.reduce((sum, card) => sum + getCardPower(card), 0);\n  return {\n    politicians,\n    publicCards,\n    initiatives,\n    interventions,\n    totalPower\n  };\n}","map":{"version":3,"names":["NEXT_UID","makePolInstance","base","_base$BP","id","key","name","kind","baseId","tag","T","BP","influence","effect","protected","protectedUntil","deactivated","tempDebuffs","tempBuffs","uid","_activeUsed","makeSpecInstance","card","type","t","String","toLowerCase","test","impl","bp","effectKey","console","log","isOfficeTag","getAllowedLaneForCard","specCard","isLaneAllowedForCard","lane","laneDisplayName","adjustInfluence","amount","source","oldInfluence","Math","max","findCardLocation","state","player","board","some","c","getCardActionPointCost","_state$effectFlags","baseCost","flags","effectFlags","polCard","freeInitiativeAvailable","ngoInitiativeDiscount","sortHandCards","cards","sort","a","b","localeCompare","isValidCardPlacement","length","alreadyOnBoard","innen","aussen","isPoliticianCard","isSpecialCard","isPublicCard","isGovernmentCard","isInitiativeCard","spec","isInterventionCard","getCardPower","getCardInfluence","canCardActivateAbility","hasCardTag","isCardProtected","currentRound","_card$protectedUntil","analyzeDeckComposition","politicians","filter","publicCards","initiatives","interventions","totalPower","reduce","sum"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/utils/cardUtils.ts"],"sourcesContent":["import { Card, PoliticianCard, SpecialCard, BasePolitician, BaseSpecial, GameState, Lane, Player } from '../types/game';\r\n\r\n// Card instance creation\r\nlet NEXT_UID = 1;\r\n\r\nexport function makePolInstance(base: BasePolitician): PoliticianCard {\r\n  return {\r\n    id: base.id,\r\n    key: base.key,\r\n    name: base.name,\r\n    kind: 'pol',\r\n    baseId: base.id,\r\n    tag: base.tag,\r\n    T: base.T,\r\n    BP: base.BP ?? 0,\r\n    influence: base.influence, // 🔥 VEREINFACHT: Direkt von base.influence, kein M mehr!\r\n    ...(base.effect && { effect: base.effect }), // 🔥 EFFEKT ÜBERTRAGUNG FÜR JOSCHKA FISCHER NGO-BOOST!\r\n    protected: false,\r\n    protectedUntil: null,\r\n    deactivated: false,\r\n    tempDebuffs: 0,\r\n    tempBuffs: 0,\r\n    uid: NEXT_UID++,\r\n    _activeUsed: false,\r\n  } as PoliticianCard;\r\n}\r\n\r\nexport function makeSpecInstance(base: BaseSpecial): SpecialCard {\r\n  const card = {\r\n    id: base.id,\r\n    key: base.key,\r\n    name: base.name,\r\n    kind: 'spec',\r\n    baseId: base.id,\r\n    // Normalize type strings so downstream logic (German/English mixes) recognizes Public cards\r\n    type: ((): string => {\r\n      if (!base.type) return '';\r\n      const t = String(base.type).toLowerCase();\r\n      // Common mappings\r\n      if (t === 'public' || t === 'öffentlichkeitskarte' || t === 'oeffentlichkeitskarte' || t === 'öffentlichkeit') return 'Öffentlichkeitskarte';\r\n      if (/sofort/i.test(base.type) || /initiative/i.test(base.type) || /sofort-?initiative/i.test(base.type)) return base.type; // keep initiative labels as-is\r\n      return base.type;\r\n    })(),\r\n    impl: base.impl,\r\n    bp: base.bp,\r\n    ...(base.effectKey && { effectKey: base.effectKey }),\r\n    ...(base.tag && { tag: base.tag }), // 🔥 TAG ÜBERTRAGUNG FÜR NGO/PLATTFORM DETECTION!\r\n    uid: NEXT_UID++,\r\n    deactivated: false,\r\n  } as SpecialCard;\r\n\r\n  // Debug logging for Bestechungsskandal\r\n  if (base.name === 'Bestechungsskandal 2.0') {\r\n    console.log('🔥 CREATING BESTECHUNGSSKANDAL CARD:', card);\r\n    console.log('🔥 Base effectKey:', base.effectKey);\r\n    console.log('🔥 Card effectKey:', (card as any).effectKey);\r\n  }\r\n\r\n  return card;\r\n}\r\n\r\n// Card placement logic\r\nexport function isOfficeTag(tag: string): boolean {\r\n  return tag === 'Staatsoberhaupt' || tag === 'Regierungschef' || tag === 'Diplomat';\r\n}\r\n\r\nexport function getAllowedLaneForCard(card: Card): Lane | null {\r\n  if (card.kind === 'pol') {\r\n    return isOfficeTag((card as PoliticianCard).tag) ? 'aussen' : 'innen';\r\n  } else if (card.kind === 'spec') {\r\n    const specCard = card as SpecialCard;\r\n    if (specCard.type === 'Öffentlichkeitskarte') {\r\n      return 'innen'; // Public cards go to public row\r\n    }\r\n    // Other special cards (initiatives, interventions) don't have lane restrictions\r\n    return null;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function isLaneAllowedForCard(card: Card, lane: Lane): boolean {\r\n  if (!card || card.kind !== 'pol') return true;\r\n  return getAllowedLaneForCard(card) === lane;\r\n}\r\n\r\nexport function laneDisplayName(lane: Lane): string {\r\n  return lane === 'aussen' ? 'Regierungsreihe' : 'Öffentlichkeitsreihe';\r\n}\r\n\r\n// Card state manipulation\r\nexport function adjustInfluence(card: PoliticianCard, amount: number, source: string): void {\r\n  const oldInfluence = card.influence;\r\n  card.influence = Math.max(0, card.influence + amount);\r\n\r\n  console.log(`[${source}] ${card.name}: ${oldInfluence} → ${card.influence} Einfluss`);\r\n}\r\n\r\nexport function findCardLocation(card: Card, state: GameState): { player: Player; lane: Lane } | null {\r\n  for (const player of [1, 2] as Player[]) {\r\n    for (const lane of ['innen', 'aussen'] as Lane[]) {\r\n      if (state.board[player][lane].some(c => c.uid === card.uid)) {\r\n        return { player, lane };\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n// Action point calculation\r\nexport function getCardActionPointCost(card: Card, state: GameState, player: Player): number {\r\n  if (card.kind !== 'pol' && card.kind !== 'spec') return 1;\r\n\r\n  let baseCost = 1;\r\n  const flags = state.effectFlags?.[player];\r\n\r\n  if (card.kind === 'pol') {\r\n    const polCard = card as PoliticianCard;\r\n    const lane = getAllowedLaneForCard(card);\r\n\r\n    // ⚠️ Keine harte Freistellung mehr für Regierungskarten – Refund-Modell wird in getNetApCost angewandt\r\n  } else if (card.kind === 'spec') {\r\n    const specCard = card as SpecialCard;\r\n\r\n    // Free initiative from leadership\r\n    if (flags?.freeInitiativeAvailable) {\r\n      return 0;\r\n    }\r\n\r\n    // NGO discount\r\n    if (flags?.ngoInitiativeDiscount && flags.ngoInitiativeDiscount > 0) {\r\n      baseCost = Math.max(0, baseCost - flags.ngoInitiativeDiscount);\r\n    }\r\n  }\r\n\r\n  return baseCost;\r\n}\r\n\r\n// Card sorting and filtering\r\nexport function sortHandCards(cards: Card[]): Card[] {\r\n  return [...cards].sort((a, b) => {\r\n    // Politicians first, then specials\r\n    if (a.kind !== b.kind) {\r\n      return a.kind === 'pol' ? -1 : 1;\r\n    }\r\n\r\n    // Within same kind, sort by name\r\n    return a.name.localeCompare(b.name);\r\n  });\r\n}\r\n\r\n// Card validation\r\nexport function isValidCardPlacement(\r\n  card: Card,\r\n  player: Player,\r\n  lane: Lane,\r\n  state: GameState\r\n): boolean {\r\n  // Check lane capacity\r\n  if (state.board[player][lane].length >= 5) return false;\r\n\r\n  // Check lane restrictions\r\n  if (!isLaneAllowedForCard(card, lane)) return false;\r\n\r\n  // Check for duplicate placement\r\n  const alreadyOnBoard = [...state.board[player].innen, ...state.board[player].aussen]\r\n    .some(c => c.uid === card.uid);\r\n  if (alreadyOnBoard) return false;\r\n\r\n  return true;\r\n}\r\n\r\n// Card type checking utilities\r\nexport function isPoliticianCard(card: Card): card is PoliticianCard {\r\n  return card.kind === 'pol';\r\n}\r\n\r\nexport function isSpecialCard(card: Card): card is SpecialCard {\r\n  return card.kind === 'spec';\r\n}\r\n\r\nexport function isPublicCard(card: Card): boolean {\r\n  return card.kind === 'spec' && (card as SpecialCard).type === 'Öffentlichkeitskarte';\r\n}\r\n\r\nexport function isGovernmentCard(card: Card): boolean {\r\n  return card.kind === 'pol';\r\n}\r\n\r\nexport function isInitiativeCard(card: Card): boolean {\r\n  if (card.kind !== 'spec') return false;\r\n  const spec = card as SpecialCard;\r\n  return spec.type === 'Sofort-Initiative' || spec.type === 'Dauerhaft-Initiative';\r\n}\r\n\r\nexport function isInterventionCard(card: Card): boolean {\r\n  return card.kind === 'spec' && (card as SpecialCard).type === 'Intervention';\r\n}\r\n\r\n// Card power calculation\r\nexport function getCardPower(card: Card): number {\r\n  if (card.kind === 'pol') {\r\n    return (card as PoliticianCard).influence; // 🔥 VEREINFACHT: M → influence\r\n  } else if (card.kind === 'spec') {\r\n    return (card as SpecialCard).bp;\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport function getCardInfluence(card: Card): number {\r\n  if (card.kind === 'pol') {\r\n    return (card as PoliticianCard).influence;\r\n  }\r\n  return 0;\r\n}\r\n\r\n// Card effect utilities\r\nexport function canCardActivateAbility(card: PoliticianCard): boolean {\r\n  return !card.deactivated && !card._activeUsed && !card.protected;\r\n}\r\n\r\nexport function hasCardTag(card: Card, tag: string): boolean {\r\n  return card.kind === 'pol' && (card as PoliticianCard).tag === tag;\r\n}\r\n\r\nexport function isCardProtected(card: PoliticianCard, currentRound: number): boolean {\r\n  if (!card.protected) return false;\r\n  if (card.protectedUntil === null) return true;\r\n  return (card.protectedUntil ?? 0) >= currentRound;\r\n}\r\n\r\n// Deck composition analysis\r\nexport function analyzeDeckComposition(cards: Card[]): {\r\n  politicians: number;\r\n  publicCards: number;\r\n  initiatives: number;\r\n  interventions: number;\r\n  totalPower: number;\r\n} {\r\n  const politicians = cards.filter(c => c.kind === 'pol').length;\r\n  const publicCards = cards.filter(c => isPublicCard(c)).length;\r\n  const initiatives = cards.filter(c => isInitiativeCard(c)).length;\r\n  const interventions = cards.filter(c => isInterventionCard(c)).length;\r\n  const totalPower = cards.reduce((sum, card) => sum + getCardPower(card), 0);\r\n\r\n  return {\r\n    politicians,\r\n    publicCards,\r\n    initiatives,\r\n    interventions,\r\n    totalPower\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}