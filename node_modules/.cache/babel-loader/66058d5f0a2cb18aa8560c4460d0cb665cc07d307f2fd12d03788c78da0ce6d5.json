{"ast":null,"code":"import _objectSpread from\"C:/Users/skank/Videos/Cards/Milchcards/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{logger}from'./debug/logger';import{GameCanvas}from'./components/GameCanvas';import{DeckBuilder}from'./components/DeckBuilder';import{GameInfoModal}from'./components/GameInfoModal';import{EventLogModal}from'./components/EventLogModal';import{HandCardModal}from'./components/HandCardModal';import{GameLogModal}from'./components/GameLogModal';import UILayoutEditor from'./components/UILayoutEditor';import CardEffectTestSuite from'./test/CardEffectTestSuite';import{useGameState}from'./hooks/useGameState';import{PRESET_DECKS}from'./data/gameData';import{buildDeckFromEntries}from'./utils/gameUtils';import{copyDebugSnapshotToClipboard,downloadDebugSnapshot}from'./utils/debugExport';import{GameProvider}from'./context/GameContext';import{CardHoverInfoPanel}from'./components/CardHoverInfoPanel';// Temporarily disabled for build\n// import { hasAnyZeroApPlay } from './utils/ap';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppContent(){// Old image atlas/background removed; cards load their own images per file mapping\nconst[deckBuilderOpen,setDeckBuilderOpen]=useState(true);const[gameInfoModalOpen,setGameInfoModalOpen]=useState(true);const[eventLogModalOpen,setEventLogModalOpen]=useState(false);const[handCardModalOpen,setHandCardModalOpen]=useState(false);const[gameLogModalOpen,setGameLogModalOpen]=useState(false);const[hoveredCard,setHoveredCard]=useState(null);// 🔧 DEV MODE: Toggle für lokales Testing ohne KI\nconst[devMode,setDevMode]=useState(false);// UI Layout Editor Route\nconst[currentRoute,setCurrentRoute]=useState('game');const{gameState,selectedHandIndex,log,startMatchWithDecks,startMatchVsAI,playCard,activateInstantInitiative,runAITurn,selectHandCard,passTurn,nextTurn}=useGameState();// No global image preloading required\n// Keyboard shortcuts\nuseEffect(()=>{const handleKeyDown=event=>{if(event.key==='i'||event.key==='I'){setGameInfoModalOpen(!gameInfoModalOpen);}if(event.key==='l'||event.key==='L'){setEventLogModalOpen(!eventLogModalOpen);}if(event.key==='g'||event.key==='G'){setGameLogModalOpen(!gameLogModalOpen);}// 🔧 DEV MODE: Toggle mit 'M' Taste (M für Manual-Mode)\nif(event.key==='m'||event.key==='M'){const newDevMode=!devMode;setDevMode(newDevMode);log(\"\\uD83D\\uDD27 DEV MODE \".concat(newDevMode?'AKTIVIERT':'DEAKTIVIERT',\" - KI ist \").concat(newDevMode?'AUS':'AN'));}// 🔧 DEV MODE: Zusätzliche Controls für manuelles Testen\nif(devMode){// 'P' für Pass (aktueller Spieler)\nif(event.key==='p'||event.key==='P'){passTurn(gameState.current);log(\"\\u23ED\\uFE0F Player \".concat(gameState.current,\" passt\"));}// 'E' für Zug beenden (aktueller Spieler)\nif(event.key==='e'||event.key==='E'){nextTurn();log(\"\\u23ED\\uFE0F Player \".concat(gameState.current,\" beendet Zug\"));}// 'A' für Sofort-Initiative aktivieren (aktueller Spieler)\nif(event.key==='a'||event.key==='A'){activateInstantInitiative(gameState.current);log(\"\\uD83C\\uDFAF Player \".concat(gameState.current,\" aktiviert Sofort-Initiative\"));}}// UI Layout Editor Toggle mit 'U' Taste\nif(event.key==='u'||event.key==='U'){setCurrentRoute(currentRoute==='game'?'ui-editor':'game');}// Test Suite Toggle mit 'T' Taste\nif(event.key==='t'||event.key==='T'){setCurrentRoute(currentRoute==='game'?'test-suite':'game');}// Debug snapshot: Ctrl+D copies to clipboard, Shift+D downloads file\nif((event.key==='d'||event.key==='D')&&event.ctrlKey){copyDebugSnapshotToClipboard(gameState).then(()=>{logger.info('Debug snapshot copied to clipboard');}).catch(()=>{});}if((event.key==='d'||event.key==='D')&&event.shiftKey){downloadDebugSnapshot(gameState);}};window.addEventListener('keydown',handleKeyDown);return()=>window.removeEventListener('keydown',handleKeyDown);},[gameInfoModalOpen,eventLogModalOpen,gameLogModalOpen,devMode,log,gameState,passTurn,nextTurn,currentRoute,activateInstantInitiative]);const handleCardClick=useCallback(data=>{logger.info('🔧 DEBUG: handleCardClick called with:',data);if(!data)return;// Handle game control buttons\nif(data.type==='button_pass_turn'){const currentPlayer=gameState.current;logger.info(\"\\uD83D\\uDD27 DEBUG: button_pass_turn clicked - currentPlayer: \".concat(currentPlayer));log(\"\\uD83C\\uDFAF UI: Passen-Button geklickt - Spieler \".concat(currentPlayer,\" passt\"));log(\"\\uD83D\\uDCCA FLOW: UI \\u2192 passTurn(\".concat(currentPlayer,\") | Button click | Data: { type: \\\"button_pass_turn\\\", current: \").concat(currentPlayer,\" }\"));passTurn(currentPlayer);return;}if(data.type==='button_end_turn'){const currentPlayer=gameState.current;logger.info(\"\\uD83D\\uDD27 DEBUG: button_end_turn clicked - currentPlayer: \".concat(currentPlayer));log(\"\\uD83C\\uDFAF UI: Zug-beenden-Button geklickt - Spieler \".concat(currentPlayer,\" beendet Zug\"));log(\"\\uD83D\\uDCCA FLOW: UI \\u2192 nextTurn() | Button click | Data: { type: \\\"button_end_turn\\\", current: \".concat(currentPlayer,\" }\"));nextTurn();return;}if(data.type==='hand_p1'){if(gameState.current!==1){log('❌ ERROR: Handkarte geklickt aber nicht Spieler-Zug - Current: '+gameState.current);return;}const same=selectedHandIndex===data.index;log('🎯 UI: Handkarte geklickt - '+data.card.name+' (Index: '+data.index+', Selected: '+selectedHandIndex+')');log('📊 FLOW: UI → handleCardClick | Card selection | Data: { card: \"'+data.card.name+'\", index: '+data.index+', same: '+same+' }');if(!same){// Single click → Modal öffnen\nlog('🎯 UI: Handkarte einfach geklickt → öffne Modal - '+data.card.name);setHandCardModalOpen(true);selectHandCard(data.index);}else{// Double click → Karte direkt spielen (Auto-Platzierung)\nconst card=data.card;const currentPlayer=gameState.current;const targetLane=card.kind==='pol'?['Staatsoberhaupt','Regierungschef','Diplomat'].includes(card.tag)?'aussen':'aussen':'innen';log('🎯 UI: Handkarte doppelgeklickt → direkt spielen - '+card.name+' in '+targetLane);playCard(currentPlayer,data.index,targetLane);selectHandCard(null);}return;}// 🔧 DEV MODE: Player 2 Hand Clicks\nif(data.type==='hand_p2'){if(gameState.current!==2){log('❌ ERROR: P2 Handkarte geklickt aber nicht P2-Zug - Current: '+gameState.current);return;}const same=selectedHandIndex===data.index;log('🎯 UI: P2 Handkarte geklickt - '+data.card.name+' (Index: '+data.index+', Selected: '+selectedHandIndex+')');log('📊 FLOW: UI → handleCardClick | P2 Card selection | Data: { card: \"'+data.card.name+'\", index: '+data.index+', same: '+same+' }');if(same){// Double-click to open modal for P2\nlog('🎯 UI: P2 Handkarte doppelgeklickt - '+data.card.name);log('📊 FLOW: UI → setHandCardModalOpen(true) | P2 Double click | Data: { card: \"'+data.card.name+'\" }');setHandCardModalOpen(true);}else{var _data$card$uid,_data$card,_data$card2,_gameState$hands;// Fallback: UI index may not match authoritative state. Prefer UID lookup for P2.\nconst uid=(_data$card$uid=(_data$card=data.card)===null||_data$card===void 0?void 0:_data$card.uid)!==null&&_data$card$uid!==void 0?_data$card$uid:(_data$card2=data.card)===null||_data$card2===void 0?void 0:_data$card2.id;const stateHand=((_gameState$hands=gameState.hands)===null||_gameState$hands===void 0?void 0:_gameState$hands[2])||[];let idxInState=stateHand.findIndex(c=>{var _c$uid;return((_c$uid=c.uid)!==null&&_c$uid!==void 0?_c$uid:c.id)===uid;});if(idxInState===-1){console.warn('[DIAG] P2 hand click: card uid not found in state.hands[2]',{uid,data});log('❌ ERROR: P2 Karte nicht in Hand gefunden - UID: '+uid);window.__politicardDebug=_objectSpread(_objectSpread({},window.__politicardDebug),{},{lastClickMismatch:{ts:Date.now(),uid,data,player:2}});return;}log('🎯 UI: P2 Handkarte ausgewählt - '+data.card.name+' (Index: '+idxInState+')');log('📊 FLOW: UI → selectHandCard('+idxInState+') | P2 Card selection | Data: { card: \"'+data.card.name+'\", stateIndex: '+idxInState+' }');selectHandCard(idxInState);}return;}if(data.type==='row_slot'){var _gameState$hands2;const currentPlayer=gameState.current;if(selectedHandIndex===null){console.log('❌ ERROR: Slot geklickt aber keine Karte ausgewählt');return;}const playerHand=(_gameState$hands2=gameState.hands)===null||_gameState$hands2===void 0?void 0:_gameState$hands2[currentPlayer];if(!playerHand||selectedHandIndex<0||selectedHandIndex>=playerHand.length){console.log('❌ ERROR: Ungültige Hand oder Index - Index: '+selectedHandIndex+', Player: '+currentPlayer+', Hand-Größe: '+((playerHand===null||playerHand===void 0?void 0:playerHand.length)||0));return;}const card=playerHand[selectedHandIndex];if(!card){console.log('❌ ERROR: Ausgewählte Karte nicht gefunden - Index: '+selectedHandIndex+', Player: '+currentPlayer);return;}const lane=data.lane;console.log('🎯 UI: Karte auf Slot gespielt - '+card.name+' nach '+(lane==='aussen'?'Regierungsreihe':'Öffentlichkeitsreihe')+' (Slot '+(data.index+1)+') für Player '+currentPlayer);console.log('📊 FLOW: UI → playCard('+currentPlayer+', '+selectedHandIndex+', \"'+lane+'\") | Card placement | Data: { card: \"'+card.name+'\", lane: \"'+lane+'\", slot: '+(data.index+1)+', player: '+currentPlayer+' }');playCard(currentPlayer,selectedHandIndex,lane);selectHandCard(null);return;}if(data.type==='empty_slot'){var _gameState$hands3;const currentPlayer=gameState.current;const clickedSlotType=data.slot;// Spezielle Behandlung für leere Instant-Slots\nif(clickedSlotType==='instant'){if(selectedHandIndex===null){console.log('ℹ️ INFO: Leerer Sofort-Initiative-Slot geklickt - wähle eine Sofort-Initiative aus der Hand aus');return;}// Fall durch zur normalen Slot-Logik\n}else if(selectedHandIndex===null){console.log('❌ ERROR: Leerer Slot geklickt aber keine Karte ausgewählt');return;}const playerHand=(_gameState$hands3=gameState.hands)===null||_gameState$hands3===void 0?void 0:_gameState$hands3[currentPlayer];if(!playerHand||selectedHandIndex<0||selectedHandIndex>=playerHand.length){console.log('❌ ERROR: Ungültige Hand oder Index - Index: '+selectedHandIndex+', Player: '+currentPlayer+', Hand-Größe: '+((playerHand===null||playerHand===void 0?void 0:playerHand.length)||0));return;}const card=playerHand[selectedHandIndex];if(!card||card.kind!=='spec'){console.log('❌ ERROR: Ausgewählte Karte ist keine Spezialkarte - Kind: '+((card===null||card===void 0?void 0:card.kind)||'null')+', Player: '+currentPlayer);return;}const specCard=card;// Cast to access type property\nconst slotType=data.slot;console.log('🎯 UI: Leerer Slot geklickt - '+card.name+' auf '+slotType);console.log('📊 FLOW: UI → handleCardClick | Empty slot click | Data: { card: \"'+card.name+'\", type: \"'+specCard.type+'\", slot: \"'+slotType+'\" }');// Check if card type matches slot\nif(slotType==='permanent_government'&&specCard.type==='Dauerhaft-Initiative'){// Place permanent initiative in government slot\nconsole.log('🎯 UI: Dauerhafte Initiative in Regierungs-Slot gelegt - '+card.name+' für Player '+currentPlayer);console.log('📊 FLOW: UI → playCard('+currentPlayer+', '+selectedHandIndex+') | Permanent initiative | Data: { card: \"'+card.name+'\", slot: \"government\", player: '+currentPlayer+' }');playCard(currentPlayer,selectedHandIndex);selectHandCard(null);return;}if(slotType==='permanent_public'&&specCard.type==='Dauerhaft-Initiative'){// Place permanent initiative in public slot\nconsole.log('🎯 UI: Dauerhafte Initiative in Öffentlichkeits-Slot gelegt - '+card.name+' für Player '+currentPlayer);console.log('📊 FLOW: UI → playCard('+currentPlayer+', '+selectedHandIndex+') | Permanent initiative | Data: { card: \"'+card.name+'\", slot: \"public\", player: '+currentPlayer+' }');playCard(currentPlayer,selectedHandIndex);selectHandCard(null);return;}if(slotType==='instant'&&specCard.type==='Sofort-Initiative'){// Place instant initiative in sofort slot\nconsole.log('🎯 UI: Sofort-Initiative in Slot gelegt - '+card.name+' für Player '+currentPlayer);console.log('📊 FLOW: UI → playCard('+currentPlayer+', '+selectedHandIndex+') | Instant initiative | Data: { card: \"'+card.name+'\", type: \"Sofort-Initiative\", player: '+currentPlayer+' }');playCard(currentPlayer,selectedHandIndex);selectHandCard(null);return;}console.log('❌ ERROR: Karten-Typ passt nicht zum Slot - Card: '+specCard.type+', Slot: '+slotType);return;}// 🔧 NEU: Sofort-Initiative aus dem Slot aktivieren\nif(data.type==='activate_instant'){const player=data.player;const card=data.card;console.log('🎯 UI: Sofort-Initiative aus Slot aktiviert - '+card.name+' für Player '+player);activateInstantInitiative(player);return;}},[gameState,selectedHandIndex,playCard,selectHandCard,passTurn,nextTurn,log]);const handleCardHover=useCallback(data=>{setHoveredCard(data);},[]);const handleApplyDeck=useCallback(deck=>{const cardDeck=buildDeckFromEntries(deck);console.log('Applied deck:',cardDeck);},[]);const handleStartMatch=useCallback((p1Deck,p2Deck)=>{if(p1Deck&&p1Deck.length>0&&p2Deck&&p2Deck.length>0){startMatchWithDecks(p1Deck,p2Deck);}else if(p1Deck&&p1Deck.length>0){if(devMode){// Dev Mode: Beide Spieler manuell steuern - nutze preset für P2 aber ohne KI\nconst defaultP2Deck=PRESET_DECKS.AUTORITAERER_REALIST;startMatchWithDecks(p1Deck,defaultP2Deck);log('🔧 DEV MODE: Spiel gestartet ohne KI - beide Spieler manuell steuerbar');}else{// Versus AI with a default preset if only P1 provided\nstartMatchVsAI(p1Deck,'AUTORITAERER_REALIST');log('🤖 KI-Spiel gestartet');}}else{// Use default preset decks if no decks are provided\nconst defaultP1Deck=PRESET_DECKS.NEOLIBERAL_TECHNOKRAT;const defaultP2Deck=PRESET_DECKS.AUTORITAERER_REALIST;startMatchWithDecks(defaultP1Deck,defaultP2Deck);log('🎮 Spiel gestartet mit Standard-Decks');}},[startMatchWithDecks,startMatchVsAI,devMode,log]);const handlePlayCardFromModal=useCallback((index,targetSlot)=>{var _gameState$hands4;console.log('🔧 DEBUG: handlePlayCardFromModal called with:',index,targetSlot);const currentPlayer=gameState.current;const playerHand=(_gameState$hands4=gameState.hands)===null||_gameState$hands4===void 0?void 0:_gameState$hands4[currentPlayer];if(!playerHand||index<0||index>=playerHand.length){console.log('❌ DEBUG: Invalid hand or index:',index,'for player:',currentPlayer,'hand size:',(playerHand===null||playerHand===void 0?void 0:playerHand.length)||0);return;}const card=playerHand[index];if(!card){console.log('❌ DEBUG: No card found at index:',index,'for player:',currentPlayer);return;}// effectKey sicherstellen (Legacy-Namen → Keys)\ntry{const{resolveEffectKey}=require('./effects/resolveEffectKey');const k=resolveEffectKey(card.name,card.effectKey);if(k)card.effectKey=k;}catch(_unused){}console.log('🔧 DEBUG: Card found:',card.name,'for player:',currentPlayer);if(targetSlot==='aussen'||targetSlot==='innen'){console.log('🔧 DEBUG: Calling playCard with lane:',targetSlot);playCard(currentPlayer,index,targetSlot);}else{// Handle special slots\nconsole.log('🔧 DEBUG: Calling playCard without lane');log(\"\\uD83C\\uDCCF Player \".concat(currentPlayer,\": \").concat(card.name,\" gespielt in \").concat(targetSlot));// TODO: Implement special slot placement\nplayCard(currentPlayer,index);}selectHandCard(null);// nextTurn() wird jetzt automatisch in playCard aufgerufen wenn nötig\n},[gameState,playCard,selectHandCard,log]);// Auto-run AI turn whenever it's AI's turn (nur wenn nicht im Dev Mode)\nuseEffect(()=>{var _gameState$aiEnabled;if(gameState.current===2&&!devMode&&(_gameState$aiEnabled=gameState.aiEnabled)!==null&&_gameState$aiEnabled!==void 0&&_gameState$aiEnabled[2]){const t=setTimeout(()=>runAITurn(),120);return()=>clearTimeout(t);}},[gameState,runAITurn,devMode]);// Old renderTooltip removed; using CardHoverInfoPanel component instead.\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{margin:0,padding:0,background:'#0b0f14',color:'#e8f0f8',fontFamily:'ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, \"Apple Color Emoji\", \"Segoe UI Emoji\"',height:'100vh',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:'10px',left:'10px',zIndex:1001,display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentRoute('game'),style:{background:currentRoute==='game'?'#3b82f6':'#374151',color:'white',border:'none',padding:'8px 12px',borderRadius:'6px',fontSize:'12px',fontWeight:600,cursor:'pointer'},children:\"\\uD83C\\uDFAE Game\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentRoute('ui-editor'),style:{background:currentRoute==='ui-editor'?'#3b82f6':'#374151',color:'white',border:'none',padding:'8px 12px',borderRadius:'6px',fontSize:'12px',fontWeight:600,cursor:'pointer'},children:\"\\uD83C\\uDFA8 UI Editor\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentRoute('test-suite'),style:{background:currentRoute==='test-suite'?'#3b82f6':'#374151',color:'white',border:'none',padding:'8px 12px',borderRadius:'6px',fontSize:'12px',fontWeight:600,cursor:'pointer'},children:\"\\uD83E\\uDDEA Test Suite\"})]}),currentRoute==='ui-editor'?/*#__PURE__*/_jsx(UILayoutEditor,{}):currentRoute==='test-suite'?/*#__PURE__*/_jsx(CardEffectTestSuite,{}):/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',inset:0,display:'grid',gridTemplateRows:'1fr',gap:0,padding:0},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',overflow:'hidden',background:'#0e141b'},children:[/*#__PURE__*/_jsx(GameCanvas,{gameState:gameState,selectedHandIndex:selectedHandIndex,onCardClick:handleCardClick,onCardHover:handleCardHover,devMode:devMode}),/*#__PURE__*/_jsx(DeckBuilder,{isOpen:deckBuilderOpen,onClose:()=>setDeckBuilderOpen(false),onApplyDeck:handleApplyDeck,onStartMatch:handleStartMatch}),!deckBuilderOpen&&/*#__PURE__*/_jsx(GameInfoModal,{gameState:gameState,isVisible:gameInfoModalOpen,onToggle:()=>setGameInfoModalOpen(!gameInfoModalOpen),onPassTurn:passTurn,onToggleLog:()=>setGameLogModalOpen(!gameLogModalOpen),onCardClick:handleCardClick,devMode:devMode}),!deckBuilderOpen&&/*#__PURE__*/_jsx(EventLogModal,{gameState:gameState,isVisible:eventLogModalOpen,onToggle:()=>setEventLogModalOpen(!eventLogModalOpen)}),!deckBuilderOpen&&/*#__PURE__*/_jsx(HandCardModal,{gameState:gameState,selectedHandIndex:selectedHandIndex,isVisible:handCardModalOpen,onClose:()=>setHandCardModalOpen(false),onPlayCard:handlePlayCardFromModal}),!deckBuilderOpen&&/*#__PURE__*/_jsx(GameLogModal,{gameState:gameState,isVisible:gameLogModalOpen,onToggle:()=>setGameLogModalOpen(!gameLogModalOpen)}),/*#__PURE__*/_jsx(CardHoverInfoPanel,{hovered:hoveredCard}),devMode&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:'10px',right:'10px',background:'#ff6b35',color:'white',padding:'8px 12px',borderRadius:'6px',fontSize:'12px',fontWeight:600,boxShadow:'0 2px 8px rgba(0, 0, 0, 0.3)',zIndex:1000},children:\"\\uD83D\\uDD27 DEV MODE - KI AUS\"}),devMode&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:'60px',right:'10px',background:gameState.current===1?'#4ade80':'#ef4444',color:'white',padding:'12px 16px',borderRadius:'8px',fontSize:'16px',fontWeight:700,boxShadow:'0 2px 8px rgba(0, 0, 0, 0.3)',zIndex:1000,border:'2px solid rgba(255, 255, 255, 0.3)'},children:[\"\\uD83C\\uDFAE Player \",gameState.current,\" am Zug\",/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',fontWeight:400,opacity:0.9,marginTop:'4px'},children:[\"AP: \",gameState.actionPoints[gameState.current]]})]})]})})]});}function App(){return/*#__PURE__*/_jsx(GameProvider,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","logger","GameCanvas","DeckBuilder","GameInfoModal","EventLogModal","HandCardModal","GameLogModal","UILayoutEditor","CardEffectTestSuite","useGameState","PRESET_DECKS","buildDeckFromEntries","copyDebugSnapshotToClipboard","downloadDebugSnapshot","GameProvider","CardHoverInfoPanel","jsx","_jsx","jsxs","_jsxs","AppContent","deckBuilderOpen","setDeckBuilderOpen","gameInfoModalOpen","setGameInfoModalOpen","eventLogModalOpen","setEventLogModalOpen","handCardModalOpen","setHandCardModalOpen","gameLogModalOpen","setGameLogModalOpen","hoveredCard","setHoveredCard","devMode","setDevMode","currentRoute","setCurrentRoute","gameState","selectedHandIndex","log","startMatchWithDecks","startMatchVsAI","playCard","activateInstantInitiative","runAITurn","selectHandCard","passTurn","nextTurn","handleKeyDown","event","key","newDevMode","concat","current","ctrlKey","then","info","catch","shiftKey","window","addEventListener","removeEventListener","handleCardClick","data","type","currentPlayer","same","index","card","name","targetLane","kind","includes","tag","_data$card$uid","_data$card","_data$card2","_gameState$hands","uid","id","stateHand","hands","idxInState","findIndex","c","_c$uid","console","warn","__politicardDebug","_objectSpread","lastClickMismatch","ts","Date","now","player","_gameState$hands2","playerHand","length","lane","_gameState$hands3","clickedSlotType","slot","specCard","slotType","handleCardHover","handleApplyDeck","deck","cardDeck","handleStartMatch","p1Deck","p2Deck","defaultP2Deck","AUTORITAERER_REALIST","defaultP1Deck","NEOLIBERAL_TECHNOKRAT","handlePlayCardFromModal","targetSlot","_gameState$hands4","resolveEffectKey","require","k","effectKey","_unused","_gameState$aiEnabled","aiEnabled","t","setTimeout","clearTimeout","style","margin","padding","background","color","fontFamily","height","overflow","children","position","top","left","zIndex","display","gap","onClick","border","borderRadius","fontSize","fontWeight","cursor","inset","gridTemplateRows","onCardClick","onCardHover","isOpen","onClose","onApplyDeck","onStartMatch","isVisible","onToggle","onPassTurn","onToggleLog","onPlayCard","hovered","right","boxShadow","opacity","marginTop","actionPoints","App"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { logger } from './debug/logger';\r\nimport { GameCanvas } from './components/GameCanvas';\r\nimport { DeckBuilder } from './components/DeckBuilder';\r\nimport { GameInfoModal } from './components/GameInfoModal';\r\nimport { EventLogModal } from './components/EventLogModal';\r\nimport { HandCardModal } from './components/HandCardModal';\r\nimport { GameLogModal } from './components/GameLogModal';\r\nimport UILayoutEditor from './components/UILayoutEditor';\r\nimport CardEffectTestSuite from './test/CardEffectTestSuite';\r\nimport { useGameState } from './hooks/useGameState';\r\nimport { BuilderEntry, PoliticianCard, Player } from './types/game';\r\nimport { Specials, PRESET_DECKS, Pols } from './data/gameData';\r\nimport { buildDeckFromEntries } from './utils/gameUtils';\r\nimport { copyDebugSnapshotToClipboard, downloadDebugSnapshot } from './utils/debugExport';\r\nimport { GameProvider } from './context/GameContext';\r\nimport { getCardDetails } from './data/cardDetails';\r\nimport { CardHoverInfoPanel } from './components/CardHoverInfoPanel';\r\n// Temporarily disabled for build\r\n// import { hasAnyZeroApPlay } from './utils/ap';\r\n\r\nfunction AppContent() {\r\n  // Old image atlas/background removed; cards load their own images per file mapping\r\n\r\n  const [deckBuilderOpen, setDeckBuilderOpen] = useState(true);\r\n  const [gameInfoModalOpen, setGameInfoModalOpen] = useState(true);\r\n  const [eventLogModalOpen, setEventLogModalOpen] = useState(false);\r\n  const [handCardModalOpen, setHandCardModalOpen] = useState(false);\r\n  const [gameLogModalOpen, setGameLogModalOpen] = useState(false);\r\n  const [hoveredCard, setHoveredCard] = useState<any>(null);\r\n\r\n  // 🔧 DEV MODE: Toggle für lokales Testing ohne KI\r\n  const [devMode, setDevMode] = useState(false);\r\n\r\n  // UI Layout Editor Route\r\n  const [currentRoute, setCurrentRoute] = useState<'game' | 'ui-editor' | 'test-suite'>('game');\r\n\r\n  const {\r\n    gameState,\r\n    selectedHandIndex,\r\n    log,\r\n    startMatchWithDecks,\r\n    startMatchVsAI,\r\n    playCard,\r\n    activateInstantInitiative,\r\n    runAITurn,\r\n    selectHandCard,\r\n    passTurn,\r\n    nextTurn,\r\n  } = useGameState();\r\n\r\n  // No global image preloading required\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === 'i' || event.key === 'I') {\r\n        setGameInfoModalOpen(!gameInfoModalOpen);\r\n      }\r\n      if (event.key === 'l' || event.key === 'L') {\r\n        setEventLogModalOpen(!eventLogModalOpen);\r\n      }\r\n      if (event.key === 'g' || event.key === 'G') {\r\n        setGameLogModalOpen(!gameLogModalOpen);\r\n      }\r\n      // 🔧 DEV MODE: Toggle mit 'M' Taste (M für Manual-Mode)\r\n      if (event.key === 'm' || event.key === 'M') {\r\n        const newDevMode = !devMode;\r\n        setDevMode(newDevMode);\r\n        log(`🔧 DEV MODE ${newDevMode ? 'AKTIVIERT' : 'DEAKTIVIERT'} - KI ist ${newDevMode ? 'AUS' : 'AN'}`);\r\n      }\r\n      // 🔧 DEV MODE: Zusätzliche Controls für manuelles Testen\r\n      if (devMode) {\r\n        // 'P' für Pass (aktueller Spieler)\r\n        if (event.key === 'p' || event.key === 'P') {\r\n          passTurn(gameState.current);\r\n          log(`⏭️ Player ${gameState.current} passt`);\r\n        }\r\n\r\n        // 'E' für Zug beenden (aktueller Spieler)\r\n        if (event.key === 'e' || event.key === 'E') {\r\n          nextTurn();\r\n          log(`⏭️ Player ${gameState.current} beendet Zug`);\r\n        }\r\n\r\n        // 'A' für Sofort-Initiative aktivieren (aktueller Spieler)\r\n        if (event.key === 'a' || event.key === 'A') {\r\n          activateInstantInitiative(gameState.current);\r\n          log(`🎯 Player ${gameState.current} aktiviert Sofort-Initiative`);\r\n        }\r\n      }\r\n\r\n      // UI Layout Editor Toggle mit 'U' Taste\r\n      if (event.key === 'u' || event.key === 'U') {\r\n        setCurrentRoute(currentRoute === 'game' ? 'ui-editor' : 'game');\r\n      }\r\n\r\n      // Test Suite Toggle mit 'T' Taste\r\n      if (event.key === 't' || event.key === 'T') {\r\n        setCurrentRoute(currentRoute === 'game' ? 'test-suite' : 'game');\r\n      }\r\n\r\n      // Debug snapshot: Ctrl+D copies to clipboard, Shift+D downloads file\r\n      if ((event.key === 'd' || event.key === 'D') && event.ctrlKey) {\r\n        copyDebugSnapshotToClipboard(gameState).then(() => {\r\n          logger.info('Debug snapshot copied to clipboard');\r\n        }).catch(() => {});\r\n      }\r\n      if ((event.key === 'd' || event.key === 'D') && event.shiftKey) {\r\n        downloadDebugSnapshot(gameState);\r\n      }\r\n\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [gameInfoModalOpen, eventLogModalOpen, gameLogModalOpen, devMode, log, gameState, passTurn, nextTurn, currentRoute, activateInstantInitiative]);\r\n\r\n  const handleCardClick = useCallback((data: any) => {\r\n    logger.info('🔧 DEBUG: handleCardClick called with:', data);\r\n    if (!data) return;\r\n\r\n    // Handle game control buttons\r\n\r\n\r\n    if (data.type === 'button_pass_turn') {\r\n      const currentPlayer = gameState.current;\r\n      logger.info(`🔧 DEBUG: button_pass_turn clicked - currentPlayer: ${currentPlayer}`);\r\n      log(`🎯 UI: Passen-Button geklickt - Spieler ${currentPlayer} passt`);\r\n      log(`📊 FLOW: UI → passTurn(${currentPlayer}) | Button click | Data: { type: \"button_pass_turn\", current: ${currentPlayer} }`);\r\n      passTurn(currentPlayer);\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'button_end_turn') {\r\n      const currentPlayer = gameState.current;\r\n      logger.info(`🔧 DEBUG: button_end_turn clicked - currentPlayer: ${currentPlayer}`);\r\n      log(`🎯 UI: Zug-beenden-Button geklickt - Spieler ${currentPlayer} beendet Zug`);\r\n      log(`📊 FLOW: UI → nextTurn() | Button click | Data: { type: \"button_end_turn\", current: ${currentPlayer} }`);\r\n      nextTurn();\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    if (data.type === 'hand_p1') {\r\n      if (gameState.current !== 1) {\r\n        log('❌ ERROR: Handkarte geklickt aber nicht Spieler-Zug - Current: ' + gameState.current);\r\n        return;\r\n      }\r\n\r\n      const same = selectedHandIndex === data.index;\r\n      log('🎯 UI: Handkarte geklickt - ' + data.card.name + ' (Index: ' + data.index + ', Selected: ' + selectedHandIndex + ')');\r\n      log('📊 FLOW: UI → handleCardClick | Card selection | Data: { card: \"' + data.card.name + '\", index: ' + data.index + ', same: ' + same + ' }');\r\n\r\n      if (!same) {\r\n        // Single click → Modal öffnen\r\n        log('🎯 UI: Handkarte einfach geklickt → öffne Modal - ' + data.card.name);\r\n        setHandCardModalOpen(true);\r\n        selectHandCard(data.index);\r\n      } else {\r\n        // Double click → Karte direkt spielen (Auto-Platzierung)\r\n        const card: any = data.card;\r\n        const currentPlayer = gameState.current;\r\n        const targetLane = card.kind === 'pol' ? (['Staatsoberhaupt','Regierungschef','Diplomat'].includes(card.tag) ? 'aussen' : 'aussen') : 'innen';\r\n        log('🎯 UI: Handkarte doppelgeklickt → direkt spielen - ' + card.name + ' in ' + targetLane);\r\n        playCard(currentPlayer, data.index, targetLane);\r\n        selectHandCard(null);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // 🔧 DEV MODE: Player 2 Hand Clicks\r\n    if (data.type === 'hand_p2') {\r\n      if (gameState.current !== 2) {\r\n        log('❌ ERROR: P2 Handkarte geklickt aber nicht P2-Zug - Current: ' + gameState.current);\r\n        return;\r\n      }\r\n\r\n      const same = selectedHandIndex === data.index;\r\n      log('🎯 UI: P2 Handkarte geklickt - ' + data.card.name + ' (Index: ' + data.index + ', Selected: ' + selectedHandIndex + ')');\r\n      log('📊 FLOW: UI → handleCardClick | P2 Card selection | Data: { card: \"' + data.card.name + '\", index: ' + data.index + ', same: ' + same + ' }');\r\n\r\n      if (same) {\r\n        // Double-click to open modal for P2\r\n        log('🎯 UI: P2 Handkarte doppelgeklickt - ' + data.card.name);\r\n        log('📊 FLOW: UI → setHandCardModalOpen(true) | P2 Double click | Data: { card: \"' + data.card.name + '\" }');\r\n        setHandCardModalOpen(true);\r\n      } else {\r\n        // Fallback: UI index may not match authoritative state. Prefer UID lookup for P2.\r\n        const uid = data.card?.uid ?? data.card?.id;\r\n        const stateHand = gameState.hands?.[2] || [];\r\n        let idxInState = stateHand.findIndex((c: any) => (c.uid ?? c.id) === uid);\r\n\r\n        if (idxInState === -1) {\r\n          console.warn('[DIAG] P2 hand click: card uid not found in state.hands[2]', { uid, data });\r\n          log('❌ ERROR: P2 Karte nicht in Hand gefunden - UID: ' + uid);\r\n          (window as any).__politicardDebug = {\r\n            ...(window as any).__politicardDebug,\r\n            lastClickMismatch: { ts: Date.now(), uid, data, player: 2 }\r\n          };\r\n          return;\r\n        }\r\n\r\n        log('🎯 UI: P2 Handkarte ausgewählt - ' + data.card.name + ' (Index: ' + idxInState + ')');\r\n        log('📊 FLOW: UI → selectHandCard(' + idxInState + ') | P2 Card selection | Data: { card: \"' + data.card.name + '\", stateIndex: ' + idxInState + ' }');\r\n        selectHandCard(idxInState);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'row_slot') {\r\n      const currentPlayer = gameState.current;\r\n      if (selectedHandIndex === null) {\r\n        console.log('❌ ERROR: Slot geklickt aber keine Karte ausgewählt');\r\n        return;\r\n      }\r\n\r\n      const playerHand = gameState.hands?.[currentPlayer];\r\n      if (!playerHand || selectedHandIndex < 0 || selectedHandIndex >= playerHand.length) {\r\n        console.log('❌ ERROR: Ungültige Hand oder Index - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer + ', Hand-Größe: ' + (playerHand?.length || 0));\r\n        return;\r\n      }\r\n\r\n      const card = playerHand[selectedHandIndex];\r\n      if (!card) {\r\n        console.log('❌ ERROR: Ausgewählte Karte nicht gefunden - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer);\r\n        return;\r\n      }\r\n\r\n      const lane = data.lane;\r\n      console.log('🎯 UI: Karte auf Slot gespielt - ' + card.name + ' nach ' + (lane === 'aussen' ? 'Regierungsreihe' : 'Öffentlichkeitsreihe') + ' (Slot ' + (data.index + 1) + ') für Player ' + currentPlayer);\r\n      console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ', \"' + lane + '\") | Card placement | Data: { card: \"' + card.name + '\", lane: \"' + lane + '\", slot: ' + (data.index + 1) + ', player: ' + currentPlayer + ' }');\r\n      playCard(currentPlayer, selectedHandIndex, lane);\r\n      selectHandCard(null);\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'empty_slot') {\r\n      const currentPlayer = gameState.current;\r\n      const clickedSlotType = data.slot;\r\n\r\n      // Spezielle Behandlung für leere Instant-Slots\r\n      if (clickedSlotType === 'instant') {\r\n        if (selectedHandIndex === null) {\r\n          console.log('ℹ️ INFO: Leerer Sofort-Initiative-Slot geklickt - wähle eine Sofort-Initiative aus der Hand aus');\r\n          return;\r\n        }\r\n        // Fall durch zur normalen Slot-Logik\r\n      } else if (selectedHandIndex === null) {\r\n        console.log('❌ ERROR: Leerer Slot geklickt aber keine Karte ausgewählt');\r\n        return;\r\n      }\r\n\r\n      const playerHand = gameState.hands?.[currentPlayer];\r\n      if (!playerHand || selectedHandIndex < 0 || selectedHandIndex >= playerHand.length) {\r\n        console.log('❌ ERROR: Ungültige Hand oder Index - Index: ' + selectedHandIndex + ', Player: ' + currentPlayer + ', Hand-Größe: ' + (playerHand?.length || 0));\r\n        return;\r\n      }\r\n\r\n      const card = playerHand[selectedHandIndex];\r\n      if (!card || card.kind !== 'spec') {\r\n        console.log('❌ ERROR: Ausgewählte Karte ist keine Spezialkarte - Kind: ' + (card?.kind || 'null') + ', Player: ' + currentPlayer);\r\n        return;\r\n      }\r\n\r\n      const specCard = card as any; // Cast to access type property\r\n      const slotType = data.slot;\r\n\r\n      console.log('🎯 UI: Leerer Slot geklickt - ' + card.name + ' auf ' + slotType);\r\n      console.log('📊 FLOW: UI → handleCardClick | Empty slot click | Data: { card: \"' + card.name + '\", type: \"' + specCard.type + '\", slot: \"' + slotType + '\" }');\r\n\r\n      // Check if card type matches slot\r\n      if (slotType === 'permanent_government' && specCard.type === 'Dauerhaft-Initiative') {\r\n        // Place permanent initiative in government slot\r\n        console.log('🎯 UI: Dauerhafte Initiative in Regierungs-Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\r\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Permanent initiative | Data: { card: \"' + card.name + '\", slot: \"government\", player: ' + currentPlayer + ' }');\r\n        playCard(currentPlayer, selectedHandIndex);\r\n        selectHandCard(null);\r\n        return;\r\n      }\r\n\r\n      if (slotType === 'permanent_public' && specCard.type === 'Dauerhaft-Initiative') {\r\n        // Place permanent initiative in public slot\r\n        console.log('🎯 UI: Dauerhafte Initiative in Öffentlichkeits-Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\r\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Permanent initiative | Data: { card: \"' + card.name + '\", slot: \"public\", player: ' + currentPlayer + ' }');\r\n        playCard(currentPlayer, selectedHandIndex);\r\n        selectHandCard(null);\r\n        return;\r\n      }\r\n\r\n      if (slotType === 'instant' && specCard.type === 'Sofort-Initiative') {\r\n        // Place instant initiative in sofort slot\r\n        console.log('🎯 UI: Sofort-Initiative in Slot gelegt - ' + card.name + ' für Player ' + currentPlayer);\r\n        console.log('📊 FLOW: UI → playCard(' + currentPlayer + ', ' + selectedHandIndex + ') | Instant initiative | Data: { card: \"' + card.name + '\", type: \"Sofort-Initiative\", player: ' + currentPlayer + ' }');\r\n        playCard(currentPlayer, selectedHandIndex);\r\n        selectHandCard(null);\r\n        return;\r\n      }\r\n\r\n      console.log('❌ ERROR: Karten-Typ passt nicht zum Slot - Card: ' + specCard.type + ', Slot: ' + slotType);\r\n      return;\r\n    }\r\n\r\n    // 🔧 NEU: Sofort-Initiative aus dem Slot aktivieren\r\n    if (data.type === 'activate_instant') {\r\n      const player = data.player as Player;\r\n      const card = data.card;\r\n      console.log('🎯 UI: Sofort-Initiative aus Slot aktiviert - ' + card.name + ' für Player ' + player);\r\n      activateInstantInitiative(player);\r\n      return;\r\n    }\r\n  }, [gameState, selectedHandIndex, playCard, selectHandCard, passTurn, nextTurn, log]);\r\n\r\n  const handleCardHover = useCallback((data: any) => {\r\n    setHoveredCard(data);\r\n  }, []);\r\n\r\n  const handleApplyDeck = useCallback((deck: BuilderEntry[]) => {\r\n    const cardDeck = buildDeckFromEntries(deck);\r\n    console.log('Applied deck:', cardDeck);\r\n  }, []);\r\n\r\n  const handleStartMatch = useCallback((p1Deck: BuilderEntry[], p2Deck: BuilderEntry[]) => {\r\n    if (p1Deck && p1Deck.length > 0 && p2Deck && p2Deck.length > 0) {\r\n      startMatchWithDecks(p1Deck, p2Deck);\r\n    } else if (p1Deck && p1Deck.length > 0) {\r\n      if (devMode) {\r\n        // Dev Mode: Beide Spieler manuell steuern - nutze preset für P2 aber ohne KI\r\n        const defaultP2Deck = PRESET_DECKS.AUTORITAERER_REALIST as BuilderEntry[];\r\n        startMatchWithDecks(p1Deck, defaultP2Deck);\r\n        log('🔧 DEV MODE: Spiel gestartet ohne KI - beide Spieler manuell steuerbar');\r\n      } else {\r\n        // Versus AI with a default preset if only P1 provided\r\n        startMatchVsAI(p1Deck, 'AUTORITAERER_REALIST');\r\n        log('🤖 KI-Spiel gestartet');\r\n      }\r\n    } else {\r\n      // Use default preset decks if no decks are provided\r\n      const defaultP1Deck = PRESET_DECKS.NEOLIBERAL_TECHNOKRAT as BuilderEntry[];\r\n      const defaultP2Deck = PRESET_DECKS.AUTORITAERER_REALIST as BuilderEntry[];\r\n      startMatchWithDecks(defaultP1Deck, defaultP2Deck);\r\n      log('🎮 Spiel gestartet mit Standard-Decks');\r\n    }\r\n  }, [startMatchWithDecks, startMatchVsAI, devMode, log]);\r\n\r\n  const handlePlayCardFromModal = useCallback((index: number, targetSlot?: string) => {\r\n    console.log('🔧 DEBUG: handlePlayCardFromModal called with:', index, targetSlot);\r\n    const currentPlayer = gameState.current;\r\n    const playerHand = gameState.hands?.[currentPlayer];\r\n    if (!playerHand || index < 0 || index >= playerHand.length) {\r\n      console.log('❌ DEBUG: Invalid hand or index:', index, 'for player:', currentPlayer, 'hand size:', (playerHand?.length || 0));\r\n      return;\r\n    }\r\n\r\n    const card = playerHand[index];\r\n    if (!card) {\r\n      console.log('❌ DEBUG: No card found at index:', index, 'for player:', currentPlayer);\r\n      return;\r\n    }\r\n\r\n    // effectKey sicherstellen (Legacy-Namen → Keys)\r\n    try {\r\n      const { resolveEffectKey } = require('./effects/resolveEffectKey');\r\n      const k = resolveEffectKey(card.name, (card as any).effectKey);\r\n      if (k) (card as any).effectKey = k;\r\n    } catch {}\r\n\r\n    console.log('🔧 DEBUG: Card found:', card.name, 'for player:', currentPlayer);\r\n\r\n    if (targetSlot === 'aussen' || targetSlot === 'innen') {\r\n      console.log('🔧 DEBUG: Calling playCard with lane:', targetSlot);\r\n      playCard(currentPlayer, index, targetSlot as any);\r\n    } else {\r\n      // Handle special slots\r\n      console.log('🔧 DEBUG: Calling playCard without lane');\r\n      log(`🃏 Player ${currentPlayer}: ${card.name} gespielt in ${targetSlot}`);\r\n      // TODO: Implement special slot placement\r\n      playCard(currentPlayer, index);\r\n    }\r\n\r\n    selectHandCard(null);\r\n    // nextTurn() wird jetzt automatisch in playCard aufgerufen wenn nötig\r\n  }, [gameState, playCard, selectHandCard, log]);\r\n\r\n  // Auto-run AI turn whenever it's AI's turn (nur wenn nicht im Dev Mode)\r\n  useEffect(() => {\r\n    if (gameState.current === 2 && !devMode && gameState.aiEnabled?.[2]) {\r\n      const t = setTimeout(() => runAITurn(), 120);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [gameState, runAITurn, devMode]);\r\n\r\n\r\n\r\n  // Old renderTooltip removed; using CardHoverInfoPanel component instead.\r\n\r\n  return (\r\n    <div style={{\r\n      margin: 0,\r\n      padding: 0,\r\n      background: '#0b0f14',\r\n      color: '#e8f0f8',\r\n      fontFamily: 'ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, \"Apple Color Emoji\", \"Segoe UI Emoji\"',\r\n      height: '100vh',\r\n      overflow: 'hidden',\r\n    }}>\r\n      {/* Route Navigation */}\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: '10px',\r\n        left: '10px',\r\n        zIndex: 1001,\r\n        display: 'flex',\r\n        gap: '8px',\r\n      }}>\r\n        <button\r\n          onClick={() => setCurrentRoute('game')}\r\n          style={{\r\n            background: currentRoute === 'game' ? '#3b82f6' : '#374151',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 12px',\r\n            borderRadius: '6px',\r\n            fontSize: '12px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          🎮 Game\r\n        </button>\r\n        <button\r\n          onClick={() => setCurrentRoute('ui-editor')}\r\n          style={{\r\n            background: currentRoute === 'ui-editor' ? '#3b82f6' : '#374151',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 12px',\r\n            borderRadius: '6px',\r\n            fontSize: '12px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          🎨 UI Editor\r\n        </button>\r\n        <button\r\n          onClick={() => setCurrentRoute('test-suite')}\r\n          style={{\r\n            background: currentRoute === 'test-suite' ? '#3b82f6' : '#374151',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 12px',\r\n            borderRadius: '6px',\r\n            fontSize: '12px',\r\n            fontWeight: 600,\r\n            cursor: 'pointer',\r\n          }}\r\n        >\r\n          🧪 Test Suite\r\n        </button>\r\n      </div>\r\n\r\n      {currentRoute === 'ui-editor' ? (\r\n        <UILayoutEditor />\r\n      ) : currentRoute === 'test-suite' ? (\r\n        <CardEffectTestSuite />\r\n      ) : (\r\n        <div style={{\r\n          position: 'fixed',\r\n          inset: 0,\r\n          display: 'grid',\r\n          gridTemplateRows: '1fr',\r\n          gap: 0,\r\n          padding: 0,\r\n        }}>\r\n          <div style={{\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n            background: '#0e141b',\r\n          }}>\r\n            <GameCanvas\r\n              gameState={gameState}\r\n              selectedHandIndex={selectedHandIndex}\r\n              onCardClick={handleCardClick}\r\n              onCardHover={handleCardHover}\r\n              devMode={devMode}\r\n            />\r\n\r\n            <DeckBuilder\r\n              isOpen={deckBuilderOpen}\r\n              onClose={() => setDeckBuilderOpen(false)}\r\n              onApplyDeck={handleApplyDeck}\r\n              onStartMatch={handleStartMatch}\r\n            />\r\n\r\n            {!deckBuilderOpen && (\r\n              <GameInfoModal\r\n                gameState={gameState}\r\n                isVisible={gameInfoModalOpen}\r\n                onToggle={() => setGameInfoModalOpen(!gameInfoModalOpen)}\r\n                onPassTurn={passTurn}\r\n                onToggleLog={() => setGameLogModalOpen(!gameLogModalOpen)}\r\n                onCardClick={handleCardClick}\r\n                devMode={devMode}\r\n              />\r\n            )}\r\n\r\n            {!deckBuilderOpen && (\r\n              <EventLogModal\r\n                gameState={gameState}\r\n                isVisible={eventLogModalOpen}\r\n                onToggle={() => setEventLogModalOpen(!eventLogModalOpen)}\r\n              />\r\n            )}\r\n\r\n            {!deckBuilderOpen && (\r\n              <HandCardModal\r\n                gameState={gameState}\r\n                selectedHandIndex={selectedHandIndex}\r\n                isVisible={handCardModalOpen}\r\n                onClose={() => setHandCardModalOpen(false)}\r\n                onPlayCard={handlePlayCardFromModal}\r\n              />\r\n            )}\r\n\r\n            {!deckBuilderOpen && (\r\n              <GameLogModal\r\n                gameState={gameState}\r\n                isVisible={gameLogModalOpen}\r\n                onToggle={() => setGameLogModalOpen(!gameLogModalOpen)}\r\n              />\r\n            )}\r\n\r\n            <CardHoverInfoPanel hovered={hoveredCard} />\r\n\r\n            {/* 🔧 DEV MODE Indikator */}\r\n            {devMode && (\r\n              <div style={{\r\n                position: 'fixed',\r\n                top: '10px',\r\n                right: '10px',\r\n                background: '#ff6b35',\r\n                color: 'white',\r\n                padding: '8px 12px',\r\n                borderRadius: '6px',\r\n                fontSize: '12px',\r\n                fontWeight: 600,\r\n                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\r\n                zIndex: 1000,\r\n              }}>\r\n                🔧 DEV MODE - KI AUS\r\n              </div>\r\n            )}\r\n\r\n          {/* 🎯 Current Player Indicator (immer sichtbar im Dev Mode) */}\r\n          {devMode && (\r\n            <div style={{\r\n              position: 'fixed',\r\n              top: '60px',\r\n              right: '10px',\r\n              background: gameState.current === 1 ? '#4ade80' : '#ef4444',\r\n              color: 'white',\r\n              padding: '12px 16px',\r\n              borderRadius: '8px',\r\n              fontSize: '16px',\r\n              fontWeight: 700,\r\n              boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\r\n              zIndex: 1000,\r\n              border: '2px solid rgba(255, 255, 255, 0.3)',\r\n            }}>\r\n              🎮 Player {gameState.current} am Zug\r\n              <div style={{\r\n                fontSize: '11px',\r\n                fontWeight: 400,\r\n                opacity: 0.9,\r\n                marginTop: '4px',\r\n              }}>\r\n                AP: {gameState.actionPoints[gameState.current]}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <GameProvider>\r\n      <AppContent />\r\n    </GameProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}