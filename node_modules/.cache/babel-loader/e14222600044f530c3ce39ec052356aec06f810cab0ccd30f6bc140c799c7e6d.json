{"ast":null,"code":"// Card instance creation\nlet NEXT_UID = 1;\nexport function makePolInstance(base) {\n  var _base$BP;\n  return {\n    id: base.id,\n    key: base.key,\n    name: base.name,\n    kind: 'pol',\n    baseId: base.id,\n    tag: base.tag,\n    T: base.T,\n    BP: (_base$BP = base.BP) !== null && _base$BP !== void 0 ? _base$BP : 0,\n    influence: base.influence,\n    // ðŸ”¥ VEREINFACHT: Direkt von base.influence, kein M mehr!\n    ...(base.effect && {\n      effect: base.effect\n    }),\n    // ðŸ”¥ EFFEKT ÃœBERTRAGUNG FÃœR JOSCHKA FISCHER NGO-BOOST!\n    protected: false,\n    protectedUntil: null,\n    deactivated: false,\n    tempDebuffs: 0,\n    tempBuffs: 0,\n    uid: NEXT_UID++,\n    _activeUsed: false\n  };\n}\nexport function makeSpecInstance(base) {\n  const card = {\n    id: base.id,\n    key: base.key,\n    name: base.name,\n    kind: 'spec',\n    baseId: base.id,\n    type: base.type,\n    impl: base.impl,\n    bp: base.bp,\n    ...(base.effectKey && {\n      effectKey: base.effectKey\n    }),\n    ...(base.tag && {\n      tag: base.tag\n    }),\n    // ðŸ”¥ TAG ÃœBERTRAGUNG FÃœR NGO/PLATTFORM DETECTION!\n    uid: NEXT_UID++,\n    deactivated: false\n  };\n\n  // Debug logging for Bestechungsskandal\n  if (base.name === 'Bestechungsskandal 2.0') {\n    console.log('ðŸ”¥ CREATING BESTECHUNGSSKANDAL CARD:', card);\n    console.log('ðŸ”¥ Base effectKey:', base.effectKey);\n    console.log('ðŸ”¥ Card effectKey:', card.effectKey);\n  }\n  return card;\n}\n\n// Card placement logic\nexport function isOfficeTag(tag) {\n  return tag === 'Staatsoberhaupt' || tag === 'Regierungschef' || tag === 'Diplomat';\n}\nexport function getAllowedLaneForCard(card) {\n  if (card.kind === 'pol') {\n    return isOfficeTag(card.tag) ? 'aussen' : 'innen';\n  } else if (card.kind === 'spec') {\n    const specCard = card;\n    if (specCard.type === 'Ã–ffentlichkeitskarte') {\n      return 'innen'; // Public cards go to public row\n    }\n    // Other special cards (initiatives, interventions) don't have lane restrictions\n    return null;\n  }\n  return null;\n}\nexport function isLaneAllowedForCard(card, lane) {\n  if (!card || card.kind !== 'pol') return true;\n  return getAllowedLaneForCard(card) === lane;\n}\nexport function laneDisplayName(lane) {\n  return lane === 'aussen' ? 'Regierungsreihe' : 'Ã–ffentlichkeitsreihe';\n}\n\n// Card state manipulation\nexport function adjustInfluence(card, amount, source) {\n  const oldInfluence = card.influence;\n  card.influence = Math.max(0, card.influence + amount);\n  console.log(`[${source}] ${card.name}: ${oldInfluence} â†’ ${card.influence} Einfluss`);\n}\nexport function findCardLocation(card, state) {\n  for (const player of [1, 2]) {\n    for (const lane of ['innen', 'aussen']) {\n      if (state.board[player][lane].some(c => c.uid === card.uid)) {\n        return {\n          player,\n          lane\n        };\n      }\n    }\n  }\n  return null;\n}\n\n// Action point calculation\nexport function getCardActionPointCost(card, state, player) {\n  var _state$effectFlags;\n  if (card.kind !== 'pol' && card.kind !== 'spec') return 1;\n  let baseCost = 1;\n  const flags = (_state$effectFlags = state.effectFlags) === null || _state$effectFlags === void 0 ? void 0 : _state$effectFlags[player];\n  if (card.kind === 'pol') {\n    const polCard = card;\n    const lane = getAllowedLaneForCard(card);\n\n    // âš ï¸ Keine harte Freistellung mehr fÃ¼r Regierungskarten â€“ Refund-Modell wird in getNetApCost angewandt\n  } else if (card.kind === 'spec') {\n    const specCard = card;\n\n    // Free initiative from leadership\n    if (flags !== null && flags !== void 0 && flags.freeInitiativeAvailable) {\n      return 0;\n    }\n\n    // NGO discount\n    if (flags !== null && flags !== void 0 && flags.ngoInitiativeDiscount && flags.ngoInitiativeDiscount > 0) {\n      baseCost = Math.max(0, baseCost - flags.ngoInitiativeDiscount);\n    }\n  }\n  return baseCost;\n}\n\n// Card sorting and filtering\nexport function sortHandCards(cards) {\n  return [...cards].sort((a, b) => {\n    // Politicians first, then specials\n    if (a.kind !== b.kind) {\n      return a.kind === 'pol' ? -1 : 1;\n    }\n\n    // Within same kind, sort by name\n    return a.name.localeCompare(b.name);\n  });\n}\n\n// Card validation\nexport function isValidCardPlacement(card, player, lane, state) {\n  // Check lane capacity\n  if (state.board[player][lane].length >= 5) return false;\n\n  // Check lane restrictions\n  if (!isLaneAllowedForCard(card, lane)) return false;\n\n  // Check for duplicate placement\n  const alreadyOnBoard = [...state.board[player].innen, ...state.board[player].aussen].some(c => c.uid === card.uid);\n  if (alreadyOnBoard) return false;\n  return true;\n}\n\n// Card type checking utilities\nexport function isPoliticianCard(card) {\n  return card.kind === 'pol';\n}\nexport function isSpecialCard(card) {\n  return card.kind === 'spec';\n}\nexport function isPublicCard(card) {\n  return card.kind === 'spec' && card.type === 'Ã–ffentlichkeitskarte';\n}\nexport function isGovernmentCard(card) {\n  return card.kind === 'pol';\n}\nexport function isInitiativeCard(card) {\n  if (card.kind !== 'spec') return false;\n  const spec = card;\n  return spec.type === 'Sofort-Initiative' || spec.type === 'Dauerhaft-Initiative';\n}\nexport function isInterventionCard(card) {\n  return card.kind === 'spec' && card.type === 'Intervention';\n}\n\n// Card power calculation\nexport function getCardPower(card) {\n  if (card.kind === 'pol') {\n    return card.influence; // ðŸ”¥ VEREINFACHT: M â†’ influence\n  } else if (card.kind === 'spec') {\n    return card.bp;\n  }\n  return 0;\n}\nexport function getCardInfluence(card) {\n  if (card.kind === 'pol') {\n    return card.influence;\n  }\n  return 0;\n}\n\n// Card effect utilities\nexport function canCardActivateAbility(card) {\n  return !card.deactivated && !card._activeUsed && !card.protected;\n}\nexport function hasCardTag(card, tag) {\n  return card.kind === 'pol' && card.tag === tag;\n}\nexport function isCardProtected(card, currentRound) {\n  var _card$protectedUntil;\n  if (!card.protected) return false;\n  if (card.protectedUntil === null) return true;\n  return ((_card$protectedUntil = card.protectedUntil) !== null && _card$protectedUntil !== void 0 ? _card$protectedUntil : 0) >= currentRound;\n}\n\n// Deck composition analysis\nexport function analyzeDeckComposition(cards) {\n  const politicians = cards.filter(c => c.kind === 'pol').length;\n  const publicCards = cards.filter(c => isPublicCard(c)).length;\n  const initiatives = cards.filter(c => isInitiativeCard(c)).length;\n  const interventions = cards.filter(c => isInterventionCard(c)).length;\n  const totalPower = cards.reduce((sum, card) => sum + getCardPower(card), 0);\n  return {\n    politicians,\n    publicCards,\n    initiatives,\n    interventions,\n    totalPower\n  };\n}","map":{"version":3,"names":["NEXT_UID","makePolInstance","base","_base$BP","id","key","name","kind","baseId","tag","T","BP","influence","effect","protected","protectedUntil","deactivated","tempDebuffs","tempBuffs","uid","_activeUsed","makeSpecInstance","card","type","impl","bp","effectKey","console","log","isOfficeTag","getAllowedLaneForCard","specCard","isLaneAllowedForCard","lane","laneDisplayName","adjustInfluence","amount","source","oldInfluence","Math","max","findCardLocation","state","player","board","some","c","getCardActionPointCost","_state$effectFlags","baseCost","flags","effectFlags","polCard","freeInitiativeAvailable","ngoInitiativeDiscount","sortHandCards","cards","sort","a","b","localeCompare","isValidCardPlacement","length","alreadyOnBoard","innen","aussen","isPoliticianCard","isSpecialCard","isPublicCard","isGovernmentCard","isInitiativeCard","spec","isInterventionCard","getCardPower","getCardInfluence","canCardActivateAbility","hasCardTag","isCardProtected","currentRound","_card$protectedUntil","analyzeDeckComposition","politicians","filter","publicCards","initiatives","interventions","totalPower","reduce","sum"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/utils/cardUtils.ts"],"sourcesContent":["import { Card, PoliticianCard, SpecialCard, BasePolitician, BaseSpecial, GameState, Lane, Player } from '../types/game';\r\n\r\n// Card instance creation\r\nlet NEXT_UID = 1;\r\n\r\nexport function makePolInstance(base: BasePolitician): PoliticianCard {\r\n  return {\r\n    id: base.id,\r\n    key: base.key,\r\n    name: base.name,\r\n    kind: 'pol',\r\n    baseId: base.id,\r\n    tag: base.tag,\r\n    T: base.T,\r\n    BP: base.BP ?? 0,\r\n    influence: base.influence, // ðŸ”¥ VEREINFACHT: Direkt von base.influence, kein M mehr!\r\n    ...(base.effect && { effect: base.effect }), // ðŸ”¥ EFFEKT ÃœBERTRAGUNG FÃœR JOSCHKA FISCHER NGO-BOOST!\r\n    protected: false,\r\n    protectedUntil: null,\r\n    deactivated: false,\r\n    tempDebuffs: 0,\r\n    tempBuffs: 0,\r\n    uid: NEXT_UID++,\r\n    _activeUsed: false,\r\n  } as PoliticianCard;\r\n}\r\n\r\nexport function makeSpecInstance(base: BaseSpecial): SpecialCard {\r\n  const card = {\r\n    id: base.id,\r\n    key: base.key,\r\n    name: base.name,\r\n    kind: 'spec',\r\n    baseId: base.id,\r\n    type: base.type,\r\n    impl: base.impl,\r\n    bp: base.bp,\r\n    ...(base.effectKey && { effectKey: base.effectKey }),\r\n    ...(base.tag && { tag: base.tag }), // ðŸ”¥ TAG ÃœBERTRAGUNG FÃœR NGO/PLATTFORM DETECTION!\r\n    uid: NEXT_UID++,\r\n    deactivated: false,\r\n  } as SpecialCard;\r\n  \r\n  // Debug logging for Bestechungsskandal\r\n  if (base.name === 'Bestechungsskandal 2.0') {\r\n    console.log('ðŸ”¥ CREATING BESTECHUNGSSKANDAL CARD:', card);\r\n    console.log('ðŸ”¥ Base effectKey:', base.effectKey);\r\n    console.log('ðŸ”¥ Card effectKey:', (card as any).effectKey);\r\n  }\r\n  \r\n  return card;\r\n}\r\n\r\n// Card placement logic\r\nexport function isOfficeTag(tag: string): boolean {\r\n  return tag === 'Staatsoberhaupt' || tag === 'Regierungschef' || tag === 'Diplomat';\r\n}\r\n\r\nexport function getAllowedLaneForCard(card: Card): Lane | null {\r\n  if (card.kind === 'pol') {\r\n    return isOfficeTag((card as PoliticianCard).tag) ? 'aussen' : 'innen';\r\n  } else if (card.kind === 'spec') {\r\n    const specCard = card as SpecialCard;\r\n    if (specCard.type === 'Ã–ffentlichkeitskarte') {\r\n      return 'innen'; // Public cards go to public row\r\n    }\r\n    // Other special cards (initiatives, interventions) don't have lane restrictions\r\n    return null;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function isLaneAllowedForCard(card: Card, lane: Lane): boolean {\r\n  if (!card || card.kind !== 'pol') return true;\r\n  return getAllowedLaneForCard(card) === lane;\r\n}\r\n\r\nexport function laneDisplayName(lane: Lane): string {\r\n  return lane === 'aussen' ? 'Regierungsreihe' : 'Ã–ffentlichkeitsreihe';\r\n}\r\n\r\n// Card state manipulation\r\nexport function adjustInfluence(card: PoliticianCard, amount: number, source: string): void {\r\n  const oldInfluence = card.influence;\r\n  card.influence = Math.max(0, card.influence + amount);\r\n\r\n  console.log(`[${source}] ${card.name}: ${oldInfluence} â†’ ${card.influence} Einfluss`);\r\n}\r\n\r\nexport function findCardLocation(card: Card, state: GameState): { player: Player; lane: Lane } | null {\r\n  for (const player of [1, 2] as Player[]) {\r\n    for (const lane of ['innen', 'aussen'] as Lane[]) {\r\n      if (state.board[player][lane].some(c => c.uid === card.uid)) {\r\n        return { player, lane };\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n// Action point calculation\r\nexport function getCardActionPointCost(card: Card, state: GameState, player: Player): number {\r\n  if (card.kind !== 'pol' && card.kind !== 'spec') return 1;\r\n\r\n  let baseCost = 1;\r\n  const flags = state.effectFlags?.[player];\r\n\r\n  if (card.kind === 'pol') {\r\n    const polCard = card as PoliticianCard;\r\n    const lane = getAllowedLaneForCard(card);\r\n\r\n    // âš ï¸ Keine harte Freistellung mehr fÃ¼r Regierungskarten â€“ Refund-Modell wird in getNetApCost angewandt\r\n  } else if (card.kind === 'spec') {\r\n    const specCard = card as SpecialCard;\r\n\r\n    // Free initiative from leadership\r\n    if (flags?.freeInitiativeAvailable) {\r\n      return 0;\r\n    }\r\n\r\n    // NGO discount\r\n    if (flags?.ngoInitiativeDiscount && flags.ngoInitiativeDiscount > 0) {\r\n      baseCost = Math.max(0, baseCost - flags.ngoInitiativeDiscount);\r\n    }\r\n  }\r\n\r\n  return baseCost;\r\n}\r\n\r\n// Card sorting and filtering\r\nexport function sortHandCards(cards: Card[]): Card[] {\r\n  return [...cards].sort((a, b) => {\r\n    // Politicians first, then specials\r\n    if (a.kind !== b.kind) {\r\n      return a.kind === 'pol' ? -1 : 1;\r\n    }\r\n\r\n    // Within same kind, sort by name\r\n    return a.name.localeCompare(b.name);\r\n  });\r\n}\r\n\r\n// Card validation\r\nexport function isValidCardPlacement(\r\n  card: Card,\r\n  player: Player,\r\n  lane: Lane,\r\n  state: GameState\r\n): boolean {\r\n  // Check lane capacity\r\n  if (state.board[player][lane].length >= 5) return false;\r\n\r\n  // Check lane restrictions\r\n  if (!isLaneAllowedForCard(card, lane)) return false;\r\n\r\n  // Check for duplicate placement\r\n  const alreadyOnBoard = [...state.board[player].innen, ...state.board[player].aussen]\r\n    .some(c => c.uid === card.uid);\r\n  if (alreadyOnBoard) return false;\r\n\r\n  return true;\r\n}\r\n\r\n// Card type checking utilities\r\nexport function isPoliticianCard(card: Card): card is PoliticianCard {\r\n  return card.kind === 'pol';\r\n}\r\n\r\nexport function isSpecialCard(card: Card): card is SpecialCard {\r\n  return card.kind === 'spec';\r\n}\r\n\r\nexport function isPublicCard(card: Card): boolean {\r\n  return card.kind === 'spec' && (card as SpecialCard).type === 'Ã–ffentlichkeitskarte';\r\n}\r\n\r\nexport function isGovernmentCard(card: Card): boolean {\r\n  return card.kind === 'pol';\r\n}\r\n\r\nexport function isInitiativeCard(card: Card): boolean {\r\n  if (card.kind !== 'spec') return false;\r\n  const spec = card as SpecialCard;\r\n  return spec.type === 'Sofort-Initiative' || spec.type === 'Dauerhaft-Initiative';\r\n}\r\n\r\nexport function isInterventionCard(card: Card): boolean {\r\n  return card.kind === 'spec' && (card as SpecialCard).type === 'Intervention';\r\n}\r\n\r\n// Card power calculation\r\nexport function getCardPower(card: Card): number {\r\n  if (card.kind === 'pol') {\r\n    return (card as PoliticianCard).influence; // ðŸ”¥ VEREINFACHT: M â†’ influence\r\n  } else if (card.kind === 'spec') {\r\n    return (card as SpecialCard).bp;\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport function getCardInfluence(card: Card): number {\r\n  if (card.kind === 'pol') {\r\n    return (card as PoliticianCard).influence;\r\n  }\r\n  return 0;\r\n}\r\n\r\n// Card effect utilities\r\nexport function canCardActivateAbility(card: PoliticianCard): boolean {\r\n  return !card.deactivated && !card._activeUsed && !card.protected;\r\n}\r\n\r\nexport function hasCardTag(card: Card, tag: string): boolean {\r\n  return card.kind === 'pol' && (card as PoliticianCard).tag === tag;\r\n}\r\n\r\nexport function isCardProtected(card: PoliticianCard, currentRound: number): boolean {\r\n  if (!card.protected) return false;\r\n  if (card.protectedUntil === null) return true;\r\n  return (card.protectedUntil ?? 0) >= currentRound;\r\n}\r\n\r\n// Deck composition analysis\r\nexport function analyzeDeckComposition(cards: Card[]): {\r\n  politicians: number;\r\n  publicCards: number;\r\n  initiatives: number;\r\n  interventions: number;\r\n  totalPower: number;\r\n} {\r\n  const politicians = cards.filter(c => c.kind === 'pol').length;\r\n  const publicCards = cards.filter(c => isPublicCard(c)).length;\r\n  const initiatives = cards.filter(c => isInitiativeCard(c)).length;\r\n  const interventions = cards.filter(c => isInterventionCard(c)).length;\r\n  const totalPower = cards.reduce((sum, card) => sum + getCardPower(card), 0);\r\n\r\n  return {\r\n    politicians,\r\n    publicCards,\r\n    initiatives,\r\n    interventions,\r\n    totalPower\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}