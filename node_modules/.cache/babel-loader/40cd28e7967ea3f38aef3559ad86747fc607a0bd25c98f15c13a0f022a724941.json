{"ast":null,"code":"import _objectSpread from\"C:/Users/skank/Videos/Cards/Milchcards/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/Users/skank/Videos/Cards/Milchcards/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"effectQueue\",\"activeAbilities\",\"pendingAbilitySelect\"];function sanitizeGameState(state){var _pendingAbilitySelect;// Create a shallow sanitized copy without function fields that could break JSON.stringify\nconst _ref=state,{effectQueue,// drop queue with functions\nactiveAbilities,pendingAbilitySelect}=_ref,rest=_objectWithoutProperties(_ref,_excluded);return _objectSpread(_objectSpread({},rest),{},{// keep minimal flags for debugging\nactiveAbilities:undefined,pendingAbilitySelect:pendingAbilitySelect?_objectSpread(_objectSpread({},pendingAbilitySelect),{},{actorCard:(_pendingAbilitySelect=pendingAbilitySelect.actorCard)===null||_pendingAbilitySelect===void 0?void 0:_pendingAbilitySelect.uid}):undefined});}export function buildDebugSnapshot(gameState){const dbg=window.__politicardDebug||{};const now=new Date();const payload={meta:{ts:now.toISOString(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight,dpr:window.devicePixelRatio||1}},ui:{zones:dbg.zones||null,clickZones:dbg.clickZones||[],uiTransform:dbg.uiTransform||null,canvasSize:dbg.canvasSize||null},state:sanitizeGameState(gameState)};return payload;}export async function copyDebugSnapshotToClipboard(gameState){var _navigator$clipboard;const json=JSON.stringify(buildDebugSnapshot(gameState),null,2);await((_navigator$clipboard=navigator.clipboard)===null||_navigator$clipboard===void 0?void 0:_navigator$clipboard.writeText(json));}export function downloadDebugSnapshot(gameState){const json=JSON.stringify(buildDebugSnapshot(gameState),null,2);const blob=new Blob([json],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"politicard_debug_\".concat(Date.now(),\".json\");document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);}","map":{"version":3,"names":["sanitizeGameState","state","_pendingAbilitySelect","_ref","effectQueue","activeAbilities","pendingAbilitySelect","rest","_objectWithoutProperties","_excluded","_objectSpread","undefined","actorCard","uid","buildDebugSnapshot","gameState","dbg","window","__politicardDebug","now","Date","payload","meta","ts","toISOString","userAgent","navigator","viewport","width","innerWidth","height","innerHeight","dpr","devicePixelRatio","ui","zones","clickZones","uiTransform","canvasSize","copyDebugSnapshotToClipboard","_navigator$clipboard","json","JSON","stringify","clipboard","writeText","downloadDebugSnapshot","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","concat","body","appendChild","click","remove","revokeObjectURL"],"sources":["C:/Users/skank/Videos/Cards/Milchcards/src/utils/debugExport.ts"],"sourcesContent":["import { GameState } from '../types/game';\r\n\r\ntype DebugUIInfo = {\r\n  zones?: any;\r\n  clickZones?: Array<{ x: number; y: number; w: number; h: number; data: any }>;\r\n  uiTransform?: { scale: number; offX: number; offY: number };\r\n  canvasSize?: { width: number; height: number };\r\n};\r\n\r\nfunction sanitizeGameState(state: GameState) {\r\n  // Create a shallow sanitized copy without function fields that could break JSON.stringify\r\n  const {\r\n    effectQueue, // drop queue with functions\r\n    activeAbilities,\r\n    pendingAbilitySelect,\r\n    ...rest\r\n  } = state as any;\r\n  return {\r\n    ...rest,\r\n    // keep minimal flags for debugging\r\n    activeAbilities: undefined,\r\n    pendingAbilitySelect: pendingAbilitySelect ? { ...pendingAbilitySelect, actorCard: pendingAbilitySelect.actorCard?.uid } : undefined\r\n  };\r\n}\r\n\r\nexport function buildDebugSnapshot(gameState: GameState) {\r\n  const dbg: DebugUIInfo = (window as any).__politicardDebug || {};\r\n  const now = new Date();\r\n  const payload = {\r\n    meta: {\r\n      ts: now.toISOString(),\r\n      userAgent: navigator.userAgent,\r\n      viewport: { width: window.innerWidth, height: window.innerHeight, dpr: window.devicePixelRatio || 1 }\r\n    },\r\n    ui: {\r\n      zones: dbg.zones || null,\r\n      clickZones: dbg.clickZones || [],\r\n      uiTransform: dbg.uiTransform || null,\r\n      canvasSize: dbg.canvasSize || null\r\n    },\r\n    state: sanitizeGameState(gameState)\r\n  };\r\n  return payload;\r\n}\r\n\r\nexport async function copyDebugSnapshotToClipboard(gameState: GameState) {\r\n  const json = JSON.stringify(buildDebugSnapshot(gameState), null, 2);\r\n  await navigator.clipboard?.writeText(json);\r\n}\r\n\r\nexport function downloadDebugSnapshot(gameState: GameState) {\r\n  const json = JSON.stringify(buildDebugSnapshot(gameState), null, 2);\r\n  const blob = new Blob([json], { type: 'application/json' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `politicard_debug_${Date.now()}.json`;\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  a.remove();\r\n  URL.revokeObjectURL(url);\r\n}\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}